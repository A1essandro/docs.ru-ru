---
title: "Упаковка дистрибутивов .NET Core"
description: "Узнайте, как создавать пакеты .NET Core, присваивать им имена и управлять их версиями для распространения."
keywords: ".NET, .NET Core, исходный код, сборка"
author: bleroy
ms.author: mairaw
ms.date: 06/28/2017
ms.topic: article
ms.prod: .net-core
ms.devlang: dotnet
ms.assetid: 71b9d722-c5a8-4271-9ce1-d87e7ae2494d
ms.openlocfilehash: 7ff5ed127ad0d4f435c697a8f35b33c7ba3b56ff
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/18/2017
---
# <a name="net-core-distribution-packaging"></a><span data-ttu-id="b8dca-104">Упаковка дистрибутивов .NET Core</span><span class="sxs-lookup"><span data-stu-id="b8dca-104">.NET Core distribution packaging</span></span>

<span data-ttu-id="b8dca-105">Так как .NET Core становится доступным на все большем количестве платформ, полезно знать, как создавать пакеты, присваивать им имена и управлять их версиями.</span><span class="sxs-lookup"><span data-stu-id="b8dca-105">As .NET Core becomes available on more and more platforms, it's useful to learn how to package, name, and version it.</span></span> <span data-ttu-id="b8dca-106">Таким образом издатели пакетов смогут обеспечить согласованную работу независимо от платформы, выбранной пользователями для запуска .NET.</span><span class="sxs-lookup"><span data-stu-id="b8dca-106">This way, package maintainers can help ensure a consistent experience no matter where users choose to run .NET.</span></span>

## <a name="net-core-components"></a><span data-ttu-id="b8dca-107">Компоненты .NET Core</span><span class="sxs-lookup"><span data-stu-id="b8dca-107">.NET Core components</span></span>

<span data-ttu-id="b8dca-108">.NET Core состоит из трех основных частей, для которых необходимо создать пакеты:</span><span class="sxs-lookup"><span data-stu-id="b8dca-108">.NET Core is made of three major parts that need to be packaged:</span></span>

1. <span data-ttu-id="b8dca-109">**Основное приложение** (также называется "мультиплексор") выполняет две функции: активирует среду выполнения для запуска приложения и активирует пакет SDK для отправки в него команд.</span><span class="sxs-lookup"><span data-stu-id="b8dca-109">**The host** (also known as the "muxer") has two distinct roles: activate a runtime to launch an application, and activate an SDK to dispatch commands to it.</span></span> <span data-ttu-id="b8dca-110">Основное приложение представляет собой исполняемый файл в машинном коде (`dotnet.exe`) со вспомогательными библиотеками политик (установлены в `host/fxr`).</span><span class="sxs-lookup"><span data-stu-id="b8dca-110">The host is a native executable (`dotnet.exe`) and its supporting policy libraries (installed in `host/fxr`).</span></span> <span data-ttu-id="b8dca-111">Он формируется на основе кода в репозитории [`dotnet/core-setup`](https://github.com/dotnet/core-setup/).</span><span class="sxs-lookup"><span data-stu-id="b8dca-111">It's built from the code in the [`dotnet/core-setup`](https://github.com/dotnet/core-setup/) repository.</span></span> <span data-ttu-id="b8dca-112">Как правило, на каждый компьютер выделяется одно основное приложение, хотя это не является обязательным требованием.</span><span class="sxs-lookup"><span data-stu-id="b8dca-112">There is typically only one host on a given machine, although that isn't a strict requirement.</span></span>
2. <span data-ttu-id="b8dca-113">**Платформа** состоит из среды выполнения и вспомогательных управляемых библиотек.</span><span class="sxs-lookup"><span data-stu-id="b8dca-113">**The framework** is made of a runtime and supporting managed libraries.</span></span> <span data-ttu-id="b8dca-114">Платформу можно установить как часть приложения или в качестве общей платформы в централизованном расположении, чтобы ее могли повторно использовать несколько приложений.</span><span class="sxs-lookup"><span data-stu-id="b8dca-114">The framework may be installed as part of an application, or as a shared framework in a central location that can be reused by multiple applications.</span></span> <span data-ttu-id="b8dca-115">На одном компьютере можно установить неограниченное количество общих платформ.</span><span class="sxs-lookup"><span data-stu-id="b8dca-115">There may be any number of shared frameworks installed on a given machine.</span></span> <span data-ttu-id="b8dca-116">Общие платформы расположены в папке `shared/Microsoft.NETCore.App/<version>`.</span><span class="sxs-lookup"><span data-stu-id="b8dca-116">Shared frameworks live under `shared/Microsoft.NETCore.App/<version>`.</span></span> <span data-ttu-id="b8dca-117">Основное приложение выполняет накат всех версий исправлений.</span><span class="sxs-lookup"><span data-stu-id="b8dca-117">The host rolls forward across patch versions.</span></span> <span data-ttu-id="b8dca-118">Если приложение предназначено для версии `Microsoft.NETCore.App` 1.0.0, но есть только версия 1.0.4, приложение запускается для версии 1.0.4.</span><span class="sxs-lookup"><span data-stu-id="b8dca-118">If an application targets `Microsoft.NETCore.App` 1.0.0, and only 1.0.4 is present, the app is launched against 1.0.4.</span></span>
3. <span data-ttu-id="b8dca-119">**Пакет SDK** (также называется инструментарием) — это набор управляемых средств, которые можно использовать для написания кода и сборки библиотек и приложений .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b8dca-119">**The SDK** (also known as "the tooling") is a set of managed tools that can be used to write and build .NET Core libraries and applications.</span></span> <span data-ttu-id="b8dca-120">Пакет SDK состоит из интерфейса командной строки, MSBuild, связанных задач сборки и целевых объектов, NuGet, новых шаблонов проектов и т. д. На компьютере может быть несколько пакетов SDK (например, для сборки проектов, где явно требуется предыдущая версия). Но рекомендуется использовать средства последних выпусков.</span><span class="sxs-lookup"><span data-stu-id="b8dca-120">The SDK includes the CLI, MSBuild, and associated build tasks and targets, NuGet, new project templates, etc. It's possible to have multiple SDKs on a machine (for example, to build projects that explicitly require an older version), but the recommendation is to use the latest released tools.</span></span>

## <a name="recommended-package-names"></a><span data-ttu-id="b8dca-121">Рекомендуемые имена пакетов</span><span class="sxs-lookup"><span data-stu-id="b8dca-121">Recommended package names</span></span>

<span data-ttu-id="b8dca-122">Инструкции по присвоению имен пакетам приведены в качестве рекомендаций .</span><span class="sxs-lookup"><span data-stu-id="b8dca-122">The following guidance is our recommendation for package names.</span></span> <span data-ttu-id="b8dca-123">В некоторых ситуациях (например, при применении другого метода определенного целевого распределения) издатели пакетов могут отклоняться от этих инструкций.</span><span class="sxs-lookup"><span data-stu-id="b8dca-123">A package maintainer may choose to diverge from it based on various reasons, such as, a different tradition of the specific distribution they're targeting.</span></span>

### <a name="minimum-package-set"></a><span data-ttu-id="b8dca-124">Минимальный набор пакетов</span><span class="sxs-lookup"><span data-stu-id="b8dca-124">Minimum package set</span></span>

* <span data-ttu-id="b8dca-125">`dotnet-runtime-[major].[minor]` — общая платформа с указанной версией (в диспетчере пакетов должна быть доступна только версия с последними исправлениями для этого сочетания основного и дополнительного номеров версий).</span><span class="sxs-lookup"><span data-stu-id="b8dca-125">`dotnet-runtime-[major].[minor]`: a shared framework with the specified version (only the latest patch version for a given major+minor combination should be available in the package manager).</span></span> <span data-ttu-id="b8dca-126">**Зависимости** — `dotnet-host`.</span><span class="sxs-lookup"><span data-stu-id="b8dca-126">**dependencies**: `dotnet-host`</span></span>
* <span data-ttu-id="b8dca-127">`dotnet-sdk` — пакет SDK последней версии.</span><span class="sxs-lookup"><span data-stu-id="b8dca-127">`dotnet-sdk`: the latest SDK.</span></span> <span data-ttu-id="b8dca-128">**Зависимости** — последняя версия пакета `dotnet-sdk-[major].[minor]`.</span><span class="sxs-lookup"><span data-stu-id="b8dca-128">**dependencies**: the latest `dotnet-sdk-[major].[minor]`.</span></span>
* <span data-ttu-id="b8dca-129">`dotnet-sdk-[major].[minor]` — пакет SDK с указанной версией.</span><span class="sxs-lookup"><span data-stu-id="b8dca-129">`dotnet-sdk-[major].[minor]`: the SDK with the specified version.</span></span> <span data-ttu-id="b8dca-130">Указывается последняя включенная версия добавленных общих платформ, что позволит пользователям легко связать пакет SDK с общей платформой.</span><span class="sxs-lookup"><span data-stu-id="b8dca-130">The version specified is the highest included version of included shared frameworks, so that users can easily relate an SDK to a shared framework.</span></span> <span data-ttu-id="b8dca-131">**Зависимости** — `dotnet-host`, одна или несколько сред выполнения `dotnet-runtime-[major].[minor]` (одна среда используется в коде пакета SDK, а остальные среды в этом пакете предназначены для сборки и запуска приложений пользователями).</span><span class="sxs-lookup"><span data-stu-id="b8dca-131">**dependencies**: `dotnet-host`, one or more `dotnet-runtime-[major].[minor]` (one of the runtimes is used by the SDK code itself, the others are here for users to build and run against).</span></span>
* <span data-ttu-id="b8dca-132">`dotnet-host` — основное приложение последней версии.</span><span class="sxs-lookup"><span data-stu-id="b8dca-132">`dotnet-host`: the latest host.</span></span>

#### <a name="preview-versions"></a><span data-ttu-id="b8dca-133">Предварительные версии</span><span class="sxs-lookup"><span data-stu-id="b8dca-133">Preview versions</span></span>

<span data-ttu-id="b8dca-134">Издатели пакетов могут посчитать нужным включить предварительные версии общей платформы и пакета SDK.</span><span class="sxs-lookup"><span data-stu-id="b8dca-134">Package maintainers may decide to include preview versions of the shared framework and SDK.</span></span> <span data-ttu-id="b8dca-135">Их не следует включать в пакет `dotnet-sdk` без версий, но можно выпустить в виде пакетов с версиями. В именах таких пакетов к фрагменту основного и дополнительного номеров версий добавляется дополнительный маркер предварительной версии.</span><span class="sxs-lookup"><span data-stu-id="b8dca-135">Those should never be included in the unversioned `dotnet-sdk` package, but may be released as versioned packages with an additional preview marker appended to the major and minor version sections of the name.</span></span> <span data-ttu-id="b8dca-136">Например, это может быть пакет `dotnet-sdk-2.0-preview-final`.</span><span class="sxs-lookup"><span data-stu-id="b8dca-136">For example, there may be a `dotnet-sdk-2.0-preview-final` package.</span></span>

### <a name="optional-additional-packages"></a><span data-ttu-id="b8dca-137">Необязательные дополнительные пакеты</span><span class="sxs-lookup"><span data-stu-id="b8dca-137">Optional additional packages</span></span>

<span data-ttu-id="b8dca-138">Некоторые издатели могут предоставлять дополнительные пакеты, например:</span><span class="sxs-lookup"><span data-stu-id="b8dca-138">Some maintainers may choose to provide additional packages such as:</span></span>

* <span data-ttu-id="b8dca-139">`dotnet-lts` — последняя версия общей платформы с долгосрочной поддержкой (LTS).</span><span class="sxs-lookup"><span data-stu-id="b8dca-139">`dotnet-lts`: the latest Long-Term Support (LTS) version of the shared framework.</span></span> <span data-ttu-id="b8dca-140">[Поэтапный выход LTS и Current](~/docs/core/versions/lts-current.md) представляют собой разную периодичность выпусков .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b8dca-140">[LTS and Current release trains](~/docs/core/versions/lts-current.md) correspond to different cadences at which .NET Core gets released.</span></span> <span data-ttu-id="b8dca-141">Пользователи могут выбрать вариант в зависимости от необходимой частоты обновлений.</span><span class="sxs-lookup"><span data-stu-id="b8dca-141">Users have a choice of adopting one or the other train, based on how often they are willing to update.</span></span> <span data-ttu-id="b8dca-142">Этот принцип тесно связан с уровнями поддержки, поэтому его целесообразность зависит от предполагаемого дистрибутива.</span><span class="sxs-lookup"><span data-stu-id="b8dca-142">This is a concept that is also tied to support levels, so it may or may not make sense depending on the distro being considered.</span></span>

## <a name="disk-layout"></a><span data-ttu-id="b8dca-143">Структура диска</span><span class="sxs-lookup"><span data-stu-id="b8dca-143">Disk layout</span></span>

<span data-ttu-id="b8dca-144">При установке пакетов .NET Core важную роль играет относительное размещение целевых мест назначения на диске.</span><span class="sxs-lookup"><span data-stu-id="b8dca-144">When installing .NET Core packages, the relative placement of their target destinations on disk matter.</span></span>
<span data-ttu-id="b8dca-145">Папка основного приложения `dotnet.exe` должна размещаться рядом с папками `sdk` и `shared`, в которых находится содержимое пакетов SDK `dotnet-sdk` и пакетов общей платформы `dotnet-runtime` с версиями.</span><span class="sxs-lookup"><span data-stu-id="b8dca-145">The `dotnet.exe` host should be placed next to `sdk` and `shared` folders that contain the versioned contents of the `dotnet-sdk` SDK packages, and `dotnet-runtime` shared framework packages.</span></span>

<span data-ttu-id="b8dca-146">Структура диска представляет собой набор файлов и каталогов для пакетов с версиями.</span><span class="sxs-lookup"><span data-stu-id="b8dca-146">The disk layout of files and directories inside the packages is versioned.</span></span> <span data-ttu-id="b8dca-147">Таким образом, при обновлении до последней версии `dotnet-runtime` новая версия устанавливается параллельно с предыдущими. Это снижает вероятность нарушения работы существующих приложений при обновлении пакета.</span><span class="sxs-lookup"><span data-stu-id="b8dca-147">This means that updating to the latest `dotnet-runtime` installs the new version side by side with previous versions, reducing the possibility of breaking existing applications by updating the package.</span></span> <span data-ttu-id="b8dca-148">При обновлении пакетов предыдущие версии не должны удаляться.</span><span class="sxs-lookup"><span data-stu-id="b8dca-148">Package updates should not remove previous versions.</span></span>

## <a name="update-policies"></a><span data-ttu-id="b8dca-149">Политики обновления</span><span class="sxs-lookup"><span data-stu-id="b8dca-149">Update policies</span></span>

<span data-ttu-id="b8dca-150">При выполнении команды `update` поведение каждого пакета будет следующим:</span><span class="sxs-lookup"><span data-stu-id="b8dca-150">When an `update` is performed, the behavior of each package is as follows:</span></span>

* <span data-ttu-id="b8dca-151">`dotnet-runtime-[major].[minor]` — обновляется до новых версий исправлений, но для основного и дополнительного номеров версий создаются отдельные пакеты.</span><span class="sxs-lookup"><span data-stu-id="b8dca-151">`dotnet-runtime-[major].[minor]`: new patch versions update the package, but new minor or major versions are separate packages.</span></span>
* <span data-ttu-id="b8dca-152">`dotnet-sdk` — команда `update` выполняет накат основного и дополнительного номеров версий, а также версий исправлений.</span><span class="sxs-lookup"><span data-stu-id="b8dca-152">`dotnet-sdk`: `update` rolls forward major, minor, and patch versions.</span></span>
* <span data-ttu-id="b8dca-153">`dotnet-sdk-[major].[minor]` — обновляется до новых версий исправлений, но для основного и дополнительного номеров версий создаются отдельные пакеты.</span><span class="sxs-lookup"><span data-stu-id="b8dca-153">`dotnet-sdk-[major].[minor]`: new patch versions update the package, but new minor or major versions are separate packages.</span></span>
* <span data-ttu-id="b8dca-154">`dotnet-lts` — команда `update` выполняет накат основного и дополнительного номеров версий, а также версий исправлений.</span><span class="sxs-lookup"><span data-stu-id="b8dca-154">`dotnet-lts`: `update` rolls forward major, minor, and patch versions.</span></span>

<span data-ttu-id="b8dca-155">В этом разделе вы ознакомились с нашими рекомендациями по созданию пакетов .NET Core. Но вы можете самостоятельно решить, какие предлагать версии дистрибутивов и когда именно.</span><span class="sxs-lookup"><span data-stu-id="b8dca-155">This topic has presented our recommendations for packaging .NET Core, however each distro is free to choose what versions to offer and when.</span></span> <span data-ttu-id="b8dca-156">Например, если для создателя дистрибутива стабильность важнее чем актуальность, он может выпускать только версии, привязанные к поэтапному выходу LTS.</span><span class="sxs-lookup"><span data-stu-id="b8dca-156">For example, a distro that values stability more than being up-to-date may choose to release only versions that snap with the LTS release train.</span></span>