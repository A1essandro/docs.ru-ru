---
title: "Упаковка дистрибутивов .NET Core"
description: "Узнайте, как создавать пакеты .NET Core, присваивать им имена и управлять их версиями для распространения."
keywords: ".NET, .NET Core, исходный код, сборка"
author: bleroy
ms.author: mairaw
ms.date: 06/28/2017
ms.topic: article
ms.prod: .net-core
ms.devlang: dotnet
ms.assetid: 71b9d722-c5a8-4271-9ce1-d87e7ae2494d
ms.workload: dotnetcore
ms.openlocfilehash: 9f5cd2f7c4fec553dfdfaf1765663b6896b3061d
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/23/2017
---
# <a name="net-core-distribution-packaging"></a>Упаковка дистрибутивов .NET Core

Так как .NET Core становится доступным на все большем количестве платформ, полезно знать, как создавать пакеты, присваивать им имена и управлять их версиями. Таким образом издатели пакетов смогут обеспечить согласованную работу независимо от платформы, выбранной пользователями для запуска .NET.

## <a name="net-core-components"></a>Компоненты .NET Core

.NET Core состоит из трех основных частей, для которых необходимо создать пакеты:

1. **Основное приложение** (также называется "мультиплексор") выполняет две функции: активирует среду выполнения для запуска приложения и активирует пакет SDK для отправки в него команд. Основное приложение представляет собой исполняемый файл в машинном коде (`dotnet.exe`) со вспомогательными библиотеками политик (установлены в `host/fxr`). Он формируется на основе кода в репозитории [`dotnet/core-setup`](https://github.com/dotnet/core-setup/). Как правило, на каждый компьютер выделяется одно основное приложение, хотя это не является обязательным требованием.
2. **Платформа** состоит из среды выполнения и вспомогательных управляемых библиотек. Платформу можно установить как часть приложения или в качестве общей платформы в централизованном расположении, чтобы ее могли повторно использовать несколько приложений. На одном компьютере можно установить неограниченное количество общих платформ. Общие платформы расположены в папке `shared/Microsoft.NETCore.App/<version>`. Основное приложение выполняет накат всех версий исправлений. Если приложение предназначено для версии `Microsoft.NETCore.App` 1.0.0, но есть только версия 1.0.4, приложение запускается для версии 1.0.4.
3. **Пакет SDK** (также называется инструментарием) — это набор управляемых средств, которые можно использовать для написания кода и сборки библиотек и приложений .NET Core. Пакет SDK состоит из интерфейса командной строки, MSBuild, связанных задач сборки и целевых объектов, NuGet, новых шаблонов проектов и т. д. На компьютере может быть несколько пакетов SDK (например, для сборки проектов, где явно требуется предыдущая версия). Но рекомендуется использовать средства последних выпусков.

## <a name="recommended-package-names"></a>Рекомендуемые имена пакетов

Инструкции по присвоению имен пакетам приведены в качестве рекомендаций . В некоторых ситуациях (например, при применении другого метода определенного целевого распределения) издатели пакетов могут отклоняться от этих инструкций.

### <a name="minimum-package-set"></a>Минимальный набор пакетов

* `dotnet-runtime-[major].[minor]` — общая платформа с указанной версией (в диспетчере пакетов должна быть доступна только версия с последними исправлениями для этого сочетания основного и дополнительного номеров версий). **Зависимости** — `dotnet-host`.
* `dotnet-sdk` — пакет SDK последней версии. **Зависимости** — последняя версия пакета `dotnet-sdk-[major].[minor]`.
* `dotnet-sdk-[major].[minor]` — пакет SDK с указанной версией. Указывается последняя включенная версия добавленных общих платформ, что позволит пользователям легко связать пакет SDK с общей платформой. **Зависимости** — `dotnet-host`, одна или несколько сред выполнения `dotnet-runtime-[major].[minor]` (одна среда используется в коде пакета SDK, а остальные среды в этом пакете предназначены для сборки и запуска приложений пользователями).
* `dotnet-host` — основное приложение последней версии.

#### <a name="preview-versions"></a>Предварительные версии

Издатели пакетов могут посчитать нужным включить предварительные версии общей платформы и пакета SDK. Их не следует включать в пакет `dotnet-sdk` без версий, но можно выпустить в виде пакетов с версиями. В именах таких пакетов к фрагменту основного и дополнительного номеров версий добавляется дополнительный маркер предварительной версии. Например, это может быть пакет `dotnet-sdk-2.0-preview-final`.

### <a name="optional-additional-packages"></a>Необязательные дополнительные пакеты

Некоторые издатели могут предоставлять дополнительные пакеты, например:

* `dotnet-lts` — последняя версия общей платформы с долгосрочной поддержкой (LTS). [Поэтапный выход LTS и Current](~/docs/core/versions/lts-current.md) представляют собой разную периодичность выпусков .NET Core. Пользователи могут выбрать вариант в зависимости от необходимой частоты обновлений. Этот принцип тесно связан с уровнями поддержки, поэтому его целесообразность зависит от предполагаемого дистрибутива.

## <a name="disk-layout"></a>Структура диска

При установке пакетов .NET Core важную роль играет относительное размещение целевых мест назначения на диске.
Папка основного приложения `dotnet.exe` должна размещаться рядом с папками `sdk` и `shared`, в которых находится содержимое пакетов SDK `dotnet-sdk` и пакетов общей платформы `dotnet-runtime` с версиями.

Структура диска представляет собой набор файлов и каталогов для пакетов с версиями. Таким образом, при обновлении до последней версии `dotnet-runtime` новая версия устанавливается параллельно с предыдущими. Это снижает вероятность нарушения работы существующих приложений при обновлении пакета. При обновлении пакетов предыдущие версии не должны удаляться.

## <a name="update-policies"></a>Политики обновления

При выполнении команды `update` поведение каждого пакета будет следующим:

* `dotnet-runtime-[major].[minor]` — обновляется до новых версий исправлений, но для основного и дополнительного номеров версий создаются отдельные пакеты.
* `dotnet-sdk` — команда `update` выполняет накат основного и дополнительного номеров версий, а также версий исправлений.
* `dotnet-sdk-[major].[minor]` — обновляется до новых версий исправлений, но для основного и дополнительного номеров версий создаются отдельные пакеты.
* `dotnet-lts` — команда `update` выполняет накат основного и дополнительного номеров версий, а также версий исправлений.

В этом разделе вы ознакомились с нашими рекомендациями по созданию пакетов .NET Core. Но вы можете самостоятельно решить, какие предлагать версии дистрибутивов и когда именно. Например, если для создателя дистрибутива стабильность важнее чем актуальность, он может выпускать только версии, привязанные к поэтапному выходу LTS.