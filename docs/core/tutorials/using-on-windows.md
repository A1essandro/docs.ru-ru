---
title: "Начало работы с .NET Core в Windows"
description: "Начало работы с .NET Core в Windows с помощью Visual Studio 2015"
keywords: .NET, .NET Core
author: bleroy
manager: wpickett
ms.date: 06/20/2016
ms.topic: article
ms.prod: .net-core
ms.technology: .net-core-technologies
ms.devlang: dotnet
ms.assetid: d743134a-08a3-4ff6-aab7-49f71f0568c3
translationtype: Human Translation
ms.sourcegitcommit: 54da8aebd64e86c064214074bc261f72c3b0aedc
ms.openlocfilehash: 299d479ce74a0e1f41ff42a0e6619f4964788194

---

# <a name="getting-started-with-net-core-on-windows-using-visual-studio-2015"></a>Начало работы с .NET Core в Windows с помощью Visual Studio 2015

Авторы: [Bertrand Le Roy](https://github.com/bleroy) (Бертран ле Рой) и [Phillip Carter](https://github.com/cartermp) (Филипп Картер)

Visual Studio 2015 предоставляет полнофункциональную среду разработки приложений .NET Core. В этом документе описываются действия, необходимые для создания ряда типичных решений .NET Core или решений, включающих компоненты .NET Core, с помощью Visual Studio. Сценарии включают тестирование и использование библиотек сторонних разработчиков, которые не предназначены явно для последней версии .NET Core. 

## <a name="prerequisites"></a>Предварительные требования

Чтобы обновить среду, выполните инструкции на [странице с описанием предварительных требований](../windows-prerequisites.md).

## <a name="getting-started"></a>Начало работы

Чтобы настроить Visual Studio 2015 для разработки приложений .NET Core, выполните указанные ниже действия:

1. Откройте Visual Studio, а затем в меню **Файл** выберите пункты **Создать** и **Проект**.

2. В диалоговом окне **Новый проект** в списке **Шаблоны** разверните узел **Visual C#** и выберите элемент **.NET Core**. Должны появиться три новых шаблона проекта: **Библиотека классов (.NET Core)**, **Консольное приложение (.NET Core)** и **Веб-приложение ASP.NET Core (.NET Core)**.

<a name="a-solution-using-only-net-core-projects"></a>Решение на основе только проектов .NET Core
----------------------------------------

### <a name="writing-the-library"></a>Написание библиотеки

1. В Visual Studio последовательно щелкните **Файл**, **Создать**, **Проект**. В диалоговом окне **Новый проект** разверните узел **Visual C#**, выберите узел **.NET Core**, а затем выберите шаблон **Библиотека классов (.NET Core)**. 

2. Присвойте проекту имя Library, а решению — имя Golden. Оставьте флажок **Создать каталог для решения** установленным. Нажмите кнопку **ОК**.

3. В обозревателе решений откройте контекстное меню узла **Ссылки** и выберите пункт **Управление пакетами NuGet**.

4. Выберите nuget.org в качестве **источника пакета** и перейдите на вкладку **Обзор**. Найдите файл **Newtonsoft.Json**. Нажмите кнопку **Установить**. 

5. В контекстном меню узла **Ссылки** выберите пункт **Восстановить пакеты**.

6. Переименуйте файл `Class1.cs` в `Thing.cs`. Подтвердите переименование класса. Удалите конструктор и добавьте метод `public int Get(int number) => Newtonsoft.Json.JsonConvert.DeserializeObject<int>($"{number}");`.

7. В меню **Построение** выберите **Построить решение**.

   Решение должно быть собрано без ошибок.

### <a name="writing-the-test-project"></a>Написание тестового проекта

1. В обозревателе решений в контекстном меню узла **Решение** выберите **Добавить**, **Создать папку решения**. Присвойте папке имя test. 
   Это всего лишь папка решения, но не физическая папка.

2. Откройте контекстное меню папки **test** и выберите пункт **Добавить**, **Новый проект**. В диалоговом окне **Новый проект** выберите **Консольное приложение (.NET Core)**. Присвойте приложению имя TestLibrary и явным образом поместите его по пути `Golden\test`. 

> [!IMPORTANT]
> Проект должен быть консольным приложением, а не библиотекой классов.

3. В проекте **TestLibrary** откройте контекстное меню узла **Ссылки** и выберите пункт **Добавить ссылку**. 

4. В диалоговом окне **Диспетчер ссылок** установите флажок **Библиотека** в узле **Проекты**, **Решение**, а затем нажмите кнопку **ОК**. 

5. В проекте **TestLibrary** откройте файл `project.json` и замените `"Library": "1.0.0-*"` на `"Library": {"target": "project", "version": "1.0.0-*"}`. 

   Это позволит избежать разрешения проекта `Library` в пакет NuGet с тем же именем. Явное задание project в качестве целевого объекта позволяет гарантировать, что средства сначала будут искать проект с данным именем, а не пакет. 
   
6. В проекте **TestLibrary** откройте контекстное меню узла **Ссылки** и выберите пункт **Восстановить пакеты**.

7. Откройте контекстное меню узла **Ссылки** и выберите пункт **Управление пакетами NuGet**.

8. Выберите nuget.org в качестве **источника пакета** и перейдите на вкладку **Обзор**. Установите флажок **Включить предварительные выпуски**, найдите **xUnit** версии 2.2.0 или более поздней, а затем нажмите кнопку **Установить**. 

9. Найдите **dotnet-test-xunit** версии 2.2.0 или более поздней, а затем нажмите кнопку **Установить**.

10. Отредактируйте файл `project.json` и замените `"imports": "dnxcore50"` на `"imports": [ "dnxcore50", "portable-net45+win8" ]`. 

   Это обеспечивает правильное восстановление и использование библиотек XUnit проектом: эти библиотеки были скомпилированы для использования с переносимыми профилями, включающими portable-net45+win8, но не с платформой .NET Core, которой еще не существовало на момент их создания. `import` ослабляет требования при проверке версии средств во время сборки. Теперь пакеты можно восстановить без ошибок.

11. Отредактируйте файл `project.json`, добавив `"testRunner": "xunit",` после раздела `"frameworks"`.

12. Добавьте файл класса `LibraryTests.cs` в проект **TestLibrary**, добавьте директивы `using` `using Xunit;` и `using Library;` в начало файла и добавьте в класс следующий код:
    ```csharp
    [Fact]
    public void ThingGetsObjectValFromNumber() {
        Assert.Equal(42, new Thing().Get(42));
    }
    ```
    * При необходимости удалите файл `Program.cs` из проекта **TestLibrary** и удалите `"buildOptions": {"emitEntryPoint": true},` из файла `project.json`.

   Теперь вы можете выполнить сборку решения. 
   
13. В меню **Тест** выберите **Windows**, **Обозреватель тестов**, а затем в обозревателе тестов выберите **Запустить все**.
   
   Тест должен быть пройден успешно.

### <a name="writing-the-console-app"></a>Написание консольного приложения

1. В обозревателе решений откройте контекстное меню папки `src` и добавьте новый проект **Консольное приложение (.NET Core)**. Присвойте ему имя App и задайте расположение `Golden\src`.

2. В проекте **App** откройте контекстное меню узла **Ссылки** и выберите пункты **Добавить**, **Ссылка**. 

3. В диалоговом окне **Диспетчер ссылок** установите флажок **Библиотека** в узле **Проекты**, **Решение**, а затем нажмите кнопку **ОК**.

4. В проекте **App** откройте файл `project.json` и замените `"Library": "1.0.0-*"` на `"Library": {"target": "project"}`.

5. В контекстном меню узла **Ссылки** выберите пункт **Восстановить пакеты**.

6. Откройте контекстное меню узла **App** и выберите пункт **Назначить запускаемым проектом**.

7. Откройте файл `Program.cs`, добавьте директиву `using Library;` в начало файла, а затем добавьте строку `Console.WriteLine($"The answer is {new Thing().Get(42)}");` в метод `Main`.

8. Установите точку останова после только что добавленной строки.

9. Нажмите клавишу F5 для запуска приложения.

   Сборка приложения должна быть выполнена без ошибок, и должна быть достигнута точка останова. Вы также можете проверить, выдает ли приложение результат The answer is 42.

<a name="a-mixed-net-core-library-and-net-framework-application"></a>Смешанное приложение на основе библиотеки .NET Core и платформы .NET Framework
--------------------------------------------------------

Используя в качестве основы решение, полученное в результаты выполнения предыдущего скрипта, выполните указанные ниже действия:

1. В обозревателе решений откройте файл `project.json` для проекта **Library** и замените `"frameworks": {
    "netstandard1.6" }` на `"frameworks": {
    "netstandard1.4" }`.

2. В проекте **Library** откройте контекстное меню узла **Ссылки** и выберите пункт **Восстановить пакеты**.

   Сборка и выполнение решения должны осуществляться точно так же, как и раньше: тест должен быть пройден успешно и консольное приложение должно запуститься и быть доступным для отладки.

3. В проекте **Library** откройте контекстное меню и выберите пункт **Сборка**.

4. В обозревателе решений откройте контекстное меню папки `src` и выберите команду **Добавить**, **Новый проект**.

5. В диалоговом окне **Новый проект** выберите узел **Visual C#**, а затем выберите **Консольное приложение**.

> [!IMPORTANT]
> Следует выбрать стандартное консольное приложение, а не версию .NET Core. В этом разделе используется библиотека из приложения .NET Framework.

6. Присвойте проекту имя FxApp и задайте расположение `Golden\src`.

7. В проекте **FxApp** откройте контекстное меню узла **Ссылки** и выберите пункт **Добавить ссылку**.

8. В диалоговом окне **Диспетчер ссылок** выберите **Обзор**, перейдите к расположению собранной библиотеки `Library.dll` (по пути ..Golden\src\Library\bin\Debug\netstandard1.4), а затем нажмите кнопку **Добавить**. 

   В качестве еще одного способа сослаться на код .NET Core из .NET Framework можно также упаковать библиотеку и сослаться на пакет.

9. Откройте контекстное меню узла **Ссылки** и выберите пункт **Управление пакетами NuGet**.

10. Выберите nuget.org в качестве **источника пакета** и перейдите на вкладку **Обзор**. Установите флажок **Включить предварительные выпуски** и найдите файл **Newtonsoft.Json**. Нажмите кнопку **Установить**. 

11. В проекте **FxApp** откройте файл `Program.cs` и добавьте директиву `using Library;` в начало файла, а затем добавьте строку `Console.WriteLine($"The answer is {new Thing().Get(42)}.");` в метод `Main` программы.

12. Установите точку останова после только что добавленной строки.

13. Сделайте **FxApp** запускаемым приложением решения.

14. Нажмите клавишу F5 для запуска приложения.

   Должна быть выполнена сборка приложения и достигнута точка останова. Приложение должно выводить строку The answer is 42.
   
   > [!TIP]
   > На платформе Windows можно использовать средство MSTest. Узнайте больше об [использовании MSTest в документе Windows](../testing/using-mstest-on-windows.md).

<a name="moving-a-library-from-netstandard-14-to-13"></a>Перенос библиотеки с версии netstandard 1.4 в версию 1.3
--------------------------------------------

1. В обозревателе решений откройте файл `project.json` в проекте **Library**.

2. Замените `frameworks": { "netstandard1.4" }` объектом `frameworks": { "netstandard1.3" }`.

3. В проекте **Library** откройте контекстное меню узла **Ссылки** и выберите пункт **Восстановить пакеты**.

4. В меню **Сборка** выберите пункт **Собрать библиотеку**.

5. Удалите ссылку `Library` из проекта **FxApp**, а затем добавьте ее снова, используя путь ..Golden\src\Library\bin\Debug\netstandard1.3. Теперь ссылка будет указывать на версию 1.3.

6. Нажмите клавишу F5 для запуска приложения.

   Все должно работать так же, как и раньше. Проверьте, выводит ли приложение строку The answer is 42, достигается ли точка останова и проверяются ли переменные.

<a name="a-mixed-pcl-library-and-net-framework-application"></a>Смешанное приложение на основе библиотеки PCL и платформы .NET Framework
--------------------------------------------------

Закройте предыдущее решение, если оно открыто: с этого раздела вы начнете разрабатывать новый скрипт.

### <a name="writing-the-library"></a>Написание библиотеки

1. В Visual Studio последовательно щелкните **Файл**, **Создать**, **Проект**. В диалоговом окне **Новый проект** разверните узел **Visual C#**, а затем выберите шаблон **Библиотека классов (переносимая для iOS, Android и Windows)**. 

2. Присвойте проекту имя PCLLibrary, а решению — имя GoldenPCL. Оставьте флажок **Создать каталог для решения** установленным. Нажмите кнопку **ОК**.

3. В обозревателе решений откройте контекстное меню узла **Ссылки** и выберите пункт **Управление пакетами NuGet**.

4. Выберите nuget.org в качестве **источника пакета** и перейдите на вкладку **Обзор**. Установите флажок **Включить предварительные выпуски** и найдите файл **Newtonsoft.Json**. Нажмите кнопку **Установить**. 

5. Переименуйте класс в Thing и добавьте метод: `public int Get(int number) => Newtonsoft.Json.JsonConvert.DeserializeObject<int>($"{number}");`

6. В меню **Сборка** выберите пункт **Собрать решение** и проверьте, выполняется ли сборка решения.

### <a name="writing-the-console-app"></a>Написание консольного приложения

1. В обозревателе решений в контекстном меню узла **Решение GoldenPCL** выберите пункт **Добавить**, **Новый проект**. В диалоговом окне **Новый проект** разверните узел **Visual C#**, выберите **Консольное приложение** и присвойте проекту имя App. 

2. В проекте **App** откройте контекстное меню узла **Ссылки** и выберите пункты **Добавить**, **Ссылка**. 

3. В диалоговом окне **Диспетчер ссылок** выберите **Обзор**, перейдите к расположению собранной библиотеки `PCLLibrary.dll` (по пути ..\GoldenPCL\PCLLibrary\bin\Debug), а затем нажмите кнопку **Добавить**. 

4. В проекте **App** откройте файл `Program.cs` и добавьте директиву `using PCLLibrary;` в начало файла, а затем добавьте строку `Console.WriteLine($"The answer is {new Thing().Get(42)}.");` в метод `Main` программы.

5. Установите точку останова после только что добавленной строки.

6. В обозревателе решений откройте контекстное меню узла **App** и выберите пункт **Назначить запускаемым проектом**.

7. Нажмите клавишу F5 для запуска приложения.

   Должна быть выполнена сборка и запуск приложения и достигнута точка останова после вывода строки The answer is 42.

<a name="moving-a-pcl-to-a-netstandard-library"></a>Перемещение переносимой библиотеки классов в библиотеку NetStandard
-------------------------------------
Средства переносимой библиотеки классов (PCL) могут автоматически изменить библиотеку PCL так, чтобы она предназначалась для .NET Standard. 

1.  Дважды щелкните узел "Свойства", чтобы открыть страницу свойств проекта.

2.  Под заголовком "Нацеливание" щелкните гиперссылку "Нацелить на стандартную платформу .NET".

3.  В ответ на запрос подтверждения щелкните "Да".

Средство автоматически выберет версию .NET Standard, которая включает все целевые платформы, для которых предназначалась библиотека PCL. Вы можете нацелить библиотеку на другую версию .NET Standard с помощью раскрывающегося списка .NET Standard на странице свойств проекта.
 
* Если ранее имелся файл packages.config, вам может быть предложено удалить все установленные пакеты перед преобразованием.

### <a name="manually-edit-projectjson-to-target-net-standard-from-an-existing-portable-class-library"></a>Изменение файла project.json вручную для нацеливания существующей переносимой библиотеки классов на .NET Standard

1.  Если в файле project.json имеется запись dnxcore50 в элементе supports, удалите ее.

2.  Удалите зависимость от Microsoft.NETCore.

3.  Измените зависимость от Microsoft.NETCore.Portable.Compatibility, поменяв версию 1.0.0 на 1.0.1.

4.  Добавьте зависимость от NETStandard.Library версии 1.6.0.

5.  Из элемента frameworks удалите платформу dotnet (и содержащийся в ней элемент imports).

6.  Добавьте ` "netstandard1.x” : { } ` в элемент frameworks, заменив x на целевую версию .NET Standard.

### <a name="example-projectjson"></a>Пример файла project.json

Этот файл project.json содержит предложения supports для UWP и .NET 4.6 и осуществляет нацеливание на netstandard1.3:
```
{
  "supports": {
    "net46.app": {},
    "uwp.10.0.app": {},
  },
  "dependencies": {
    "NETStandard.Library": "1.6.0",
    "Microsoft.NETCore.Portable.Compatibility": "1.0.1"
  },
  "frameworks": {
    "netstandard1.3" : {}
  }
}
```





<!--HONumber=Nov16_HO1-->


