---
title: "Управление версиями .NET Core"
description: "Управление версиями .NET Core"
keywords: .NET, .NET Core
author: richlander
ms.author: mairaw
ms.date: 06/20/2016
ms.topic: article
ms.prod: .net-core
ms.devlang: dotnet
ms.assetid: f6f684b1-1d2c-4105-8376-7c1959e23803
translationtype: Human Translation
ms.sourcegitcommit: bb15293c569fa92f1acf6315c5fe7f2cd9cb6f68
ms.openlocfilehash: 1f4f580a8287f371ff5cdc37b78e73b7329dca02

---

# <a name="net-core-versioning"></a>Управление версиями .NET Core

.NET Core состоит из [пакетов NuGet](../packages.md) (платформ) и распространяется как единое целое. Управление версиями для каждого уровня платформы может осуществляться отдельно для обеспечения гибкости продукта и точного описания изменений в нем. Несмотря на высокую гибкость управления версиями, желательно согласованно управлять версиями платформы, чтобы сделать работу с продуктом понятнее.

В некоторых отношениях этот продукт уникален, так как он описывается и предоставляется в виде пакетов посредством диспетчера пакетов (NuGet). Хотя обычно вы получаете платформу .NET Core в виде отдельного пакета SDK, пакет SDK в основном служит для удобства работы и неразрывно связан с пакетами NuGet. Таким образом, управление версиями в первую очередь осуществляется для пакетов, а все другие возможности управления версиями являются производными.

## <a name="semantic-versioning"></a>Семантическое управление версиями

В .NET Core используется [Семантическое версионирование (SemVer)](http://semver.org/) с шаблоном номера версии основной_номер.дополнительный_номер.исправление, различные части которого служат для описания степени и типа изменения.

Ниже описывается шаблон управления версиями, как правило применяемый в .NET Core. В некоторых случаях он был адаптирован в соответствии с текущей схемой управления версиями. Эти случаи описаны далее в этом документе. Например, платформы предназначены только для представления возможностей продукта и API, что соответствует управлению версиями с использованием основного и дополнительного номеров.

### <a name="versioning-form"></a>Форма управления версиями

ОСНОВНОЙ_НОМЕР.ДОПОЛНИТЕЛЬНЫЙ_НОМЕР.ИСПРАВЛЕНИЕ[-ПРЕДВАРИТЕЛЬНЫЙ_ВЫПУСК-НОМЕР_СБОРКИ]

### <a name="decision-tree"></a>Дерево принятия решений

Условия изменения основного номера:
  - отмена поддержки платформы;
  - присвоение нового основного номера версии существующей зависимости; 
  - отключение совместимости по умолчанию.

Условия изменения дополнительного номера:
  - добавление контактной зоны общедоступного интерфейса API; 
  - добавление нового поведения;
  - присвоение нового дополнительного номера версии существующей зависимости;
  - добавление новой зависимости. 
  
Условия изменения номера исправления:
  - исправление ошибок;
  - добавление поддержки новой платформы;
  - присвоение нового номера исправления существующей зависимости;
  - любые другие изменения.

Чтобы определить, какой номер следует увеличить, если изменений несколько, ориентируйтесь на изменение самого высокого уровня.

## <a name="versioning-scheme"></a>Схема управления версиями

Ниже приведено определение платформы .NET Core и способ управления версиями для нее:

- Реализация сред выполнения и платформ, распространяемая в виде пакетов. Управление версиями каждого пакета производится отдельно. Особенно это касается версий исправлений.
- Набор метапакетов, которые ссылаются на мелкомодульные пакеты как на единую сущность с управлением версиями. Управление версиями метапакетов осуществляется отдельно от управления версиями пакетов.
- Набор платформ (например, `netstandard`), которые представляют более широкий набор интерфейсов API, описываемый как набор моментальных снимков с управлением версиями.

### <a name="packages"></a>Пакеты

Для пакетов библиотек характерно независимое управление версиями. Пакеты, которые пересекаются со сборками .NET Framework System. \* , обычно имеют версии 4.x, что соответствует схеме управления версиями .NET Framework 4.x (принятой исторически). Версии пакетов, которые не пересекаются с библиотеками .NET Framework (например, [System.Reflection.Metadata](https://www.nuget.org/packages/System.Reflection.Metadata)), обычно начинаются с 1.0 и увеличиваются с этого номера.

Пакеты, описываемые библиотекой [NETStandard.Library](https://www.nuget.org/packages/NETStandard.Library), представляют собой особый случай, так как являются основой платформы.

- Пакетам NETStandard.Library номера версий присваиваются как единому набору, так как между ними имеются зависимости на уровне реализации.
- Интерфейсы API добавляются в пакеты NETStandard.Library только в рамках основных или дополнительных выпусков .NET Core, так как их добавление требует назначения нового номера версии `netstandard`. Это дополнение к требованиям SemVer.

### <a name="metapackages"></a>Метапакеты

Управление версиями метапакетов .NET Core основано на версиях платформ, с которыми они сопоставлены. Метапакету присваивается самый старший номер версии платформы (например, netstandard1.6), с которой он сопоставлен в оболочке пакета. 

Версия исправления метапакета представляет изменения, которые внесены в ссылки на пакеты в метапакете. Версия исправления никогда не включает обновленную версию платформы. Поэтому метапакеты не соответствуют строго правилам SemVer, так как их схема управления версиями не представляет степень изменений в базовых пакетах, а связана в первую очередь с уровнем API. 

Существуют два основных метапакета для .NET Core.

**NETStandard.Library**

- Версия 1.6 для .NET Core 1.0 (соответствие этих версий не является преднамеренным).
- Сопоставлен с платформой `netstandard`. 
- Описывает пакеты, которые считаются необходимыми для разработки современных приложений и которые платформы .NET должны реализовывать, чтобы считаться платформами [.NET Standard](../../standard/library.md).

**Microsoft.NETCore.App**

- Версия 1.0 для .NET Core 1.0 (эти версии сопоставлены).
- Сопоставлен с платформой `netcoreapp`.
- Описывает платформы в распространяемом пакете .NET Core.

Примечание. Есть еще один метапакет .NET Core — [`Microsoft.NETCore.Portable.Compatibility`](https://www.nuget.org/packages/Microsoft.NETCore.Portable.Compatibility). Он не сопоставлен с определенной платформой, поэтому управление версиями для него осуществляется как для пакета.

### <a name="frameworks"></a>Инфраструктуры

Версии платформ меняются при добавлении новых интерфейсов API. Версии исправлений для них не применяются, так как они представляют уровень API и не связаны с реализацией. Основные и дополнительные номера версий следуют правилам SemVer, описанным выше.

Платформа `netcoreapp` связана с распространяемым пакетом .NET Core. Ее номера версий соответствуют версиям .NET Core. Например, когда будет выпущена версия .NET Core 2.0, она будет предназначена для `netcoreapp2.0`. Для платформы `netstandard` не используется схема управления версиями какой-либо среды выполнения .NET, так как она в равной степени применяется ко всем средам.

## <a name="versioning-in-practice"></a>Управление версиями на практике

В репозиториях .NET Core в GitHub ежедневно публикуются исправления и общедоступные выпуски, вследствие чего появляется множество новых сборок библиотек. Создавать новые общедоступные версии .NET Core для каждого изменения нецелесообразно. Вместо этого изменения накапливаются в течение некоторого не определенного строго периода времени (например, нескольких недель или месяцев), после чего выпускается новая общедоступная стабильная версия .NET Core.

Новая версия .NET Core может означать следующее:

- новые версии пакетов и метапакетов;
- новые версии различных платформ с добавлением новых интерфейсов API;
- новая версия распространяемого пакета .NET Core.

### <a name="shipping-a-patch-release"></a>Выпуск исправления

После выпуска стабильной версии .NET Core 1.0.0 в библиотеки .NET Core вносятся изменения (без добавления новых интерфейсов API) для исправления ошибок, а также повышения производительности и надежности. Различные метапакеты обновляются так, чтобы ссылаться на обновленные пакеты библиотек .NET Core. Версии метапакетов изменяются на уровне номера исправления (x.y.z). Платформы не обновляются. Выпускается новый распространяемый пакет .NET Core, номер версии которого соответствует версии метапакета `Microsoft.NETCore.App`.

Выпуск исправлений демонстрируется в приведенных ниже примерах файла project.json.

```
{
  "dependencies": {
    "Microsoft.NETCore.App": "1.0.1"
  },
  "frameworks": {
    "netcoreapp1.0": {}
  }
}
```

### <a name="shipping-a-minor-release"></a>Выпуск дополнительной версии

После выпуска стабильной версии .NET Core 1.0.0 в библиотеки .NET Core добавляются новые интерфейсы API для поддержки новых сценариев. Различные метапакеты обновляются так, чтобы ссылаться на обновленные пакеты библиотек .NET Core. Версии метапакетов изменяются на уровне дополнительного номера (x.y) в соответствии со старшим номером версии платформы. Различные платформы обновляются для описания новых интерфейсов API. Выпускается новый распространяемый пакет .NET Core, номер версии которого соответствует версии метапакета `Microsoft.NETCore.App`.

Выпуск дополнительных версий демонстрируется в приведенных ниже примерах файла project.json.

```
{
  "dependencies": {
    "Microsoft.NETCore.App": "1.1.0"
  },
  "frameworks": {
    "netcoreapp1.1": {}
  }
}
```

### <a name="shipping-a-major-release"></a>Выпуск основной версии

После выпуска стабильной версии .NET Core 1.y.z в библиотеки .NET Core добавляются новые интерфейсы API для поддержки новых базовых сценариев. Может быть отменена поддержка платформы. Различные метапакеты обновляются так, чтобы ссылаться на обновленные пакеты библиотек .NET Core. Версии метапакета `Microsoft.NETCore.App` и платформы `netcore` изменяются на уровне основного номера (x.). Версии метапакета `NETStandard.Library`, вероятно, будут изменяться на уровне дополнительного номера (x.y), так как он связан с несколькими реализациями .NET. Будет выпущен новый распространяемый пакет .NET Core, номер версии которого соответствует версии метапакета `Microsoft.NETCore.App`.

Выпуск основных версий демонстрируется в приведенном ниже примере ссылки на метапакет в файле project.json.

```
{
  "dependencies": {
    "Microsoft.NETCore.App": "2.0.0"
  },
  "frameworks": {
    "netcoreapp2.0": {}
  }
}
```



<!--HONumber=Nov16_HO3-->


