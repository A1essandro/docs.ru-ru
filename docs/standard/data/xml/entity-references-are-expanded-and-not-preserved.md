---
title: "Разворачиваемые и не сохраняемые ссылки на сущности | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-standard"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "VB"
  - "CSharp"
  - "C++"
  - "jsharp"
ms.assetid: ffd97806-ab43-4538-8de2-5828bfbbde57
caps.latest.revision: 3
author: "mairaw"
ms.author: "mairaw"
manager: "wpickett"
caps.handback.revision: 3
---
# Разворачиваемые и не сохраняемые ссылки на сущности
Если ссылка на сущность разворачивается и заменяется текстом, который она представляет, узел **XmlEntityReference** не создается.  Вместо этого декларация сущности проходит синтаксический анализ, и узлы, созданные из содержимого декларации, копируются вместо **XmlEntityReference**.  Таким образом, в примере `&publisher;` ссылка `&publisher;` не сохраняется, а создается узел **XmlText**.  
  
 ![развернутая структура дерева](../../../../docs/standard/data/xml/media/xmlentityref-expanded-nodes.png "xmlentityref\_expanded\_nodes")  
Древовидная структура для разворачиваемых ссылок на сущности  
  
 Сущности\-символы, такие как `B` и `<`, не сохраняются.  Вместо этого они всегда разворачиваются и представляются в виде текстовых узлов.  
  
 Чтобы сохранить узлы **XmlEntityReference** и дочерние узлы ссылки на сущности, присоединенные к ней, установите флаг **EntityHandling** в значение **ExpandCharEntities**.  В противном случае оставьте для флага **EntityHandling** значение по умолчанию \- **ExpandEntities**.  В этом случае узлы ссылок на сущности не будут отображаться в модели DOM.  Эти узлы замещаются узлами\-копиями дочерних узлов декларации сущности.  
  
 Один побочный эффект от несохранения ссылок на сущности состоит в том, что после сохранения документа и передачи его в другое приложение этому приложению будет неизвестно, что узлы были порождены ссылкой на сущность.  Если же ссылки на сущности сохраняются, то принимающее приложение, обнаружив ссылку на сущность, считает ее дочерние узлы.  Очевидно, что дочерние узлы представляют данные, находившиеся в декларации сущности.  Например, модель DOM в случае сохранения ссылок на сущности теоретически имела бы следующую структуру.  
  
 XmlElement: publisher  
  
 XmlEntityReference: `&publisher;`  
  
 XmlText: Microsoft Press  
  
 Если ссылки на сущности разворачиваются в модели DOM \(метод по умолчанию\), древовидная структура имеет следующий вид:  
  
 XmlElement: publisher  
  
 XmlText: Microsoft Press  
  
 Обратите внимание, что ссылка на сущность отсутствует и принимающее приложение не может определить, что узел **XmlText** со значением «Microsoft Press» создан из декларации сущности.  
  
 Если используется модуль чтения, который не может разрешать сущности, метод **Load** создает исключение, когда обнаруживается ссылка на сущность.  
  
## См. также  
 [Модель DOM для XML](../../../../docs/standard/data/xml/xml-document-object-model-dom.md)