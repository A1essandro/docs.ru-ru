---
title: "Другие конструкции в регулярных выражениях | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-standard"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "регулярные выражения .NET Framework, прочие конструкции"
  - "конструкции, прочее"
  - "регулярные выражения, прочие конструкции"
ms.assetid: 7d10d11f-680f-4721-b047-fb136316b4cd
caps.latest.revision: 9
author: "rpetrusha"
ms.author: "ronpet"
manager: "wpickett"
caps.handback.revision: 9
---
# Другие конструкции в регулярных выражениях
Регулярные выражения в платформе .NET Framework включают три различные языковые конструкции.  Позволяет включить или отключить определенные параметры соответствия в середине шаблона регулярного выражения.  Оставшиеся два позволяют включить примечания в регулярное выражение.  
  
## Встроенные параметры  
 Задать или отключить конкретные параметры сопоставления шаблонов для части регулярного выражения можно с помощью синтаксиса  
  
```  
(?imnsx-imnsx)  
```  
  
 Список параметров, которые нужно включить, приводится после вопросительного знака, а параметры, которые требуется отключить, перечисляются после знака "минус".  В таблице ниже представлено описание каждого из этих параметров.  Дополнительные сведения о каждом параметре см. в разделе [Параметры регулярных выражений](../../../docs/standard/base-types/regular-expression-options.md).  
  
|Команда|Описание|  
|-------------|--------------|  
|`i`|Соответствие без учета регистра.|  
|`m`|Многострочный режим.|  
|`n`|Только явные захваты. \(Скобки не действуют как захватываемые группы.\)|  
|`s`|Однострочный режим.|  
|`x`|Игнорировать не преобразованные в escape\-последовательность пробелы и разрешить комментарии в режиме x.|  
  
 Любое изменение параметров регулярных выражений, заданное конструкцией `(?imnsx-imnsx)`, остается в силе до конца содержащей группы.  
  
> [!NOTE]
>  Конструкция группировки `(?imnsx-imnsx:`*subexpression*`)` предоставляет части выражения одинаковые функциональные возможности.  Для получения дополнительной информации см. [Конструкции группирования](../../../docs/standard/base-types/grouping-constructs-in-regular-expressions.md).  
  
 В следующем примере параметры `i`, `n` и `x` используются для отключения чувствительности к регистру символов и включения явных захватов, чтобы игнорировать пробелы в шаблоне регулярного выражения в его середине.  
  
 [!code-csharp[RegularExpressions.Language.Miscellaneous#1](../../../samples/snippets/csharp/VS_Snippets_CLR/regularexpressions.language.miscellaneous/cs/miscellaneous1.cs#1)]
 [!code-vb[RegularExpressions.Language.Miscellaneous#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/regularexpressions.language.miscellaneous/vb/miscellaneous1.vb#1)]  
  
 В примере определяются два регулярных выражения.  Первый, `\b(D\w+)\s(d\w+)\b`, выделяет два последовательных слова, начинающиеся со строчной буквы d и прописной буквы D.  Второе регулярное выражение `\b(D\w+)(?ixn) \s (d\w+) \b` использует встроенные параметры для изменения этого шаблона, как описано в следующей таблице.  Сравнение результатов подтверждает влияние конструкции `(?ixn)`.  
  
|Шаблон|Описание|  
|------------|--------------|  
|`\b`|Начало на границе слова.|  
|`(D\w+)`|Выделяет прописную букву "D" c одной или несколькими последующими буквами.  Это первая группа записи.|  
|`(?ixn)`|С этого момента делайте сравнения без учета регистра, делайте только явные захваты и игнорируйте пробелы в шаблоне регулярного выражения.|  
|`\s`|Соответствует пробелу.|  
|`(d\w+)`|Выделяет прописную или строчную букву "d", за которой следует один или несколько букв.  Эта группа не записывается, поскольку включен параметр `n` \(явная запись\).|  
|`\b`|Соответствует границе слова.|  
  
## Встроенное примечание  
 Конструкция `(?#` *comment*`)` позволяет включить встроенные комментарии в регулярное выражение.  Обработчик регулярных выражений не использует какую\-либо часть комментария при выделении шаблонов, хотя комментарий включается в строку, которая возвращается методом <xref:System.Text.RegularExpressions.Regex.ToString%2A?displayProperty=fullName>.  Примечание заканчивается первой закрывающей скобкой.  
  
 В следующем примере повторяется первый шаблон регулярного выражения из примера, указанного в предыдущем разделе.  В регулярное выражение добавляются два встроенных комментария, чтобы указать, учитывается ли в сравнении регистр.  Шаблон регулярного выражения `\b((?# case-sensitive comparison)D\w+)\s((?#case-insensitive comparison)d\w+)\b` определяется следующим образом.  
  
|Шаблон|Описание|  
|------------|--------------|  
|`\b`|Начало на границе слова.|  
|`(?# case-sensitive comparison)`|Комментарий.  Не влияет на алгоритм выделения шаблона.|  
|`(D\w+)`|Выделяет прописную букву "D" c одной или несколькими последующими буквами.  Это первая группа записи.|  
|`\s`|Соответствует пробелу.|  
|`(?ixn)`|С этого момента делайте сравнения без учета регистра, делайте только явные захваты и игнорируйте пробелы в шаблоне регулярного выражения.|  
|`(?#case-insensitive comparison)`|Комментарий.  Не влияет на алгоритм выделения шаблона.|  
|`(d\w+)`|Выделяет прописную или строчную букву "d", за которой следует один или несколько букв.  Это вторая группа записи.|  
|`\b`|Соответствует границе слова.|  
  
 [!code-csharp[RegularExpressions.Language.Miscellaneous#2](../../../samples/snippets/csharp/VS_Snippets_CLR/regularexpressions.language.miscellaneous/cs/miscellaneous2.cs#2)]
 [!code-vb[RegularExpressions.Language.Miscellaneous#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/regularexpressions.language.miscellaneous/vb/miscellaneous2.vb#2)]  
  
## Комментарий в конце строки.  
 Знак номера \(`#`\) помечает комментарий режима x, который начинается символом \#, не преобразованным в escape\-последовательность, в конце шаблона регулярного выражения и продолжается до конца строки.  Для использования этой конструкции следует включить параметр `x` \(во встроенных параметрах\) или передать значение <xref:System.Text.RegularExpressions.RegexOptions?displayProperty=fullName> в параметр `option` при создании экземпляра <xref:System.Text.RegularExpressions.Regex> или вызове статического метода <xref:System.Text.RegularExpressions.Regex>.  
  
 В следующем примере показана конструкция комментария в конце строки.  Определяет, является ли строка составного форматирования строкой, которая включает по крайней мере один элемент формата.  В следующей таблице описаны конструкции шаблона регулярного выражения.  
  
 `\{\d+(,-*\d+)*(\:\w{1,4}?)*\}(?x) # Looks for a composite format item.`  
  
|Шаблон|Описание|  
|------------|--------------|  
|`\{`|Совпадает с открывающей фигурной скобкой.|  
|`\d+`|Совпадение с одной или несколькими десятичными цифрами.|  
|`(,-*\d+)*`|Выделить ноль или одно вхождение запятой, за которой следует минус \(необязательно\), за которым идет одна или несколько десятичных цифр.|  
|`(\:\w{1,4}?)*`|Выделить ноль или одно вхождение двоеточие, за которым следуют как можно меньшее число символов пробела \(от одного до четырех\).|  
|`(?#case insensitive comparison)`|Встроенное примечание.  Не влияет на алгоритм выделения шаблона.|  
|`\}`|Выделяет закрывающую фигурную скобку.|  
|`(?x)`|Включите игнорирование параметра пробела шаблона, чтобы распознавался комментарий в конце строки.|  
|`# Looks for a composite format item.`|Конец строки комментария.|  
  
 [!code-csharp[RegularExpressions.Language.Miscellaneous#3](../../../samples/snippets/csharp/VS_Snippets_CLR/regularexpressions.language.miscellaneous/cs/miscellaneous3.cs#3)]
 [!code-vb[RegularExpressions.Language.Miscellaneous#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/regularexpressions.language.miscellaneous/vb/miscellaneous3.vb#3)]  
  
 Обратите внимание, что вместо предоставления конструкции `(?x)` в регулярном выражении комментарий также можно распознать путем вызова метода <xref:System.Text.RegularExpressions.Regex.IsMatch%28System.String%2CSystem.String%2CSystem.Text.RegularExpressions.RegexOptions%29?displayProperty=fullName> и передачи ему значения перечисления <xref:System.Text.RegularExpressions.RegexOptions?displayProperty=fullName>.  
  
## См. также  
 [Элементы языка регулярных выражений — краткий справочник](../../../docs/standard/base-types/regular-expression-language-quick-reference.md)