---
title: "Security and On-the-Fly Code Generation | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-standard"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "VB"
  - "CSharp"
  - "C++"
  - "jsharp"
helpviewer_keywords: 
  - "code security, on-the-fly code generation"
  - "on-the-fly code generation"
  - "security [.NET Framework], on-the-fly code generation"
  - "secure coding, on-the-fly code generation"
ms.assetid: 6d221724-bb21-4d76-90c3-0ee2a2e69be2
caps.latest.revision: 10
author: "mairaw"
ms.author: "mairaw"
manager: "wpickett"
caps.handback.revision: 8
---
# Security and On-the-Fly Code Generation
Некоторые библиотеки создают и запускают код, выполняя определенную операцию для вызывающего объекта.  Основная проблема заключается в создании кода от имени кода с более низким уровнем доверия и его выполнении в среде с более высоким доверием.  Проблема усугубляется, если вызывающий объект может влиять на создание кода. Поэтому необходимо убедиться в том, что создается только код, который вы считаете безопасным.  
  
 Всегда нужно точно знать, какой код вы создаете.  Это означает, что необходимо строго контролировать любые значения, получаемые от пользователя, будь то заключенные в кавычки строки \(которые следует преобразовывать в escape\-последовательности, чтобы исключить неожиданные элементы кода\), идентификаторы \(которые необходимо проверять на допустимость\) и любые другие элементы.  Идентификаторы могут представлять опасность, так как скомпилированную сборку можно изменить так, чтобы ее идентификаторы содержали необычные символы, что, вероятно, нарушит работу сборки \(хотя во многих случаях это не создает уязвимости в защите\).  
  
 Рекомендуется создавать код с помощью порождаемого отражения, что позволяет избежать многих описанных выше проблем.  
  
 При компиляции кода необходимо учитывать даже малейшую вероятность его изменения вредоносной программой.  Существует ли хотя бы небольшой промежуток времени, в течение которого вредоносный код может изменить исходный код на диске до того, как тот будет считан компилятором, или до загрузки DLL\-файла этим кодом?  Если да, нужно защитить каталог, в котором хранятся эти файлы, с помощью механизмов управления доступом для кода или списка управления доступом в файловой системе в зависимости от обстоятельств.  
  
 Если вызывающий объект может воздействовать на создаваемый код, вызывая ошибки компиляции, это тоже может угрожать безопасности.  
  
 Выполняйте созданный код с наименьшими возможными разрешениями \(используя <xref:System.Security.Permissions.SecurityAction> или [Deny](http://msdn.microsoft.com/ru-ru/6b4d2e01-c504-4ac3-b50e-d6f5e7f5df25)\).  
  
## См. также  
 [Secure Coding Guidelines](../../../docs/standard/security/secure-coding-guidelines.md)