---
title: "Secure Coding Guidelines | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-standard"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "VB"
  - "CSharp"
  - "C++"
  - "jsharp"
helpviewer_keywords: 
  - "managed wrapper to native code implementation"
  - "secure coding"
  - "reusable components"
  - "library code that exposes protected resources"
  - "code, security"
  - "code security"
  - "secure coding, options"
  - "components [.NET Framework], security"
  - "code security, options"
  - "security-neutral code"
  - "security [.NET Framework], coding guidelines"
ms.assetid: 4f882d94-262b-4494-b0a6-ba9ba1f5f177
caps.latest.revision: 20
author: "mairaw"
ms.author: "mairaw"
manager: "wpickett"
caps.handback.revision: 17
---
# Secure Coding Guidelines
Защита на основе фактических данных и управление доступом для кода предоставляют очень мощные, четкие механизмы для обеспечения безопасности. Большая часть кода приложения может просто использовать инфраструктуру, реализуемую .NET Framework. В некоторых случаях требуется дополнительная защита на уровне приложения, построенная либо путем расширения системы, либо с помощью новых специальных методов.  
  
 Используя в своем коде обеспечиваемые .NET Framework разрешения и другие механизмы применения ограничений, вы должны возвести барьеры, чтобы предотвратить получение вредоносным кодом сведений, которые вы не хотите раскрывать, или выполнение других нежелательных действий. Кроме того, необходимо соблюсти баланс между безопасностью и удобством использования во всех планируемых сценариях с использованием доверенного кода.  
  
 В этом обзоре описываются различные способы разработки кода, взаимодействующего с системой безопасности.  
  
> [!NOTE]
>  В версии [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] произошли серьезные изменения в терминологии и модели безопасности .NET Framework. Дополнительные сведения об этих изменениях см. в разделе [Изменения системы безопасности](../../../docs/framework/security/security-changes.md).  
  
## Управление доступом для кода и частично доверенный код  
 Платформа .NET Framework предоставляет механизм для принудительного применения различных уровней доверия к разным частям кода, выполняемым в одном и том же приложении. Этот механизм называется управлением доступом для кода.  Управление доступом для кода в .NET Framework не гарантирует изоляцию кода, и его не следует использовать в качестве границы зоны безопасности с частично доверенным кодом, особенно кодом неизвестного происхождения. Мы не рекомендуем загружать и выполнять код из неизвестных источников, не предприняв дополнительные меры безопасности.  
  
 Эта политика действует в отношении всех версий платформы .NET Framework, кроме платформы .NET Framework в составе Silverlight.  
  
## Нейтральный код  
 Нейтральный код не взаимодействует явным образом с системой безопасности. Он работает с любыми полученными разрешениями. Хотя приложения, которые не могут перехватывать исключения системы безопасности, связанные с защищенными операциями \(такими как использование файлов, сетевые операции и т. д\), могут привести к возникновению необработанного исключения, нейтральный код по\-прежнему использует преимущества технологий безопасности .NET Framework.  
  
 Библиотека нейтрального кода имеет особенности, которые следует понимать. Предположим, что библиотека предоставляет элементы API, которые используют файлы или вызывают неуправляемый код; если код не имеет соответствующих разрешений, он не будет выполняться так, как описано. Однако даже если код имеет разрешения, вызывающий его код приложения должен иметь те же разрешения, чтобы он мог работать. Если вызывающий код не имеет необходимых разрешений, в результате проверки стека управления доступом для кода возникает <xref:System.Security.SecurityException>.  
  
## Код приложения, не являющийся повторно используемым компонентом  
 Если код является частью приложения, которое не будет вызываться другим кодом, безопасность обеспечивается достаточно просто, и специальное кодирование может не понадобиться. Однако помните, что вредоносный код может вызвать ваш код. Хотя управление доступом для кода может предотвратить доступ вредоносного кода к ресурсам, такой код все еще может считывать значения полей или свойств, которые могут содержать конфиденциальные сведения.  
  
 Кроме того, если код принимает ввод пользователя из Интернета или других ненадежных источников, будьте осторожны, чтобы не были введены вредоносные данные.  
  
## Реализация управляемой оболочки для машинного кода  
 Обычно в этом сценарии некоторые полезные функции реализуются в машинном коде, который требуется сделать доступным для управляемого кода. Управляемые оболочки легко создаются с помощью вызова неуправляемого кода или COM\-взаимодействия. Однако если это сделать, для успешного выполнения вызывающим ваши оболочки объектам необходимо предоставить права на неуправляемый код. Согласно политике по умолчанию это означает, что код, загруженный из интрасети или Интернета, не будет работать с оболочками.  
  
 Вместо предоставления всем приложениям, использующим эти оболочки, прав на неуправляемый код лучше дать такие права только коду оболочки. Если эта базовая функциональность не предоставляет никакие ресурсы и реализация также безопасна, оболочке достаточно просто объявить свои права, что позволяет любому коду вызывать ее. При использовании ресурсов написание безопасного кода должно быть таким же, как в случае кода библиотеки, описанного в следующем разделе. Поскольку оболочка потенциально предоставляет вызывающим объектам доступ к этим ресурсам, необходима тщательная проверка безопасности машинного кода, за которую отвечает оболочка.  
  
## Код библиотеки, предоставляющий защищенные ресурсы  
 Это самый мощный и поэтому потенциально опасный \(при неправильном использовании\) подход к написанию безопасного кода: библиотека служит как интерфейс для другого кода для доступа к определенным ресурсам, которые иначе недоступны, так же, как классы .NET Framework обеспечивают разрешения для ресурсов, которые они используют. При предоставлении доступа к ресурсу код должен сначала запросить соответствующее разрешение на ресурс \(т. е. он должен выполнить проверку безопасности\), а затем объявить свои права на выполнение текущей операции.  
  
## Связанные разделы  
  
|Заголовок|Описание|  
|---------------|--------------|  
|[How to: Run Partially Trusted Code in a Sandbox](../../../docs/framework/misc/how-to-run-partially-trusted-code-in-a-sandbox.md)|Объяснение, как запускать частично доверенное приложение в ограниченной среде безопасности, которая ограничивает права доступа, предоставленные коду.|  
|[Securing State Data](../../../docs/standard/security/securing-state-data.md)|Описание порядка защиты закрытых членов.|  
|[Securing Method Access](../../../docs/framework/misc/securing-method-access.md)|Описание порядка защиты методов от их вызова частично доверенным кодом.|  
|[Securing Wrapper Code](../../../docs/framework/misc/securing-wrapper-code.md)|Вопросы безопасности кода, являющегося оболочкой другого кода.|  
|[Security and Public Read\-only Array Fields](../../../docs/framework/misc/security-and-public-read-only-array-fields.md)|Вопросы безопасности кода, использующего общедоступные массивы только для чтения, обнаруженные в библиотеках .NET Framework.|  
|[Securing Exception Handling](../../../docs/framework/misc/securing-exception-handling.md)|Вопросы безопасности для обработки исключений.|  
|[Security and User Input](../../../docs/standard/security/security-and-user-input.md)|Вопросы безопасности для приложений, которые принимают пользовательский ввод.|  
|[Security and Remoting Considerations](../../../docs/framework/misc/security-and-remoting-considerations.md)|Вопросы безопасности для приложений, взаимодействующих в доменах приложений.|  
|[Security and Serialization](../../../docs/framework/misc/security-and-serialization.md)|Вопросы безопасности при сериализации объектов.|  
|[Security and Race Conditions](../../../docs/standard/security/security-and-race-conditions.md)|Описывается, как избежать состояний соперничества в коде.|  
|[Security and On\-the\-Fly Code Generation](../../../docs/standard/security/security-and-on-the-fly-code-generation.md)|Вопросы безопасности для приложений, создающих динамический код.|  
|[Security and Setup Issues](../Topic/Security%20and%20Setup%20Issues.md)|Рекомендации по тестированию и настройке приложения.|  
|[Code Access Security](../../../docs/framework/misc/code-access-security.md)|Подробное описание управления доступом для кода в .NET Framework и инструкции по его использованию в коде.|  
|[Role\-Based Security](../../../docs/standard/security/role-based-security.md)|Подробное описание безопасности на основе ролей в .NET Framework и инструкции по ее использованию в коде.|