---
title: NuGet и библиотеки .NET
description: Практические рекомендации по упаковке библиотек .NET с помощью NuGet.
author: jamesnk
ms.author: mairaw
ms.date: 10/02/2018
ms.openlocfilehash: 479d1786c232ef1f843877169954e847453681c9
ms.sourcegitcommit: c93fd5139f9efcf6db514e3474301738a6d1d649
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/27/2018
ms.locfileid: "50185631"
---
# <a name="nuget"></a>NuGet

NuGet — это диспетчер пакетов для экосистемы .NET, который используется разработчиками как основное средство для поиска и получения библиотек .NET с открытым кодом. Бесплатная служба [NuGet.org](https://www.nuget.org/), предоставляемая корпорацией Майкрософт для размещения пакетов NuGet, является основным узлом для общедоступных пакетов NuGet. Также поддерживается публикация в пользовательских службах NuGet типа [MyGet](https://www.myget.org/) и [Azure Artifacts](https://azure.microsoft.com/services/devops/artifacts/).

![NuGet](./media/nuget/nuget-logo.png "NuGet")

## <a name="create-a-nuget-package"></a>Создание пакета NuGet

Пакет NuGet (`*.nupkg`) — это ZIP-файл со сборками .NET и связанными метаданными.

Пакет NuGet можно создать двумя способами. Мы рекомендуем использовать более новый подход — создавать пакет из проекта в стиле SDK (это файл проекта, содержимое которого начинается с `<Project Sdk="Microsoft.NET.Sdk">`). Сборки и целевые объекты автоматически добавляются в пакет, а метаданные, например имя пакета и номер версии, — в файл MSBuild. Компиляция с помощью команды [`dotnet pack`](../../core/tools/dotnet-pack.md) создает файл `*.nupkg`, а не сборки.

```xml
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFramework>netstandard2.0</TargetFramework>
    <AssemblyName>Contoso.Api</AssemblyName>
    <PackageVersion>1.1.0</PackageVersion>
    <Authors>John Doe</Authors>
  </PropertyGroup>
</Project>
```

Более старый способ создания пакета NuGet — это файл `*.nuspec` и средство командной строки `nuget.exe`. Файл с расширением .nuspec предоставляет функции управления, но указывать сборки и целевые объекты для включения в пакет NuGet нужно внимательно. Здесь очень легко допустить ошибку или забыть обновить файл .nuspec после внесения изменений. Важное преимущество файла .nuspec заключается в том, что он позволяет создать пакет NuGet для платформы, которая еще не поддерживает файлы проектов в стиле SDK.

**✔️ ДОПУСТИМО.** Вы можете использовать файл проекта в стиле SDK для создания пакета NuGet.

**✔️ ДОПУСТИМО.** Вы можете настроить SourceLink, чтобы добавить метаданные системы управления версиями в сборки и пакет NuGet.

## <a name="package-dependencies"></a>Зависимости пакета

См. сведения о [зависимостях пакета NuGet](./dependencies.md).

## <a name="important-nuget-package-metadata"></a>Важные метаданные пакета NuGet

Пакет NuGet поддерживает многие [свойства метаданных](/nuget/reference/nuspec). В следующей таблице собраны основные метаданные, которые должен предоставить каждый проект с открытым кодом.

| Имя свойства MSBuild              | Имя Nuspec              | Описание:  |
| ---------------------------------- | ------------------------ | ------------ |
| `PackageId`                        | `id`                       | Идентификатор пакета. Можно зарезервировать префикс из идентификатора, если он удовлетворяет [критериям](/nuget/reference/id-prefix-reservation). |
| `PackageVersion`                   | `version`                  | Версия пакета NuGet. См. сведения о [версии пакета NuGet](./versioning.md#nuget-package-version).             |
| `Title`                            | `title`                    | Понятный заголовок пакета. По умолчанию используется значение `PackageId`.             |
| `Description`                      | `description`              | Подробное описание пакета для отображения в пользовательском интерфейсе.             |
| `Authors`                          | `authors`                  | Разделенный запятыми список авторов пакета, обозначенных именами профилей на сайте nuget.org.             |
| `PackageTags`                      | `tags`                     | Разделенный пробелами список тегов и ключевых слов для описания пакета. Теги используются при поиске пакетов.             |
| `PackageIconUrl`                   | `iconUrl`                  | URL-адрес изображения, которое будет использоваться как значок для пакета. Это должен быть URL-адрес (HTTPS), указывающий на изображение размером 64×64 с прозрачным фоном.             |
| `PackageProjectUrl`                | `projectUrl`               | URL-адрес домашней страницы или репозитория проекта.             |
| `PackageLicenseUrl`                | `licenseUrl`               | URL-адрес текста лицензии проекта. Этот URL-адрес может указывать на файл `LICENSE` в системе управления версиями.             |

**✔️ ДОПУСТИМО.** Вы можете выбрать имя пакета NuGet с префиксом, который соответствует [критериям](/nuget/reference/id-prefix-reservation) для резервирования префикса NuGet.

**✔️ ДОПУСТИМО.** Вы можете использовать файл `LICENSE` в системе управления версиями в качестве `LicenseUrl`. Например, [LICENSE.md](https://github.com/JamesNK/Newtonsoft.Json/blob/c4af75c8e91ca0d75aa6c335e8c106780c4f7712/LICENSE.md).

> [!IMPORTANT]
> Проект без лицензии по умолчанию получает статус [монопольного авторского права](https://choosealicense.com/no-permission/), то есть не может использоваться другими пользователями.

**✔️ РЕКОМЕНДУЕТСЯ.**  Используйте атрибут href для определения HTTPS-ссылки, указывающей на значок пакета.

> NuGet.org и другие аналогичные сайты работают с поддержкой HTTPS, поэтому при отображении изображения с другим протоколом появится предупреждение о смешанном типе содержимого.

**✔️ РЕКОМЕНДУЕТСЯ.** Используйте для значка пакета изображение размером 64×64 с прозрачным фоном, чтобы обеспечить оптимальную видимость.

## <a name="pre-release-packages"></a>Пакеты предварительного выпуска

Пакеты NuGet с суффиксом версии получают статус [предварительной версии](/nuget/create-packages/prerelease-packages). По умолчанию в пользовательском интерфейсе диспетчера пакетов NuGet отображаются только стабильные выпуски, если пользователь не согласился использовать пакеты предварительной версии. Благодаря такой политике пакеты предварительной версии предоставляются для тестирования ограниченному числу пользователей.

```xml
<PackageVersion>1.0.1-beta1</PackageVersion>
```

> [!NOTE]
> В пакетах стабильных выпусков нельзя указывать зависимости от пакетов предварительной версии. В таком случае переведите используемый пакет в режим предварительной версии или укажите зависимость от более ранней стабильной версии.

![Зависимость пакета NuGet в предварительной версии](./media/nuget/nuget-prerelease-package.png "NuGet pre-release package dependency")

**✔️ РЕКОМЕНДУЕТСЯ.** Публикуйте пакет в режиме предварительной версии для тестирования, предварительного просмотра или экспериментов.

**✔️ РЕКОМЕНДУЕТСЯ.** Публикуйте стабильный выпуск пакета, когда он будет полностью готов, чтобы другие стабильные могли содержать ссылки на него.

## <a name="symbol-packages"></a>Пакеты символов

Файлы символов (`*.pdb`) создаются компилятором платформы .NET одновременно со сборками. Файлы символов сопоставляют расположения выполнения с исходным кодом, что позволяет выполнить пошаговое выполнение с использованием отладчика. NuGet позволяет [создавать отдельные пакеты символов](/nuget/create-packages/symbol-packages) с файлами символов одновременно с основным пакетом сборок для .NET. Предполагается, что пакеты символов будут размещаться на сервере символов и скачиваться по требованию только специальными средствами, такими как Visual Studio.

Сейчас самая популярная платформа для символов [SymbolSource](http://www.symbolsource.org/) не поддерживает новый формат [переносимых файлов символов](https://github.com/dotnet/core/blob/master/Documentation/diagnostics/portable_pdb.md) (`*.pdb`), которые создаются из проектов в стиле SDK, и пакеты символов использовать нельзя. Пока не появится рекомендуемый узел для размещения пакетов символов, можно внедрять файлы символов в основной пакет NuGet. Если вы создаете пакет NuGet из проекта в стиле SDK, файлы символов в него можно внедрить с помощью свойства `AllowedOutputExtensionsInPackageBuildOutputFolder`: 

```xml
<Project Sdk="Microsoft.NET.Sdk">
 <PropertyGroup>
    <!-- Include symbol files (*.pdb) in the built .nupkg -->
    <AllowedOutputExtensionsInPackageBuildOutputFolder>$(AllowedOutputExtensionsInPackageBuildOutputFolder);.pdb</AllowedOutputExtensionsInPackageBuildOutputFolder>
  </PropertyGroup>
</Project>
```

**✔️ ДОПУСТИМО.** Вы можете внедрять файлы символов в основной пакет NuGet.

**❌ НЕЖЕЛАТЕЛЬНО.** Не создавайте пакет символов с файлами символов.

>[!div class="step-by-step"]
[Назад](./strong-naming.md)
[Вперед](./dependencies.md)
