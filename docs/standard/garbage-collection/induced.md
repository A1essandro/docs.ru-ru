---
title: "Индуцированные коллекции | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-standard"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "сборка мусора, принудительная"
ms.assetid: 019008fe-4708-4e65-bebf-04fd9941e149
caps.latest.revision: 20
author: "rpetrusha"
ms.author: "ronpet"
manager: "wpickett"
caps.handback.revision: 20
---
# Индуцированные коллекции
В большинстве случаев сборщик мусора может определить самое подходящее время для выполнения сборки мусора, поэтому следует предоставить ему возможность работать независимо.  В очень редких случаях принудительная сборка мусора может улучшить производительность приложения.  В этих случаях можно вызвать сборку мусора с помощью метода <xref:System.GC.Collect%2A?displayProperty=fullName>, чтобы принудительно начать сборку мусора.  
  
 Используйте метод <xref:System.GC.Collect%2A?displayProperty=fullName>, если появилось заметное уменьшение в объеме памяти, используемом в определенной точке кода приложения.  Например, если приложение использует сложное диалоговое окно, которое содержит несколько элементов управления, вызов <xref:System.GC.Collect%2A> при закрытом диалоговом окне может улучшить производительность посредством немедленной очистки памяти, используемой диалоговым окном.  Убедитесь, что приложение не запускает сборку мусора слишком часто, потому что это может уменьшить производительность, если сборщик мусора непродуктивно пытается удалить объекты в не самое удачное время.  Можно передать значение перечисления <xref:System.GCCollectionMode?displayProperty=fullName> в метод <xref:System.GC.Collect%2A>, чтобы осуществлять сбор только в случае его эффективности, как описано в следующем разделе.  
  
## Режим сборки мусора  
 Можно использовать одну из перегрузок метода <xref:System.GC.Collect%2A?displayProperty=fullName>, которая включает значение <xref:System.GCCollectionMode>, для указания поведения принудительной сборки, как описано ниже.  
  
|Значение `GCCollectionMode`|Описание|  
|---------------------------------|--------------|  
|<xref:System.GCCollectionMode>|Использует настройку сборки мусора по умолчанию для выполняемой версии платформы .NET Framework.|  
|<xref:System.GCCollectionMode>|Вызывает немедленное выполнение принудительной сборки мусора.  Это эквивалентно вызову перегрузки <xref:System.GC.Collect?displayProperty=fullName>.  В результате образуется коллекция полной блокировки всех поколений.<br /><br /> Можно также уменьшить размер большой кучи объектов, присвоив свойству <xref:System.Runtime.GCSettings.LargeObjectHeapCompactionMode%2A?displayProperty=fullName> значение <xref:System.Runtime.GCLargeObjectHeapCompactionMode?displayProperty=fullName> до принудительного запуска немедленной блокирующей полной сборки мусора.|  
|<xref:System.GCCollectionMode>|Позволяет сборщику мусора определить, является ли текущий момент оптимальным для освобождения объектов.<br /><br /> Сборщик мусора может определить, что сборка мусора будет недостаточно продуктивна, в этом случае он возвратится без удаления объектов.|  
  
## Фоновые или блокирующие сборки  
 Можно вызвать перегруженный метод <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29?displayProperty=fullName>, чтобы указать, является ли индуцированная коллекция блокирующей или нет.  Тип выполняемого методом `mode` сравнения зависит от значения параметра `blocking`.  `mode` является членом перечисления <xref:System.GCCollectionMode>, а `blocking` является значением типа <xref:System.Boolean>.  В следующей таблице приводится сводка по взаимодействию с аргументами `mode` и `blocking`.  
  
|`mode`|`blocking` \= `true`|`blocking` \= `false`|  
|------------|--------------------------|---------------------------|  
|<xref:System.GCCollectionMode> или <xref:System.GCCollectionMode>|Заблокированная коллекция выполняется, как только это станет возможным.  Если фоновая сборка выполняется и поколение равно 0 или 1, метод <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> немедленно активирует блокирующую сборку и возвращает управление по завершении сборки.  Если фоновая сборка выполняется и параметр `generation` равен 2, метод дожидается завершения фоновой сборки, активирует блокирующую сборку поколения 2 и возвращает управление.|Коллекция выполняется, как только это станет возможным.  Метод <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> запрашивает фоновую коллекцию, однако это не гарантированно. В зависимости от обстоятельств блокирующая коллекция может выполняться.  Если фоновая сборка уже выполняется, метод возвращает управление немедленно.|  
|<xref:System.GCCollectionMode>|Заблокированная коллекция может быть выполнена в зависимости от состояния сборщика мусора и параметра `generation`.  Сборщик мусора пытается обеспечить оптимальную производительность.|Коллекция может быть выполнена в зависимости от состояния сборщика мусора.  Метод <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%2CSystem.Boolean%29> запрашивает фоновую коллекцию, однако это не гарантированно. В зависимости от обстоятельств блокирующая коллекция может выполняться.  Сборщик мусора пытается обеспечить оптимальную производительность.  Если фоновая сборка уже выполняется, метод возвращает управление немедленно.|  
  
## См. также  
 [Latency Modes](../../../docs/standard/garbage-collection/latency.md)   
 [Garbage Collection](../../../docs/standard/garbage-collection/index.md)