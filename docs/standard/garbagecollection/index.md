---
title: "Сборка мусора"
description: "Сборка мусора"
keywords: .NET, .NET Core
author: richlander
manager: wpickett
ms.date: 06/20/2016
ms.topic: article
ms.prod: .net-core
ms.technology: .net-core-technologies
ms.devlang: dotnet
ms.assetid: db39a0f5-e363-490f-a7e6-adb9a6ff2a8c
translationtype: Human Translation
ms.sourcegitcommit: 213ce098bcc2b5e31c55e759d895254d5ca33caa
ms.openlocfilehash: 2406a03fa64eb02c70f05c1e8240e4bc5981e98d

---

# <a name="garbage-collection"></a>Сборка мусора

Сборщик мусора является одним из самых важных компонентов платформы управляемого кода .NET. Он управляет выделением и освобождением памяти для приложения. Вам не нужно беспокоиться о том, как выделить и освободить память или как организовать управление сроком жизни объектов, использующих эту память. Выделение памяти выполняется всякий раз, когда вы _создаете_ объект или упаковываете тип значения. Выделение обычно выполняется очень быстро. Когда не хватает памяти для выделения объекта, сборщик мусора должен собрать мусор в памяти и избавиться от него, чтобы сделать память доступной для нового выделения. Этот процесс называется "сборка мусора".

Сборщик мусора выполняет функции автоматического диспетчера памяти. Это предоставляет следующие преимущества:

*   Позволяет разрабатывать приложение без необходимости освобождать память.
*   Эффективно выделяет память для объектов в управляемой куче.
*   Уничтожает объекты, которые больше не используются, очищает их память и сохраняет память доступной для будущих распределений. Содержимое создаваемых управляемых объектов автоматически оказывается очищенным, чтобы их конструкторам не было нужно инициализировать каждое поле данных.
*   Обеспечивает безопасность памяти, гарантируя, что объект не сможет использовать содержимое другого объекта.

В .NET существует 3 поколения сборщиков мусора. У каждого поколения имеется своя собственная куча, используемая для хранения выделенных объектов. Основной принцип организации объектов заключается в том, что одни из них долгоживущие, а другие — короткоживущие. Поколение 0 — в нем происходит первоначальное выделение объектов. Объекты обычно не доживают до следующего поколения, поскольку они больше не используются (вне области действия). Сбор объектов поколения 0 выполняется быстро ввиду небольшого размера кучи этого поколения. Поколение 1 — это действительно второй шанс объектов на выживание. Короткоживущие объекты, выжившие после сборки мусора поколения 0 (зачастую случайно), помещаются в поколение 1\.. Сбор объектов поколения 1 осуществляется достаточно быстро, поскольку размер связанной с ним кучи также небольшой. Причиной того, что первые две кучи остаются небольшими, является то, что объекты либо собираются, либо переходят в кучу следующего поколения. Generation 2 — это поколение содержит долгоживущие объекты. Куча поколения 2 может достигать очень больших размеров, так как объекты, содержащиеся в ней, хранятся длительное время. Кроме того, отсутствует куча поколения 3 для дальнейшего перемещения объектов.

В сборщике мусора также предусмотрена дополнительная куча для больших объектов. Она зарезервирована для объектов, размер которых составляет 85 000 байт и более. Примером такого объекта может служить массив байтов (Byte[]), содержащий 85 000 элементов. Большие объекты не выделяются в кучи поколений. Вместо этого они размещаются непосредственно в куче больших объектов.

Для программ, выполняющихся длительное время или работающих с большими объемами данных, сбор объектов поколения 2 и объектов в куче больших объектов может занять достаточно длительное время. Для крупных серверных программ размер кучи может достигать нескольких десятков гигабайт. Сборщик мусора использует различные методы для сокращения времени, чтобы исключить блокирование выполнения программы. Основной подход заключается в том, чтобы сбор мусора по возможности выполнялся в фоновом потоке, а также таким образом, чтобы это не влияло на выполнение программы. В сборщике мусора также предусмотрен ряд способов, позволяющих разработчикам управлять его поведением, что может оказаться полезным для повышения производительности.

## <a name="related-topics"></a>Связанные разделы

Заголовок | Описание
----- | ----------- 
[Автоматическое управление памятью и сборка мусора](gc.md) | Основные понятия, связанные с управлению памятью в .NET.
[Основы сборки мусора](fundamentals.md) | Описание работы сборки мусора, выделения объектов в управляемой куче и других базовых понятий.
[Принудительная сборка](induced.md) | Описание выполнения сборки мусора.
[Режимы задержки](latency.md) | Описание режимов, которые определяют степень вмешательства сборщика мусора.
[Слабые ссылки](weak-references.md) | Описание функциональных возможностей, которые позволяют сборщику мусора обрабатывать объект, разрешая при этом приложению получать доступ к этому объекту.
 
## <a name="reference"></a>Ссылка

[System.GC](xref:System.GC)

[System.GCCollectionMode](xref:System.GCCollectionMode)

[System.Runtime.GCLatencyMode](xref:System.Runtime.GCLatencyMode)

[System.Runtime.GCSettings](xref:System.Runtime.GCSettings)

[GCSettings.LargeObjectHeapCompactionMode](xref:System.Runtime.GCSettings.LargeObjectHeapCompactionMode)

[Object.Finalize](xref:System.Object.Finalize)

[System.IDisposable](xref:System.IDisposable)

## <a name="see-also"></a>См. также

[Очистка неуправляемых ресурсов](unmanaged.md)




<!--HONumber=Nov16_HO1-->


