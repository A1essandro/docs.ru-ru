---
title: "Оркестрация микрослужбами и несколькими контейнера приложений высокий уровень масштабируемости и доступности"
description: "Архитектура Микрослужбами .NET для приложений .NET в контейнерах | Оркестрация микрослужбами и несколькими контейнера приложений высокий уровень масштабируемости и доступности"
keywords: "Docker, микрослужбы, ASP.NET, контейнер"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 10/18/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: ec33901a0ddc9e5b58263440b0e4399e687c6904
ms.sourcegitcommit: c2e216692ef7576a213ae16af2377cd98d1a67fa
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/22/2017
---
# <a name="orchestrating-microservices-and-multi-container-applications-for-high-scalability-and-availability"></a>Оркестрация микрослужбами и несколькими контейнера приложений высокий уровень масштабируемости и доступности

С помощью orchestrators готовый приложений важно в том случае, если приложение основана на микрослужбами или просто разнесены по нескольким контейнерам. Ранее, представленном в подход на основе микрослужбу, каждый микрослужбу владеет его модели и данные, чтобы он будет автономной для разработки и развертывания точки зрения. Но даже если у вас есть более традиционным приложения, состоящего из нескольких служб (например, SOA), вы также будете иметь несколько контейнеров или служб, образующих одной бизнес-приложений, необходимо развернуть как распределенная система. Эти виды систем сложны для горизонтального масштабирования и управления ими; Таким образом абсолютной необходимости orchestrator, чтобы приложение, в рабочей среде и масштабируемость нескольких контейнера.

На рисунке 4-23 иллюстрирует развертывание на кластеры, состоящие из нескольких микрослужбами (контейнеров) приложения.

![](./media/image23.PNG)

**На рисунке 4-23**. Кластер состоит из контейнеров

Он будет выглядеть логического подхода. Но, как вы балансировки нагрузки обработки и маршрутизации оркестрация эти состоят приложений?

Обычный подсистемы Docker в одном узлах Docker потребностям управление экземплярами одного образа на одном узле, но не хватает, когда дело доходит до управление несколько контейнеров, которые развернуты на нескольких узлах для более сложных распределенных приложений. В большинстве случаев требуется платформа управления, который будет автоматически запустить контейнеры масштабирования контейнеры с несколькими экземплярами на изображение, приостанавливать их или отключать их при необходимости и в идеале управляют как при доступе к ресурсам сети и данных хранилище.

Выходит за пределы управления индивидуальных контейнеров или очень простой составных приложений, а также Постепенная больших корпоративных приложений с микрослужбами, необходимо включить orchestration и кластеризации платформы.

С архитектуры и разработки точки зрения при построении крупных предприятий, состоящие из приложений на основе микрослужбами важно понимать следующие платформы и продукты, которые поддерживают сложные сценарии:

**Кластеры и orchestrators**. Когда необходимо получить масштабировании приложений на множестве узлов Docker, как при больших микрослужбу приложением, крайне важно иметь возможность управлять все узлы в одном кластере посредством абстрагирования сложности базовой платформы. Это кластеров контейнера и orchestrators предоставляют. Примеры orchestrators: Azure Service Fabric, Kubernetes, помощью Docker Swarm и Mesosphere DC/OS. Последние три orchestrators открытым исходным кодом, доступны в Azure через службы контейнера Azure.

**Планировщики**. *Планирование* означает возможность администратор может запустить контейнеры в кластере, поэтому они также предоставляют пользовательский Интерфейс. Планировщик кластера имеет несколько функций: для эффективного использования ресурсов кластера, чтобы задать ограничения, предоставленный пользователем, эффективно контейнеры балансировки нагрузки между узлами или узлы и быть надежными от ошибок, обеспечивая высокий доступность.

Основные понятия кластера и планировщик тесно связаны, поэтому продукты, предоставляемые различными поставщиками, часто содержат оба набора возможностей. Ниже перечислены наиболее важные платформы и программного обеспечения варианты выбора для кластеров и планировщики. Эти orchestrators обычно предоставляются в общедоступных облаках, таких как Azure.

## <a name="software-platforms-for-container-clustering-orchestration-and-scheduling"></a>Программное обеспечение платформы для контейнера кластеризации, управление и планирование

Kubernetes

![https://PBS.twimg.com/Media/BT\_pEfqCAAAiVyz.png](./media/image24.png)

> Kubernetes — это продукт с открытым исходным кодом, предоставляет функциональные возможности, в диапазоне от инфраструктуры кластера и контейнера, по возможности, управляя операциями. Он позволяет автоматизировать развертывание, масштабирование и операций контейнеров приложения ко всем кластерам узлов.
>
> Kubernetes предоставляет ориентированные на контейнер инфраструктуру, которая группирует контейнеров приложений в логические устройства для упрощения управления и обнаружения.
>
> Kubernetes зрелой в Linux, менее зрелой в Windows.

Docker группу мелких объектов

![http://rancher.com/WP-Content/Themes/rancher-2016/Assets/Images/swarm.PNG?v=2016-07-10-AM](./media/image25.png)

> Docker группу мелких объектов позволяет кластера и запланировать контейнеры Docker. С помощью группу мелких объектов, можно включить пул узлах Docker в один, виртуальный узел Docker. Клиенты могут выполнять запросы API на скапливаются так же, как они выполнять на узлах, это означает, что группу мелких объектов позволяет с легкостью приложениям масштабироваться с несколькими узлами.
>
> Docker группу мелких объектов — это продукт из Docker компании.
>
> Docker v1.12 или более поздней версии может выполнять собственный и встроенные скапливаются режим.

Mesosphere DC/OS

![https://mesosphere.com/WP-Content/uploads/2016/04/Logo-Horizontal-styled.PNG](./media/image26.png)

> Mesosphere DC/OS предприятия (с учетом Apache Mesos) — это платформа готов для выполнения контейнеров и распределенных приложений.
>
> Контроллер домена/OS осуществляется посредством абстрагирования коллекцию ресурсов, доступных в кластере и предоставление доступа к этим ресурсам компоненты, созданные на основе. Как планировщик, интегрированные с контроллера домена/OS обычно используется Marathon.
>
> Контроллер домена/OS зрелой в Linux, менее зрелой в Windows.

Azure Service Fabric

![https://Azure.Microsoft.com/svghandler/Service-Fabric?Width=600&Height=315](./media/image27.png)

> [Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-overview) — это платформа микрослужбами Microsoft для создания приложений. Это [orchestrator](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-resource-manager-introduction) из службы и создает кластеры компьютеров. Service Fabric можно развернуть службы, как контейнеры, или как обычный процессы. Это возможно даже набора служб в процессах со службами в контейнерах одного приложения и кластера.
>
> Service Fabric предоставляет дополнительные и необязательные конкретные [Service Fabric модели программирования ](https://docs.microsoft.com/azure/service-fabric/service-fabric-choose-framework) как [служб с отслеживанием состояния](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction) и [службы Reliable Actor](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-actors-introduction).
>
> Service Fabric для старшего в Windows (годы развивается в Windows), меньше зрелой в Linux. 
> Контейнеры Linux и Windows, поддерживаются в Service Fabric с момента 2017 г.

## <a name="using-container-based-orchestrators-in-microsoft-azure"></a>С помощью orchestrators на основе контейнера в Microsoft Azure

Несколько поставщиков облачных обеспечивают поддержку контейнеры Docker, а также кластеры Docker и поддержки orchestration, включая Microsoft Azure, контейнер службы Amazon EC2 и подсистема контейнеров Google. Microsoft Azure поддерживает Docker кластера и orchestrator через службу контейнера Azure (ACS), как описано в следующем разделе.

Другой вариант — использовать Microsoft Azure Service Fabric (микрослужбами платформы), поддерживающий на основе Linux и Windows контейнеры Docker. Service Fabric работает на Azure или любые другие облака, а также [локальной](https://docs.microsoft.com/azure/service-fabric/service-fabric-deploy-anywhere).

## <a name="using-azure-container-service"></a>С помощью службы Azure контейнера

Кластер с Docker пулов на нескольких узлах Docker и предоставляет их как один виртуальный узел Docker, чтобы можно было развернуть несколько контейнеров в кластер. Кластер будет обрабатывать сложные управления всё, как масштабируемость, работоспособности и т. д. Рис. 4-24 представляет сопоставление для контейнера службы Azure (ACS) в кластере Docker для составных приложений.

ACS предоставляет способ для упрощения создания, настройки и управления, кластера виртуальных машин, настроенных для запуска приложений в контейнерах. С помощью оптимизированного конфигурации популярных средств планирования и orchestration открытым исходным кодом, ACS позволяет использовать существующие навыки или отрисовки в теле большое и возрастающее опытом сообщества для развертывания и управления контейнера-приложениям на базе Microsoft Azure .

Служба Azure контейнера оптимизирует конфигурации популярных Docker кластеризации открытым исходным кодом и технологии специально для Azure. Вы получаете открытое решение, который обеспечивает совместимость для вашего контейнеров и конфигурации приложения. Выберите размер, количество узлов и средств orchestrator и контейнер службы обрабатывает все остальное.

![](./media/image28.png)

**Рис. 4-24**. Кластеризация вариантов в контейнере службы Azure

ACS использует образы Docker, чтобы обеспечить полную переносимость контейнеры вашего приложения. Он поддерживает выбор orchestration с открытым исходным кодом платформы, такие как контроллер домена/OS (на платформе Apache Mesos), Kubernetes (созданного с помощью Google) и помощью Docker Swarm, чтобы убедиться, что эти приложения могут масштабироваться до тысяч или даже десятков тысяч контейнеров.

Служба контейнера Azure позволяет воспользоваться преимуществами возможности корпоративного уровня Azure одновременно сохраняя переносимость приложения, включая orchestration уровнями.

![](./media/image29.png)

**На рисунке 4-25**. Orchestrators в ACS

Как показано на рисунке 4-25, контейнера службы Azure — просто инфраструктуры Azure для развертывания контроллера домена/OS, Kubernetes или помощью Docker Swarm, но ACS не реализует все дополнительные orchestrator. Таким образом ACS не orchestrator таким образом, только это инфраструктура, которая использует существующий orchestrators открытым исходным кодом для контейнеров.

С точки зрения использования службы Azure контейнера предназначена для предоставления среды размещения контейнера с помощью популярных средств с открытым исходным кодом и технологий. Для этого он предоставляет стандартные конечные точки API для вашей выбранной orchestrator. Используя эти конечные точки, может использовать программное обеспечение, которое может взаимодействовать с этими конечными точками. Например в случае с помощью Docker Swarm конечной точки, можно использовать интерфейс командной строки Docker (CLI). Для контроллера домена/OS можно использовать контроллер домена/OS CLI.

### <a name="getting-started-with-azure-container-service"></a>Приступая к работе со службой контейнера Azure 

Чтобы начать использование контейнера службы Azure, вы развернуть кластер контейнера службы Azure на портале Azure с помощью шаблона Azure Resource Manager или [CLI](https://docs.microsoft.com/cli/azure/install-azure-cli). Доступные шаблоны включают [помощью Docker Swarm](https://github.com/Azure/azure-quickstart-templates/tree/master/101-acs-swarm), [Kubernetes](https://github.com/Azure/azure-quickstart-templates/tree/master/101-acs-kubernetes), и [DC/OS](https://github.com/Azure/azure-quickstart-templates/tree/master/101-acs-dcos). Можно изменить шаблоны краткое руководство для включения дополнительных или дополнительные конфигурации Azure. Дополнительные сведения о развертывании кластер контейнера службы Azure в разделе [развертывание кластера службы контейнера Azure](https://docs.microsoft.com/azure/container-service/container-service-deployment) на веб-сайте Azure.

Нет без сборов для любого программного обеспечения, установленного по умолчанию в рамках ACS. Все параметры по умолчанию, реализуются с программным обеспечением с открытым исходным кодом.

ACS в настоящее время доступна для ряда стандартных A, D, доменных служб Active Directory, G и GS виртуальных машин Linux в Azure. Плата взимается только для выбранных экземпляров вычислений, а также другие базовой инфраструктуры ресурсы, используемые, такие как хранилища и сети. Отсутствуют добавочное накладные расходы для самого ACS.

## <a name="additional-resources"></a>Дополнительные ресурсы

-   **Введение в контейнер Docker размещения решений с помощью службы Azure контейнер**
    [*https://docs.microsoft.com/azure/container-service/container-service-intro*](https://docs.microsoft.com/azure/container-service/container-service-intro)

-   **Общие сведения о docker группу мелких объектов**
    [*https://docs.docker.com/swarm/overview/*](https://docs.docker.com/swarm/overview/)

-   **Общие сведения о режиме скапливаются**
    [*https://docs.docker.com/engine/swarm/*](https://docs.docker.com/engine/swarm/)

-   **Обзор DC/OS mesosphere**
    [*https://docs.mesosphere.com/1.7/overview/*](https://docs.mesosphere.com/1.7/overview/)

-   **Kubernetes.** Официальный сайт. \
    [*http://kubernetes.IO/*](http://kubernetes.io/)


>[!div class="step-by-step"]
[Предыдущие] (отказоустойчивое высокой доступности microservices.md) [Далее] (с помощью azure-service-fabric.md)
