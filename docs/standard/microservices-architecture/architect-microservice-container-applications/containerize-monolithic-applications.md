---
title: "Containerizing монолитные приложения"
description: "Архитектура Микрослужбами .NET для приложений .NET в контейнерах | Containerizing монолитные приложения"
keywords: "Docker, микрослужбы, ASP.NET, контейнер"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: 11e2c24403b9b61584e424696c844e00e5d34b03
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2017
---
# <a name="containerizing-monolithic-applications"></a>Containerizing монолитные приложения

Можно создавать один monolithically развернутого веб-приложения или службы и разверните его как контейнер. Само приложение не может быть внутренне монолитные, но структурированные в виде нескольких библиотек, компонентов или даже слои (уровня приложения, уровня домена, уровень доступа к данным, и т. д.). Извне, однако это один контейнер — один процесс, одного веб-приложения или одной службы.

Для управления этой модели, развернуть один контейнер для представления приложения. Для увеличения масштаба, просто добавьте дополнительные копии с балансировкой нагрузки на переднем плане. Простота поступает из управления одно развертывание в одном контейнере или виртуальной Машины.

![](./media/image1.png)

**Рис. 4-1**. Пример архитектуры объединенный контейнерного приложения

Может включать несколько компонентов, библиотеки или внутренней уровней в каждом контейнере, как показано на рисунке 4-1. Однако этот объединенный шаблон может конфликтовать с принципом контейнер «контейнер выполняет один и делает это в одном процессе», но может быть ОК в некоторых случаях.

Недостаток этого подхода становится очевидным, если приложение становится запрашивать ее для масштабирования. Если всего приложения можно масштабировать, это не действительно проблемы. Однако в большинстве случаев всего несколько частей приложения являются стягиванием точки, требующие масштабирование, пока другие компоненты находятся в используется реже.

Например в приложении обычно электронной коммерции, скорее всего необходимо масштабирование подсистемы сведения продукта, так как многие дополнительные клиенты просматривать продукты, чем их приобретение. Дополнительные клиенты использовать свою корзину не использовать конвейер оплаты. Меньшее количество клиентов, добавить комментарии или Просмотр истории покупок. И может быть лишь небольшое число сотрудников, которым требуется осуществлять управление содержимым и маркетинговых кампаний. При масштабировании монолитные конструкции, весь код для этих различных задач развертывается несколько раз и масштабом того же уровня.

Существует несколько способов для масштабирования приложения-горизонтальной копирование, разбиение разные области приложения и секционирования как бизнес-концепции или данных. Однако помимо проблемы масштабирования все компоненты, изменения к одному компоненту требуется полное повторное тестирование всего приложения и завершить повторное развертывание всех экземпляров.

Тем не менее объединенный подход является типичным, поскольку изначально проще, чем для микрослужбами подходов разработки приложения. Таким образом во многих организациях разрабатывать с помощью этого архитектурный подход. Хотя в некоторых организациях уже есть работающий достаточное количество результатов, другим пользователям, достигнуты ограничения. Во многих организациях предназначены свои приложения с помощью этой модели, так как средства и инфраструктура затрудняет слишком построение службы архитектур, ориентированных на (SOA) лет назад и отсутствует необходимость, пока его размер увеличивается.

С точки зрения инфраструктуры каждого сервера можно выполнять многие приложения, в том же узле и имеют допустимые доля эффективность использования ресурсов, как показано на рисунке 4-2.

![](./media/image2.png)

**Рис. 4-2**. Объединенный подход: размещать несколько приложений под управлением каждое приложение, работа в качестве контейнера

Монолитные приложений в Microsoft Azure можно развернуть с помощью выделенных виртуальных машин для каждого экземпляра. Кроме того, с помощью [набора масштабирования виртуальных Машин Azure](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), можно легко масштабировать виртуальных машин. [Служба приложений Azure](https://azure.microsoft.com/services/app-service/) можно также запускать монолитные приложения и легко масштабировать экземпляры без необходимости управления виртуальными машинами. С момента 2016 г. службы приложений Azure можно запустить отдельные экземпляры контейнеры Docker, упрощая развертывание.

Как в среде QA или ограниченной рабочей среде можно развернуть несколько Docker узлов виртуальных машин и распределения их с помощью балансировки Azure, как показано на рисунке 4-3. Это позволяет управлять с помощью подход более крупных фрагментов данных, так как все приложение размещается в одном контейнере.

![](./media/image3.png)

**Рис. 4-3**. Пример несколько узлов, вертикальное масштабирование приложения одного контейнера

Развертывание на различных узлах осуществляется с помощью традиционные методы. Можно было управлять узлами docker с помощью команды `docker run` или `docker-compose` выполнить вручную или с помощью автоматизации, такие как конвейеры непрерывной поставки (CD).

## <a name="deploying-a-monolithic-application-as-a-container"></a>Развертывание монолитные приложения как контейнер

Существуют преимущества при использовании контейнеров для управления развертываниями монолитные приложения. Масштабирование экземпляров контейнера гораздо быстрее и проще, чем развертывание дополнительных виртуальных машин. Даже при использовании набора масштабирования виртуальных Машин, виртуальные машины занять время запуска. При развертывании в качестве экземпляров традиционное приложение вместо контейнеры, настройки приложения осуществляется в рамках виртуальной машины, которой не идеальное решение.

Развертывание обновлений, как образы Docker гораздо быстрее и эффективно сети. Образы docker обычно начинается в секундах, что увеличивает развертываний. То закрытие экземпляр образа Docker можно так же легко, как выдача `docker stop` команды и обычно занимает менее чем за секунду.

Поскольку контейнеры являются неизменяемыми намеренно, необходимо никогда не беспокоиться о поврежденных виртуальных машин. Напротив скрипты обновления для виртуальной Машины может отложить с учетом некоторых определенной конфигурации или файл, оставшегося на диске.

Пока монолитные приложения могут использовать Docker, мы касаются только на преимущества. Дополнительные преимущества управления контейнерами берутся из развертывание с помощью orchestrators контейнера, в которых управление различных экземпляров и жизненным циклом каждый экземпляр контейнера. Разделить монолитные приложение в подсистемам, которые можно масштабировать, разработки и развертывания по отдельности представляет точку входа в область микрослужбами.

## <a name="publishing-a-single-container-based-application-to-azure-app-service"></a>Публикация одного контейнера на основе приложения в службе приложений Azure

Хотите ли вы получить проверку контейнера развертывания в Azure или когда приложение просто приложения-контейнера с одним службе приложений Azure предоставляет отличный способ предоставления масштабируемой одного контейнера на основе служб. С помощью службы приложения Azure является простым. Он обеспечивает значительные интеграцию с Git для упрощения использования вашего кода, построить его в Visual Studio и разверните его непосредственно в Azure.

![](./media/image4.png)

**Рис. 4-4**. Публикация приложения одного контейнера в службе приложений Azure из Visual Studio

При необходимости других возможностей, платформах и зависимости, которые не поддерживаются в службе приложений Azure, без Docker, приходилось подождать, пока команда Azure обновить эти зависимости в службе приложений. Или можно переключиться на других служб, таких как Azure Service Fabric, облачных служб Azure или даже виртуальных машин, где было дальнейшего управления и удалось установить необходимый компонент или framework для приложения.

Поддержка контейнера в Visual Studio 2017 г дает возможность включать любые необходимые в вашей среде приложения, как показано на рисунке 4-4. Так как она запущена в контейнере, если добавить зависимости в приложение, можно включить зависимость в образ файла Dockerfile или Docker.

Как также показано на рисунке 4-4 поток публикации помещает изображение через реестр контейнера. Это может быть Azure реестра контейнера (реестра закрыть к развертываниям в Azure и защищены учетные записи и группы Azure Active Directory) или любые другие реестра Docker, такие как центр Docker или в реестре локального.


>[!div class="step-by-step"]
[Предыдущие] (index.md) [Далее] (docker приложения состояние data.md)
