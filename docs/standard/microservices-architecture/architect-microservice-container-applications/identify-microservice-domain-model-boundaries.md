---
title: "Определение границ модель домена для каждого микрослужбу"
description: "Архитектура Микрослужбами .NET для приложений .NET в контейнерах | Определение границ модель домена для каждого микрослужбу"
keywords: "Docker, микрослужбы, ASP.NET, контейнер"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: 6fef11e5718706701abb29149c4c4a23ba39bde0
ms.sourcegitcommit: c2e216692ef7576a213ae16af2377cd98d1a67fa
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/22/2017
---
# <a name="identify-domain-model-boundaries-for-each-microservice"></a>Определения границ модель домена для каждого микрослужбу

При определении границ модели и размер для каждой микрослужбу предназначена не для того, чтобы перейти на самом детальном разделении возможно, несмотря на то, что следует по возможности обычно сторону небольшой микрослужбами. Вместо этого необходимо определить протестировав для получения наиболее значимые разделение по ведома пользователя домена. Основное внимание уделяется не на размер, а на деловые возможности. Кроме того Если очистить связности, необходимые для области приложения, основанного на большое количество зависимостей, указывает потребность в одном микрослужбу, слишком. Связности является способ определения того, как прервать друг от друга или микрослужбами вместе группы. В конечном счете хотя можно получить дополнительные сведения о домене, размер вашей микрослужбу необходимо адаптировать итеративно. Поиск нужного размера не одноступенчатая процесса.

[SAM Newman](http://samnewman.io/), распознаваемым активатором микрослужбами и автор книги [Микрослужбами построение](http://samnewman.io/books/building_microservices/), выделяет, следует разрабатывать вашей микрослужбами на основе шаблона, ограниченное контекста (BC) (часть домен разработки на основе), как представленный ранее. В некоторых случаях BC может состоять из нескольких физических служб, но не наоборот.

Модель домена с сущностями в определенном домене применения в конкретных BC или микрослужбы. BC разделяет применимость модели домена и позволяет разработчику ясное и общего понимания каким должен быть целостного и что разработаны независимо, члены команды. Это же цели для микрослужбами.

Другое средство, которое сообщает Выбор конструктора является [конвея](https://en.wikipedia.org/wiki/Conway%27s_law), том, что приложение будет отражать социальных границы организации, который его создал. Но иногда верно обратное — сформированное программное обеспечение предприятия. Может потребоваться для отката закона Конвея и построения границы способ упорядочить, компания перекосу к журналу процесса бизнеса.

Для определения ограниченных контекстах, является DDD шаблон, который может использоваться для этого [контекст сопоставления шаблона](https://www.infoq.com/articles/ddd-contextmapping). С сопоставлением контекста идентификации различных контекстах в приложении и их границы. Это часто используются для экземпляра другого контекста и границ для каждой небольшой подсистемы. Карта контекста является способом для определения и явно объявить эти границы между доменами. BC является автономным и содержит сведения об одном домене — такие сведения, как сущности домена и определяет контракты интеграции с другими BCs. Это похоже на определение микрослужбу: он является автономным, он реализует некоторые возможности домена и он должен предоставлять интерфейсы. Именно поэтому сопоставление контекста и шаблон ограниченного контекста являются хорошим подходы для определения границ модели домена вашей микрослужбами.

При проектировании крупного приложения, вы увидите, как его модели домена может фрагментированным — эксперта из каталога домена будет имя сущности по-разному, в доменах каталога и инвентаризации, чем доставка специалистом, для экземпляра. Или сущность домена пользователя может отличаться размер и количество атрибутов, при работе с expert CRM кто хочет сохранить все сведения о клиента, чем для упорядочивания эксперта домена, который требуется только части данных о клиенте. Очень трудно устранить неоднозначность все термины домена для всех доменов, связанных с большого приложения. Наиболее важные дело в том, что не рекомендуется для объединения условий; Вместо этого примите различия набора операторов, предоставляемые в каждом домене. При попытке единой базы данных для всего приложения попыток единой словарь будет неуклюжим и не будут звучать вправо, чтобы любой из нескольких специалистами в предметной области. Таким образом BCs (реализованный как микрослужбами) поможет уточняется, где можно использовать определенные терминами домена и где требуется разделить системы и создать дополнительные BCs с разных доменах.

Вы будете знать, что вы получили правой границы и размер каждой BC и модель домена, если имеется несколько строгого связи между моделей домена, и вам обычно не нужно объединить данные из нескольких моделей домена, при выполнении приложений обычно операции.

Возможно лучший ответ на вопрос размер должен быть модель домена для каждого микрослужбу находится в следующем: должны быть автономными BC как изолированное, возможно, что позволяет работать без необходимости постоянно переключитесь в других контекстах (другие модели микрослужбу). На рисунке 4-10 можно увидеть несколько микрослужбами (несколько BCs) каждого существуют свои собственные модели и как их сущностей можно определить, в зависимости от конкретных требований для каждого из указанных доменов приложения.

![](./media/image10.png)

**Рис. 4-10**. Идентификация сущностей и границы микрослужбу модели

Рис. 4-10 показан пример сценария, относящихся к системе управления сетевых конференций. Вы определили несколько BCs, которые могут быть реализованы как микрослужбами, именам доменов, определенных для вас специалистами в предметной области. Как видно, существуют объекты, присутствующие только в одной микрослужбу модели как платежей в микрослужбу оплаты. Те, будет легко реализовать.

Тем не менее может также потребоваться сущностей, которые имеют другую форму, но используют одно удостоверение через несколько моделей домена из нескольких микрослужбами. Например сущность пользователя определяется в микрослужбу конференции управления. Этот же пользователь, с тем же идентификатором — один с именем покупателей в микрослужбу упорядочения элементов или один с именем плательщика в микрослужбу оплаты и даже одного именованного клиента в микрослужбу обслуживания клиентов. Это происходит потому, что в зависимости от [единый язык](https://martinfowler.com/bliki/UbiquitousLanguage.html) , используя expert каждого домена, пользователь может использовать другую перспективу, даже с разными атрибутами. Пользователь сущности в модели микрослужбу, с именем конференции управления возможно, большая часть его атрибуты персональные данные. Тем не менее этого же пользователя в форму плательщика в микрослужбу оплаты или в форму клиента в микрослужбу обслуживание клиентов не требуются один и тот же список атрибутов.

Аналогичный подход показан на рисунке 4-11.

![](./media/image11.png)

**Рис. 4-11**. Разбиение моделей традиционных данных нескольких моделей домена

Вы увидите, как пользователь присутствует в модели микрослужбу конференции управления как сущность пользователя и присутствует также в виде сущности покупателей в микрослужбу цены, альтернативный attributes или сведения о пользователе, когда это действительно покупатель. Каждый микрослужбу или BC не требуются все данные, относящиеся к сущности пользователя, только его часть, в зависимости от того, чтобы решить проблему или контексте. Например в модели ценообразования микрослужбу необязательно адрес или идентификатор пользователя, просто код (удостоверение) и состояния, которая может повлиять на скидки при цены мест на покупателя.

Рабочее место сущность имеет те же имя, но с разными атрибутами в каждой модели домена. Тем не менее, рабочее место использует удостоверение, основанное на тот же идентификатор, как происходит с именем пользователя и покупателей.

По сути является общей концепции пользователя, который существует в нескольких служб (домены), которые используют удостоверение пользователя. Но в каждой модели домена могут существовать дополнительные или другие сведения о сущности пользователя. Таким образом необходимо, чтобы сопоставить пользователя сущность из одного домена (микрослужбу) в другую.

Есть несколько преимуществ для не совместного использования одной и той же сущности пользователя с тем же номером атрибутов между доменами. Одно из преимуществ является целью снижения дублирования, таким образом, что микрослужбу моделей не все данные, не обязательно. Еще одним преимуществом является хранение master микрослужбу, которому принадлежит тип данных каждой сущности, чтобы обновление и отправлять запросы для этого типа данных определяются только что микрослужбы.


>[!div class="step-by-step"]
[Предыдущие] (распределенных данные management.md) [Далее] (direct-client-to-microservice-communication-versus-the-api-gateway-pattern.md)
