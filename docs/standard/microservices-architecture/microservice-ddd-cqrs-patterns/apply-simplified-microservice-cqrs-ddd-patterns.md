---
title: "Применение упрощенный CQRS и ддд шаблонов в микрослужбу"
description: "Архитектура Микрослужбами .NET для приложений .NET в контейнерах | Применение упрощенный CQRS и ддд шаблонов в микрослужбу"
keywords: "Docker, микрослужбы, ASP.NET, контейнер"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: 99fd7ce32039742e23f8e01aa4c33cddd7a9f698
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/18/2017
---
# <a name="applying-simplified-cqrs-and-ddd-patterns-in-a-microservice"></a>Применение упрощенный CQRS и ддд шаблонов в микрослужбу

CQRS — это архитектуры шаблон, который отделяет моделей для чтения и записи данных. Связанные термин [разделение команды запроса (CQS)](https://martinfowler.com/bliki/CommandQuerySeparation.html) была изначально определена по Ильина Bertrand в своей книге *создания программного обеспечения ориентированного объекта*. Основная идея заключается в разделять операций системы на две категории резко запятыми:

-   Запросы. Они возвращают результат и не изменять состояние системы, и они свободны от побочных эффектов.

-   Команды. Эти изменения состояния системы.

CQS — это простое понятие — это касается методов в этом же объекте, запросов или команд. Каждый метод возвращает состояние или изменяет состояние, но не оба. Объект шаблона даже одного репозитория может соответствовать CQS. CQS могут считаться фундаментальные принцип для CQRS.

[Команда и разделение ответственности запросов (CQRS)](https://martinfowler.com/bliki/CQRS.html) введенный Грег Янгом и строго распространяемых Udi Dahan и др. Он основан на принципе CQS, несмотря на то, что более подробно. Его можно применять шаблон, основанный на команды и события, а также при необходимости на асинхронных сообщениях. Во многих случаях CQRS относится к более сложных сценариев, как если бы у разных физической базы данных для чтения (запросы), чем для операций записи (обновления). Кроме того, может реализовать более доработанной системы CQRS [источники событий (ES)](http://codebetter.com/gregyoung/2010/02/20/why-use-event-sourcing/) для обновления базы данных, таким образом будет только хранить события в модели домена вместо сохранения текущего состояния данных. Однако это не этот подход используется в этом руководстве; Мы используем простой подход CQRS, который состоит только разделения запросов с помощью команд.

Разделение аспектом CQRS достигается за счет группирования операций запроса в одном слое и команд в другом слое. Каждый слой имеет свою собственную модель данных (Обратите внимание, что мы говорим модели, не обязательно другую базу данных) и построен с использованием собственный сочетание шаблоны и технологий. Более того два уровня может быть одного уровня или микрослужбу, как показано в примере (Сортировка микрослужбу) используется в данном руководстве. Или может быть реализован на разных микрослужбами или процессов, поэтому оптимизированными и отдельно масштабировать без взаимного влияния.

CQRS означает, что два объекта для операции чтения и записи, где в других контекстах имеется один. Существует причин денормализованные операций чтения, база данных, который можно узнать о более сложных литература CQRS. Но не используются, этот подход, где предназначена для того, чтобы иметь большую гибкость в запросах, вместо ограничения запросов с ограничениями из шаблонов DDD как статистические выражения.

Примером такого рода службы является упорядочивания микрослужбу из приложения eShopOnContainers ссылки. Эта служба реализует микрослужбу, в зависимости от упрощенный подход CQRS. В нем одного источника данных или базы данных, но два логическими моделями плюс DDD шаблоны для транзакций домена, как показано на рисунке 9-2.

![](./media/image2.png)

**Рис. 9-2**. Упрощенная CQRS DDD основе и микрослужбу

Уровень приложения может быть сам веб-API. Здесь пропорции существенные из команды, модель домена и транзакции, следующие за шаблон CQRS является микрослужбу разделяется, запросы и ViewModels (модели данных, специально создана для клиентских приложений). Этот подход позволяет запросы независимо от ограничения и ограничения, поступающих от DDD шаблоны, которые имеют смысл только для транзакций и обновлений, как описано в следующих разделах.


>[!div class="step-by-step"]
[Предыдущие] (index.md) [Далее] (eshoponcontainers-cqrs ддд microservice.md)
