---
title: "Безопасно хранить секреты приложения во время разработки"
description: "Архитектура Микрослужбами .NET для приложений .NET в контейнерах | Безопасно хранить секреты приложения во время разработки"
keywords: "Docker, микрослужбы, ASP.NET, контейнер"
author: mjrousos
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: f1b8b257a3e677c7e665e1d394a8adf7e651bec2
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/18/2017
---
# <a name="storing-application-secrets-safely-during-development"></a>Безопасно хранить секреты приложения во время разработки

Для подключения к защищенным ресурсам и других служб, приложений ASP.NET Core обычно требуется использовать строки подключения, пароли или другие учетные данные, содержащие конфиденциальные сведения. Эти фрагменты конфиденциальные сведения, называются *секреты*. Рекомендуется не включать секретные данные в исходном коде и определенно не для хранения конфиденциальных данных в системе управления версиями. Вместо этого следует использовать модель конфигурации ASP.NET Core из которого выполняется чтение секреты более безопасных расположениях.

Следует отличать секретные данные, для доступа к разработки и размещения, ресурсы из тех, которые используются для доступа к ресурсам производственной, так как разные люди, потребуется доступ к эти разные наборы секретные данные. Хранить секретные данные, используемые во время разработки, должны либо хранить секреты в переменных среды или при помощи ASP.NET Core секрет диспетчера типичные подходы. Для более безопасного хранения в производственных средах микрослужбами можно хранить секреты в хранилище ключей Azure.

## <a name="storing-secrets-in-environment-variables"></a>Сохранение секретов в переменных среды

Один из способов хранить секреты из исходного кода предназначено для разработчиков задать секретные данные на основе строк как [переменных среды](https://docs.microsoft.com/aspnet/core/security/app-secrets#environment-variables) на своих компьютерах для разработки. При использовании переменных среды для хранения конфиденциальных данных с иерархические имена (которые вложены в разделы конфигурации), создайте имя для переменных среды, включающее полную иерархию имя секрета разделенные двоеточием (:).

Например установив переменную среды ведения журнала: LogLevel:Default для отладки будет равно значению конфигурации из файла JSON:

```json
{
    "Logging": {
        "LogLevel": {
            "Default": "Debug"
        }
    }
}
```

Чтобы открыть эти значения из переменных среды, просто приложению вызывать AddEnvironmentVariables его ConfigurationBuilder при создании объекта IConfigurationRoot.

Обратите внимание, что переменные среды обычно хранятся в виде обычного текста, таким образом, в случае компрометации компьютера или процесс с переменными среды, значения переменных среды видимым.

## <a name="storing-secrets-using-the-aspnet-core-secret-manager"></a>Сохранение секретов, с помощью диспетчера секрет ASP.NET Core

ASP.NET Core [Manager секрет](https://docs.microsoft.com/aspnet/core/security/app-secrets#secret-manager) средство обеспечивает сохранение секретов из исходного кода в другой метод. Использование диспетчера секрет, включаемых Справочник по средствам (DotNetCliToolReference) Microsoft.Extensions.SecretManager.Tools пакета в файле проекта. После этой зависимости и был восстановлен, команда секретов пользователя dotnet может использоваться для присвоения секретные данные из командной строки. Эти секретные данные будут храниться в файле JSON в каталоге профиля пользователя (сведения зависят от операционной системы), от исходного кода.

Секретные данные, заданные секрет диспетчера организованы по UserSecretsId свойства проекта, который использует секреты. Таким образом необходимо убедиться, что свойство UserSecretsId задать в файле проекта (как показано в приведенном ниже фрагменте кода). Строка используется в качестве идентификатора не имеет значения, пока он уникален в проекте.

```xml
<PropertyGroup>
    <UserSecretsId>UniqueIdentifyingString</UserSecretsId>
</PropertyGroup>
```

С помощью секретные данные, хранящиеся в приложении с помощью диспетчера секрет достигается посредством вызова AddUserSecrets&lt;T&gt; на экземпляре ConfigurationBuilder для включения секретные данные приложения в его конфигурации. Общий параметр T должен быть тип в сборке, которая UserSecretId была применена к. Обычно с помощью AddUserSecrets&lt;запуска&gt; нормально.


>[!div class="step-by-step"]
[Предыдущие] (авторизации net микрослужбами web-applications.md) [Далее] (azure-key хранилище — защищает secrets.md)
