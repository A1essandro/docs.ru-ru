---
title: "Официальные .NET-образы Docker"
description: "Архитектура микрослужб .NET для упакованных в контейнеры приложений .NET | Официальные .NET-образы Docker"
keywords: "Docker, микрослужбы, ASP.NET, контейнер"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 10/18/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 42872caa1a9306187daeefd35feb9bec3fae60af
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/23/2017
---
# <a name="official-net-docker-images"></a>Официальные .NET-образы Docker

Официальные .NET-образы Docker — это образы Docker, оптимизированные Майкрософт. Они доступны для всех в репозиториях Майкрософт в [Центре Docker](https://hub.docker.com/u/microsoft/). Каждый репозиторий может содержать несколько образов, в зависимости от версии платформы .NET и операционной системы (Linux Debian, Linux Alpine, Windows Nano Server, Windows Server Core и т. д.).

Корпорация Майкрософт стремится создавать подробные специализированные репозитории .NET, представляющие конкретный сценарий или рабочую нагрузку. Например, образы [microsoft/aspnetcore](https://hub.docker.com/r/microsoft/aspnetcore/) нужны при использовании ASP.NET Core в Docker, поскольку эти образы ASP.NET Core обеспечивают дополнительную оптимизацию, и контейнеры запускаются быстрее.

С другой стороны, образы .NET Core (microsoft/dotnet) предназначены для консольных приложений на базе .NET Core. Например, для процессов пакетной обработки, веб-заданий Azure и других консольных сценариев следует использовать .NET Core. Эти образы не включают стек ASP.NET Core, поэтому образ контейнера имеет меньший размер.

Большинство репозиториев образов предоставляют широкие возможности по использованию тегов, чтобы облегчить выбор не только конкретной версии платформы, но и ОС (дистрибутива Linux или версии Windows).

Подробную информацию об официальных .NET-образах Docker от Майкрософт см. в разделе [Обзор .NET-образов Docker](https://aka.ms/dotnetdockerimages).

## <a name="net-core-and-docker-image-optimizations-for-development-versus-production"></a>Оптимизация образов .NET Core и Docker для разработки и производства

При создании образов Docker для разработчиков Майкрософт сосредотачивается на следующих основных сценариях:

-   образы, используемые для *разработки* и сборки приложений .NET Core;

-   образы, используемые для *выполнения* приложений .NET Core.

Зачем использовать несколько образов? При разработке, сборке и выполнении приложений в контейнерах приоритеты будут разными. Предоставляя различные образы для каждой из задач, Майкрософт помогает оптимизировать отдельные процессы разработки, сборки и развертывания приложений.

### <a name="during-development-and-build"></a>Во время разработки и сборки

Во время разработки важна скорость выполнения итераций для изменений и возможность отлаживать изменения. Размер образа не так важен, как возможность быстро вносить изменения в код и просматривать их. Некоторые средства и "контейнеры агентов сборки" используют образ ASP.NET Core для разработки (microsoft/aspnetcore-build) на стадии разработки и сборки. При сборке внутри контейнера Docker надо учитывать, какие элементы необходимы для компиляции приложения. Сюда входят зависимости компилятора и другие зависимости .NET, а также зависимости разработки, например npm, Gulp и Bower.

Почему так важен этот тип образа сборки? Этот образ не развертывается в рабочую среду. Это образ, который вы используете для сборки содержимого, помещаемого в рабочий образ. Этот образ будет применяться в среде непрерывной интеграции (CI) или в среде сборки. Например, вместо установки вручную всех зависимостей приложения непосредственно на узле агента сборки (например, в виртуальной машине), этот агент создаст экземпляр образа сборки .NET Core со всеми зависимостями, которые необходимы для сборки приложения. Агенту сборки необходимо знать только, как запускать этот образ Docker. Это упрощает среду непрерывной интеграции и делает ее более предсказуемой.

### <a name="in-production"></a>Производство

При производстве важно быстро развернуть и запустить контейнеры на основе рабочего образа .NET Core. Поэтому образ только для среды выполнения на базе [microsoft/aspnetcore](https://hub.docker.com/r/microsoft/aspnetcore/) имеет малый размер и может быстро перемещаться по сети из реестра Docker к узлам Docker. Содержимое готово к запуску, поэтому период времени от запуска контейнера до обработки результатов минимален. В модели Docker не нужна компиляция кода C\#, поскольку вы выполняете команду dotnet build или dotnet publish при использовании контейнера сборки.

В этот оптимизированный образ вы помещаете только двоичные файлы и другое содержимое, необходимое для выполнения приложения. Например, в содержимое, создаваемое командой dotnet publish, входят только скомпилированные двоичные файлы .NET, образы, файлы .js и .css. Со временем появятся образы, которые содержат пакеты, предварительно скомпилированные JIT-компилятором.

Хотя существует несколько версий образов .NET Core и ASP.NET Core, они все имеют один или несколько общих уровней, включая базовый уровень. Поэтому образ занимает мало места на диске, ведь он содержит лишь различия между вашим образом и базовым образом. В результате можно быстро извлекать образы из реестра.

При просмотре репозиториев .NET-образов в центре Docker вы найдете несколько версий, классифицированных или помеченных тегами. Эти теги помогают определить, какую версию использовать, как показано в таблице:

-   microsoft/**aspnetcore:2.0**

        ASP.NET Core, with runtime only and ASP.NET Core optimizations, on Linux and Windows (multi-arch)

-   microsoft/**aspnetcore-build:2.0**

        ASP.NET Core, with SDKs included, on Linux and Windows (multi-arch)


>[!div class="step-by-step"]
[Назад] (net-container-os-targets.md) [Далее] (../architect-microservice-container-applications/index.md)
