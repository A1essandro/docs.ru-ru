---
title: "Частичный сбой обработки"
description: "Архитектура Микрослужбами .NET для приложений .NET в контейнерах | Частичный сбой обработки"
keywords: "Docker, микрослужбы, ASP.NET, контейнер"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: b7d16acf3de2d395da70e8f46e59c129dec24f71
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/18/2017
---
# <a name="handling-partial-failure"></a>Частичный сбой обработки

В распределенных систем, как приложения на основе микрослужбами имеется штат постоянно риск частичных сбоев. Для экземпляра одного микрослужбу или контейнер может завершиться ошибкой или могут быть недоступны реагировать в течение некоторого времени или одной виртуальной Машины или сервере может завершиться со сбоем. Поскольку клиенты и службы являются отдельными процессами, служба может не иметь возможность своевременный отклик на запрос клиента. Служба перегруженных и отвечает на запросы очень медленно для запросов может быть или просто будут недоступны в течение некоторого времени из-за сетевых проблем.

Например рассмотрим странице сведений о порядке из eShopOnContainers образца приложения. Если упорядочивания микрослужбу не отвечает при попытке оформить заказ, неправильной реализацией процесс клиента (веб-приложения MVC) — например, если код клиента для использования синхронных вызовов RPC в течение неограниченного времени — будет выполняться бесконечно потоков Ожидание ответа. Помимо создания неприятной ситуации, каждый отвечать на запросы ожидания использует или блокирует поток и потоков, особо важных высокомасштабируемых приложений. При наличии множества заблокированных потоков в конечном итоге выполнения приложения может закончиться потоков. В этом случае приложение может стать глобально отвечать на запросы, а не только частично отвечать на запросы, как показано на рисунке 10-1.

![](./media/image1.png)

**Рис. 10-1**. Частичные сбои из-за зависимостей, влиять на доступность службы потоков

В больших микрослужбами приложением любые частичные сбои могут усилению, особенно в том случае, если большая часть взаимодействия внутренней микрослужбами основана на синхронные вызовы HTTP (которые считается антишаблон). Подумайте о системе, получающего миллионы входящих вызовов в день. Системы имеет неправильный вид, который основан на длинных цепочек синхронные вызовы HTTP, эти входящих вызовов может привести дополнительные миллионы исходящих вызовов (давайте предположим, что отношение 1:4) с десятками внутренней микрослужбами как синхронный зависимости. Это показано на рисунке 10-2, особенно зависимостей \#3.

![](./media/image2.png)

**На рис. 10-2**. Последствия неверный подход, при добавлении длинных цепочек HTTP-запросов

Периодические сбои практически не гарантируется в распределенной и облака на основе системы, даже если у каждой зависимости, сам отлично доступности. Это должна быть фактов, которые следует принять во внимание.

Если не разработать и реализовать методы, чтобы обеспечить отказоустойчивость, можно усиливаться даже небольшое время простоя. Например 50 зависимости с 99,99% доступности приведет к несколько часов простоя каждого месяца из-за этого оказывает влияние. При обработке большого числа запросов в случае сбоя микрослужбу зависимость, сбой могут быстро насытить все потоки доступного запроса в каждой службы и сбой всего приложения.

![](./media/image3.png)

**На рис. 10-3**. Частичный сбой усиливаться по микрослужбами с длинным цепочкам синхронных вызовов HTTP

Чтобы свести к минимуму эту проблему, в разделе «*асинхронной микрослужбу интеграции применять его микрослужбу автономность*» (в главе архитектуры), мы рекомендуется использовать асинхронную связь между внутренней микрослужбами. Мы кратко описаны более в следующем разделе.

Кроме того, очень важно разработать микрослужбами и клиентские приложения для обработки частичных сбоев — то есть для создания гибкой микрослужбами и клиентских приложений.


>[!div class="step-by-step"]
[Предыдущие] (index.md) [Далее] (частичного сбоя strategies.md)
