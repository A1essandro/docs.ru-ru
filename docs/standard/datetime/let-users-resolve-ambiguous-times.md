---
title: "Практическое руководство. Предоставление пользователям возможности разрешения неоднозначности времени | Microsoft Docs"
ms.custom: ""
ms.date: "04/10/2017"
ms.prod: ".net"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-standard"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "неоднозначное время [платформа .NET Framework]"
  - "часовые пояса [платформа .NET Framework], неоднозначное время"
ms.assetid: bca874ee-5b68-4654-8bbd-3711220ef332
caps.latest.revision: 9
author: "rpetrusha"
ms.author: "ronpet"
manager: "wpickett"
caps.handback.revision: 9
---
# Практическое руководство. Предоставление пользователям возможности разрешения неоднозначности времени
Неоднозначное время — это время, которое соответствует более чем одному значению времени в формате UTC.  Это происходит, когда часы переводятся назад, как при переходе в одном часовом поясе с летнего времени на его стандартное время.  При обработке неоднозначного времени, можно выполнить одно из следующих действий:  
  
-   Если неоднозначное время является элементом данных, введенных пользователем, то можно предложить пользователю устранить неоднозначность.  
  
-   Сделать предположение о том, насколько время соответствует времени в формате UTC.  Например, можно предположить, что неоднозначное время всегда выражается в стандартном времени часового пояса.  
  
 В этом разделе показано, как предоставить пользователям возможность разрешать неоднозначность времени.  
  
### Предоставление пользователю возможности разрешать неоднозначность времени  
  
1.  Получите значение даты и времени, введенное пользователем.  
  
2.  Вызовите метод <xref:System.TimeZoneInfo.IsAmbiguousTime%2A>, чтобы определить, является ли время неоднозначным.  
  
3.  Если время является неоднозначным, вызовите метод <xref:System.TimeZoneInfo.GetAmbiguousTimeOffsets%2A>, чтобы получить массив объектов <xref:System.TimeSpan>.  Каждый элемент массива содержит смещение относительно UTC, с которым можно сопоставить неоднозначное время.  
  
4.  Предоставьте пользователю возможность выбрать нужное смещение.  
  
5.  Получите дату и время в формате UTC путем вычитания выбранного пользователем смещения из локального времени.  
  
6.  Вызовите метод `static` \(`Shared` в Visual Basic .NET\) <xref:System.DateTime.SpecifyKind%2A>, чтобы задать значение даты и времени в формате UTC для свойства <xref:System.DateTime.Kind%2A> равным <xref:System.DateTimeKind?displayProperty=fullName>.  
  
## Пример  
 В следующем примере пользователю предлагается ввести значение даты и времени и, если оно неоднозначно, выбрать время в формате UTC, которому сопоставлено неоднозначное время.  
  
 [!code-csharp[System.TimeZone2.Concepts#11](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.Concepts/CS/TimeZone2Concepts.cs#11)]
 [!code-vb[System.TimeZone2.Concepts#11](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.Concepts/VB/TimeZone2Concepts.vb#11)]  
  
 В главной части примера используется массив объектов <xref:System.TimeSpan> для указания возможных смещений неоднозначного времени относительно времени UTC.  Однако эти смещения скорее всего не будут иметь значения для пользователя.  Для уточнения значений этих смещений в коде также учитывается, представляет ли смещение стандартное время местного часового пояса или его летнее время.  Код определяет, какое время является стандартным, а какое летним, сравнивая смещение со значением свойства <xref:System.TimeZoneInfo.BaseUtcOffset%2A>.  Это свойство указывает разницу между временем UTC и стандартным временем часового пояса.  
  
 В этом примере все ссылки на местный часовой пояс выполняются через свойство <xref:System.TimeZoneInfo.Local%2A?displayProperty=fullName>. Местный часовой пояс никогда не назначается в качестве переменной объекта.  Это рекомендуется, поскольку вызов метода <xref:System.TimeZoneInfo.ClearCachedData%2A?displayProperty=fullName> внесет изменения во все объекты, которым назначен этот часовой пояс.  
  
## Компиляция кода  
 Для этого примера необходимо следующее.  
  
-   Чтобы ссылка на System.Core.dll была добавлена в проект.  
  
-   Чтобы пространство имен <xref:System> было импортировано с помощью оператора `using` \(обязательно в коде C\#\).  
  
## См. также  
 [Даты, время и часовые пояса](../../../docs/standard/datetime/index.md)   
 [Практическое руководство. Разрешение проблемы неоднозначности времени](../../../docs/standard/datetime/resolve-ambiguous-times.md)