---
title: "Преобразование времени из одного часового пояса в другой"
ms.custom: 
ms.date: 04/10/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- times [.NET Framework], converting
- time zones [.NET Framework], conversions
- UTC times, converting
- converting times
- local time conversions
ms.assetid: a51e1a3b-c983-4320-b31a-1f9fa3cf824a
caps.latest.revision: "19"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 58ed01520a9bbed53d32fc10e48a479e68f6ef7c
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/23/2017
---
# <a name="converting-times-between-time-zones"></a><span data-ttu-id="176ee-102">Преобразование времени из одного часового пояса в другой</span><span class="sxs-lookup"><span data-stu-id="176ee-102">Converting times between time zones</span></span>

<span data-ttu-id="176ee-103">Обработка различий между часовыми поясами становится все более важной для всех приложений, которые работают с датами и временем.</span><span class="sxs-lookup"><span data-stu-id="176ee-103">It is becoming increasingly important for any application that works with dates and times to handle differences between time zones.</span></span> <span data-ttu-id="176ee-104">Приложение больше не могут считать, что все значения времени могут быть выражены по местному времени, которое доступно время из <xref:System.DateTime> структуры.</span><span class="sxs-lookup"><span data-stu-id="176ee-104">An application can no longer assume that all times can be expressed in the local time, which is the time available from the <xref:System.DateTime> structure.</span></span> <span data-ttu-id="176ee-105">Например, веб-страница, которая отображает текущее время в восточной части США, будет содержать недостоверные сведения для пользователей в восточной Азии.</span><span class="sxs-lookup"><span data-stu-id="176ee-105">For example, a Web page that displays the current time in the eastern part of the United States will lack credibility to a customer in eastern Asia.</span></span> <span data-ttu-id="176ee-106">В этом разделе объясняется, как преобразовать время из одного часового пояса в другой, а также как преобразовать <xref:System.DateTimeOffset> значения с ограниченной поддержкой часовых поясов.</span><span class="sxs-lookup"><span data-stu-id="176ee-106">This topic explains how to convert times from one time zone to another, as well as how to convert <xref:System.DateTimeOffset> values that have limited time zone awareness.</span></span>

## <a name="converting-to-coordinated-universal-time"></a><span data-ttu-id="176ee-107">Преобразование во время в формате UTC</span><span class="sxs-lookup"><span data-stu-id="176ee-107">Converting to Coordinated Universal Time</span></span>

<span data-ttu-id="176ee-108">Время в формате UTC — это высокоточный, атомарный стандарт времени.</span><span class="sxs-lookup"><span data-stu-id="176ee-108">Coordinated Universal Time (UTC) is a high-precision, atomic time standard.</span></span> <span data-ttu-id="176ee-109">Часовые пояса выражаются как положительные или отрицательные смещения относительно времени в формате UTC.</span><span class="sxs-lookup"><span data-stu-id="176ee-109">The world’s time zones are expressed as positive or negative offsets from UTC.</span></span> <span data-ttu-id="176ee-110">Таким образом, время в формате UTC предоставляет тип времени, свободного от часовых поясов, или нейтрального времени часового пояса.</span><span class="sxs-lookup"><span data-stu-id="176ee-110">Thus, UTC provides a kind of time-zone free or time-zone neutral time.</span></span> <span data-ttu-id="176ee-111">Использование времени в формате UTC рекомендовано, когда важна совместимость даты и времени между компьютерами.</span><span class="sxs-lookup"><span data-stu-id="176ee-111">The use of UTC time is recommended when a date and time's portability across computers is important.</span></span> <span data-ttu-id="176ee-112">(Дополнительные сведения и другие рекомендации, со значениями даты и времени см. в разделе [использование даты и времени в .NET Framework рекомендации по созданию кода](http://go.microsoft.com/fwlink/?LinkId=92342).) Преобразование отдельных часовых поясов во время в формате UTC упрощает сравнение времен.</span><span class="sxs-lookup"><span data-stu-id="176ee-112">(For details and other best practices using dates and times, see [Coding best practices using DateTime in the .NET Framework](http://go.microsoft.com/fwlink/?LinkId=92342).) Converting individual time zones to UTC makes time comparisons easy.</span></span>

> [!NOTE]
> <span data-ttu-id="176ee-113">Можно сериализовать <xref:System.DateTimeOffset> структуру для однозначного представления одного момента времени.</span><span class="sxs-lookup"><span data-stu-id="176ee-113">You can also serialize a <xref:System.DateTimeOffset> structure to unambiguously represent a single point in time.</span></span> <span data-ttu-id="176ee-114">Поскольку <xref:System.DateTimeOffset> объекты хранят значение даты и времени вместе с его смещение от времени UTC, они всегда представляют определенный момент времени в связи в формате UTC.</span><span class="sxs-lookup"><span data-stu-id="176ee-114">Because <xref:System.DateTimeOffset> objects store a date and time value along with its offset from UTC, they always represent a particular point in time in relationship to UTC.</span></span>

<span data-ttu-id="176ee-115">Самый простой способ преобразования времени в формат UTC является вызов `static` (`Shared` в Visual Basic) <xref:System.TimeZoneInfo.ConvertTimeToUtc%28System.DateTime%29?displayProperty=nameWithType> метод.</span><span class="sxs-lookup"><span data-stu-id="176ee-115">The easiest way to convert a time to UTC is to call the `static` (`Shared` in Visual Basic) <xref:System.TimeZoneInfo.ConvertTimeToUtc%28System.DateTime%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="176ee-116">Точное преобразование, выполненное с помощью метода зависит от значения `dateTime` параметра <xref:System.DateTime.Kind%2A> свойства, как показано в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="176ee-116">The exact conversion performed by the method depends on the value of the `dateTime` parameter's <xref:System.DateTime.Kind%2A> property, as the following table shows.</span></span>

| `DateTime.Kind`            | <span data-ttu-id="176ee-117">Преобразование</span><span class="sxs-lookup"><span data-stu-id="176ee-117">Conversion</span></span>                                                                     |
| -------------------------- | ------------------------------------------------------------------------------ |
| `DateTimeKind.Local`       | <span data-ttu-id="176ee-118">Преобразует местное время во время в формате UTC.</span><span class="sxs-lookup"><span data-stu-id="176ee-118">Converts local time to UTC.</span></span>                                                    |
| `DateTimeKind.Unspecified` | <span data-ttu-id="176ee-119">Предполагает, что параметр `dateTime` является местным временем и преобразовывает местное время в UTC.</span><span class="sxs-lookup"><span data-stu-id="176ee-119">Assumes the `dateTime` parameter is local time and converts local time to UTC.</span></span> |
| `DateTimeKind.Utc`         | <span data-ttu-id="176ee-120">Возвращает неизмененный параметр `dateTime`.</span><span class="sxs-lookup"><span data-stu-id="176ee-120">Returns the `dateTime` parameter unchanged.</span></span>                                    |

<span data-ttu-id="176ee-121">Следующий код преобразовывает текущее местное время во время в формате UTC и выводит результат на консоль.</span><span class="sxs-lookup"><span data-stu-id="176ee-121">The following code converts the current local time to UTC and displays the result to the console.</span></span>

[!code-csharp[System.TimeZone2.Concepts#6](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.Concepts/CS/TimeZone2Concepts.cs#6)]
[!code-vb[System.TimeZone2.Concepts#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.Concepts/VB/TimeZone2Concepts.vb#6)]

> [!NOTE]
> <span data-ttu-id="176ee-122"><xref:System.TimeZoneInfo.ConvertTimeToUtc%28System.DateTime%29?displayProperty=nameWithType> Метода не обязательно возвращает результаты, которые совпадают с <xref:System.TimeZone.ToUniversalTime%2A?displayProperty=nameWithType> и <xref:System.DateTime.ToUniversalTime%2A?displayProperty=nameWithType> методы.</span><span class="sxs-lookup"><span data-stu-id="176ee-122">The <xref:System.TimeZoneInfo.ConvertTimeToUtc%28System.DateTime%29?displayProperty=nameWithType> method does not necessarily produce results that are identical to the <xref:System.TimeZone.ToUniversalTime%2A?displayProperty=nameWithType> and <xref:System.DateTime.ToUniversalTime%2A?displayProperty=nameWithType> methods.</span></span> <span data-ttu-id="176ee-123">Если узел локального часового пояса содержит несколько правил коррекции, <xref:System.TimeZoneInfo.ConvertTimeToUtc%28System.DateTime%29?displayProperty=nameWithType> применяется соответствующее правило для определенной даты и времени.</span><span class="sxs-lookup"><span data-stu-id="176ee-123">If the host system's local time zone includes multiple adjustment rules, <xref:System.TimeZoneInfo.ConvertTimeToUtc%28System.DateTime%29?displayProperty=nameWithType> applies the appropriate rule to a particular date and time.</span></span> <span data-ttu-id="176ee-124">Два других метода всегда применяют последнее правило коррекции.</span><span class="sxs-lookup"><span data-stu-id="176ee-124">The other two methods always apply the latest adjustment rule.</span></span>

<span data-ttu-id="176ee-125">Если значение даты и времени не представляет время в формате UTC или местным временем <xref:System.DateTime.ToUniversalTime%2A> метод скорее всего вернет ошибочный результат.</span><span class="sxs-lookup"><span data-stu-id="176ee-125">If the date and time value does not represent either the local time or UTC, the <xref:System.DateTime.ToUniversalTime%2A> method will likely return an erroneous result.</span></span> <span data-ttu-id="176ee-126">Тем не менее, можно использовать <xref:System.TimeZoneInfo.ConvertTimeToUtc%2A?displayProperty=nameWithType> метод, чтобы преобразовать дату и время в указанном часовом поясе.</span><span class="sxs-lookup"><span data-stu-id="176ee-126">However, you can use the <xref:System.TimeZoneInfo.ConvertTimeToUtc%2A?displayProperty=nameWithType> method to convert the date and time from a specified time zone.</span></span> <span data-ttu-id="176ee-127">(Дополнительные сведения о получении <xref:System.TimeZoneInfo> , представляющий часовом поясе назначения. в разделе [поиск часового пояса, определенные в локальной системе](../../../docs/standard/datetime/finding-the-time-zones-on-local-system.md).) В следующем коде используется <xref:System.TimeZoneInfo.ConvertTimeToUtc%2A?displayProperty=nameWithType> метод преобразования Восточное время в формате UTC.</span><span class="sxs-lookup"><span data-stu-id="176ee-127">(For details on retrieving a <xref:System.TimeZoneInfo> object that represents the destination time zone, see [Finding the time zones defined on a local system](../../../docs/standard/datetime/finding-the-time-zones-on-local-system.md).) The following code uses the <xref:System.TimeZoneInfo.ConvertTimeToUtc%2A?displayProperty=nameWithType> method to convert Eastern Standard Time to UTC.</span></span>

[!code-csharp[System.TimeZone2.Concepts#7](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.Concepts/CS/TimeZone2Concepts.cs#7)]
[!code-vb[System.TimeZone2.Concepts#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.Concepts/VB/TimeZone2Concepts.vb#7)]

<span data-ttu-id="176ee-128">Обратите внимание, что этот метод создает исключение <xref:System.ArgumentException> Если <xref:System.DateTime> объекта <xref:System.DateTime.Kind%2A> обнаружено несоответствие свойств и часовой пояс.</span><span class="sxs-lookup"><span data-stu-id="176ee-128">Note that this method throws an <xref:System.ArgumentException> if the <xref:System.DateTime> object's <xref:System.DateTime.Kind%2A> property and the time zone are mismatched.</span></span> <span data-ttu-id="176ee-129">Несоответствие возникает, если <xref:System.DateTime.Kind%2A> свойство <xref:System.DateTimeKind?displayProperty=nameWithType> , но <xref:System.TimeZoneInfo> объект не представляет местный часовой пояс, или если <xref:System.DateTime.Kind%2A> свойство <xref:System.DateTimeKind?displayProperty=nameWithType> , но <xref:System.TimeZoneInfo> объекта не равен <xref:System.DateTimeKind?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="176ee-129">A mismatch occurs if the <xref:System.DateTime.Kind%2A> property is <xref:System.DateTimeKind?displayProperty=nameWithType> but the <xref:System.TimeZoneInfo> object does not represent the local time zone, or if the <xref:System.DateTime.Kind%2A> property is <xref:System.DateTimeKind?displayProperty=nameWithType> but the <xref:System.TimeZoneInfo> object does not equal <xref:System.DateTimeKind?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="176ee-130">Все эти методы принимают <xref:System.DateTime> значения как параметры и возвращаемые <xref:System.DateTime> значение.</span><span class="sxs-lookup"><span data-stu-id="176ee-130">All of these methods take <xref:System.DateTime> values as parameters and return a <xref:System.DateTime> value.</span></span> <span data-ttu-id="176ee-131">Для <xref:System.DateTimeOffset> значения, <xref:System.DateTimeOffset> структура имеет <xref:System.DateTimeOffset.ToUniversalTime%2A> экземпляра метода, который преобразует дату и время текущего экземпляра в формате UTC.</span><span class="sxs-lookup"><span data-stu-id="176ee-131">For <xref:System.DateTimeOffset> values, the <xref:System.DateTimeOffset> structure has a <xref:System.DateTimeOffset.ToUniversalTime%2A> instance method that converts the date and time of the current instance to UTC.</span></span> <span data-ttu-id="176ee-132">В следующем примере вызывается <xref:System.DateTimeOffset.ToUniversalTime%2A> метода для преобразования местного времени и несколько раз в формате UTC.</span><span class="sxs-lookup"><span data-stu-id="176ee-132">The following example calls the <xref:System.DateTimeOffset.ToUniversalTime%2A> method to convert a local time and several other times to Coordinated Universal Time (UTC).</span></span>

[!code-csharp[System.DateTimeOffset.Methods#16](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.DateTimeOffset.Methods/cs/Methods.cs#16)]
[!code-vb[System.DateTimeOffset.Methods#16](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.DateTimeOffset.Methods/vb/Methods.vb#16)]

## <a name="converting-utc-to-a-designated-time-zone"></a><span data-ttu-id="176ee-133">Преобразование времени в формате UTC в заданный часовой пояс</span><span class="sxs-lookup"><span data-stu-id="176ee-133">Converting UTC to a designated time zone</span></span>

<span data-ttu-id="176ee-134">Чтобы преобразовать UTC в местное время, см. в следующем разделе «Преобразование UTC в местное время».</span><span class="sxs-lookup"><span data-stu-id="176ee-134">To convert UTC to local time, see the "Converting UTC to Local Time" section that follows.</span></span> <span data-ttu-id="176ee-135">Чтобы преобразовать UTC во время в любой часовой пояс, в указанную папку, вызовите <xref:System.TimeZoneInfo.ConvertTimeFromUtc%2A> метод.</span><span class="sxs-lookup"><span data-stu-id="176ee-135">To convert UTC to the time in any time zone that you designate, call the <xref:System.TimeZoneInfo.ConvertTimeFromUtc%2A> method.</span></span> <span data-ttu-id="176ee-136">Этот метод принимает два параметра:</span><span class="sxs-lookup"><span data-stu-id="176ee-136">The method takes two parameters:</span></span>

* <span data-ttu-id="176ee-137">Время в формате UTC, которое требуется преобразовать.</span><span class="sxs-lookup"><span data-stu-id="176ee-137">The UTC to convert.</span></span> <span data-ttu-id="176ee-138">Это должен быть <xref:System.DateTime> которого <xref:System.DateTime.Kind%2A> свойству <xref:System.DateTimeKind?displayProperty=nameWithType> или <xref:System.DateTimeKind?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="176ee-138">This must be a <xref:System.DateTime> value whose <xref:System.DateTime.Kind%2A> property is set to <xref:System.DateTimeKind?displayProperty=nameWithType> or <xref:System.DateTimeKind?displayProperty=nameWithType>.</span></span>

* <span data-ttu-id="176ee-139">Часовой пояс, в который требуется преобразовать время в формате UTC.</span><span class="sxs-lookup"><span data-stu-id="176ee-139">The time zone to convert the UTC to.</span></span>

<span data-ttu-id="176ee-140">Следующий код преобразует время в формате UTC в центральное стандартное время.</span><span class="sxs-lookup"><span data-stu-id="176ee-140">The following code converts UTC to Central Standard Time.</span></span>

[!code-csharp[System.TimeZone2.Concepts#8](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.Concepts/CS/TimeZone2Concepts.cs#8)]
[!code-vb[System.TimeZone2.Concepts#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.Concepts/VB/TimeZone2Concepts.vb#8)]

## <a name="converting-utc-to-local-time"></a><span data-ttu-id="176ee-141">Преобразование времени в формате UTC в местное время</span><span class="sxs-lookup"><span data-stu-id="176ee-141">Converting UTC to local time</span></span>

<span data-ttu-id="176ee-142">Чтобы преобразовать время UTC в местное время, вызовите <xref:System.DateTime.ToLocalTime%2A> метод <xref:System.DateTime> , время которого требуется преобразовать.</span><span class="sxs-lookup"><span data-stu-id="176ee-142">To convert UTC to local time, call the <xref:System.DateTime.ToLocalTime%2A> method of the <xref:System.DateTime> object whose time you want to convert.</span></span> <span data-ttu-id="176ee-143">Точное поведение метода зависит от значения объекта в <xref:System.DateTime.Kind%2A> свойства, как показано в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="176ee-143">The exact behavior of the method depends on the value of the object’s <xref:System.DateTime.Kind%2A> property, as the following table shows.</span></span>

| `DateTime.Kind`            | <span data-ttu-id="176ee-144">Преобразование</span><span class="sxs-lookup"><span data-stu-id="176ee-144">Conversion</span></span>                                                                               |
| -------------------------- | ---------------------------------------------------------------------------------------- |
| `DateTimeKind.Local`       | <span data-ttu-id="176ee-145">Возвращает <xref:System.DateTime> значение без изменений.</span><span class="sxs-lookup"><span data-stu-id="176ee-145">Returns the <xref:System.DateTime> value unchanged.</span></span>                                      |
| `DateTimeKind.Unspecified` | <span data-ttu-id="176ee-146">Предполагается, что <xref:System.DateTime> значение UTC и преобразует время в формате UTC в местное время.</span><span class="sxs-lookup"><span data-stu-id="176ee-146">Assumes that the <xref:System.DateTime> value is UTC and converts the UTC to local time.</span></span> |
| `DateTimeKind.Utc`         | <span data-ttu-id="176ee-147">Преобразует <xref:System.DateTime> значение в местное время.</span><span class="sxs-lookup"><span data-stu-id="176ee-147">Converts the <xref:System.DateTime> value to local time.</span></span>                                 |

> [!NOTE]
> <span data-ttu-id="176ee-148"><xref:System.TimeZone.ToLocalTime%2A?displayProperty=nameWithType> Метод работает идентично `DateTime.ToLocalTime` метод.</span><span class="sxs-lookup"><span data-stu-id="176ee-148">The <xref:System.TimeZone.ToLocalTime%2A?displayProperty=nameWithType> method behaves identically to the `DateTime.ToLocalTime` method.</span></span> <span data-ttu-id="176ee-149">Он принимает один параметр, который является значение даты и времени для преобразования.</span><span class="sxs-lookup"><span data-stu-id="176ee-149">It takes a single parameter, which is the date and time value to convert.</span></span>

<span data-ttu-id="176ee-150">Можно также преобразовать время в любого часового пояса в местное время, используя `static` (`Shared` в Visual Basic) <xref:System.TimeZoneInfo.ConvertTime%2A?displayProperty=nameWithType> метод.</span><span class="sxs-lookup"><span data-stu-id="176ee-150">You can also convert the time in any designated time zone to local time by using the `static` (`Shared` in Visual Basic) <xref:System.TimeZoneInfo.ConvertTime%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="176ee-151">Этот метод рассматривается в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="176ee-151">This technique is discussed in the next section.</span></span>

## <a name="converting-between-any-two-time-zones"></a><span data-ttu-id="176ee-152">Преобразование между любыми двумя часовыми поясами</span><span class="sxs-lookup"><span data-stu-id="176ee-152">Converting between any two time zones</span></span>

<span data-ttu-id="176ee-153">Вы можете преобразовать между любыми двумя часовыми поясами с помощью любого из следующих двух `static` (`Shared` в Visual Basic) методов <xref:System.TimeZoneInfo> класса:</span><span class="sxs-lookup"><span data-stu-id="176ee-153">You can convert between any two time zones by using either of the following two `static` (`Shared` in Visual Basic) methods of the <xref:System.TimeZoneInfo> class:</span></span>

* <xref:System.TimeZoneInfo.ConvertTime%2A>

  <span data-ttu-id="176ee-154">Параметры этого метода являются значение даты и времени для преобразования, `TimeZoneInfo` объект, представляющий часовой пояс значения даты и времени, и `TimeZoneInfo` объект, представляющий часовой пояс, чтобы преобразовать значение даты и времени.</span><span class="sxs-lookup"><span data-stu-id="176ee-154">This method's parameters are the date and time value to convert, a `TimeZoneInfo` object that represents the time zone of the date and time value, and a `TimeZoneInfo` object that represents the time zone to convert the date and time value to.</span></span>

* <xref:System.TimeZoneInfo.ConvertTimeBySystemTimeZoneId%2A>

  <span data-ttu-id="176ee-155">Этот метод параметры являются Дата и время, которое требуется преобразовать, идентификатор даты и времени значение часового пояса и идентификатор часового пояса преобразовать значение даты и времени.</span><span class="sxs-lookup"><span data-stu-id="176ee-155">This method's parameters are the date and time value to convert, the identifier of the date and time value's time zone, and the identifier of the time zone to convert the date and time value to.</span></span>

<span data-ttu-id="176ee-156">Оба метода требуют <xref:System.DateTime.Kind%2A> свойство значения даты и времени для преобразования и <xref:System.TimeZoneInfo> идентификатор объекта или часового пояса, представляющего его часовой пояс соответствуют друг с другом.</span><span class="sxs-lookup"><span data-stu-id="176ee-156">Both methods require that the <xref:System.DateTime.Kind%2A> property of the date and time value to convert and the <xref:System.TimeZoneInfo> object or time zone identifier that represents its time zone correspond to one another.</span></span> <span data-ttu-id="176ee-157">В противном случае <xref:System.ArgumentException> возникает исключение.</span><span class="sxs-lookup"><span data-stu-id="176ee-157">Otherwise, an <xref:System.ArgumentException> is thrown.</span></span> <span data-ttu-id="176ee-158">Например если `Kind` задано значение даты и времени `DateTimeKind.Local`, создается исключение при `TimeZoneInfo` передать методу в качестве параметра объект не равен `TimeZoneInfo.Local`.</span><span class="sxs-lookup"><span data-stu-id="176ee-158">For example, if the `Kind` property of the date and time value is `DateTimeKind.Local`, an exception is thrown if the `TimeZoneInfo` object passed as a parameter to the method is not equal to `TimeZoneInfo.Local`.</span></span> <span data-ttu-id="176ee-159">Исключение также вызывается, если идентификатор, переданный как параметр метода не равно `TimeZoneInfo.Local.Id`.</span><span class="sxs-lookup"><span data-stu-id="176ee-159">An exception is also thrown if the identifier passed as a parameter to the method is not equal to `TimeZoneInfo.Local.Id`.</span></span>

<span data-ttu-id="176ee-160">В следующем примере используется <xref:System.TimeZoneInfo.ConvertTime%2A> метода для преобразования из гавайского стандартного времени в местное время.</span><span class="sxs-lookup"><span data-stu-id="176ee-160">The following example uses the <xref:System.TimeZoneInfo.ConvertTime%2A> method to convert from Hawaiian Standard Time to local time.</span></span>

[!code-csharp[System.TimeZone2.Concepts#9](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.Concepts/CS/TimeZone2Concepts.cs#9)]
[!code-vb[System.TimeZone2.Concepts#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.Concepts/VB/TimeZone2Concepts.vb#9)]

## <a name="converting-datetimeoffset-values"></a><span data-ttu-id="176ee-161">Преобразование значений DateTimeOffset</span><span class="sxs-lookup"><span data-stu-id="176ee-161">Converting DateTimeOffset values</span></span>

<span data-ttu-id="176ee-162">Значения даты и времени, представленного <xref:System.DateTimeOffset> объекты не полностью часового пояса помнить, так как объект отсоединяется от его часовым поясом во время создания экземпляра.</span><span class="sxs-lookup"><span data-stu-id="176ee-162">Date and time values represented by <xref:System.DateTimeOffset> objects are not fully time-zone aware because the object is disassociated from its time zone at the time it is instantiated.</span></span> <span data-ttu-id="176ee-163">Однако во многих случаях приложению достаточно преобразовать дату и время на основе двух различных значений смещения относительно времени в формате UTC, а не на основе времени конкретных часовых поясов.</span><span class="sxs-lookup"><span data-stu-id="176ee-163">However, in many cases an application simply needs to convert a date and time based on two different offsets from UTC rather than on the time in particular time zones.</span></span> <span data-ttu-id="176ee-164">Для такого преобразования можно вызвать текущего экземпляра <xref:System.DateTimeOffset.ToOffset%2A> метод.</span><span class="sxs-lookup"><span data-stu-id="176ee-164">To perform this conversion, you can call the current instance's <xref:System.DateTimeOffset.ToOffset%2A> method.</span></span> <span data-ttu-id="176ee-165">Единственным параметром метода является смещение нового значения даты и времени, метод для возврата.</span><span class="sxs-lookup"><span data-stu-id="176ee-165">The method's single parameter is the offset of the new date and time value that the method is to return.</span></span>

<span data-ttu-id="176ee-166">Например, если дата и время запроса пользователя к веб-странице известны и сериализованы в виде строки в формате мм/дд/гггг чч:мм:сс zzzz, то следующий метод `ReturnTimeOnServer` преобразует это значение даты и времени в значение даты и времени на веб-сервере.</span><span class="sxs-lookup"><span data-stu-id="176ee-166">For example, if the date and time of a user request for a Web page is known and is serialized as a string in the format MM/dd/yyyy hh:mm:ss zzzz, the following `ReturnTimeOnServer` method converts this date and time value to the date and time on the Web server.</span></span>

[!code-csharp[System.DateTimeOffset.Conceptual.OffsetConversions#1](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.OffsetConversions/cs/TimeConversions.cs#1)]
[!code-vb[System.DateTimeOffset.Conceptual.OffsetConversions#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.OffsetConversions/vb/TimeConversions.vb#1)] 

<span data-ttu-id="176ee-167">Если методу передается строка "9/1/2007 5:32:07 -05:00", которая представляет дату и время в часовом поясе, который раньше пояса UTC на пять часов, он возвращает строку "9/1/2007 3:32:07 -07:00" для сервера, расположенного в тихоокеанском стандартном часовом поясе США.</span><span class="sxs-lookup"><span data-stu-id="176ee-167">If the method is passed the string "9/1/2007 5:32:07 -05:00", which represents the date and time in a time zone five hours earlier than UTC, it returns 9/1/2007 3:32:07 AM -07:00 for a server located in the U.S. Pacific Standard Time zone.</span></span>

<span data-ttu-id="176ee-168"><xref:System.TimeZoneInfo> Класс также содержит перегрузку <xref:System.TimeZoneInfo.ConvertTime%28System.DateTimeOffset%2CSystem.TimeZoneInfo%29?displayProperty=nameWithType> метод, который выполняет преобразование часовых поясов с <xref:System.DateTimeOffset.ToOffset(System.TimeSpan)> значения.</span><span class="sxs-lookup"><span data-stu-id="176ee-168">The <xref:System.TimeZoneInfo> class also includes an overload of the <xref:System.TimeZoneInfo.ConvertTime%28System.DateTimeOffset%2CSystem.TimeZoneInfo%29?displayProperty=nameWithType> method that performs time zone conversions with <xref:System.DateTimeOffset.ToOffset(System.TimeSpan)> values.</span></span> <span data-ttu-id="176ee-169">Параметры метода <xref:System.DateTimeOffset> и ссылка на часовой пояс, к которому будет преобразовать время.</span><span class="sxs-lookup"><span data-stu-id="176ee-169">The method's parameters are a <xref:System.DateTimeOffset> value and a reference to the time zone to which the time is to be converted.</span></span> <span data-ttu-id="176ee-170">Вызов метода возвращает <xref:System.DateTimeOffset> значение.</span><span class="sxs-lookup"><span data-stu-id="176ee-170">The method call returns a <xref:System.DateTimeOffset> value.</span></span> <span data-ttu-id="176ee-171">Например `ReturnTimeOnServer` метода из предыдущего примера можно переписать следующим образом для вызова <xref:System.TimeZoneInfo.ConvertTime%28System.DateTimeOffset%2CSystem.TimeZoneInfo%29> метод.</span><span class="sxs-lookup"><span data-stu-id="176ee-171">For example, the `ReturnTimeOnServer` method in the previous example could be rewritten as follows to call the <xref:System.TimeZoneInfo.ConvertTime%28System.DateTimeOffset%2CSystem.TimeZoneInfo%29> method.</span></span>

[!code-csharp[System.DateTimeOffset.Conceptual.OffsetConversions#2](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.OffsetConversions/cs/timeconversions2.cs#2)]
[!code-vb[System.DateTimeOffset.Conceptual.OffsetConversions#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.DateTimeOffset.Conceptual.OffsetConversions/vb/TimeConversions2.vb#2)]

## <a name="see-also"></a><span data-ttu-id="176ee-172">См. также</span><span class="sxs-lookup"><span data-stu-id="176ee-172">See also</span></span>

<span data-ttu-id="176ee-173"><xref:System.TimeZoneInfo>[Даты, время и часовые пояса](../../../docs/standard/datetime/index.md)
[поиск часового пояса, определенные в локальной системе](../../../docs/standard/datetime/finding-the-time-zones-on-local-system.md)</span><span class="sxs-lookup"><span data-stu-id="176ee-173"><xref:System.TimeZoneInfo> [Dates, times, and time zones](../../../docs/standard/datetime/index.md)
[Finding the time zones defined on a local system](../../../docs/standard/datetime/finding-the-time-zones-on-local-system.md)</span></span>
