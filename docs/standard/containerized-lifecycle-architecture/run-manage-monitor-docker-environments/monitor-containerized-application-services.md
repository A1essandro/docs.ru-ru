---
title: Мониторинг служб контейнерных приложений
description: Жизненный цикл контейнерного приложения Docker на основе платформы и средств Майкрософт
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.openlocfilehash: 4bdc4470624ce6e905ab858a2bd8b607c8d3d646
ms.sourcegitcommit: 5bbfe34a9a14e4ccb22367e57b57585c208cf757
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/18/2018
ms.locfileid: "45988605"
---
# <a name="monitor-containerized-application-services"></a><span data-ttu-id="b7317-103">Мониторинг служб контейнерных приложений</span><span class="sxs-lookup"><span data-stu-id="b7317-103">Monitor containerized application services</span></span>

<span data-ttu-id="b7317-104">Крайне важно для приложений разбить на несколько контейнеров и микрослужб иметь возможность отслеживать и анализировать поведение приложения.</span><span class="sxs-lookup"><span data-stu-id="b7317-104">It is critical for applications split into multiple containers and microservices to have a way to monitor and analyze the behavior of the application.</span></span>

## <a name="microsoft-application-insights"></a><span data-ttu-id="b7317-105">Microsoft Application Insights</span><span class="sxs-lookup"><span data-stu-id="b7317-105">Microsoft Application Insights</span></span>

<span data-ttu-id="b7317-106">[Application Insights](https://docs.microsoft.com/azure/application-insights/app-insights-overview) — расширяемая Служба аналитики, отслеживающий работающего приложения.</span><span class="sxs-lookup"><span data-stu-id="b7317-106">[Application Insights](https://docs.microsoft.com/azure/application-insights/app-insights-overview) is an extensible analytics service that monitors your live application.</span></span> <span data-ttu-id="b7317-107">Она помогает обнаруживать и диагностировать проблемы с производительностью и понять, что пользователи фактически делают с вашим приложением.</span><span class="sxs-lookup"><span data-stu-id="b7317-107">It helps you to detect and diagnose performance issues and to understand what users actually do with your app.</span></span> <span data-ttu-id="b7317-108">Она предназначена для разработчиков, с целью помочь вам в постоянно улучшать производительность и удобство использования служб и приложений.</span><span class="sxs-lookup"><span data-stu-id="b7317-108">It's designed for developers, with the intent of helping you to continuously improve the performance and usability of your services or applications.</span></span> <span data-ttu-id="b7317-109">Application Insights работает с веб служб и автономных приложений на самых разных платформ, как .NET, Java, Node.js и многих других платформах, размещенные локально или в облаке.</span><span class="sxs-lookup"><span data-stu-id="b7317-109">Application Insights works with both web/services and standalone apps on a wide variety of platforms like .NET, Java, Node.js and many other platforms, hosted on-premises or in the cloud.</span></span>

### <a name="analyzing-docker-apps-in-qa-environments-using-application-insights"></a><span data-ttu-id="b7317-110">Анализ приложений Docker в среде контроля Качества, с помощью Application Insights</span><span class="sxs-lookup"><span data-stu-id="b7317-110">Analyzing Docker apps in QA environments using Application Insights</span></span>

<span data-ttu-id="b7317-111">Поскольку затрагивает как Docker, вы сможете увидеть график события жизненного цикла и счетчики производительности из контейнеров Docker в Application Insights.</span><span class="sxs-lookup"><span data-stu-id="b7317-111">As it pertains to Docker, you can chart life-cycle events and performance counters from Docker containers on Application Insights.</span></span> <span data-ttu-id="b7317-112">Необходимо запустить [образ Application Insights Docker](https://hub.docker.com/r/microsoft/applicationinsights/) как контейнер в узле и он будет отображать счетчики производительности для узла, и для других образов Docker.</span><span class="sxs-lookup"><span data-stu-id="b7317-112">You just need to run the [Application Insights Docker image](https://hub.docker.com/r/microsoft/applicationinsights/) as a container in your host, and it will display performance counters for the host as well as for the other Docker images.</span></span> <span data-ttu-id="b7317-113">Этот образ Application Insights Docker (рис. 6 - 1) помогает отслеживать контейнерные приложения путем сбора данных телеметрии о производительности и активности узла Docker (то есть виртуальных машин Linux), контейнеры Docker и приложения, выполняющиеся в них.</span><span class="sxs-lookup"><span data-stu-id="b7317-113">This Application Insights Docker image (Figure 6-1) helps you to monitor your containerized applications by collecting telemetry about the performance and activity of your Docker host (that is, your Linux VMs), Docker containers and the applications running within them.</span></span>

![пример](./media/image1.png)

<span data-ttu-id="b7317-115">Рис. 6-1: Application Insights, мониторинг узлов Docker и контейнеры</span><span class="sxs-lookup"><span data-stu-id="b7317-115">Figure 6-1: Application Insights monitoring Docker hosts and containers</span></span>

<span data-ttu-id="b7317-116">При запуске [образ Application Insights Docker](https://hub.docker.com/r/microsoft/applicationinsights/) на узле Docker, можно воспользоваться преимуществами следующих:</span><span class="sxs-lookup"><span data-stu-id="b7317-116">When you run the [Application Insights Docker image](https://hub.docker.com/r/microsoft/applicationinsights/) on your Docker host, you benefit from the following:</span></span>

-   <span data-ttu-id="b7317-117">Данные телеметрии о всех контейнеров, запущенных на узле жизненного цикла — запустить, остановить и т. д.</span><span class="sxs-lookup"><span data-stu-id="b7317-117">Life-cycle telemetry about all the containers running on the host—start, stop, and so on.</span></span>

-   <span data-ttu-id="b7317-118">Счетчики производительности для всех контейнеров: ЦП, памяти, использование сети и многое другое.</span><span class="sxs-lookup"><span data-stu-id="b7317-118">Performance counters for all the containers: CPU, memory, network usage, and more.</span></span>

-   <span data-ttu-id="b7317-119">Если вы установили также [пакет SDK Application Insights](https://docs.microsoft.com/azure/application-insights/app-insights-asp-net) в приложениях, выполняющихся в контейнерах, все данные телеметрии этих приложений будут иметь дополнительные свойства, идентифицирующие контейнер и хост-компьютер.</span><span class="sxs-lookup"><span data-stu-id="b7317-119">If you also installed [Application Insights SDK](https://docs.microsoft.com/azure/application-insights/app-insights-asp-net) in the apps running in the containers, all the telemetry of those apps will have additional properties identifying the container and host machine.</span></span> <span data-ttu-id="b7317-120">Таким образом например, если у вас есть экземпляры приложения, запущенные на нескольких узлах, вы легко сможете отфильтровать данные телеметрии приложения по узлу.</span><span class="sxs-lookup"><span data-stu-id="b7317-120">So, for example, if you have instances of an app running in more than one host, you'll easily be able to filter your app telemetry by host.</span></span>

### <a name="setting-up-application-insights-to-monitor-docker-applications-and-docker-hosts"></a><span data-ttu-id="b7317-121">Настройка Application Insights для мониторинга приложений Docker и узлов Docker</span><span class="sxs-lookup"><span data-stu-id="b7317-121">Setting up Application Insights to monitor Docker applications and Docker hosts</span></span>

<span data-ttu-id="b7317-122">Чтобы создать ресурс Application Insights, следуйте инструкциям в статьях, представленных в списке ниже.</span><span class="sxs-lookup"><span data-stu-id="b7317-122">To create an Application Insights resource, follow the instructions in the articles presented in the list that follows.</span></span> <span data-ttu-id="b7317-123">Портал Azure создаст необходимый скрипт для вас.</span><span class="sxs-lookup"><span data-stu-id="b7317-123">Azure Portal will create the necessary script for you.</span></span>

-   <span data-ttu-id="b7317-124">**Мониторинг приложений Docker в Application Insights:**  [https://docs.microsoft.com/azure/application-insights/app-insights-docker](https://docs.microsoft.com/azure/application-insights/app-insights-docker)</span><span class="sxs-lookup"><span data-stu-id="b7317-124">**Monitor Docker applications in Application Insights:**  [https://docs.microsoft.com/azure/application-insights/app-insights-docker](https://docs.microsoft.com/azure/application-insights/app-insights-docker)</span></span>

-   <span data-ttu-id="b7317-125">**Приложения Insights Docker образ в Docker Hub и Github:**</span><span class="sxs-lookup"><span data-stu-id="b7317-125">**Application Insights Docker image at Docker Hub and Github:**</span></span>  
<span data-ttu-id="b7317-126">[https://hub.docker.com/r/microsoft/applicationinsights/](https://hub.docker.com/r/microsoft/applicationinsights/) и <https://github.com/Microsoft/ApplicationInsights-Docker></span><span class="sxs-lookup"><span data-stu-id="b7317-126">[https://hub.docker.com/r/microsoft/applicationinsights/](https://hub.docker.com/r/microsoft/applicationinsights/) and <https://github.com/Microsoft/ApplicationInsights-Docker></span></span>

-   <span data-ttu-id="b7317-127">**Настройка Application Insights для ASP.NET:**</span><span class="sxs-lookup"><span data-stu-id="b7317-127">**Set up Application Insights for ASP.NET:**</span></span>  
[https://docs.microsoft.com/azure/application-insights/app-insights-asp-net](https://docs.microsoft.com/azure/application-insights/app-insights-asp-net)

-   <span data-ttu-id="b7317-128">**Application Insights для веб-страниц:**</span><span class="sxs-lookup"><span data-stu-id="b7317-128">**Application Insights for web pages:**</span></span>  
<https://docs.microsoft.com/azure/application-insights/app-insights-javascript>

## <a name="microsoft-operations-management-suite"></a><span data-ttu-id="b7317-129">Microsoft Operations Management Suite</span><span class="sxs-lookup"><span data-stu-id="b7317-129">Microsoft Operations Management Suite</span></span>

<span data-ttu-id="b7317-130">[Operations Management Suite](https://microsoft.com/oms) — это упрощенное решение управления ИТ, которое предоставляет log analytics, автоматизации, архивации и site recovery.</span><span class="sxs-lookup"><span data-stu-id="b7317-130">[Operations Management Suite](https://microsoft.com/oms) is a simplified IT management solution that provides log analytics, automation, backup, and site recovery.</span></span> <span data-ttu-id="b7317-131">На основе [запросы](https://blogs.technet.microsoft.com/msoms/2016/01/21/easy-microsoft-operations-management-suite-search-queries/) в Operations Management Suite, вы можете отправить [оповещения](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-monitoring-alerts) и установить исправление через [службы автоматизации Azure](https://docs.microsoft.com/azure/automation/).</span><span class="sxs-lookup"><span data-stu-id="b7317-131">Based on [queries](https://blogs.technet.microsoft.com/msoms/2016/01/21/easy-microsoft-operations-management-suite-search-queries/) in Operations Management Suite, you can raise [alerts](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-monitoring-alerts) and set remediation via [Azure Automation](https://docs.microsoft.com/azure/automation/).</span></span> <span data-ttu-id="b7317-132">Оно также легко интегрируется в существующие решения управления для обеспечения единого представления панели прозрачного стекла.</span><span class="sxs-lookup"><span data-stu-id="b7317-132">It also seamlessly integrates with your existing management solutions to provide a single pane-of-glass view.</span></span> <span data-ttu-id="b7317-133">Operations Management Suite помогает управлять и защищать в локальной и облачной инфраструктурой.</span><span class="sxs-lookup"><span data-stu-id="b7317-133">Operations Management Suite helps you to manage and protect your on-premises and cloud infrastructure.</span></span>

### <a name="operations-management-suitehttpsmicrosoftcomoms-container-solution-for-docker"></a><span data-ttu-id="b7317-134">[Operations Management Suite](https://microsoft.com/oms) решение контейнеров для Docker</span><span class="sxs-lookup"><span data-stu-id="b7317-134">[Operations Management Suite](https://microsoft.com/oms) Container Solution for Docker</span></span>

<span data-ttu-id="b7317-135">Помимо предоставления ценных служб, сам по себе, решение контейнера для операций управления Suite можно управлять и отслеживать узлы Docker и контейнеры, отображая сведения о размещении контейнеров и узлов контейнеров, какие контейнеры запущены или в состоянии сбоя и Docker daemon и контейнер журналов, отправляемых в *stdout* и *stderr*.</span><span class="sxs-lookup"><span data-stu-id="b7317-135">In addition to providing valuable services on its own, the Operations Management Suite Container Solution can manage and monitor Docker hosts and containers by showing information about where your containers and container hosts are, which containers are running or failed, and Docker daemon and container logs sent to *stdout* and *stderr*.</span></span> <span data-ttu-id="b7317-136">Оно также показывает метрики производительности, такие как загрузка ЦП, объем памяти, характеристики сети и хранилища для контейнера и узлов, чтобы помочь устранить ошибки и обнаружить конфликтующие соседние контейнеры.</span><span class="sxs-lookup"><span data-stu-id="b7317-136">It also shows performance metrics such as CPU, memory, network, and storage for the container and hosts to help you troubleshoot and find noisy neighbor containers.</span></span>

![](./media/image2.png)

<span data-ttu-id="b7317-137">Рис. 6-2: сведения о контейнерах Docker, представленной в Operations Management Suite</span><span class="sxs-lookup"><span data-stu-id="b7317-137">Figure 6-2: Information about Docker containers shown by Operations Management Suite</span></span>

<span data-ttu-id="b7317-138">Application Insights и Operations Management Suite сосредоточиться на мониторинга действий; Тем не менее Application Insights больше фокусируется на наблюдение за приложениями сами благодаря этот пакет SDK в приложение.</span><span class="sxs-lookup"><span data-stu-id="b7317-138">Application Insights and Operations Management Suite both focus on monitoring activities; however, Application Insights focuses more on monitoring the apps themselves thanks to its SDK running within the app.</span></span> <span data-ttu-id="b7317-139">Тем не менее Operations Management Suite гораздо больше фокусируется на инфраструктуре вокруг узлов, а также он предлагает глубокий анализ журналов в масштабе то же время предоставляя системе очень гибкий управляемых данными поиска и запроса.</span><span class="sxs-lookup"><span data-stu-id="b7317-139">However, Operations Management Suite focuses much more on the infrastructure around the hosts, plus it offers deep analysis on logs at scale while providing a very flexible data-driven search/query system.</span></span>

<span data-ttu-id="b7317-140">Так как Operations Management Suite реализуется как облачная служба, возможно он приступить к работе быстро с минимальными затратами на службы инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="b7317-140">Because Operations Management Suite is implemented as a cloud-based service, you can have it up and running quickly with minimal investment in infrastructure services.</span></span> <span data-ttu-id="b7317-141">Новые возможности предоставляются автоматически, что на текущее обслуживание и обновление затраты.</span><span class="sxs-lookup"><span data-stu-id="b7317-141">New features are delivered automatically, saving you from ongoing maintenance and upgrade costs.</span></span>

<span data-ttu-id="b7317-142">С помощью Operations Management Suite контейнер решения, можно сделать следующее:</span><span class="sxs-lookup"><span data-stu-id="b7317-142">Using Operations Management Suite Container Solution, you can do the following:</span></span>

-   <span data-ttu-id="b7317-143">Централизовать и сопоставлять миллионам журналов из контейнеров Docker в нужном масштабе</span><span class="sxs-lookup"><span data-stu-id="b7317-143">Centralize and correlate millions of logs from Docker containers at scale</span></span>

-   <span data-ttu-id="b7317-144">Просмотреть сведения о всех узлов контейнера в одном месте</span><span class="sxs-lookup"><span data-stu-id="b7317-144">See information about all container hosts in a single location</span></span>

-   <span data-ttu-id="b7317-145">Знать, какие контейнеры запущенных, какой образ их работы и где они выполняются:</span><span class="sxs-lookup"><span data-stu-id="b7317-145">Know which containers are running, what image they're running, and where they're running</span></span>

-   <span data-ttu-id="b7317-146">Быстро диагностировать контейнеры «шумный сосед», которые могут вызвать проблемы на узлах контейнера</span><span class="sxs-lookup"><span data-stu-id="b7317-146">Quickly diagnose "noisy neighbor" containers that can cause problems on container hosts</span></span>

-   <span data-ttu-id="b7317-147">Журнал аудита для действий см. в разделе о контейнерах</span><span class="sxs-lookup"><span data-stu-id="b7317-147">See an audit trail for actions on containers</span></span>

-   <span data-ttu-id="b7317-148">Устранение неполадок путем просмотра и поиска централизованные журналы без удаленного взаимодействия с узлами Docker</span><span class="sxs-lookup"><span data-stu-id="b7317-148">Troubleshoot by viewing and searching centralized logs without remoting to the Docker hosts</span></span>

-   <span data-ttu-id="b7317-149">Находить контейнеры, которые могут быть «шумных соседей» и занимает слишком много ресурсов на узле</span><span class="sxs-lookup"><span data-stu-id="b7317-149">Find containers that might be "noisy neighbors" and consuming excess resources on a host</span></span>

-   <span data-ttu-id="b7317-150">Просмотреть централизованного ЦП, памяти, хранения и сведения об использовании и производительности сети для контейнеров</span><span class="sxs-lookup"><span data-stu-id="b7317-150">View centralized CPU, memory, storage, and network usage and performance information for containers</span></span>

-   <span data-ttu-id="b7317-151">Создать тестовые контейнеры Docker с помощью службы автоматизации Azure</span><span class="sxs-lookup"><span data-stu-id="b7317-151">Generate test Docker containers with Azure Automation</span></span>

<span data-ttu-id="b7317-152">Вы увидите сведения о производительности с помощью запросов, такие как тип = Perf, как показано на рис. 6-3.</span><span class="sxs-lookup"><span data-stu-id="b7317-152">You can see performance information by running queries like Type=Perf, as shown in Figure 6-3.</span></span>

![DockerPerfMetricsView](./media/image3.png)<span data-ttu-id="b7317-154">{width = «5.78625 in» height = «3,25 in»}</span><span class="sxs-lookup"><span data-stu-id="b7317-154">{width="5.78625in" height="3.25in"}</span></span>

<span data-ttu-id="b7317-155">Рис. 6-3: метрики производительности узлов Docker, представленной в Operations Management Suite</span><span class="sxs-lookup"><span data-stu-id="b7317-155">Figure 6-3: Performance metrics of Docker hosts shown by Operations Management Suite</span></span>

<span data-ttu-id="b7317-156">Сохранение запросов также — это стандартная функция в Operations Management Suite, которая помогает сохранять запросы, оказавшиеся полезными и трендов в вашей системе.</span><span class="sxs-lookup"><span data-stu-id="b7317-156">Saving queries is also a standard feature in Operations Management Suite and can help you keep queries you've found useful and discover trends in your system.</span></span>

<span data-ttu-id="b7317-157">**Дополнительные сведения о** для поиска сведений об установке и настройке Docker решение для контейнеров в [Operations Management Suite](https://microsoft.com/oms), перейдите в меню <https://docs.microsoft.com/azure/log-analytics/log-analytics-containers>.</span><span class="sxs-lookup"><span data-stu-id="b7317-157">**More info** To find information on installing and configuring the Docker container solution in [Operations Management Suite](https://microsoft.com/oms), go to <https://docs.microsoft.com/azure/log-analytics/log-analytics-containers>.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="b7317-158">[Назад](manage-production-docker-environments.md)
[Вперед](../key-takeaways/index.md)</span><span class="sxs-lookup"><span data-stu-id="b7317-158">[Previous](manage-production-docker-environments.md)
[Next](../key-takeaways/index.md)</span></span>
