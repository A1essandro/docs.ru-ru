---
title: "Действия в рабочем процессе DevOps внешний цикл для Docker приложения"
description: "Жизненный цикл приложений контейнерного Docker с помощью платформы Майкрософт и средств"
keywords: "Docker, микрослужбы, ASP.NET, контейнер"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.openlocfilehash: 070d174cde9e80f542865f5617b1c702a07a8018
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2017
---
# <a name="steps-in-the-outer-loop-devops-workflow-for-a-docker-application"></a><span data-ttu-id="fa021-104">Действия в рабочем процессе DevOps внешний цикл для Docker приложения</span><span class="sxs-lookup"><span data-stu-id="fa021-104">Steps in the outer-loop DevOps workflow for a Docker application</span></span>

<span data-ttu-id="fa021-105">Рис. 5-1 представляется начала до конца, описание действия, составляющие внешний цикл DevOps рабочего процесса.</span><span class="sxs-lookup"><span data-stu-id="fa021-105">Figure 5-1 presents an end-to-end depiction of the steps comprising the DevOps outer-loop workflow.</span></span>

![](./media/image1.png)

<span data-ttu-id="fa021-106">Рисунок 5-1: рабочий процесс внешнего цикла DevOps для Docker приложений с помощью средства Microsoft</span><span class="sxs-lookup"><span data-stu-id="fa021-106">Figure 5-1: DevOps outer-loop workflow for Docker applications with Microsoft tools</span></span>

<span data-ttu-id="fa021-107">Теперь давайте рассмотрим каждое из этих действий более подробно.</span><span class="sxs-lookup"><span data-stu-id="fa021-107">Now, let's examine each of these steps in greater detail.</span></span>

## <a name="step-1-inner-loop-development-workflow"></a><span data-ttu-id="fa021-108">Шаг 1: Рабочий процесс разработки внутреннего цикла</span><span class="sxs-lookup"><span data-stu-id="fa021-108">Step 1: Inner-loop development workflow</span></span>

<span data-ttu-id="fa021-109">Этот шаг подробно рассматривается в главе 4, но Напомню, вот которой начинается внешнего цикла момент, когда разработчик помещает кода в систему управления версиями (например, Git), инициированные действия конвейера элемента конфигурации.</span><span class="sxs-lookup"><span data-stu-id="fa021-109">This step is explained in detail in Chapter 4, but, to recap, here is where the outer-loop begins, the moment at which a developer pushes code to the source control management system (like Git) initiating CI pipeline actions.</span></span>

## <a name="step-2-source-code-control-integration-and-management-with-visual-studio-team-services-and-git"></a><span data-ttu-id="fa021-110">Шаг 2: Интеграция системы управления версиями и управление с помощью Visual Studio Team Services и Git</span><span class="sxs-lookup"><span data-stu-id="fa021-110">Step 2: Source-Code Control integration and management with Visual Studio Team Services and Git</span></span>

<span data-ttu-id="fa021-111">На этом этапе необходимо иметь систему управления версиями для сбора консолидированных версии всего кода, поступающих от разные разработчики в команде.</span><span class="sxs-lookup"><span data-stu-id="fa021-111">At this step, you need to have a version-control system to gather a consolidated version of all the code coming from the different developers in the team.</span></span>

<span data-ttu-id="fa021-112">Несмотря на то, что управление исходным кодом и управления исходным кодом (SCC) может показаться характер секунду, для большинства разработчиков, при создании приложений Docker в DevOps жизненного цикла, крайне важно для привлечения внимания, не должен отправить образов Docker с приложением непосредственно к глобальной Docker реестра (например, в реестре контейнеров Azure или Docker Hub) с компьютера разработчика.</span><span class="sxs-lookup"><span data-stu-id="fa021-112">Even though source-code control (SCC) and source-code management might seem second-nature to most developers, when creating Docker applications in a DevOps life cycle, it is critical to emphasize that you must not submit the Docker images with the application directly to the global Docker Registry (like Azure Container Registry or Docker Hub) from the developer's machine.</span></span> <span data-ttu-id="fa021-113">С другой стороны образы Docker, выпуска и развертывания в рабочей среде должны создаваться только на исходный код, который интегрированы в глобальной сборке или CI конвейера, на основе на репозиторий исходного кода (например, Git).</span><span class="sxs-lookup"><span data-stu-id="fa021-113">On the contrary, the Docker images to be released and deployed to production environments must be created solely on the source code that is being integrated in your global build or CI pipeline based on your source-code repository (like Git).</span></span>

<span data-ttu-id="fa021-114">При тестировании в своих компьютерах локального изображения, созданные разработчиками сами следует использовать только разработчиками.</span><span class="sxs-lookup"><span data-stu-id="fa021-114">The local images generated by the developers themselves should be used just by the developers when testing within their own machines.</span></span> <span data-ttu-id="fa021-115">Именно поэтому крайне важно, чтобы активировать из кода SCC конвейера DevOps.</span><span class="sxs-lookup"><span data-stu-id="fa021-115">This is why it is critical to have the DevOps pipeline activated from the SCC code.</span></span>

<span data-ttu-id="fa021-116">Visual Studio Team Services и Team Foundation Server поддерживает Git и управления версиями Team Foundation.</span><span class="sxs-lookup"><span data-stu-id="fa021-116">Visual Studio Team Services and Team Foundation Server support Git and Team Foundation Version Control.</span></span> <span data-ttu-id="fa021-117">Можно выбрать между ними и использовать его для работы Microsoft начала до конца.</span><span class="sxs-lookup"><span data-stu-id="fa021-117">You can choose between them and use it for an end-to-end Microsoft experience.</span></span> <span data-ttu-id="fa021-118">Однако также можно управлять коде в хранилищах внешних (например, GitHub, локальными репозиториями Git или Subversion) и по-прежнему сможет подключиться к нему и получение кода в качестве отправной точки для элемента конфигурации DevOps конвейер.</span><span class="sxs-lookup"><span data-stu-id="fa021-118">However, you also can manage your code in external repositories (like GitHub, on-premises Git repositories, or Subversion) and still be able to connect to it and get the code as the starting point for your DevOps CI pipeline.</span></span>

## <a name="step-3-build-ci-integrate-and-test-with-visual-studio-team-services-and-docker"></a><span data-ttu-id="fa021-119">Шаг 3: Сборки, CI, интеграции и тестирования с помощью Visual Studio Team Services и Docker</span><span class="sxs-lookup"><span data-stu-id="fa021-119">Step 3: Build, CI, Integrate, and Test with Visual Studio Team Services and Docker</span></span>

<span data-ttu-id="fa021-120">CI стал стандартом для тестирования современного программного обеспечения и доставки.</span><span class="sxs-lookup"><span data-stu-id="fa021-120">CI has emerged as a standard for modern software testing and delivery.</span></span> <span data-ttu-id="fa021-121">Решение Docker обеспечивает четкое разделение между командами разработки и эксплуатации.</span><span class="sxs-lookup"><span data-stu-id="fa021-121">The Docker solution maintains a clear separation of concerns between the development and operations teams.</span></span> <span data-ttu-id="fa021-122">Неизменность образов Docker обеспечивает множественного повторного развертывания между что разработки, тестирования до непрерывной Интеграции и запуска в производственной среде.</span><span class="sxs-lookup"><span data-stu-id="fa021-122">The immutability of Docker images ensures a repeatable deployment between what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="fa021-123">Подсистема docker развернут на ноутбуках разработчика и инфраструктуре тестирования позволяет контейнеры переносимый во всех средах.</span><span class="sxs-lookup"><span data-stu-id="fa021-123">Docker Engine deployed across the developer laptops and test infrastructure makes the containers portable across environments.</span></span>

<span data-ttu-id="fa021-124">На этом этапе после с правильный код отправлен в системе управления версиями, необходимо *служба построения* для кода и запустить глобальной сборке и тестировании.</span><span class="sxs-lookup"><span data-stu-id="fa021-124">At this point, after you have a version-control system with the correct code submitted, you need a *build service* to pick up the code and run the global build and tests.</span></span>

<span data-ttu-id="fa021-125">О построении CI конвейера, состоящий из своего кода репозитория (Git, т. д.), ваш сервер сборки (Visual Studio Team Services), подсистема Docker и реестр Docker — внутреннего рабочего процесса для этого шага (CI, сборки, тестирования).</span><span class="sxs-lookup"><span data-stu-id="fa021-125">The internal workflow for this step (CI, build, test) is about the construction of a CI pipeline consisting of your code repository (Git, etc.), your build server (Visual Studio Team Services), Docker Engine, and a Docker Registry.</span></span>

<span data-ttu-id="fa021-126">Вы можно использовать Visual Studio Team Services как основа для создания приложений и задание конвейер элемента конфигурации, а также для публикации встроенный «артефакты» с «артефакты репозиторием,» которого описан в следующем шаге.</span><span class="sxs-lookup"><span data-stu-id="fa021-126">You can use Visual Studio Team Services as the foundation for building your applications and setting your CI pipeline, and for publishing the built "artifacts" to an "artifacts repository," which is explained in the next step.</span></span>

<span data-ttu-id="fa021-127">При использовании Docker для развертывания «окончательный артефактов» для развертывания образов Docker приложения или службы внедряются в них.</span><span class="sxs-lookup"><span data-stu-id="fa021-127">When using Docker for the deployment, the "final artifacts" to be deployed are Docker images with your application or services embedded within them.</span></span> <span data-ttu-id="fa021-128">Эти образы передаются или опубликованы в *реестра Docker* (закрытый репозитория тех, которые может иметь в реестре контейнеров Azure, или один открытый как реестр Docker Hub, часто используемый для официальный базовые образы).</span><span class="sxs-lookup"><span data-stu-id="fa021-128">Those images are pushed or published to a *Docker Registry* (a private repository like the ones you can have in Azure Container Registry, or a public one like Docker Hub Registry, which is commonly used for official base images).</span></span>

<span data-ttu-id="fa021-129">Вот основные концепции: CI конвейера будет запущен off путем фиксации SCC репозитория Git.</span><span class="sxs-lookup"><span data-stu-id="fa021-129">Here is the basic concept: The CI pipeline will be kicked-off by a commit to an SCC repository like Git.</span></span> <span data-ttu-id="fa021-130">Фиксация приведет к Visual Studio Team Services запустить задание сборки в контейнер Docker и, после успешного завершения задания push образа Docker в реестр Docker, как показано на рисунке 5-2.</span><span class="sxs-lookup"><span data-stu-id="fa021-130">The commit will cause Visual Studio Team Services to run a build job within a Docker container and, upon successful completion of that job, push a Docker image to the Docker Registry, as illustrated in Figure 5-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="fa021-131">Рисунок 5-2: шаги, необходимые для элемента конфигурации</span><span class="sxs-lookup"><span data-stu-id="fa021-131">Figure 5-2: The steps involved in CI</span></span>

<span data-ttu-id="fa021-132">Ниже приведены основные этапы рабочего процесса CI с Docker и Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="fa021-132">Here are the basic CI workflow steps with Docker and Visual Studio Team Services:</span></span>

1.  <span data-ttu-id="fa021-133">Разработчик помещает фиксации с репозиторием SCC (Git или Visual Studio Team Services, GitHub, и т. д.).</span><span class="sxs-lookup"><span data-stu-id="fa021-133">The developer pushes a commit to an SCC repository (Git/Visual Studio Team Services, GitHub, etc.).</span></span>

2.  <span data-ttu-id="fa021-134">Если вы используете Visual Studio Team Services или Git, CI является встроенной, это означает, что это просто флажка в Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="fa021-134">If you're using Visual Studio Team Services or Git, CI is built in, which means that it is as simple as selecting a check box in Visual Studio Team Services.</span></span> <span data-ttu-id="fa021-135">Если вы используете внешние SCC (например,) (GitHub), *веб-перехватчика* будет уведомления Visual Studio Team Services обновления или принудительная Git и GitHub.</span><span class="sxs-lookup"><span data-stu-id="fa021-135">If you're using an external SCC (like GitHub), a *webhook* will notify Visual Studio Team Services of the update or push to Git/GitHub.</span></span>

3.  <span data-ttu-id="fa021-136">Visual Studio Team Services запрашивает хранилище SCC, включая DockerFile, описывающий изображение, а также код приложения и тестов.</span><span class="sxs-lookup"><span data-stu-id="fa021-136">Visual Studio Team Services pulls the SCC repository, including the DockerFile describing the image as well as the application and test code.</span></span>

4.  <span data-ttu-id="fa021-137">Visual Studio Team Services построения образа Docker и помечает его с номером сборки.</span><span class="sxs-lookup"><span data-stu-id="fa021-137">Visual Studio Team Services builds a Docker image and labels it with a build number.</span></span>

5.  <span data-ttu-id="fa021-138">Visual Studio Team Services создает контейнер Docker в пределах подготовленных узла Docker и выполняет соответствующие тесты.</span><span class="sxs-lookup"><span data-stu-id="fa021-138">Visual Studio Team Services instantiates the Docker container within the provisioned Docker Host, and runs the appropriate tests.</span></span>

6.  <span data-ttu-id="fa021-139">Если тесты проходят успешно, изображение сначала помечается значащее имя, чтобы пользователь знал, это «blessed сборка» (как «/ 1.0.0» или любые другие метки) и затем передается в системный реестр Docker (Docker Hub, реестр контейнера Azure, DTR, и т. д.)</span><span class="sxs-lookup"><span data-stu-id="fa021-139">If the tests are successful, the image is first relabeled to a meaningful name so that you know it is a "blessed build" (like "/1.0.0" or any other label), and then pushed up to your Docker Registry (Docker Hub, Azure Container Registry, DTR, etc.)</span></span>

### <a name="implementing-the-ci-pipeline-with-visual-studio-team-services-and-the-docker-extension-for-visual-studio-team-services"></a><span data-ttu-id="fa021-140">Реализация конвейера CI с Visual Studio Team Services и расширения Docker для Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="fa021-140">Implementing the CI pipeline with Visual Studio Team Services and the Docker extension for Visual Studio Team Services</span></span>

<span data-ttu-id="fa021-141">[Расширения Visual Studio Team Services Docker](https://aka.ms/vstsdockerextension) добавляет задачу в ваш конвейер элементов конфигурации, с помощью которого можно создавать образы Docker, push образы Docker, прошедшего проверку подлинности реестр Docker, запуска Docker images или выполнить другие операции, предоставляемые Docker CLI.</span><span class="sxs-lookup"><span data-stu-id="fa021-141">The [Visual Studio Team Services Docker extension](https://aka.ms/vstsdockerextension) adds a task to your CI pipeline with which you can build Docker images, push Docker images to an authenticated Docker registry, run Docker images, or run other operations offered by the Docker CLI.</span></span> <span data-ttu-id="fa021-142">Он также добавляет Docker Compose задание, которое можно использовать для сборки, Push-уведомлений и запускать приложения multicontainer Docker или выполнить другие операции, предоставляемые Docker составления (CLI), как показано на рисунке 5-3.</span><span class="sxs-lookup"><span data-stu-id="fa021-142">It also adds a Docker Compose task that you can use to build, push, and run multicontainer Docker applications, or run other operations offered by the Docker Compose CLI, as shown in Figure 5-3.</span></span>

![](./media/image3.png)

<span data-ttu-id="fa021-143">Рис. 5-3: В конвейере Docker CI в Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="fa021-143">Figure 5-3: The Docker CI pipeline in Visual Studio Team Services</span></span>

<span data-ttu-id="fa021-144">Расширения Docker можно использовать конечные точки службы для узлов Docker, а также для контейнера и реестров изображения.</span><span class="sxs-lookup"><span data-stu-id="fa021-144">The Docker extension can use service endpoints for Docker hosts and for container or image registries.</span></span> <span data-ttu-id="fa021-145">Задачи по умолчанию использовать локальный узел Docker, если он доступен (в настоящее время для этого пользовательского агента Visual Studio Team Services); в противном случае они требуют введения подключения к узлу Docker.</span><span class="sxs-lookup"><span data-stu-id="fa021-145">The tasks default to using a local Docker host if available (this currently requires a custom Visual Studio Team Services agent); otherwise, they require that you provide a Docker host connection.</span></span> <span data-ttu-id="fa021-146">Действия, которые зависят от проверки подлинности с реестра Docker, например помещает изображения, необходимо предоставить Docker реестра соединения.</span><span class="sxs-lookup"><span data-stu-id="fa021-146">Actions that depend on being authenticated with a Docker registry, such as pushing an image, require that you provide a Docker registry connection.</span></span>

<span data-ttu-id="fa021-147">Расширение Visual Studio Team Services Docker устанавливаются следующие компоненты в вашей учетной записи Visual Studio Team Services:</span><span class="sxs-lookup"><span data-stu-id="fa021-147">The Visual Studio Team Services Docker extension installs the following components in your Visual Studio Team Services account:</span></span>

-   <span data-ttu-id="fa021-148">Конечную точку службы для подключения к реестра Docker</span><span class="sxs-lookup"><span data-stu-id="fa021-148">A service endpoint for connecting to a Docker registry</span></span>

-   <span data-ttu-id="fa021-149">Конечную точку службы для соединения с узлом контейнера Docker</span><span class="sxs-lookup"><span data-stu-id="fa021-149">A service endpoint for connecting to a Docker Container Host</span></span>

-   <span data-ttu-id="fa021-150">Задачи Docker, выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="fa021-150">A Docker task to do the following:</span></span>

-   <span data-ttu-id="fa021-151">Сборки образа</span><span class="sxs-lookup"><span data-stu-id="fa021-151">Build an image</span></span>

-   <span data-ttu-id="fa021-152">Принудительно отправить изображение или репозиторий реестра</span><span class="sxs-lookup"><span data-stu-id="fa021-152">Push an image or a repository to a registry</span></span>

-   <span data-ttu-id="fa021-153">Запустите изображения в контейнере</span><span class="sxs-lookup"><span data-stu-id="fa021-153">Run an image in a container</span></span>

-   <span data-ttu-id="fa021-154">Выполните команду Docker</span><span class="sxs-lookup"><span data-stu-id="fa021-154">Run a Docker command</span></span>

-   <span data-ttu-id="fa021-155">Задачи для выполнения команды Docker Compose Docker Compose</span><span class="sxs-lookup"><span data-stu-id="fa021-155">A Docker Compose task to run a Docker Compose command</span></span>

<span data-ttu-id="fa021-156">С этими задачами Visual Studio Team Services сборки Linux Docker/виртуальной Машины для узла подготовки в Azure и предпочтительный реестра Docker (реестра контейнера Azure, Docker Hub, закрытый DTR Docker или любые другие реестра Docker) можно объединить конвейер Docker CI очень согласованно.</span><span class="sxs-lookup"><span data-stu-id="fa021-156">With these Visual Studio Team Services tasks, a build Linux-Docker Host/VM provisioned in Azure and your preferred Docker registry (Azure Container Registry, Docker Hub, private Docker DTR, or any other Docker registry) you can assemble your Docker CI pipeline in a very consistent way.</span></span>

<span data-ttu-id="fa021-157">***Требования:***</span><span class="sxs-lookup"><span data-stu-id="fa021-157">***Requirements:***</span></span>

-   <span data-ttu-id="fa021-158">Visual Studio Team Services или для локальных установок Team Foundation Server 2015 обновлением 3 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="fa021-158">Visual Studio Team Services, or for on-premises installations, Team Foundation Server 2015 Update 3 or later.</span></span>

-   <span data-ttu-id="fa021-159">Агент Visual Studio Team Services, который содержит двоичные файлы Docker.</span><span class="sxs-lookup"><span data-stu-id="fa021-159">A Visual Studio Team Services agent that has the Docker binaries.</span></span>

<span data-ttu-id="fa021-160">Простой способ создать один из них — использовать Docker для запуска контейнера на основе образа Docker агент Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="fa021-160">An easy way to create one of these is to use Docker to run a container based on the Visual Studio Team Services agent Docker image.</span></span>

<span data-ttu-id="fa021-161">**Дополнительные сведения о** для чтения дополнительных сведений о сборке в Visual Studio Team Services Docker CI конвейерная передача и просмотр пошаговые руководства, посетите следующие сайты:</span><span class="sxs-lookup"><span data-stu-id="fa021-161">**More info** To read more about assembling a Visual Studio Team Services Docker CI pipeline and to view walkthroughs, visit the following sites:</span></span>

<span data-ttu-id="fa021-162">Агент Visual Studio Team Services как контейнер Docker: [https://hub.docker.com/r/ \ vsts/microsoft агент /](https://hub.docker.com/r/microsoft/vsts-agent/)</span><span class="sxs-lookup"><span data-stu-id="fa021-162">Running a Visual Studio Team Services agent as a Docker container: [https://hub.docker.com/r/\ microsoft/vsts-agent/](https://hub.docker.com/r/microsoft/vsts-agent/)</span></span>

<span data-ttu-id="fa021-163">Расширения VSTS Docker: <https://aka.ms/vstsdockerextension></span><span class="sxs-lookup"><span data-stu-id="fa021-163">VSTS Docker extension: <https://aka.ms/vstsdockerextension></span></span>

<span data-ttu-id="fa021-164">Создание образов .NET Core Linux Docker с Visual Studio Team Services: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span><span class="sxs-lookup"><span data-stu-id="fa021-164">Building .NET Core Linux Docker images with Visual Studio Team Services: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span></span>

<span data-ttu-id="fa021-165">Создание службы под управлением Linux команды Visual Studio построить компьютера с поддержкой Docker: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span><span class="sxs-lookup"><span data-stu-id="fa021-165">Building a Linux-based Visual Studio Team Service build machine with Docker support: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span></span>

### <a name="integrate-test-and-validate-multicontainer-docker-applications"></a><span data-ttu-id="fa021-166">Интеграция, тестирование и проверка приложений multicontainer Docker</span><span class="sxs-lookup"><span data-stu-id="fa021-166">Integrate, test, and validate multicontainer Docker applications</span></span>

<span data-ttu-id="fa021-167">Как правило большинство приложений Docker состоят из нескольких контейнеров, а не один контейнер.</span><span class="sxs-lookup"><span data-stu-id="fa021-167">Typically, most Docker applications are composed of multiple containers rather than a single container.</span></span> <span data-ttu-id="fa021-168">Хорошим примером является микрослужбами ориентированного приложения, для которого будет иметь один контейнер на микрослужбы.</span><span class="sxs-lookup"><span data-stu-id="fa021-168">A good example is a microservices-oriented application for which you would have one container per microservice.</span></span> <span data-ttu-id="fa021-169">Но даже без строго следующим шаблонам микрослужбами подход, очень вероятно, что приложение Docker будет состоять из нескольких контейнеров или службы.</span><span class="sxs-lookup"><span data-stu-id="fa021-169">But, even without strictly following the microservices approach patterns, it is very probable that your Docker application would be composed of multiple containers or services.</span></span>

<span data-ttu-id="fa021-170">Таким образом после построения приложения контейнеры в конвейере CI, также необходимо развернуть, интеграцию и тестирование приложения в целом, все его контейнеры в рамках интеграции узел Docker или даже в тестовый кластер, к которому вашей контейнеры — распределенные.</span><span class="sxs-lookup"><span data-stu-id="fa021-170">Therefore, after building the application containers in the CI pipeline, you also need to deploy, integrate, and test the application as a whole with all of its containers within an integration Docker host or even into a test cluster to which your containers are distributed.</span></span>

<span data-ttu-id="fa021-171">Если вы используете один узел, можно использовать команды Docker, например docker-составить для построения и развертывания связанных контейнеров для тестирования и проверки среды Docker в одной виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="fa021-171">If you're using a single host, you can use Docker commands such as docker-compose to build and deploy related containers to test and validate the Docker environment in a single VM.</span></span> <span data-ttu-id="fa021-172">Однако при работе с кластером orchestrator как DC/OS, Kubernetes или с помощью Docker Swarm, необходимо выполнить развертывание на контейнеры посредством другого механизма или orchestrator, в зависимости от выбранного кластера или планировщика.</span><span class="sxs-lookup"><span data-stu-id="fa021-172">But, if you are working with an orchestrator cluster like DC/OS, Kubernetes, or Docker Swarm, you need to deploy your containers through a different mechanism or orchestrator, depending on your selected cluster/scheduler.</span></span>

<span data-ttu-id="fa021-173">Ниже приведены несколько типов тестов, которые можно выполнять на контейнеры Docker.</span><span class="sxs-lookup"><span data-stu-id="fa021-173">Following are several types of tests that you can run against Docker containers:</span></span>

-   <span data-ttu-id="fa021-174">Модульные тесты для контейнеров Docker</span><span class="sxs-lookup"><span data-stu-id="fa021-174">Unit tests for Docker containers</span></span>

-   <span data-ttu-id="fa021-175">Тестирование группы взаимосвязанных приложений или микрослужбами</span><span class="sxs-lookup"><span data-stu-id="fa021-175">Testing groups of interrelated applications or microservices</span></span>

-   <span data-ttu-id="fa021-176">Тестирование в выпусках производства и со значением «предохранителя»</span><span class="sxs-lookup"><span data-stu-id="fa021-176">Test in production and "canary" releases</span></span>

<span data-ttu-id="fa021-177">Важно то, что при выполнении интеграции и функционального тестирования, необходимо выполнить эти тесты из вне контейнеров.</span><span class="sxs-lookup"><span data-stu-id="fa021-177">The important point is that when running integration and functional tests, you must run those tests from outside of the containers.</span></span> <span data-ttu-id="fa021-178">Тесты должны не определен и выполняющихся в контейнерах, развертывании, так как контейнеры основаны на статические изображения, которые должны быть так же, как те, которые планируется развертывание в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="fa021-178">Tests must not be defined and run within the containers that you are deploying, because the containers are based on static images that should be exactly like those that you will be deploying into production.</span></span>

<span data-ttu-id="fa021-179">Очень подходящий вариант, при тестировании более сложных сценариев, таких как тестирование несколько кластеров (проверки кластера, кластер промежуточной и производственного кластера) — опубликовать изображения в реестр для тестирования в различных кластеров.</span><span class="sxs-lookup"><span data-stu-id="fa021-179">A very feasible option when testing more advanced scenarios like testing several clusters (test cluster, staging cluster, and production cluster) is to publish the images to a registry to test in various clusters.</span></span>

### <a name="push-the-custom-application-docker-image-into-your-global-docker-registry"></a><span data-ttu-id="fa021-180">Принудительная отправка образа Docker пользовательское приложение в глобальный реестр Docker</span><span class="sxs-lookup"><span data-stu-id="fa021-180">Push the custom application Docker image into your global Docker Registry</span></span>

<span data-ttu-id="fa021-181">После тестирования и проверить образы Docker, может потребоваться теги и их публикация в системный реестр Docker.</span><span class="sxs-lookup"><span data-stu-id="fa021-181">After the Docker images have been tested and validated, you'll want to tag and publish them to your Docker registry.</span></span> <span data-ttu-id="fa021-182">Реестр Docker — ключевой компонент в жизненном цикле приложения Docker, так как это центральное расположение, где хранятся пользовательские теста (также называется «blessed images») будет развернут в Качества и рабочих средах.</span><span class="sxs-lookup"><span data-stu-id="fa021-182">The Docker registry is a critical piece in the Docker application life cycle because it is the central place where you store your custom test (aka "blessed images") to be deployed into QA and production environments.</span></span>

<span data-ttu-id="fa021-183">Подобно как код приложения, хранящийся в репозитории SCC (Git, т. д.) — «источник истины», реестр Docker — «источник истины» двоичных приложения или bits для развертывания в средах QA или рабочей.</span><span class="sxs-lookup"><span data-stu-id="fa021-183">Similar to how the application code stored in your SCC repository (Git, etc.) is your "source of truth," the Docker registry is your "source of truth" for your binary application or bits to be deployed to the QA or production environments.</span></span>

<span data-ttu-id="fa021-184">Как правило вам может потребоваться вашей частных репозиториев для пользовательских образов в закрытом репозитории в реестре контейнеров Azure, локального реестра как доверенный реестр Docker или в реестре public облака с ограниченным доступом (например Docker Hub), хотя в этом последнем случае ваш код не является открытым исходным кодом, должны доверять поставщика безопасности.</span><span class="sxs-lookup"><span data-stu-id="fa021-184">Typically, you might want to have your private repositories for your custom images either in a private repository in Azure Container Registry or in an on-premises registry like Docker Trusted Registry, or in a public-cloud registry with restricted access (like Docker Hub), although in this last case if your code is not open source, you must trust the vendor's security.</span></span> <span data-ttu-id="fa021-185">В любом случае метод, с помощью которого это делается очень похожих и в конечном счете исходя из команды push docker, как показано на рисунке 5-4.</span><span class="sxs-lookup"><span data-stu-id="fa021-185">Either way, the method by which you do this is pretty similar and ultimately based on the docker push command, as depicted in Figure 5-4.</span></span>

![](./media/image4.png)

<span data-ttu-id="fa021-186">Рис. 5-4: публикация пользовательских образов реестр Docker</span><span class="sxs-lookup"><span data-stu-id="fa021-186">Figure 5-4: Publishing custom images to Docker Registry</span></span>

<span data-ttu-id="fa021-187">Существует несколько предложений реестров Docker от поставщиков облачных реестра контейнера Azure, Amazon Web Services контейнер реестра, Google реестра контейнера, Quay реестра и т. д.</span><span class="sxs-lookup"><span data-stu-id="fa021-187">There are multiple offerings of Docker registries from cloud vendors like Azure Container Registry, Amazon Web Services Container Registry, Google Container Registry, Quay Registry, and so on.</span></span>

<span data-ttu-id="fa021-188">С помощью расширения Visual Studio Team Services Docker, можно передать набор образов службы, определенной в файле docker compose.yml, несколько тегов, прошедшего проверку подлинности реестр Docker (например, реестр контейнера Azure), как показано на рисунке 5-5.</span><span class="sxs-lookup"><span data-stu-id="fa021-188">Using the Visual Studio Team Services Docker extension, you can push a set of service images defined by a docker-compose.yml file, with multiple tags, to an authenticated Docker registry (like Azure Container Registry), as shown in Figure 5-5.</span></span>

![](./media/image5.png)

<span data-ttu-id="fa021-189">Рис. 5-5: использование Visual Studio Team Services для публикации пользовательских образов реестр Docker</span><span class="sxs-lookup"><span data-stu-id="fa021-189">Figure 5-5: Using Visual Studio Team Services to publishing custom images to a Docker Registry</span></span>

<span data-ttu-id="fa021-190">**Дополнительные сведения о** Дополнительные сведения о расширении Docker для Visual Studio Team Services, перейдите к <https://aka.ms/vstsdockerextension>.</span><span class="sxs-lookup"><span data-stu-id="fa021-190">**More info** To read more about the Docker extension for Visual Studio Team Services, go to <https://aka.ms/vstsdockerextension>.</span></span> <span data-ttu-id="fa021-191">Чтобы узнать больше о реестре контейнеров Azure, перейдите на <https://aka.ms/azurecontainerregistry>.</span><span class="sxs-lookup"><span data-stu-id="fa021-191">To learn more about Azure Container Registry, go to <https://aka.ms/azurecontainerregistry>.</span></span>

## <a name="step-4-cd-deploy"></a><span data-ttu-id="fa021-192">Шаг 4: Компакт-диска, развертывание</span><span class="sxs-lookup"><span data-stu-id="fa021-192">Step 4: CD, Deploy</span></span>

<span data-ttu-id="fa021-193">Неизменность образов Docker обеспечивает множественного повторного развертывания с что разработки, тестирования до непрерывной Интеграции и запуска в производственной среде.</span><span class="sxs-lookup"><span data-stu-id="fa021-193">The immutability of Docker images ensures a repeatable deployment with what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="fa021-194">После того как вы образы Docker приложений, опубликованных в реестр Docker (частный или общедоступный), можно развернуть их на несколько сред, которые могут возникнуть (производственного Качества, промежуточного хранения, т. д.) из конвейера компакт-диска с помощью Visual Studio Team Services конвейер задачи или Visual Studio Team Services Release Management.</span><span class="sxs-lookup"><span data-stu-id="fa021-194">After you have the application Docker images published in your Docker registry (either private or public), you can deploy them to the several environments that you might have (production, QA, staging, etc.) from your CD pipeline by using Visual Studio Team Services pipeline tasks or Visual Studio Team Services Release Management.</span></span>

<span data-ttu-id="fa021-195">Однако на этом этапе он зависит от какого рода Docker приложения выполняется развертывание.</span><span class="sxs-lookup"><span data-stu-id="fa021-195">However, at this point it depends on what kind of Docker application you are deploying.</span></span> <span data-ttu-id="fa021-196">Развертывание простого приложения (с композиции и развертывание точки зрения) как монолитные приложения, включающего в себя несколько контейнеров или служб и развертываются на нескольких серверах или виртуальных машин сильно отличается от более сложных приложений, таких как развертывание приложения, ориентированного на микрослужбами с крупномасштабным возможностями.</span><span class="sxs-lookup"><span data-stu-id="fa021-196">Deploying a simple application (from a composition and deployment point of view) like a monolithic application comprising a few containers or services and deployed to a few servers or VMs is very different from deploying a more complex application like a microservices-oriented application with hyperscale capabilities.</span></span> <span data-ttu-id="fa021-197">Эти два сценария описаны в следующих разделах.</span><span class="sxs-lookup"><span data-stu-id="fa021-197">These two scenarios are explained in the following sections.</span></span>

### <a name="deploying-composed-docker-applications-to-multiple-docker-environments"></a><span data-ttu-id="fa021-198">Развертывание композицию Docker приложений в различных средах Docker</span><span class="sxs-lookup"><span data-stu-id="fa021-198">Deploying composed Docker applications to multiple Docker environments</span></span>

<span data-ttu-id="fa021-199">Рассмотрим сначала на менее сложный сценарий: развертывание простой узлах Docker (виртуальные машины или серверы) в одной среде или среде с несколькими (QA, промежуточной и производственной).</span><span class="sxs-lookup"><span data-stu-id="fa021-199">Let's look first at the less-complex scenario: deploying to simple Docker hosts (VMs or servers) in a single environment or multiple environments (QA, staging, and production).</span></span> <span data-ttu-id="fa021-200">В этом сценарии внутренне конвейер компакт-диска можно использовать docker-составления (из задачи развертывания Visual Studio Team Services) для развертывания приложений Docker с набором связанных контейнеров или служб, как показано на рисунке 5-6.</span><span class="sxs-lookup"><span data-stu-id="fa021-200">In this scenario, internally your CD pipeline can use docker-compose (from your Visual Studio Team Services deployment tasks) to deploy the Docker applications with its related set of containers or services, as illustrated in Figure 5-6.</span></span>

![](./media/image6.png)

<span data-ttu-id="fa021-201">Рис. 5-6: развертывание приложения контейнеры простой реестр среды узла Docker</span><span class="sxs-lookup"><span data-stu-id="fa021-201">Figure 5-6: Deploying application containers to simple Docker host environments registry</span></span>

<span data-ttu-id="fa021-202">На рисунке 5 – 7 выделяет способ подключения вашей сборки CI QA или тестовой среде с помощью Visual Studio Team Services, щелкнув Docker Compose в диалоговом окне Добавить задачу.</span><span class="sxs-lookup"><span data-stu-id="fa021-202">Figure 5-7 highlights how you can connect your build CI to QA/test environments via Visual Studio Team Services by clicking Docker Compose in the Add Task dialog box.</span></span> <span data-ttu-id="fa021-203">Тем не менее, при выполнении развертывания в промежуточной или рабочей среде, обычно используется Release Management возможностей обработки нескольких сред (например QA, промежуточных и производственных).</span><span class="sxs-lookup"><span data-stu-id="fa021-203">However, when deploying to staging or production environments, you would usually use Release Management features handling multiple environments (like QA, staging, and production).</span></span> <span data-ttu-id="fa021-204">При развертывании одного узлах Docker с помощью Visual Studio Team Services задачи «Docker Compose» (которого вызывает docker-создания копии команда за кулисами).</span><span class="sxs-lookup"><span data-stu-id="fa021-204">If you're deploying to single Docker hosts, it is using the Visual Studio Team Services "Docker Compose" task (which is invoking the docker-compose up command under the hood).</span></span> <span data-ttu-id="fa021-205">При развертывании службы контейнера Azure использует задачу развертывания Docker, как описано в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="fa021-205">If you're deploying to Azure Container Service, it uses the Docker Deployment task, as explained in the section that follows.</span></span>

![](./media/image7.png)

<span data-ttu-id="fa021-206">Рисунок 5-7: Добавление задачи Docker Compose в конвейере Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="fa021-206">Figure 5-7: Adding a Docker Compose task in a Visual Studio Team Services pipeline</span></span>

<span data-ttu-id="fa021-207">При создании выпуска в Visual Studio Team Services, он принимает набор входных артефакты.</span><span class="sxs-lookup"><span data-stu-id="fa021-207">When you create a release in Visual Studio Team Services, it takes a set of input artifacts.</span></span> <span data-ttu-id="fa021-208">Они предназначены для быть неизменными во время выпуска в нескольких средах.</span><span class="sxs-lookup"><span data-stu-id="fa021-208">These are intended to be immutable throughout the lifetime of the release across multiple environments.</span></span> <span data-ttu-id="fa021-209">При вводе контейнеры входной артефакты идентификации изображения в реестре для развертывания.</span><span class="sxs-lookup"><span data-stu-id="fa021-209">When you introduce containers, the input artifacts identify images in a registry to deploy.</span></span> <span data-ttu-id="fa021-210">В зависимости от того, как они будут определены они не гарантируется остаются неизменными на протяжении выпуска, наиболее очевидный случай, выполняется при создании ссылки «myimage:latest» из файла docker-compose.</span><span class="sxs-lookup"><span data-stu-id="fa021-210">Depending on how these are identified, they are not guaranteed to remain the same throughout the duration of the release, the most obvious case being when you reference "myimage:latest" from a docker-compose file.</span></span>

<span data-ttu-id="fa021-211">Расширения Docker для Visual Studio Team Services дает пользователю возможность создать артефактов сборки, содержащие изображения реестра формируется, гарантировать для уникальной идентификации тот же двоичный образ.</span><span class="sxs-lookup"><span data-stu-id="fa021-211">The Docker extension for Visual Studio Team Services gives you the ability to generate build artifacts that contain specific registry image digests that are guaranteed to uniquely identify the same image binary.</span></span> <span data-ttu-id="fa021-212">Это то, что Вы действительно хотите использовать в качестве входных данных для выпуска.</span><span class="sxs-lookup"><span data-stu-id="fa021-212">These are what you really want to use as input to a release.</span></span>

### <a name="managing-releases-to-docker-environments-by-using-visual-studio-team-services-release-management"></a><span data-ttu-id="fa021-213">Управление выпуски для среды Docker с помощью Visual Studio Team Services Release Management</span><span class="sxs-lookup"><span data-stu-id="fa021-213">Managing releases to Docker environments by using Visual Studio Team Services Release Management</span></span>

<span data-ttu-id="fa021-214">Через расширения Visual Studio Team Services, можно создать новый образ, опубликовать его в реестр Docker, запустите его на узлах Linux или Windows и использовать команды, например docker-составления развертывается как приложение целиком все это визуальный элемент несколько контейнеров Возможности Team Services Release Management Studio, предназначены для нескольких сред, как показано на рисунке 5-8.</span><span class="sxs-lookup"><span data-stu-id="fa021-214">Through the Visual Studio Team Services extensions, you can build a new image, publish it to a Docker registry, run it on Linux or Windows hosts, and use commands such as docker-compose to deploy multiple containers as an entire application, all through the Visual Studio Team Services Release Management capabilities intended for multiple environments, as shown in Figure 5-8.</span></span>

![](./media/image8.png)

<span data-ttu-id="fa021-215">Рис. 5-8: Настройка Visual Studio Team Services Docker Compose задач из Visual Studio Team Services Release Management</span><span class="sxs-lookup"><span data-stu-id="fa021-215">Figure 5-8: Configuring Visual Studio Team Services Docker Compose tasks from Visual Studio Team Services Release Management</span></span>

<span data-ttu-id="fa021-216">Однако следует помнить, очень проста (развертывание простой Docker узлы и виртуальные машины и будут существовать один контейнер или экземпляра каждого изображения) и, возможно, следует использовать только для разработки или тестирования sc сценария показано на рисунке 5-6 и реализации на рисунке 5-8 enarios.</span><span class="sxs-lookup"><span data-stu-id="fa021-216">However, keep in mind that the scenario shown in Figure 5-6 and implemented in Figure 5-8 is pretty basic (it is deploying to simple Docker hosts and VMs, and there will be a single container or instance per image) and probably should be used only for development or test scenarios.</span></span> <span data-ttu-id="fa021-217">В большинстве случаев производственного предприятия, следует иметь высокий уровень доступности (HA) и простой в управлении масштабируемость, балансировку нагрузки между несколько узлов, серверы, виртуальные машины, а также «интеллектуальная переход на другой ресурс» таким образом, если сервер или узла завершается ошибкой, службы и контейнеры будут перемещены на другой сервер или ВМ.</span><span class="sxs-lookup"><span data-stu-id="fa021-217">In most enterprise production scenarios, you would want to have High Availability (HA) and easy-to-manage scalability by load balancing across multiple nodes, servers, and VMs, plus "intelligent failovers" so that if a server or node fails, its services and containers will be moved to another host server or VM.</span></span> <span data-ttu-id="fa021-218">В этом случае необходимо более сложных технологий, как кластеры контейнера, orchestrators и планировщики.</span><span class="sxs-lookup"><span data-stu-id="fa021-218">In that case, you need more advanced technologies like container clusters, orchestrators, and schedulers.</span></span> <span data-ttu-id="fa021-219">Таким образом способов развертывания на этих кластерах является точно через сложных сценариев, описывается в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="fa021-219">Thus, the way to deploy to those clusters is precisely through the advanced scenarios explained in the next section.</span></span>

### <a name="deploying-complex-docker-applications-to-docker-clusters-dcos-kubernetes-and-docker-swarm"></a><span data-ttu-id="fa021-220">Развертывание сложных приложений Docker кластерам Docker (DC/OS, Kubernetes и помощью Docker Swarm)</span><span class="sxs-lookup"><span data-stu-id="fa021-220">Deploying complex Docker applications to Docker clusters (DC/OS, Kubernetes, and Docker Swarm)</span></span>

<span data-ttu-id="fa021-221">Характер распределенных приложений требуется вычислительных ресурсов, которые также распространяются.</span><span class="sxs-lookup"><span data-stu-id="fa021-221">The nature of distributed applications requires compute resources that are also distributed.</span></span> <span data-ttu-id="fa021-222">Чтобы возможности масштабирования рабочей среде, необходимо иметь кластеризации возможности, обеспечивающие высокий уровень масштабируемости и высокой ДОСТУПНОСТИ на основании пулов ресурсов.</span><span class="sxs-lookup"><span data-stu-id="fa021-222">To have production-scale capabilities, you need to have clustering capabilities that provide high scalability and HA based on pooled resources.</span></span>

<span data-ttu-id="fa021-223">Можно развернуть контейнеры вручную для этих кластеров в средстве CLI, например помощью Docker Swarm (подобно использованию [создать службу docker](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) или веб-интерфейса например [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) DC/OS кластеров, но вы должны зарезервировать, только для тестирования развертывания punctual либо в целях управления как масштабирования или в целях мониторинга.</span><span class="sxs-lookup"><span data-stu-id="fa021-223">You could deploy containers manually to those clusters from a CLI tool such as Docker Swarm (like using [docker service create](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) or a web UI such as [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) for DC/OS clusters, but you should reserve that only for punctual deployment testing or for management purposes like scaling-out or monitoring purposes.</span></span>

<span data-ttu-id="fa021-224">С точки зрения компакт-диска и Visual Studio Team Services в частности, можно выполнять задачи по развертыванию специально сделан из среды Visual Studio Team Services Release Management которых будет развертывать контейнерного приложения для распределенных кластеров в Контейнер службы, как показано на рисунке 5 – 9.</span><span class="sxs-lookup"><span data-stu-id="fa021-224">From a CD point of view, and Visual Studio Team Services specifically, you can run specially made deployment tasks from your Visual Studio Team Services Release Management environments which will deploy your containerized applications to distributed clusters in Container Service, as illustrated in Figure 5-9.</span></span>

![](./media/image9.png)

<span data-ttu-id="fa021-225">Рисунок 5-9: развертывание распределенных приложений для службы контейнеров</span><span class="sxs-lookup"><span data-stu-id="fa021-225">Figure 5-9: Deploying distributed applications to Container Service</span></span>

<span data-ttu-id="fa021-226">Изначально при развертывании для некоторых кластеров или orchestrators традиционно используется конкретного развертывания скриптов и механизма каждого каждого orchestrator (то есть Mesosphere DC/OS или Kubernetes реализуйте механизмы развертывания отличаются от Docker и Docker Скапливаются) вместо проще и простые в использовании docker создать инструмент на основе файла определения docker compose.yml.</span><span class="sxs-lookup"><span data-stu-id="fa021-226">Initially, when deploying to certain clusters or orchestrators, you would traditionally use specific deployment scripts and mechanisms per each orchestrator (that is, Mesosphere DC/OS or Kubernetes have different deployment mechanisms than Docker and Docker Swarm) instead of the simpler and easy-to-use docker-compose tool based on the docker-compose.yml definition file.</span></span> <span data-ttu-id="fa021-227">Однако благодаря Microsoft Visual Studio Team Services Docker Deploy задачу, что показано в на рисунке 5 – 10, теперь также развертыванием для контроллера домена/OS с использованием файла знакомый docker-compose.yml только потому, что корпорация Майкрософт не выполняет «преобразования» автоматически (из вашей docker compose.yml файла в другие форматы, необходимые для контроллера домена/OS).</span><span class="sxs-lookup"><span data-stu-id="fa021-227">However, thanks to the Microsoft Visual Studio Team Services Docker Deploy task, shown in Figure 5-10, you now also can deploy to DC/OS by just using your familiar docker-compose.yml file because Microsoft performs that "translation" for you (from your docker-compose.yml file to other formats needed by DC/OS).</span></span>

![](./media/image10.png)

<span data-ttu-id="fa021-228">Рис. 5-10: Добавление задачи Docker развертывания в вашей среде надежного обмена Сообщениями</span><span class="sxs-lookup"><span data-stu-id="fa021-228">Figure 5-10: Adding the Docker Deploy task to your Environment RM</span></span>

<span data-ttu-id="fa021-229">Рис. 5-11 показано, как изменить задачу развертывания Docker и укажите тип объекта (контейнер службы контроллера домена или ОС Azure, в данном случае), файл Docker составить и подключения Docker реестра (например, в реестре контейнеров Azure или Docker Hub).</span><span class="sxs-lookup"><span data-stu-id="fa021-229">Figure 5-11 demonstrates how you can edit the Docker Deploy task and specify the Target Type (Azure Container Service DC/OS, in this case), your Docker Compose File, and the Docker Registry connection (like Azure Container Registry or Docker Hub).</span></span> <span data-ttu-id="fa021-230">Это где задачи будут получены все готово к использованию пользовательских образов Docker для развертывания в виде контейнеров в кластере DC/OS.</span><span class="sxs-lookup"><span data-stu-id="fa021-230">This is where the task will retrieve your ready-to-use custom Docker images to be deployed as containers in the DC/OS cluster.</span></span>

![](./media/image11.png)

<span data-ttu-id="fa021-231">Рис. 5 — 11: развертывание Docker задачи определения развертывания для контейнера службы контроллера домена или ОС Azure</span><span class="sxs-lookup"><span data-stu-id="fa021-231">Figure 5-11: Docker Deploy task definition deploying to Azure Container Service DC/OS</span></span>

<span data-ttu-id="fa021-232">**Дополнительные сведения о** чтобы узнать подробнее о конвейере компакт-диска с помощью Visual Studio Team Services и Docker, посетите следующие сайты:</span><span class="sxs-lookup"><span data-stu-id="fa021-232">**More info** To read more about the CD pipeline with Visual Studio Team Services and Docker, visit the following sites:</span></span>

<span data-ttu-id="fa021-233">Расширение Visual Studio Team Services для Docker и контейнера службы Azure: [https://aka.ms/ \ vstsdockerextension](https://aka.ms/vstsdockerextension)</span><span class="sxs-lookup"><span data-stu-id="fa021-233">Visual Studio Team Services extension for Docker and Azure Container Service: [https://aka.ms/\ vstsdockerextension](https://aka.ms/vstsdockerextension)</span></span>

<span data-ttu-id="fa021-234">Служба Azure контейнера: <https://aka.ms/azurecontainerservice></span><span class="sxs-lookup"><span data-stu-id="fa021-234">Azure Container Service: <https://aka.ms/azurecontainerservice></span></span>

<span data-ttu-id="fa021-235">Mesosphere DC/OS: <https://mesosphere.com/product/></span><span class="sxs-lookup"><span data-stu-id="fa021-235">Mesosphere DC/OS: <https://mesosphere.com/product/></span></span>

## <a name="step-5-run-and-manage"></a><span data-ttu-id="fa021-236">Шаг 5: Запуск и управление</span><span class="sxs-lookup"><span data-stu-id="fa021-236">Step 5: Run and manage</span></span>

<span data-ttu-id="fa021-237">Поскольку выполнение приложений и управление ими корпоративного производственного уровня является главной темой, в и самого себя, а также из-за типа операций и людей, работающих на этом уровне (ИТ-операций), а также большого объема в этой области, мы выделено всего рядом главы описано его.</span><span class="sxs-lookup"><span data-stu-id="fa021-237">Because running and managing applications at enterprise-production level is a major subject in and of itself, and due to the type of operations and people working at that level (IT operations) as well as the large scope of this area, we have devoted the entire next chapter to explaining it.</span></span>

## <a name="step-6-monitor-and-diagnose"></a><span data-ttu-id="fa021-238">Шаг 6: Мониторинг и диагностика</span><span class="sxs-lookup"><span data-stu-id="fa021-238">Step 6: Monitor and diagnose</span></span>

<span data-ttu-id="fa021-239">В этом разделе также рассматривается в следующей главе как часть задач, выполняемых ИТ-операций в рабочих системах; Тем не менее важно подчеркнуть, что аналитики, полученные на этом шаге передать команде разработчиков, чтобы приложение постоянно увеличивается.</span><span class="sxs-lookup"><span data-stu-id="fa021-239">This topic also is covered in the next chapter as part of the tasks that IT operations performs in production systems; however, is important to highlight that the insights obtained in this step must feed back to the development team so that the application is constantly improved.</span></span> <span data-ttu-id="fa021-240">С этой точки зрения, он также является частью DevOps, несмотря на то, что задачи и операции, обычно выполняются по ИТ.</span><span class="sxs-lookup"><span data-stu-id="fa021-240">From that point of view, it is also part of DevOps, although the tasks and operations are usually performed by IT.</span></span>

<span data-ttu-id="fa021-241">Только в том случае, если наблюдение и диагностику заполнены на 100% в пределах области DevOps являются мониторинга процессов и analytics, выполняемые команды разработчиков средах тестирования или бета-версии.</span><span class="sxs-lookup"><span data-stu-id="fa021-241">Only when monitoring and diagnostics are 100 percent within the realm of DevOps are the monitoring processes and analytics performed by the development team against testing or beta environments.</span></span> <span data-ttu-id="fa021-242">Это делается путем выполнения нагрузочного тестирования или просто отслеживая бета-версии или QA средах, где тест-инженеров бета-версии пытаетесь новых версий.</span><span class="sxs-lookup"><span data-stu-id="fa021-242">This is done either by performing load testing or simply by monitoring beta or QA environments, where beta testers are trying the new versions.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="fa021-243">[Предыдущие] (index.md) [Далее] (.. /Run-Manage-Monitor-docker-Environments/index.MD)</span><span class="sxs-lookup"><span data-stu-id="fa021-243">[Previous] (index.md) [Next] (../run-manage-monitor-docker-environments/index.md)</span></span>
