---
title: Действия в рабочем процессе внешнего цикла DevOps для приложения Docker
description: Жизненный цикл контейнерного приложения Docker на основе платформы и средств Майкрософт
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/10/2018
ms.openlocfilehash: 37dd5481da571be56f134a5e142b7ba46427d7d8
ms.sourcegitcommit: ccd8c36b0d74d99291d41aceb14cf98d74dc9d2b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2018
ms.locfileid: "53143653"
---
# <a name="steps-in-the-outer-loop-devops-workflow-for-a-docker-application"></a><span data-ttu-id="54f5b-103">Действия в рабочем процессе внешнего цикла DevOps для приложения Docker</span><span class="sxs-lookup"><span data-stu-id="54f5b-103">Steps in the outer-loop DevOps workflow for a Docker application</span></span>

<span data-ttu-id="54f5b-104">Рис. 5-1 представляет end-to-end, описание шагов, составляющих рабочий процесс DevOps для внешнего цикла.</span><span class="sxs-lookup"><span data-stu-id="54f5b-104">Figure 5-1 presents an end-to-end depiction of the steps comprising the DevOps outer-loop workflow.</span></span>

![](./media/image1.png)

<span data-ttu-id="54f5b-105">Рис. 5-1. Рабочий процесс внешнего цикла DevOps для приложений Docker с использованием средств Майкрософт</span><span class="sxs-lookup"><span data-stu-id="54f5b-105">Figure 5-1: DevOps outer-loop workflow for Docker applications with Microsoft tools</span></span>

<span data-ttu-id="54f5b-106">Теперь давайте рассмотрим каждое из этих действий более подробно.</span><span class="sxs-lookup"><span data-stu-id="54f5b-106">Now, let's examine each of these steps in greater detail.</span></span>

## <a name="step-1-inner-loop-development-workflow"></a><span data-ttu-id="54f5b-107">Шаг 1. Рабочий процесс внутреннего цикла разработки</span><span class="sxs-lookup"><span data-stu-id="54f5b-107">Step 1: Inner-loop development workflow</span></span>

<span data-ttu-id="54f5b-108">Этот шаг описан подробно в главе 4, но Напомню, Вот где начинается внешний цикл некоторое время, по которому разработчик помещает код в систему управления версиями (например, Git), инициированные действия конвейера непрерывной Интеграции.</span><span class="sxs-lookup"><span data-stu-id="54f5b-108">This step is explained in detail in Chapter 4, but, to recap, here is where the outer-loop begins, the moment at which a developer pushes code to the source control management system (like Git) initiating CI pipeline actions.</span></span>

## <a name="step-2-source-code-control-integration-and-management-with-azure-devops-services-and-git"></a><span data-ttu-id="54f5b-109">Шаг 2. Интеграция системы управления версиями и управление с помощью служб Azure DevOps и Git</span><span class="sxs-lookup"><span data-stu-id="54f5b-109">Step 2: Source-Code Control integration and management with Azure DevOps Services and Git</span></span>

<span data-ttu-id="54f5b-110">На этом этапе необходимо иметь систему управления версиями для сбора консолидированных версию весь код, поступающие от разные разработчики в команде.</span><span class="sxs-lookup"><span data-stu-id="54f5b-110">At this step, you need to have a version-control system to gather a consolidated version of all the code coming from the different developers in the team.</span></span>

<span data-ttu-id="54f5b-111">Несмотря на то, что система управления версиями (SCC) и управления версиями может показаться привычкой цикл для большинства разработчиков, при создании приложений с помощью Docker жизни DevOps, очень важно подчеркнуть, что вам не нужно отправить образов Docker с приложением непосредственно в глобальной Docker реестр (например, реестр контейнеров Azure или Docker Hub) с компьютера разработчика.</span><span class="sxs-lookup"><span data-stu-id="54f5b-111">Even though source-code control (SCC) and source-code management might seem second-nature to most developers, when creating Docker applications in a DevOps life cycle, it is critical to emphasize that you must not submit the Docker images with the application directly to the global Docker Registry (like Azure Container Registry or Docker Hub) from the developer's machine.</span></span> <span data-ttu-id="54f5b-112">Напротив образов Docker освобождение и развертываемых в рабочих средах должны создаваться только на исходный код, который интегрируется в глобальной сборке или конвейер непрерывной Интеграции, исходя из репозитория исходного кода (например, Git).</span><span class="sxs-lookup"><span data-stu-id="54f5b-112">On the contrary, the Docker images to be released and deployed to production environments must be created solely on the source code that is being integrated in your global build or CI pipeline based on your source-code repository (like Git).</span></span>

<span data-ttu-id="54f5b-113">Локальные изображения, созданные разработчиками, сами следует использовать только разработчиками при тестировании в своих собственных компьютерах.</span><span class="sxs-lookup"><span data-stu-id="54f5b-113">The local images generated by the developers themselves should be used just by the developers when testing within their own machines.</span></span> <span data-ttu-id="54f5b-114">Именно поэтому крайне важно иметь конвейер DevOps, активировать из кода SCC.</span><span class="sxs-lookup"><span data-stu-id="54f5b-114">This is why it is critical to have the DevOps pipeline activated from the SCC code.</span></span>

<span data-ttu-id="54f5b-115">Azure DevOps Services и Team Foundation Server поддерживает Git и системы управления версиями Team Foundation.</span><span class="sxs-lookup"><span data-stu-id="54f5b-115">Azure DevOps Services and Team Foundation Server support Git and Team Foundation Version Control.</span></span> <span data-ttu-id="54f5b-116">Можно выбрать между ними и использовать его для качества Microsoft end-to-end.</span><span class="sxs-lookup"><span data-stu-id="54f5b-116">You can choose between them and use it for an end-to-end Microsoft experience.</span></span> <span data-ttu-id="54f5b-117">Тем не менее, также можно управлять код во внешних репозиториях (например, GitHub, на локальном репозитории Git или Subversion) и по-прежнему иметь возможность подключиться к нему и получите код как начальную точку для конвейера DevOps CI.</span><span class="sxs-lookup"><span data-stu-id="54f5b-117">However, you also can manage your code in external repositories (like GitHub, on-premises Git repositories, or Subversion) and still be able to connect to it and get the code as the starting point for your DevOps CI pipeline.</span></span>

## <a name="step-3-build-ci-integrate-and-test-with-azure-devops-services-and-docker"></a><span data-ttu-id="54f5b-118">Шаг 3. Сборки непрерывной Интеграции, интеграции и тестирование с помощью Azure DevOps служб и Docker</span><span class="sxs-lookup"><span data-stu-id="54f5b-118">Step 3: Build, CI, Integrate, and Test with Azure DevOps Services and Docker</span></span>

<span data-ttu-id="54f5b-119">Непрерывная Интеграция стал стандартом для тестирования современного программного обеспечения и доставки.</span><span class="sxs-lookup"><span data-stu-id="54f5b-119">CI has emerged as a standard for modern software testing and delivery.</span></span> <span data-ttu-id="54f5b-120">Решение Docker обеспечивает четкое разделение между командами разработки и операций.</span><span class="sxs-lookup"><span data-stu-id="54f5b-120">The Docker solution maintains a clear separation of concerns between the development and operations teams.</span></span> <span data-ttu-id="54f5b-121">Неизменность образов Docker обеспечивает Повторяемое развертывание между что разработки, тестирования через непрерывной Интеграции и запустить в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="54f5b-121">The immutability of Docker images ensures a repeatable deployment between what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="54f5b-122">Подсистема docker развернуть на ноутбуках разработчика и инфраструктуру тестирования делает контейнеры портативных в средах.</span><span class="sxs-lookup"><span data-stu-id="54f5b-122">Docker Engine deployed across the developer laptops and test infrastructure makes the containers portable across environments.</span></span>

<span data-ttu-id="54f5b-123">На этом этапе после систему управления версиями с правильный код отправки, вам потребуется *служба сборок* для кода и запустить глобальной сборки и тестирования.</span><span class="sxs-lookup"><span data-stu-id="54f5b-123">At this point, after you have a version-control system with the correct code submitted, you need a *build service* to pick up the code and run the global build and tests.</span></span>

<span data-ttu-id="54f5b-124">О построении конвейера непрерывной Интеграции, состоящий из репозитория кода (Git т. д.), сервер сборки (службы Azure DevOps), подсистема Docker и в реестр Docker является внутреннего рабочего процесса для выполнения этого шага (непрерывной Интеграции, сборки, тестирования).</span><span class="sxs-lookup"><span data-stu-id="54f5b-124">The internal workflow for this step (CI, build, test) is about the construction of a CI pipeline consisting of your code repository (Git, etc.), your build server (Azure DevOps Services), Docker Engine, and a Docker Registry.</span></span>

<span data-ttu-id="54f5b-125">Позволяет службам DevOps в Azure как основа для построения приложений и настройка конвейера непрерывной Интеграции, а также для публикации «артефактов сборки» «репозитория артефактов,» как описано в следующем шаге.</span><span class="sxs-lookup"><span data-stu-id="54f5b-125">You can use Azure DevOps Services as the foundation for building your applications and setting your CI pipeline, and for publishing the built "artifacts" to an "artifacts repository," which is explained in the next step.</span></span>

<span data-ttu-id="54f5b-126">При использовании Docker для развертывания «итоговые версии артефактов» для развертывания образов Docker с помощью приложения или служб, внедренных в них.</span><span class="sxs-lookup"><span data-stu-id="54f5b-126">When using Docker for the deployment, the "final artifacts" to be deployed are Docker images with your application or services embedded within them.</span></span> <span data-ttu-id="54f5b-127">Эти образы являются отправлена или опубликовать его *реестра Docker* (частный репозиторий, например тех, которые имеются в реестре контейнеров Azure, или любой общедоступный как реестре центра Docker, которая часто используется для официальных базовых образах).</span><span class="sxs-lookup"><span data-stu-id="54f5b-127">Those images are pushed or published to a *Docker Registry* (a private repository like the ones you can have in Azure Container Registry, or a public one like Docker Hub Registry, which is commonly used for official base images).</span></span>

<span data-ttu-id="54f5b-128">Вот основной принцип: Конвейер непрерывной Интеграции будет создан off путем фиксации в репозиторий SCC как Git.</span><span class="sxs-lookup"><span data-stu-id="54f5b-128">Here is the basic concept: The CI pipeline will be kicked-off by a commit to an SCC repository like Git.</span></span> <span data-ttu-id="54f5b-129">Фиксация вызовет служб Azure DevOps запустить задание сборки в контейнере Docker и, после успешного завершения этого задания можно передать образ Docker в реестр Docker, как показано на рисунке 5-2.</span><span class="sxs-lookup"><span data-stu-id="54f5b-129">The commit will cause Azure DevOps Services to run a build job within a Docker container and, upon successful completion of that job, push a Docker image to the Docker Registry, as illustrated in Figure 5-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="54f5b-130">Рис. 5-2. Действия, связанные с непрерывной Интеграции</span><span class="sxs-lookup"><span data-stu-id="54f5b-130">Figure 5-2: The steps involved in CI</span></span>

<span data-ttu-id="54f5b-131">Ниже приведены основные этапы рабочего процесса непрерывной Интеграции с решениями Docker и служб Azure DevOps.</span><span class="sxs-lookup"><span data-stu-id="54f5b-131">Here are the basic CI workflow steps with Docker and Azure DevOps Services:</span></span>

1.  <span data-ttu-id="54f5b-132">Разработчик отправляет фиксацию с репозиторием SCC (Git/Azure DevOps Services, GitHub, и т.д.).</span><span class="sxs-lookup"><span data-stu-id="54f5b-132">The developer pushes a commit to an SCC repository (Git/Azure DevOps Services, GitHub, etc.).</span></span>

2.  <span data-ttu-id="54f5b-133">Если вы используете Azure DevOps Services или Git, CI является встроенной, что означает, что это сложнее, чем установка флажка в службах Azure DevOps.</span><span class="sxs-lookup"><span data-stu-id="54f5b-133">If you're using Azure DevOps Services or Git, CI is built in, which means that it is as simple as selecting a check box in Azure DevOps Services.</span></span> <span data-ttu-id="54f5b-134">Если вы используете внешние SCC (например, GitHub), *веб-перехватчика* будет уведомлять служб Azure DevOps, обновления или передать в Git и GitHub.</span><span class="sxs-lookup"><span data-stu-id="54f5b-134">If you're using an external SCC (like GitHub), a *webhook* will notify Azure DevOps Services of the update or push to Git/GitHub.</span></span>

3.  <span data-ttu-id="54f5b-135">Службы Azure DevOps извлекает хранилище SCC, включая DockerFile, описывающий изображение, а также код приложения и тестов.</span><span class="sxs-lookup"><span data-stu-id="54f5b-135">Azure DevOps Services pulls the SCC repository, including the DockerFile describing the image as well as the application and test code.</span></span>

4.  <span data-ttu-id="54f5b-136">Службы DevOps Azure создает образ Docker и помечает его с номером сборки.</span><span class="sxs-lookup"><span data-stu-id="54f5b-136">Azure DevOps Services builds a Docker image and labels it with a build number.</span></span>

5.  <span data-ttu-id="54f5b-137">Службы Azure DevOps создает в контейнере Docker в подготовленный компьютер Docker и запускает соответствующие тесты.</span><span class="sxs-lookup"><span data-stu-id="54f5b-137">Azure DevOps Services instantiates the Docker container within the provisioned Docker Host, and runs the appropriate tests.</span></span>

6.  <span data-ttu-id="54f5b-138">Если тесты проходят успешно, изображение сначала помечается значащее имя, чтобы вы знаете, «blessed сборки» (например «/ 1.0.0» или любые другие метки) и затем передается в реестр Docker (Docker Hub, реестр контейнеров Azure, DTR т. д.)</span><span class="sxs-lookup"><span data-stu-id="54f5b-138">If the tests are successful, the image is first relabeled to a meaningful name so that you know it is a "blessed build" (like "/1.0.0" or any other label), and then pushed up to your Docker Registry (Docker Hub, Azure Container Registry, DTR, etc.)</span></span>

### <a name="implementing-the-ci-pipeline-with-azure-devops-services-and-the-docker-extension-for-azure-devops-services"></a><span data-ttu-id="54f5b-139">Реализация в конвейер непрерывной Интеграции с помощью служб Azure DevOps и расширения Docker для служб Azure DevOps</span><span class="sxs-lookup"><span data-stu-id="54f5b-139">Implementing the CI pipeline with Azure DevOps Services and the Docker extension for Azure DevOps Services</span></span>

<span data-ttu-id="54f5b-140">[Расширения Docker служб Azure DevOps](https://aka.ms/vstsdockerextension) добавляет задачу в ваш конвейер непрерывной Интеграции, с помощью которого можно создание образов Docker, отправлять образы Docker в реестр Docker с поддержкой аутентификации, запуска образов Docker или выполнить другие операции, предоставляемые Docker ИНТЕРФЕЙС КОМАНДНОЙ СТРОКИ.</span><span class="sxs-lookup"><span data-stu-id="54f5b-140">The [Azure DevOps Services Docker extension](https://aka.ms/vstsdockerextension) adds a task to your CI pipeline with which you can build Docker images, push Docker images to an authenticated Docker registry, run Docker images, or run other operations offered by the Docker CLI.</span></span> <span data-ttu-id="54f5b-141">Он также добавляет задачи Docker Compose, который можно использовать для сборки, Push-уведомлений и запуска многоконтейнерного приложения Docker или выполнить другие операции, предоставляемые Docker Compose интерфейса командной строки, как показано на рисунке 5-3.</span><span class="sxs-lookup"><span data-stu-id="54f5b-141">It also adds a Docker Compose task that you can use to build, push, and run multicontainer Docker applications, or run other operations offered by the Docker Compose CLI, as shown in Figure 5-3.</span></span>

![](./media/image3.png)

<span data-ttu-id="54f5b-142">Рис. 5-3. Конвейер непрерывной Интеграции Docker в службах Azure DevOps</span><span class="sxs-lookup"><span data-stu-id="54f5b-142">Figure 5-3: The Docker CI pipeline in Azure DevOps Services</span></span>

<span data-ttu-id="54f5b-143">Расширение Docker можно использовать конечные точки службы, для узлов Docker, а также для контейнера и реестры образов.</span><span class="sxs-lookup"><span data-stu-id="54f5b-143">The Docker extension can use service endpoints for Docker hosts and for container or image registries.</span></span> <span data-ttu-id="54f5b-144">По умолчанию задачи с помощью локального узла Docker, если он доступен (в настоящее время для этого создайте пользовательский агент служб Azure DevOps); в противном случае они требуют введения подключения к узлу Docker.</span><span class="sxs-lookup"><span data-stu-id="54f5b-144">The tasks default to using a local Docker host if available (this currently requires a custom Azure DevOps Services agent); otherwise, they require that you provide a Docker host connection.</span></span> <span data-ttu-id="54f5b-145">Действия, которые зависят от того, выполняется проверка подлинности с помощью реестра Docker, такие как отправка образа, необходимо предоставить Docker подключения к реестру.</span><span class="sxs-lookup"><span data-stu-id="54f5b-145">Actions that depend on being authenticated with a Docker registry, such as pushing an image, require that you provide a Docker registry connection.</span></span>

<span data-ttu-id="54f5b-146">Расширение Docker службы DevOps Azure устанавливает следующие компоненты в вашей учетной записи служб Azure DevOps:</span><span class="sxs-lookup"><span data-stu-id="54f5b-146">The Azure DevOps Services Docker extension installs the following components in your Azure DevOps Services account:</span></span>

-   <span data-ttu-id="54f5b-147">Конечную точку службы для подключения к реестру Docker</span><span class="sxs-lookup"><span data-stu-id="54f5b-147">A service endpoint for connecting to a Docker registry</span></span>

-   <span data-ttu-id="54f5b-148">Конечную точку службы для подключения к узлу контейнера Docker</span><span class="sxs-lookup"><span data-stu-id="54f5b-148">A service endpoint for connecting to a Docker Container Host</span></span>

-   <span data-ttu-id="54f5b-149">Выполните следующие задачи Docker:</span><span class="sxs-lookup"><span data-stu-id="54f5b-149">A Docker task to do the following:</span></span>

-   <span data-ttu-id="54f5b-150">Создайте образ</span><span class="sxs-lookup"><span data-stu-id="54f5b-150">Build an image</span></span>

-   <span data-ttu-id="54f5b-151">Отправка образа или репозитория в реестр</span><span class="sxs-lookup"><span data-stu-id="54f5b-151">Push an image or a repository to a registry</span></span>

-   <span data-ttu-id="54f5b-152">Запуск образа в контейнере</span><span class="sxs-lookup"><span data-stu-id="54f5b-152">Run an image in a container</span></span>

-   <span data-ttu-id="54f5b-153">Выполнение команд Docker</span><span class="sxs-lookup"><span data-stu-id="54f5b-153">Run a Docker command</span></span>

-   <span data-ttu-id="54f5b-154">Задачи Docker Compose для выполнения команды Docker Compose</span><span class="sxs-lookup"><span data-stu-id="54f5b-154">A Docker Compose task to run a Docker Compose command</span></span>

<span data-ttu-id="54f5b-155">Эти задачи служб Azure DevOps, сборки узлов и виртуальных Машин Docker в Linux, подготовленного в Azure и предпочтительным реестра Docker (реестр контейнеров Azure, Docker Hub, закрытый DTR Docker или другой реестр Docker) можно создать конвейер непрерывной Интеграции Docker в очень согласованность.</span><span class="sxs-lookup"><span data-stu-id="54f5b-155">With these Azure DevOps Services tasks, a build Linux-Docker Host/VM provisioned in Azure and your preferred Docker registry (Azure Container Registry, Docker Hub, private Docker DTR, or any other Docker registry) you can assemble your Docker CI pipeline in a very consistent way.</span></span>

<span data-ttu-id="54f5b-156">***Требования:***</span><span class="sxs-lookup"><span data-stu-id="54f5b-156">***Requirements:***</span></span>

-   <span data-ttu-id="54f5b-157">Службы Azure DevOps, или для локальных установок Team Foundation Server 2015 с обновлением 3 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="54f5b-157">Azure DevOps Services, or for on-premises installations, Team Foundation Server 2015 Update 3 or later.</span></span>

-   <span data-ttu-id="54f5b-158">Агент служб Azure DevOps, который содержит двоичные файлы Docker.</span><span class="sxs-lookup"><span data-stu-id="54f5b-158">An Azure DevOps Services agent that has the Docker binaries.</span></span>

<span data-ttu-id="54f5b-159">Простой способ создать один из них — использовать Docker для запуска контейнера на основе образа Docker агент служб Azure DevOps.</span><span class="sxs-lookup"><span data-stu-id="54f5b-159">An easy way to create one of these is to use Docker to run a container based on the Azure DevOps Services agent Docker image.</span></span>

<span data-ttu-id="54f5b-160">**Дополнительные сведения о** для чтения сведения о создании элемента конфигурации Docker служб Azure DevOps конвейера и просмотр пошаговые руководства, посетите следующие сайты:</span><span class="sxs-lookup"><span data-stu-id="54f5b-160">**More info** To read more about assembling a Azure DevOps Services Docker CI pipeline and to view walkthroughs, visit the following sites:</span></span>

<span data-ttu-id="54f5b-161">Агент служб Azure DevOps, как контейнер Docker: [ https://hub.docker.com/r/\ microsoft/vsts-agent /](https://hub.docker.com/r/microsoft/vsts-agent/)</span><span class="sxs-lookup"><span data-stu-id="54f5b-161">Running an Azure DevOps Services agent as a Docker container: [https://hub.docker.com/r/\ microsoft/vsts-agent/](https://hub.docker.com/r/microsoft/vsts-agent/)</span></span>

<span data-ttu-id="54f5b-162">Расширение Azure Docker службы DevOps: <https://aka.ms/vstsdockerextension></span><span class="sxs-lookup"><span data-stu-id="54f5b-162">Azure DevOps Services Docker extension: <https://aka.ms/vstsdockerextension></span></span>

<span data-ttu-id="54f5b-163">Создание образов Docker для Linux .NET Core с помощью служб Azure DevOps: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span><span class="sxs-lookup"><span data-stu-id="54f5b-163">Building .NET Core Linux Docker images with Azure DevOps Services: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span></span>

<span data-ttu-id="54f5b-164">Создание компьютера под управлением Linux Visual Studio Team Service сборки с поддержкой Docker: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span><span class="sxs-lookup"><span data-stu-id="54f5b-164">Building a Linux-based Visual Studio Team Service build machine with Docker support: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span></span>

### <a name="integrate-test-and-validate-multicontainer-docker-applications"></a><span data-ttu-id="54f5b-165">Интеграция, тестировать и проверять многоконтейнерного приложения Docker</span><span class="sxs-lookup"><span data-stu-id="54f5b-165">Integrate, test, and validate multicontainer Docker applications</span></span>

<span data-ttu-id="54f5b-166">Как правило большинство приложений Docker состоят из нескольких контейнеров, а не в одном контейнере.</span><span class="sxs-lookup"><span data-stu-id="54f5b-166">Typically, most Docker applications are composed of multiple containers rather than a single container.</span></span> <span data-ttu-id="54f5b-167">Хороший пример — это приложение, ориентированных на микрослужбы, для которого имеется один контейнер на микрослужбы.</span><span class="sxs-lookup"><span data-stu-id="54f5b-167">A good example is a microservices-oriented application for which you would have one container per microservice.</span></span> <span data-ttu-id="54f5b-168">Но даже без строго следующим шаблонам микрослужб подход, это очень вероятно, что приложение Docker будет состоять из нескольких контейнеров или служб.</span><span class="sxs-lookup"><span data-stu-id="54f5b-168">But, even without strictly following the microservices approach patterns, it is very probable that your Docker application would be composed of multiple containers or services.</span></span>

<span data-ttu-id="54f5b-169">Таким образом после создания контейнеров приложений в конвейере непрерывной Интеграции, необходимо также развернуть, интеграции и тестирование приложения в целом все его контейнеры в узле Docker integration или даже в кластер тестирования, к которому будут контейнеров распределенные.</span><span class="sxs-lookup"><span data-stu-id="54f5b-169">Therefore, after building the application containers in the CI pipeline, you also need to deploy, integrate, and test the application as a whole with all of its containers within an integration Docker host or even into a test cluster to which your containers are distributed.</span></span>

<span data-ttu-id="54f5b-170">Если вы используете один узел, можно использовать команды Docker, такие как docker-compose для создания и развертывания связанных контейнеров для тестирования и проверки среды Docker в одной виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="54f5b-170">If you're using a single host, you can use Docker commands such as docker-compose to build and deploy related containers to test and validate the Docker environment in a single VM.</span></span> <span data-ttu-id="54f5b-171">Но если вы работаете с кластером orchestrator, такие как DC/OS, Kubernetes или Docker Swarm, необходимо выполнить развертывание контейнеров посредством другого механизма или orchestrator, в зависимости от выбранного кластера или планировщика.</span><span class="sxs-lookup"><span data-stu-id="54f5b-171">But, if you are working with an orchestrator cluster like DC/OS, Kubernetes, or Docker Swarm, you need to deploy your containers through a different mechanism or orchestrator, depending on your selected cluster/scheduler.</span></span>

<span data-ttu-id="54f5b-172">Ниже приведены несколько типов тестов, которые можно выполнять на контейнеры Docker.</span><span class="sxs-lookup"><span data-stu-id="54f5b-172">Following are several types of tests that you can run against Docker containers:</span></span>

-   <span data-ttu-id="54f5b-173">Модульные тесты для контейнеров Docker</span><span class="sxs-lookup"><span data-stu-id="54f5b-173">Unit tests for Docker containers</span></span>

-   <span data-ttu-id="54f5b-174">Тестирование групп взаимосвязанных приложений и микрослужб</span><span class="sxs-lookup"><span data-stu-id="54f5b-174">Testing groups of interrelated applications or microservices</span></span>

-   <span data-ttu-id="54f5b-175">Тестирование в рабочей среде и «перестраховочным» выпуски</span><span class="sxs-lookup"><span data-stu-id="54f5b-175">Test in production and "canary" releases</span></span>

<span data-ttu-id="54f5b-176">Важно то, что при выполнении интеграционных и функциональных тестов, необходимо выполнить эти тесты из вне контейнеров.</span><span class="sxs-lookup"><span data-stu-id="54f5b-176">The important point is that when running integration and functional tests, you must run those tests from outside of the containers.</span></span> <span data-ttu-id="54f5b-177">Тесты должны не определен и выполняющихся в контейнерах, которые вы выполняете развертывание, так как контейнеры основаны на статические изображения, которые должны быть так же, как те, которые вы будете развертывать в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="54f5b-177">Tests must not be defined and run within the containers that you are deploying, because the containers are based on static images that should be exactly like those that you will be deploying into production.</span></span>

<span data-ttu-id="54f5b-178">Очень неразумны при тестировании более сложные сценарии, такие как тестирование нескольких кластеров (проверки кластера, промежуточный кластер и рабочий кластер) является публикация образов в реестр для проверки в различных кластеров.</span><span class="sxs-lookup"><span data-stu-id="54f5b-178">A very feasible option when testing more advanced scenarios like testing several clusters (test cluster, staging cluster, and production cluster) is to publish the images to a registry to test in various clusters.</span></span>

### <a name="push-the-custom-application-docker-image-into-your-global-docker-registry"></a><span data-ttu-id="54f5b-179">Передать образ Docker пользовательского приложения в глобальной реестра Docker</span><span class="sxs-lookup"><span data-stu-id="54f5b-179">Push the custom application Docker image into your global Docker Registry</span></span>

<span data-ttu-id="54f5b-180">После тестирования и проверки образов Docker, стоит теги и публиковать их в реестр Docker.</span><span class="sxs-lookup"><span data-stu-id="54f5b-180">After the Docker images have been tested and validated, you'll want to tag and publish them to your Docker registry.</span></span> <span data-ttu-id="54f5b-181">Реестр Docker — ключевой компонент в жизненный цикл приложения Docker, так как это централизованное место, где хранятся пользовательские теста (также называемые «blessed images») будет развернут в контроля Качества и рабочей средах.</span><span class="sxs-lookup"><span data-stu-id="54f5b-181">The Docker registry is a critical piece in the Docker application life cycle because it is the central place where you store your custom test (aka "blessed images") to be deployed into QA and production environments.</span></span>

<span data-ttu-id="54f5b-182">Подобно как код приложения, хранящиеся в репозитории SCC (например, Git) — «источник истины», реестр Docker — «источник истины» для двоичных приложения или bits для контроля Качества или рабочей среде развертывания.</span><span class="sxs-lookup"><span data-stu-id="54f5b-182">Similar to how the application code stored in your SCC repository (Git, etc.) is your "source of truth," the Docker registry is your "source of truth" for your binary application or bits to be deployed to the QA or production environments.</span></span>

<span data-ttu-id="54f5b-183">Как правило может потребоваться у ваших частных репозиториев для пользовательских образов в частный репозиторий в реестре контейнеров Azure на локальный реестр как доверенный реестр Docker или в реестре и общедоступное облако с ограниченным доступом (например Docker Hub), несмотря на то что в последнем случае если код не является открытым исходным кодом, должны доверять безопасности поставщика.</span><span class="sxs-lookup"><span data-stu-id="54f5b-183">Typically, you might want to have your private repositories for your custom images either in a private repository in Azure Container Registry or in an on-premises registry like Docker Trusted Registry, or in a public-cloud registry with restricted access (like Docker Hub), although in this last case if your code is not open source, you must trust the vendor's security.</span></span> <span data-ttu-id="54f5b-184">В любом случае метод, по которому этого многом схоже, в конечном счете по команде docker Push-уведомлений, как показано на рисунке 5-4.</span><span class="sxs-lookup"><span data-stu-id="54f5b-184">Either way, the method by which you do this is pretty similar and ultimately based on the docker push command, as depicted in Figure 5-4.</span></span>

![](./media/image4.png)

<span data-ttu-id="54f5b-185">Рис. 5-4. Публикация пользовательских образов в реестре Docker</span><span class="sxs-lookup"><span data-stu-id="54f5b-185">Figure 5-4: Publishing custom images to Docker Registry</span></span>

<span data-ttu-id="54f5b-186">Имеется несколько предложений реестров Docker из поставщиков облачных решений, таких как реестр контейнеров Azure, реестр контейнеров Amazon Web Services, реестр контейнеров Google, Quay реестра и т. д.</span><span class="sxs-lookup"><span data-stu-id="54f5b-186">There are multiple offerings of Docker registries from cloud vendors like Azure Container Registry, Amazon Web Services Container Registry, Google Container Registry, Quay Registry, and so on.</span></span>

<span data-ttu-id="54f5b-187">Использование расширения Docker служб Azure DevOps, вы можете передать набор обслуживания образов, определением в файле docker-compose.yml с несколько тегов, в реестр Docker, прошедшего проверку подлинности (например, реестр контейнеров Azure), как показано на рисунке 5-5.</span><span class="sxs-lookup"><span data-stu-id="54f5b-187">Using the Azure DevOps Services Docker extension, you can push a set of service images defined by a docker-compose.yml file, with multiple tags, to an authenticated Docker registry (like Azure Container Registry), as shown in Figure 5-5.</span></span>

![](./media/image5.png)

<span data-ttu-id="54f5b-188">Рис. 5-5: Использование служб Azure DevOps для публикации пользовательских образов в реестр Docker</span><span class="sxs-lookup"><span data-stu-id="54f5b-188">Figure 5-5: Using Azure DevOps Services to publishing custom images to a Docker Registry</span></span>

<span data-ttu-id="54f5b-189">**Дополнительные сведения о** Дополнительные сведения о расширении Docker для служб Azure DevOps, перейдите к <https://aka.ms/vstsdockerextension>.</span><span class="sxs-lookup"><span data-stu-id="54f5b-189">**More info** To read more about the Docker extension for Azure DevOps Services, go to <https://aka.ms/vstsdockerextension>.</span></span> <span data-ttu-id="54f5b-190">Дополнительные сведения о реестре контейнеров Azure, перейдите к <https://aka.ms/azurecontainerregistry>.</span><span class="sxs-lookup"><span data-stu-id="54f5b-190">To learn more about Azure Container Registry, go to <https://aka.ms/azurecontainerregistry>.</span></span>

## <a name="step-4-cd-deploy"></a><span data-ttu-id="54f5b-191">Шаг 4. Компакт-ДИСК, развертывание</span><span class="sxs-lookup"><span data-stu-id="54f5b-191">Step 4: CD, Deploy</span></span>

<span data-ttu-id="54f5b-192">Неизменность образов Docker гарантирует воспроизводимые развертывания с что разработки, тестирования через непрерывной Интеграции и запустить в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="54f5b-192">The immutability of Docker images ensures a repeatable deployment with what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="54f5b-193">После образы Docker приложений, опубликованных в реестр Docker (частный или общедоступный), их можно развернуть в нескольких средах, которые могут иметь (производство, контроля Качества, промежуточного хранения, и т.д.) из конвейера компакт-диска с помощью служб Azure DevOps конвейер задачи или Azure DevOps Services Release Management.</span><span class="sxs-lookup"><span data-stu-id="54f5b-193">After you have the application Docker images published in your Docker registry (either private or public), you can deploy them to the several environments that you might have (production, QA, staging, etc.) from your CD pipeline by using Azure DevOps Services pipeline tasks or Azure DevOps Services Release Management.</span></span>

<span data-ttu-id="54f5b-194">Однако на этом этапе он зависит от какого рода приложения Docker при развертывании.</span><span class="sxs-lookup"><span data-stu-id="54f5b-194">However, at this point it depends on what kind of Docker application you are deploying.</span></span> <span data-ttu-id="54f5b-195">Развертывание простого приложения (с композиции и развертывания точки зрения) как монолитного приложения, включающего в себя несколько контейнеров или служб и развернутых несколько серверов или виртуальных машин — очень отличается от процесса развертывания более сложное приложение как ориентированных на микрослужбы приложения с возможностями обработки.</span><span class="sxs-lookup"><span data-stu-id="54f5b-195">Deploying a simple application (from a composition and deployment point of view) like a monolithic application comprising a few containers or services and deployed to a few servers or VMs is very different from deploying a more complex application like a microservices-oriented application with hyperscale capabilities.</span></span> <span data-ttu-id="54f5b-196">Эти два сценария описаны в следующих разделах.</span><span class="sxs-lookup"><span data-stu-id="54f5b-196">These two scenarios are explained in the following sections.</span></span>

### <a name="deploying-composed-docker-applications-to-multiple-docker-environments"></a><span data-ttu-id="54f5b-197">Развертывание составных приложений Docker в нескольких средах Docker</span><span class="sxs-lookup"><span data-stu-id="54f5b-197">Deploying composed Docker applications to multiple Docker environments</span></span>

<span data-ttu-id="54f5b-198">Рассмотрим сначала в менее сложных сценарий: развертывание в простой узлов Docker (виртуальные машины или серверы) в среде одного или нескольких сред (контроля Качества, промежуточной и рабочей).</span><span class="sxs-lookup"><span data-stu-id="54f5b-198">Let's look first at the less-complex scenario: deploying to simple Docker hosts (VMs or servers) in a single environment or multiple environments (QA, staging, and production).</span></span> <span data-ttu-id="54f5b-199">В этом случае конвейере непрерывной Поставки можно использовать внутри docker-compose (из задач развертывания служб Azure DevOps) для развертывания приложений Docker с набором связанных контейнеров или служб, как показано на рисунке 5-6.</span><span class="sxs-lookup"><span data-stu-id="54f5b-199">In this scenario, internally your CD pipeline can use docker-compose (from your Azure DevOps Services deployment tasks) to deploy the Docker applications with its related set of containers or services, as illustrated in Figure 5-6.</span></span>

![](./media/image6.png)

<span data-ttu-id="54f5b-200">Рис. 5-6. Развертывание контейнеров приложения простой реестр среды узла Docker</span><span class="sxs-lookup"><span data-stu-id="54f5b-200">Figure 5-6: Deploying application containers to simple Docker host environments registry</span></span>

<span data-ttu-id="54f5b-201">Рис. 5-7 выделяет, как можно соединиться с вашей сборки CI среды контроля Качества и тестирования с помощью служб Azure DevOps, щелкнув Docker Compose в диалоговом окне Добавить задачу.</span><span class="sxs-lookup"><span data-stu-id="54f5b-201">Figure 5-7 highlights how you can connect your build CI to QA/test environments via Azure DevOps Services by clicking Docker Compose in the Add Task dialog box.</span></span> <span data-ttu-id="54f5b-202">Тем не менее, при развертывании в промежуточной или рабочей среде, обычно используется Release Management возможности обработки нескольких сред (например контроля Качества, промежуточной и рабочей).</span><span class="sxs-lookup"><span data-stu-id="54f5b-202">However, when deploying to staging or production environments, you would usually use Release Management features handling multiple environments (like QA, staging, and production).</span></span> <span data-ttu-id="54f5b-203">При развертывании на отдельные узлы Docker, она использует службы Azure DevOps «Docker Compose» задачи (который вызывает docker-команды взгляд изнутри compose up).</span><span class="sxs-lookup"><span data-stu-id="54f5b-203">If you're deploying to single Docker hosts, it is using the Azure DevOps Services "Docker Compose" task (which is invoking the docker-compose up command under the hood).</span></span> <span data-ttu-id="54f5b-204">При развертывании в службе контейнеров Azure, использует задачу развертывания Docker, как описано в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="54f5b-204">If you're deploying to Azure Container Service, it uses the Docker Deployment task, as explained in the section that follows.</span></span>

![](./media/image7.png)

<span data-ttu-id="54f5b-205">Рис. 5-7: Добавление задачи Docker Compose в конвейере служб Azure DevOps</span><span class="sxs-lookup"><span data-stu-id="54f5b-205">Figure 5-7: Adding a Docker Compose task in a Azure DevOps Services pipeline</span></span>

<span data-ttu-id="54f5b-206">При создании выпуска в службах Azure DevOps, он принимает набор входных артефакты.</span><span class="sxs-lookup"><span data-stu-id="54f5b-206">When you create a release in Azure DevOps Services, it takes a set of input artifacts.</span></span> <span data-ttu-id="54f5b-207">Они предназначены быть неизменными на протяжении всего времени существования выпуска в нескольких средах.</span><span class="sxs-lookup"><span data-stu-id="54f5b-207">These are intended to be immutable throughout the lifetime of the release across multiple environments.</span></span> <span data-ttu-id="54f5b-208">При введении контейнеры входной артефакты идентификации образов в реестре для развертывания.</span><span class="sxs-lookup"><span data-stu-id="54f5b-208">When you introduce containers, the input artifacts identify images in a registry to deploy.</span></span> <span data-ttu-id="54f5b-209">В зависимости от того, как они определены они не гарантированно не изменяются на протяжении выпуска, самый очевидный случай, при создании ссылки «myimage:latest» из файла docker-Compose.</span><span class="sxs-lookup"><span data-stu-id="54f5b-209">Depending on how these are identified, they are not guaranteed to remain the same throughout the duration of the release, the most obvious case being when you reference "myimage:latest" from a docker-compose file.</span></span>

<span data-ttu-id="54f5b-210">Расширение Docker для служб Azure DevOps дает возможность создать артефакты сборки, содержащие изображения реестра формирует дайджест, гарантированно уникальным идентификатором один двоичный образ.</span><span class="sxs-lookup"><span data-stu-id="54f5b-210">The Docker extension for Azure DevOps Services gives you the ability to generate build artifacts that contain specific registry image digests that are guaranteed to uniquely identify the same image binary.</span></span> <span data-ttu-id="54f5b-211">Это те, что Вы действительно хотите использовать в качестве входных данных для выпуска.</span><span class="sxs-lookup"><span data-stu-id="54f5b-211">These are what you really want to use as input to a release.</span></span>

### <a name="managing-releases-to-docker-environments-by-using-azure-devops-services-release-management"></a><span data-ttu-id="54f5b-212">Управление выпусками в средах Docker с помощью управления выпусками служб Azure DevOps</span><span class="sxs-lookup"><span data-stu-id="54f5b-212">Managing releases to Docker environments by using Azure DevOps Services Release Management</span></span>

<span data-ttu-id="54f5b-213">Через расширения служб Azure DevOps, как создавать новый образ, опубликуйте его в реестр Docker, запустите его на узлах Linux или Windows и использовать команды, такие как docker-compose для развертывания нескольких контейнеров в качестве приложение целиком, все это Azure DevOps Возможности управления выпусками, предназначены для нескольких сред служб, как показано на рис. 5-8.</span><span class="sxs-lookup"><span data-stu-id="54f5b-213">Through the Azure DevOps Services extensions, you can build a new image, publish it to a Docker registry, run it on Linux or Windows hosts, and use commands such as docker-compose to deploy multiple containers as an entire application, all through the Azure DevOps Services Release Management capabilities intended for multiple environments, as shown in Figure 5-8.</span></span>

![](./media/image8.png)

<span data-ttu-id="54f5b-214">Рис. 5-8. Настройка задачи Azure DevOps служб Docker Compose в управлении выпусками служб Azure DevOps</span><span class="sxs-lookup"><span data-stu-id="54f5b-214">Figure 5-8: Configuring Azure DevOps Services Docker Compose tasks from Azure DevOps Services Release Management</span></span>

<span data-ttu-id="54f5b-215">Однако следует помнить, что в сценарии, показано на рис. 5-6 и реализован на рис. 5-8 довольно прост (развертывание простой Docker узлов и виртуальных машин, и будет существовать на одном контейнере или экземпляр каждого образа) и, возможно, следует использовать только для разработки или тестирования sc enarios.</span><span class="sxs-lookup"><span data-stu-id="54f5b-215">However, keep in mind that the scenario shown in Figure 5-6 and implemented in Figure 5-8 is pretty basic (it is deploying to simple Docker hosts and VMs, and there will be a single container or instance per image) and probably should be used only for development or test scenarios.</span></span> <span data-ttu-id="54f5b-216">В большинстве корпоративных сценариев рабочей среде, следует иметь высокий уровень доступности (HA) и более простой в управлении масштабируемость, балансировку нагрузки нескольких узлов, серверы и виртуальные машины, а также «интеллектуальные отработки отказа» таким образом, если сервер или узел в случае сбоя его службы и контейнеры будут переведены на другом сервере узла или виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="54f5b-216">In most enterprise production scenarios, you would want to have High Availability (HA) and easy-to-manage scalability by load balancing across multiple nodes, servers, and VMs, plus "intelligent failovers" so that if a server or node fails, its services and containers will be moved to another host server or VM.</span></span> <span data-ttu-id="54f5b-217">В этом случае необходимо более сложных технологий, таких как кластеры контейнеров, планировщики и оркестраторы.</span><span class="sxs-lookup"><span data-stu-id="54f5b-217">In that case, you need more advanced technologies like container clusters, orchestrators, and schedulers.</span></span> <span data-ttu-id="54f5b-218">Таким образом способ развертывания к этим кластерам – точно сложных сценариев, как описано в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="54f5b-218">Thus, the way to deploy to those clusters is precisely through the advanced scenarios explained in the next section.</span></span>

### <a name="deploying-complex-docker-applications-to-docker-clusters-dcos-kubernetes-and-docker-swarm"></a><span data-ttu-id="54f5b-219">Развертывание сложных приложений Docker в кластеры Docker (DC/OS, Kubernetes и Docker Swarm)</span><span class="sxs-lookup"><span data-stu-id="54f5b-219">Deploying complex Docker applications to Docker clusters (DC/OS, Kubernetes, and Docker Swarm)</span></span>

<span data-ttu-id="54f5b-220">Характер распределенных приложений требует вычислительных ресурсов, которые также распространяются.</span><span class="sxs-lookup"><span data-stu-id="54f5b-220">The nature of distributed applications requires compute resources that are also distributed.</span></span> <span data-ttu-id="54f5b-221">Чтобы рабочая возможности, необходимо иметь кластеризации возможности, которые обеспечивают высокий уровень масштабируемости и высокой ДОСТУПНОСТИ на основе пула ресурсов.</span><span class="sxs-lookup"><span data-stu-id="54f5b-221">To have production-scale capabilities, you need to have clustering capabilities that provide high scalability and HA based on pooled resources.</span></span>

<span data-ttu-id="54f5b-222">Можно развернуть контейнеры вручную к этим кластерам с помощью интерфейса командной строки средства, такие как Docker Swarm (например, использование [создания службы docker](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) или веб-интерфейса такие как [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) DC/OS кластеров, но вы должны Зарезервируйте, только для тестирования punctual развертывания или в целях управления, таких как масштабирование или наблюдения.</span><span class="sxs-lookup"><span data-stu-id="54f5b-222">You could deploy containers manually to those clusters from a CLI tool such as Docker Swarm (like using [docker service create](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) or a web UI such as [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) for DC/OS clusters, but you should reserve that only for punctual deployment testing or for management purposes like scaling-out or monitoring purposes.</span></span>

<span data-ttu-id="54f5b-223">С точки зрения компакт-диска, а также службам DevOps в Azure в частности, можно выполнять задачи по развертыванию специально сделан из среды Azure DevOps Services Release Management, которые развернет контейнерное приложение распределенные кластеры в контейнере Службы, как показано на рисунке 5-9.</span><span class="sxs-lookup"><span data-stu-id="54f5b-223">From a CD point of view, and Azure DevOps Services specifically, you can run specially made deployment tasks from your Azure DevOps Services Release Management environments which will deploy your containerized applications to distributed clusters in Container Service, as illustrated in Figure 5-9.</span></span>

![](./media/image9.png)

<span data-ttu-id="54f5b-224">Рис. 5-9. Развертывание распределенных приложений в службе контейнеров</span><span class="sxs-lookup"><span data-stu-id="54f5b-224">Figure 5-9: Deploying distributed applications to Container Service</span></span>

<span data-ttu-id="54f5b-225">Изначально при развертывании для некоторых кластеров или оркестраторы, традиционно используется сценарии развертывания и механизма каждого каждого оркестратора (то есть, Mesosphere DC/OS или Kubernetes реализуйте механизмы развертывания, чем Docker и Docker Swarm) вместо более простой и простой в использовании docker-compose средство на основе файла docker-compose.yml определения.</span><span class="sxs-lookup"><span data-stu-id="54f5b-225">Initially, when deploying to certain clusters or orchestrators, you would traditionally use specific deployment scripts and mechanisms per each orchestrator (that is, Mesosphere DC/OS or Kubernetes have different deployment mechanisms than Docker and Docker Swarm) instead of the simpler and easy-to-use docker-compose tool based on the docker-compose.yml definition file.</span></span> <span data-ttu-id="54f5b-226">Тем не менее, благодаря DevOps служб Microsoft Azure Docker Deploy задаче показано на рисунке 5-10, теперь также развертыванием для DC/OS, просто с помощью файла знаком docker-compose.yml, так как Майкрософт не выполняет этот «перевод» автоматически (из вашей файл docker-compose.yml в другие форматы, необходимые для DC/OS).</span><span class="sxs-lookup"><span data-stu-id="54f5b-226">However, thanks to the Microsoft Azure DevOps Services Docker Deploy task, shown in Figure 5-10, you now also can deploy to DC/OS by just using your familiar docker-compose.yml file because Microsoft performs that "translation" for you (from your docker-compose.yml file to other formats needed by DC/OS).</span></span>

![](./media/image10.png)

<span data-ttu-id="54f5b-227">Рис. 5-10. Добавление задачи развертывания Docker RM вашей среды</span><span class="sxs-lookup"><span data-stu-id="54f5b-227">Figure 5-10: Adding the Docker Deploy task to your Environment RM</span></span>

<span data-ttu-id="54f5b-228">Рис. 5-11 показано, как можно изменить в задачу развертывания Docker и указать тип объекта (Azure DC/OS службы контейнеров, в данном случае), файл Docker Compose и подключение к реестру Docker (например, реестр контейнеров Azure или Docker Hub).</span><span class="sxs-lookup"><span data-stu-id="54f5b-228">Figure 5-11 demonstrates how you can edit the Docker Deploy task and specify the Target Type (Azure Container Service DC/OS, in this case), your Docker Compose File, and the Docker Registry connection (like Azure Container Registry or Docker Hub).</span></span> <span data-ttu-id="54f5b-229">Это происходит, когда задача извлечет готовые к использованию пользовательских образов Docker для развертывания как контейнеры в кластере DC/OS.</span><span class="sxs-lookup"><span data-stu-id="54f5b-229">This is where the task will retrieve your ready-to-use custom Docker images to be deployed as containers in the DC/OS cluster.</span></span>

![](./media/image11.png)

<span data-ttu-id="54f5b-230">Рис. 5-11. Docker развернуть задача определения развертывание в Azure DC/OS службы контейнеров</span><span class="sxs-lookup"><span data-stu-id="54f5b-230">Figure 5-11: Docker Deploy task definition deploying to Azure Container Service DC/OS</span></span>

<span data-ttu-id="54f5b-231">**Дополнительные сведения о** Дополнительные сведения о конвейере компакт-диска с помощью служб Azure DevOps и Docker, посетите следующие сайты:</span><span class="sxs-lookup"><span data-stu-id="54f5b-231">**More info** To read more about the CD pipeline with Azure DevOps Services and Docker, visit the following sites:</span></span>

<span data-ttu-id="54f5b-232">Расширение службы DevOps в Azure для Docker и службы контейнеров Azure: [ https://aka.ms/\ vstsdockerextension](https://aka.ms/vstsdockerextension)</span><span class="sxs-lookup"><span data-stu-id="54f5b-232">Azure DevOps Services extension for Docker and Azure Container Service: [https://aka.ms/\ vstsdockerextension](https://aka.ms/vstsdockerextension)</span></span>

<span data-ttu-id="54f5b-233">Служба контейнеров Azure: <https://aka.ms/azurecontainerservice></span><span class="sxs-lookup"><span data-stu-id="54f5b-233">Azure Container Service: <https://aka.ms/azurecontainerservice></span></span>

<span data-ttu-id="54f5b-234">Mesosphere DC/OS: <https://mesosphere.com/product/></span><span class="sxs-lookup"><span data-stu-id="54f5b-234">Mesosphere DC/OS: <https://mesosphere.com/product/></span></span>

## <a name="step-5-run-and-manage"></a><span data-ttu-id="54f5b-235">Шаг 5. Запуск и управление ими</span><span class="sxs-lookup"><span data-stu-id="54f5b-235">Step 5: Run and manage</span></span>

<span data-ttu-id="54f5b-236">Так как выполнение приложений и управления ими в рабочей среде корпоративного уровня является главной темой в самого себя и из-за тип операций, людей, работающих на этом уровне (ИТ-операций), а также большого объема в этой области, мы приложили все рядом Глава описано его.</span><span class="sxs-lookup"><span data-stu-id="54f5b-236">Because running and managing applications at enterprise-production level is a major subject in and of itself, and due to the type of operations and people working at that level (IT operations) as well as the large scope of this area, we have devoted the entire next chapter to explaining it.</span></span>

## <a name="step-6-monitor-and-diagnose"></a><span data-ttu-id="54f5b-237">Шаг 6. Мониторинг и диагностика</span><span class="sxs-lookup"><span data-stu-id="54f5b-237">Step 6: Monitor and diagnose</span></span>

<span data-ttu-id="54f5b-238">В этом разделе также рассматривается в следующей главе как часть задач, выполняемых ИТ-операций в рабочих системах; Тем не менее важно подчеркнуть, что информации, полученной на этом шаге нужно передать обратно к группе разработки, таким образом, чтобы приложение постоянно повышается.</span><span class="sxs-lookup"><span data-stu-id="54f5b-238">This topic also is covered in the next chapter as part of the tasks that IT operations performs in production systems; however, is important to highlight that the insights obtained in this step must feed back to the development team so that the application is constantly improved.</span></span> <span data-ttu-id="54f5b-239">С этой точки зрения, он также является частью DevOps, несмотря на то, что задачи и операции, обычно выполняются с ИТ.</span><span class="sxs-lookup"><span data-stu-id="54f5b-239">From that point of view, it is also part of DevOps, although the tasks and operations are usually performed by IT.</span></span>

<span data-ttu-id="54f5b-240">Только в том случае, если мониторинг и диагностика — 100 процентов, в области DevOps являются мониторинга процессов и аналитики, выполняемая команда разработчиков средах тестирования или бета-версии.</span><span class="sxs-lookup"><span data-stu-id="54f5b-240">Only when monitoring and diagnostics are 100 percent within the realm of DevOps are the monitoring processes and analytics performed by the development team against testing or beta environments.</span></span> <span data-ttu-id="54f5b-241">Это делается путем выполнения нагрузочного тестирования или просто отслеживая бета-версии или контроля Качества средах, где тест-инженеров бета-версия устанавливается на новые версии.</span><span class="sxs-lookup"><span data-stu-id="54f5b-241">This is done either by performing load testing or simply by monitoring beta or QA environments, where beta testers are trying the new versions.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="54f5b-242">[Назад](index.md)
>[Вперед](../run-manage-monitor-docker-environments/index.md)</span><span class="sxs-lookup"><span data-stu-id="54f5b-242">[Previous](index.md)
[Next](../run-manage-monitor-docker-environments/index.md)</span></span>