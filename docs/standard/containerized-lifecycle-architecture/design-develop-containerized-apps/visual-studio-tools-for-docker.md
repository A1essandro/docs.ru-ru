---
title: Visual Studio Tools for Docker в Windows
description: Жизненный цикл контейнерного приложения Docker на основе платформы и средств Майкрософт
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/12/2018
ms.custom: vs-dotnet
ms.openlocfilehash: 79e9b5cc9bac317a368583013abbc5124ef2c9ac
ms.sourcegitcommit: ccd8c36b0d74d99291d41aceb14cf98d74dc9d2b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2018
ms.locfileid: "53151217"
---
# <a name="using-visual-studio-tools-for-docker-visual-studio-on-windows"></a><span data-ttu-id="69ae7-103">С помощью средств Visual Studio для Docker (Visual Studio в Windows)</span><span class="sxs-lookup"><span data-stu-id="69ae7-103">Using Visual Studio Tools for Docker (Visual Studio on Windows)</span></span>

<span data-ttu-id="69ae7-104">Visual Studio Tools для рабочего процесса разработки Docker похоже на рабочий процесс, при использовании Visual Studio Code и Docker CLI.</span><span class="sxs-lookup"><span data-stu-id="69ae7-104">The Visual Studio Tools for Docker development workflow is similar to the workflow when using Visual Studio Code and Docker CLI.</span></span> <span data-ttu-id="69ae7-105">По сути, он основан на том же Docker CLI, но проще приступить к работе, упрощает процесс и обеспечивает повышение производительности для сборки, запуска, а также объединять задач.</span><span class="sxs-lookup"><span data-stu-id="69ae7-105">In fact, it's based on the same Docker CLI, but it's easier to get started, simplifies the process, and provides greater productivity for the build, run, and compose tasks.</span></span> <span data-ttu-id="69ae7-106">Выполнение и отладка контейнеров с помощью простых действий, таких как **F5** и **Ctrl**+**F5**.</span><span class="sxs-lookup"><span data-stu-id="69ae7-106">Execute and debug your containers via simple actions like **F5** and **Ctrl**+**F5**.</span></span> <span data-ttu-id="69ae7-107">Благодаря поддержке оркестрации дополнительный контейнер, помимо возможности для запуска и отладки одного контейнера можно выполнять и отлаживать группу контейнеров (всего решения), в то же время.</span><span class="sxs-lookup"><span data-stu-id="69ae7-107">With the optional container orchestration support, in addition to being able to run and debug a single container, you can run and debug a group of containers (a whole solution) at the same time.</span></span>

> [!NOTE]
> <span data-ttu-id="69ae7-108">Эта статья относится к Visual Studio в Windows, а не в Visual Studio для Mac.</span><span class="sxs-lookup"><span data-stu-id="69ae7-108">This article applies to Visual Studio on Windows, and not Visual Studio for Mac.</span></span>

## <a name="configure-your-local-environment"></a><span data-ttu-id="69ae7-109">Настройка локальной среды</span><span class="sxs-lookup"><span data-stu-id="69ae7-109">Configure your local environment</span></span>

<span data-ttu-id="69ae7-110">В последних версиях Docker для Windows ([https://docs.docker.com/docker-for-windows/](https://docs.docker.com/docker-for-windows/)), простой настройки упрощает процесс разработки приложений Docker.</span><span class="sxs-lookup"><span data-stu-id="69ae7-110">With the latest versions of Docker for Windows ([https://docs.docker.com/docker-for-windows/](https://docs.docker.com/docker-for-windows/)), the straightforward setup makes it easy to develop Docker applications.</span></span>

<span data-ttu-id="69ae7-111">Поддержка docker включена в Visual Studio 2017.</span><span class="sxs-lookup"><span data-stu-id="69ae7-111">Docker support is included in Visual Studio 2017.</span></span> <span data-ttu-id="69ae7-112">Ссылка для загрузки Visual Studio 2017: [https://aka.ms/vsdownload?utm_source=mscom&utm_campaign=msdocs](https://aka.ms/vsdownload?utm_source=mscom&utm_campaign=msdocs)</span><span class="sxs-lookup"><span data-stu-id="69ae7-112">Download Visual Studio 2017 here: [https://aka.ms/vsdownload?utm_source=mscom&utm_campaign=msdocs](https://aka.ms/vsdownload?utm_source=mscom&utm_campaign=msdocs)</span></span>

## <a name="use-docker-tools-in-visual-studio-2017"></a><span data-ttu-id="69ae7-113">С помощью средств Docker в Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="69ae7-113">Use Docker Tools in Visual Studio 2017</span></span>

<span data-ttu-id="69ae7-114">Существует два уровня поддержки Docker, который можно добавить в проект.</span><span class="sxs-lookup"><span data-stu-id="69ae7-114">There are two levels of Docker support you can add to a project.</span></span> <span data-ttu-id="69ae7-115">В веб-приложения .NET Core проектов, можно просто добавить *Dockerfile* файл в проект, включение поддержки Docker.</span><span class="sxs-lookup"><span data-stu-id="69ae7-115">In .NET Core web app projects, you can just add a *Dockerfile* file to the project by enabling Docker support.</span></span> <span data-ttu-id="69ae7-116">На следующем уровне находится поддержка оркестрации контейнера, который добавляет *Dockerfile* в проект (если он еще не существует) и *docker-compose.yml* файл на уровне решения.</span><span class="sxs-lookup"><span data-stu-id="69ae7-116">The next level is container orchestration support, which adds a *Dockerfile* to the project (if it doesn't already exist) and a *docker-compose.yml* file at the solution level.</span></span> <span data-ttu-id="69ae7-117">Поддержка оркестрации контейнера, с помощью Docker Compose, добавляется по умолчанию в Visual Studio 2017 версии 15.7 или более ранней версии.</span><span class="sxs-lookup"><span data-stu-id="69ae7-117">Container orchestration support, via Docker Compose, is added by default in Visual Studio 2017 versions 15.7 or earlier.</span></span> <span data-ttu-id="69ae7-118">Поддержка оркестрации контейнеров — это компонент согласием в Visual Studio 2017 версии 15.8 или более поздней версии, в этом случае Docker Compose и Service Fabric поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="69ae7-118">Container orchestration support is an opt-in feature in Visual Studio 2017 versions 15.8 or later, in which case Docker Compose and Service Fabric are supported.</span></span>

<span data-ttu-id="69ae7-119">**Добавить** > **поддержку Docker** и **добавить** > **оркестрация контейнеров поддержки** команды находятся в контекстном меню (или контекстное меню) из узла проекта для проекта веб-приложения в **обозревателе решений**, как показано на рисунке 4-26:</span><span class="sxs-lookup"><span data-stu-id="69ae7-119">The **Add** > **Docker Support** and **Add** > **Container orchestration Support** commands are located on the right-click menu (or context menu) of the project node for a web app project in **Solution Explorer**, as shown in Figure 4-26:</span></span>

![Добавить поддержку Docker команду меню в Visual Studio](media/add-docker-support-menu.png)

<span data-ttu-id="69ae7-121">Рис. 4-26. Добавление поддержки Docker в проект Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="69ae7-121">Figure 4-26: Adding Docker support to a Visual Studio 2017 project</span></span>

### <a name="add-docker-support"></a><span data-ttu-id="69ae7-122">Добавление поддержки Docker</span><span class="sxs-lookup"><span data-stu-id="69ae7-122">Add Docker support</span></span>

<span data-ttu-id="69ae7-123">Можно добавить поддержку Docker в существующий проект веб-приложения .NET Core, выбрав **добавить** > **Docker поддерживает** в **обозревателе решений**.</span><span class="sxs-lookup"><span data-stu-id="69ae7-123">You can add Docker support to an existing .NET Core web app project by selecting **Add** > **Docker Support** in **Solution Explorer**.</span></span> <span data-ttu-id="69ae7-124">Можно также включить поддержку Docker во время создания проекта, выбрав **Включение поддержки Docker** в **новый веб-приложение ASP.NET Core** диалоговое окно, которое открывается при нажатии **ОК** в **новый проект** диалоговое окно, как показано на рисунке 4-27.</span><span class="sxs-lookup"><span data-stu-id="69ae7-124">You can also enable Docker support during project creation by selecting **Enable Docker Support** in the **New ASP.NET Core Web Application** dialog box that opens after you click **OK** in the **New Project** dialog box, as shown in Figure 4-27.</span></span>

![Включить поддержку Docker для нового веб-приложения ASP.NET Core в Visual Studio](./media/enable-docker-support-visual-studio.png)

<span data-ttu-id="69ae7-126">Рис. 4-27. Включить поддержку Docker во время создания проекта в Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="69ae7-126">Figure 4-27: Enable Docker support during project creation in Visual Studio 2017</span></span>

<span data-ttu-id="69ae7-127">При добавлении или включить поддержку Docker, Visual Studio добавляет *Dockerfile* файл в проект.</span><span class="sxs-lookup"><span data-stu-id="69ae7-127">When you add or enable Docker support, Visual Studio adds a *Dockerfile* file to the project.</span></span>

> [!NOTE]
> <span data-ttu-id="69ae7-128">Когда вы включаете поддержку Docker Compose во время создания проекта для проект веб-приложения .NET Framework (не .NET Core проект веб-приложения), как показано на рис. 4-28, также добавляется поддержка оркестрации контейнеров.</span><span class="sxs-lookup"><span data-stu-id="69ae7-128">When you enable Docker Compose support during project creation for a .NET Framework web app project (not a .NET Core web app project) as shown in Figure 4-28, container orchestration support is also added.</span></span>
>
> ![Включить Docker compose поддержка проект веб-приложения .NET Framework](media/enable-docker-compose-support.png)

> <span data-ttu-id="69ae7-130">Рис. 4-28. Включение поддержки Docker Compose на веб-приложения .NET Framework проекта в Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="69ae7-130">Figure 4-28: Enabling Docker Compose support on a .NET Framework web app project in Visual Studio 2017</span></span>

### <a name="add-container-orchestration-support"></a><span data-ttu-id="69ae7-131">Добавление поддержки оркестрации контейнеров</span><span class="sxs-lookup"><span data-stu-id="69ae7-131">Add container orchestration support</span></span>

<span data-ttu-id="69ae7-132">Создание многоконтейнерного решения следует добавьте поддержку оркестрации контейнера в проекты.</span><span class="sxs-lookup"><span data-stu-id="69ae7-132">When you want to compose a multicontainer solution, add container orchestration support to your projects.</span></span> <span data-ttu-id="69ae7-133">Это позволяет выполнять и отлаживать группу контейнеров (всего решения) в то же время, если они определяются в том же *docker-compose.yml* файл.</span><span class="sxs-lookup"><span data-stu-id="69ae7-133">This lets you run and debug a group of containers (a whole solution) at the same time if they're defined in the same *docker-compose.yml* file.</span></span>

<span data-ttu-id="69ae7-134">Чтобы добавить поддержку оркестрации контейнера, щелкните правой кнопкой мыши узел решения или проекта в **обозревателе решений**и выберите **добавить** > **контейнер Оркестрации поддерживает**.</span><span class="sxs-lookup"><span data-stu-id="69ae7-134">To add container orchestration support, right-click on the solution or project node in **Solution Explorer**, and choose **Add** > **Container Orchestration Support**.</span></span> <span data-ttu-id="69ae7-135">Затем выберите **Docker Compose** или **Service Fabric** для управления контейнерами.</span><span class="sxs-lookup"><span data-stu-id="69ae7-135">Then choose **Docker Compose** or **Service Fabric** to manage the containers.</span></span>

<span data-ttu-id="69ae7-136">После добавления поддержки оркестрации контейнера в проект, вы видите добавлен в проект файл Dockerfile и **docker-compose** папка добавлена в решение в **обозревателе решений**, как показано на рис. 4-29:</span><span class="sxs-lookup"><span data-stu-id="69ae7-136">After you add container orchestration support to your project, you see a Dockerfile added to the project and a **docker-compose** folder added to the solution in **Solution Explorer**, as shown in Figure 4-29:</span></span>

![Файлы docker в обозревателе решений в Visual Studio](media/docker-support-solution-explorer.png)

<span data-ttu-id="69ae7-138">Рис. 4-29. Файлы docker в обозревателе решений в Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="69ae7-138">Figure 4-29: Docker files in Solution Explorer in Visual Studio 2017</span></span>

<span data-ttu-id="69ae7-139">Если *docker-compose.yml* уже существует, Visual Studio просто добавляет необходимые строки кода конфигурации к нему.</span><span class="sxs-lookup"><span data-stu-id="69ae7-139">If *docker-compose.yml* already exists, Visual Studio just adds the required lines of configuration code to it.</span></span>

## <a name="configure-docker-tools"></a><span data-ttu-id="69ae7-140">Настройка средств Docker</span><span class="sxs-lookup"><span data-stu-id="69ae7-140">Configure Docker tools</span></span>

<span data-ttu-id="69ae7-141">В главном меню выберите **средства** > **параметры**и разверните **средства контейнеров** > **параметры**.</span><span class="sxs-lookup"><span data-stu-id="69ae7-141">From the main menu, choose **Tools** > **Options**, and expand **Container Tools** > **Settings**.</span></span> <span data-ttu-id="69ae7-142">Параметры средства контейнера отображаются.</span><span class="sxs-lookup"><span data-stu-id="69ae7-142">The container tools settings appear.</span></span>

![](./media/visual-studio-docker-tools-options.png)

<span data-ttu-id="69ae7-143">Рис. 4-30. Параметры средств docker</span><span class="sxs-lookup"><span data-stu-id="69ae7-143">Figure 4-30: Docker Tools Options</span></span>

<span data-ttu-id="69ae7-144">Следующая таблица поможет вам решить, как задавать эти параметры.</span><span class="sxs-lookup"><span data-stu-id="69ae7-144">The following table might help you decide how to set these options.</span></span>

| <span data-ttu-id="69ae7-145">name</span><span class="sxs-lookup"><span data-stu-id="69ae7-145">Name</span></span> | <span data-ttu-id="69ae7-146">По умолчанию</span><span class="sxs-lookup"><span data-stu-id="69ae7-146">Default Setting</span></span> | <span data-ttu-id="69ae7-147">Применение</span><span class="sxs-lookup"><span data-stu-id="69ae7-147">Applies To</span></span> | <span data-ttu-id="69ae7-148">Описание</span><span class="sxs-lookup"><span data-stu-id="69ae7-148">Description</span></span> |
| -----|:---------------:|:----------:| ----------- |
| <span data-ttu-id="69ae7-149">Автоматически извлекать требуемые образы Docker при загрузке проекта</span><span class="sxs-lookup"><span data-stu-id="69ae7-149">Automatically pull required Docker images on project load</span></span> | <span data-ttu-id="69ae7-150">включить</span><span class="sxs-lookup"><span data-stu-id="69ae7-150">On</span></span> | <span data-ttu-id="69ae7-151">Docker Compose</span><span class="sxs-lookup"><span data-stu-id="69ae7-151">Docker Compose</span></span> | <span data-ttu-id="69ae7-152">Для повышения производительности при загрузке проектов Visual Studio запустит операцию извлечения Docker в фоновом режиме, когда будете готовы для выполнения кода, уже будет загружен образ или находится в процессе загрузки.</span><span class="sxs-lookup"><span data-stu-id="69ae7-152">For increased performance, when loading projects, Visual Studio will start a Docker pull operation in the background so that when you are ready to run your code, the image is already downloaded or in the process of downloading.</span></span> <span data-ttu-id="69ae7-153">Если вам нужно просто загрузить проекты и просмотр кода, можно отключить это во избежание загрузки образов контейнеров, которые не нужны.</span><span class="sxs-lookup"><span data-stu-id="69ae7-153">If you're just loading projects and browsing code, you can turn this off to avoid downloading container images you don't need.</span></span> |
| <span data-ttu-id="69ae7-154">Автоматически запускать контейнеры в фоновом режиме</span><span class="sxs-lookup"><span data-stu-id="69ae7-154">Automatically start containers in background</span></span> | <span data-ttu-id="69ae7-155">включить</span><span class="sxs-lookup"><span data-stu-id="69ae7-155">On</span></span> | <span data-ttu-id="69ae7-156">Docker Compose</span><span class="sxs-lookup"><span data-stu-id="69ae7-156">Docker Compose</span></span> | <span data-ttu-id="69ae7-157">Еще раз для повышения производительности Visual Studio создает контейнер с подключенных томов готова к после построения и запуска контейнера.</span><span class="sxs-lookup"><span data-stu-id="69ae7-157">Again for increased performance, Visual Studio creates a container with volume mounts ready for when you build and run your container.</span></span> <span data-ttu-id="69ae7-158">Если вы хотите управлять, при создании контейнера, отключите этот параметр.</span><span class="sxs-lookup"><span data-stu-id="69ae7-158">If you want to control when your container is created, turn this off.</span></span> |
| <span data-ttu-id="69ae7-159">Автоматически kill контейнеров при закрытии решения</span><span class="sxs-lookup"><span data-stu-id="69ae7-159">Automatically kill containers on solution close</span></span> | <span data-ttu-id="69ae7-160">включить</span><span class="sxs-lookup"><span data-stu-id="69ae7-160">On</span></span> | <span data-ttu-id="69ae7-161">Docker Compose</span><span class="sxs-lookup"><span data-stu-id="69ae7-161">Docker Compose</span></span> | <span data-ttu-id="69ae7-162">Отключите этот параметр, если вы хотите контейнеры для вашего решения продолжить выполнение после закрыть Visual Studio или решение.</span><span class="sxs-lookup"><span data-stu-id="69ae7-162">Turn this off if you would like containers for your solution to continue to run after closing the solution or closing Visual Studio.</span></span> |
| <span data-ttu-id="69ae7-163">Не запрашивать доверяющем SSL-сертификату localhost</span><span class="sxs-lookup"><span data-stu-id="69ae7-163">Do not prompt for trusting localhost SSL certificate</span></span> | <span data-ttu-id="69ae7-164">Off</span><span class="sxs-lookup"><span data-stu-id="69ae7-164">Off</span></span> | <span data-ttu-id="69ae7-165">Проекты ASP.NET Core 2.1</span><span class="sxs-lookup"><span data-stu-id="69ae7-165">ASP.NET Core 2.1 projects</span></span> | <span data-ttu-id="69ae7-166">Если SSL-сертификату localhost не является доверенным, Visual Studio предложит каждый раз при запуске проекта, если этот флажок установлен.</span><span class="sxs-lookup"><span data-stu-id="69ae7-166">If the localhost SSL certificate is not trusted, Visual Studio will prompt every time you run your project, unless this checkbox is checked.</span></span> |

> [!WARNING]
> <span data-ttu-id="69ae7-167">Если SSL-сертификату localhost не является доверенным и установите флажок, чтобы отключить запрос, веб-запросы HTTPS может завершиться ошибкой во время выполнения в своем приложении или службе.</span><span class="sxs-lookup"><span data-stu-id="69ae7-167">If the localhost SSL certificate is not trusted, and you check the box to suppress prompting, then HTTPS web requests might fail at runtime in your app or service.</span></span> <span data-ttu-id="69ae7-168">В этом случае снимите флажок **не запрашивать** флажок, запустите проект и указывать доверия в командной строке.</span><span class="sxs-lookup"><span data-stu-id="69ae7-168">In that case, uncheck the **Do not prompt** checkbox, run your project, and indicate trust at the prompt.</span></span>

<span data-ttu-id="69ae7-169">**Дополнительные сведения:** Дополнительные сведения о реализации служб и использование набора средств Visual Studio для Docker в следующих статьях:</span><span class="sxs-lookup"><span data-stu-id="69ae7-169">**More information:** For further details on the services implementation and use of Visual Studio Tools for Docker, read the following articles:</span></span>

<span data-ttu-id="69ae7-170">Сборки, отладки, обновления и обновления приложений в локальном контейнере Docker: [https://docs.microsoft.com/azure/vs-azure-tools-docker-edit-and-refresh/](https://docs.microsoft.com/azure/vs-azure-tools-docker-edit-and-refresh)</span><span class="sxs-lookup"><span data-stu-id="69ae7-170">Build, debug, update, and refresh apps in a local Docker container: [https://docs.microsoft.com/azure/vs-azure-tools-docker-edit-and-refresh/](https://docs.microsoft.com/azure/vs-azure-tools-docker-edit-and-refresh)</span></span>

<span data-ttu-id="69ae7-171">Развертывание контейнера ASP.NET Core Docker в реестр контейнеров: [https://docs.microsoft.com/azure/vs-azure-tools-docker-hosting-web-apps-in-docker/](https://docs.microsoft.com/azure/vs-azure-tools-docker-hosting-web-apps-in-docker)</span><span class="sxs-lookup"><span data-stu-id="69ae7-171">Deploy an ASP.NET Core Docker container to a container registry: [https://docs.microsoft.com/azure/vs-azure-tools-docker-hosting-web-apps-in-docker/](https://docs.microsoft.com/azure/vs-azure-tools-docker-hosting-web-apps-in-docker)</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="69ae7-172">[Назад](docker-apps-inner-loop-workflow.md)
>[Вперед](set-up-windows-containers-with-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="69ae7-172">[Previous](docker-apps-inner-loop-workflow.md)
[Next](set-up-windows-containers-with-powershell.md)</span></span>