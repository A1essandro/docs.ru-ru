---
title: Состояние и данные в приложениях Docker
description: Жизненный цикл контейнерного приложения Docker на основе платформы и средств Майкрософт
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.openlocfilehash: 438733b2cde1d4eff178a5fd4a4ed0bb93804f76
ms.sourcegitcommit: 979597cd8055534b63d2c6ee8322938a27d0c87b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/29/2018
ms.locfileid: "37105453"
---
# <a name="state-and-data-in-docker-applications"></a>Состояние и данные в приложениях Docker

Примитив контейнеры — неизменности. По сравнению с виртуальной машиной, как часто не исчезают контейнеров. Виртуальная машина может завершиться ошибкой в различных формах исчезновения процессы, перегруженные ЦП или полной или сбоя диска. Еще ожидается, что доступной виртуальной Машины и диски RAID широко распространены и убедиться, что ошибки диска сохранения данных.

Тем не менее контейнеры предположительно могут быть экземпляры процессов. Процесс не поддерживает устойчивого состояния. Несмотря на то, что контейнер можно записать на его локальное хранилище, при условии, что этот экземпляр будет происходить вокруг бесконечно бы эквивалентно при условии, что одной копии памяти будет устойчивой. Предполагается, что контейнеры, такие как процессы, повторяются, завершен, или, при управлении с orchestrator контейнера, они могут быть перемещены.

Docker использует возможность, называемую *наложения файловой системы* реализовать процесс копирования при записи, в которой хранятся все обновленные сведения о файловой системе корневого контейнера, по сравнению с исходного изображения, на котором он основан. Эти изменения будут потеряны, если контейнер впоследствии удаляется из системы. Контейнер, следовательно, не имеет постоянное хранилище по умолчанию. Несмотря на то, что существует возможность сохранения состояния контейнера, проектировании системы этой будет конфликтовать с принцип архитектуры контейнера.

Чтобы управлять постоянных данных в приложениях Docker, существуют общие решения:

-   [**Тома данных**](https://docs.docker.com/engine/tutorials/dockervolumes/) эти подключения к узлу, представленными просто.

-   [**Контейнеры томов данных**](https://docs.docker.com/engine/tutorials/dockervolumes/#/creating-and-mounting-a-data-volume-container) контейнерам, с помощью внешнего контейнера, который циклического они предоставляют общего хранилища.

-   [**Подключаемые модули тома**](https://docs.docker.com/engine/tutorials/dockervolumes/#/mount-a-shared-storage-volume-as-a-data-volume) эти подключения тома в удаленные расположения, предоставляя долгосрочной сохраняемости.

-   **Удаленные источники данных** примеры включают базы данных SQL и SQL нет или кэшировать служб, таких как Redis.

-   [**Хранилище Azure**](https://docs.microsoft.com/azure/storage/) это предоставляет платформу распространяемый geo хранения службы (PaaS), обеспечивая лучшее из контейнеров, как долгосрочное сохраняемости.

Объемы данных, специально предназначены каталогов в один или несколько контейнеров, которые обходят [объединения файловой системы](https://docs.docker.com/v1.8/reference/glossary#union-file-system). Тома данных предназначены для хранения данных, независимо от жизненный цикл контейнера. Docker таким образом никогда не автоматически удаляет тома при вам удалить контейнер, а также его «сбор мусора» тома, которые больше не ссылается контейнер. Операционная система узла можно просмотреть и изменить данные в любой том свободно, который является просто еще одна причина для использования томов данных только в случае необходимости.

Объект [контейнер томов данных](https://docs.docker.com/v1.8/userguide/dockervolumes/) по сравнению с обычных данных тома. Это по сути неактивные контейнер, который имеет один или несколько томов данных, созданные в нем (как описано выше). Контейнер томов данных предоставляет контейнерам доступ из центральной точки подключения. Преимущество этого метода доступа является, она создает уровень абстракции расположение исходных данных, делая точки подключения логического контейнера данных. Она также позволяет контейнеры «приложение», обращающиеся к томам данных контейнера для создаваться и уничтожаться, сохраняя постоянный в выделенном контейнера данных.

Рис. 4-5 показано, что регулярного тома Docker можно поместить в хранилище вне самим контейнерами, но в пределах физического узла виртуальной Машины server. *Тома docker нет возможности использовать том из одного узла сервера или виртуальной Машины на другой*.

![](./media/image5.png)

Рис. 4-5: объемы данных и внешних источников данных для приложений контейнеров и контейнеров

Из-за невозможности управления данными, общим для контейнеров, выполняющихся на разных физических узлах, рекомендуется не использовать тома для бизнес-данных, если узел Docker — основного узла и виртуальной Машины, так как при использовании контейнеров Docker в orchestrator контейнеры ожидаются для перемещения от одного к другому узлу, в зависимости от оптимизаций, которые должны быть выполнены в кластере.

Таким образом обычных данных томов, хороший механизм для работы с файлы трассировки, временных файлов или все аналогичные концепция, которая не влияет на согласованность данных business, если или при перемещении вашей контейнеров на нескольких узлах.

Подключаемые модули тома, например [Flocker](https://clusterhq.com/flocker/) предоставляют данные между всеми узлами в кластере. Несмотря на то, что не все подключаемые модули тома создаются одинаково, подключаемые модули тома обычно предоставляют во внешних хранилищах постоянного надежного хранилища из неизменяемого контейнеров.

Удаленные источники данных и кэши, как база данных SQL, DocumentDB или удаленного кэша как Redis будет таким же, как разработка без контейнеров. Это одна из основного и проверенные, способы хранения данных бизнес-приложения.


>[!div class="step-by-step"]
[Назад](monolithic-applications.md)
[Вперед](soa-applications.md)
