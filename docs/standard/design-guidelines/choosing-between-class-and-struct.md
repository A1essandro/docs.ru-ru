---
title: Выбор между классом и структурой
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: ''
ms.suite: ''
ms.technology: dotnet-standard
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- class library design guidelines [.NET Framework], structures
- class library design guidelines [.NET Framework], classes
- structures [.NET Framework], vs. classes
- classes [.NET Framework], design guidelines
- type design guidelines, structures
- structures [.NET Framework], design guidelines
- classes [.NET Framework], vs. structures
- type design guidelines, classes
ms.assetid: f8b8ec9b-0ba7-4dea-aadf-a93395cd804f
caps.latest.revision: 11
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: d7b7a0b290b97966894b9fa7d3b5597e68037cb0
ms.sourcegitcommit: 2e8acae16ae802f2d6d04e3ce0a6dbf04e476513
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/18/2018
---
# <a name="choosing-between-class-and-struct"></a>Выбор между классом и структурой
Одним из основных проектных решений сталкивается каждый конструктор framework является разработки тип как класс (ссылочный тип) или как структура (тип значения). При этом важно понять различия в поведении ссылочных типов и типов значений.  
  
 Первый разница между ссылочные типы и типы значений, которые мы будет рассматривать в том, что ссылочные типы, выделенными в куче и сбора мусора, тогда как выделяются типы значений, либо в стеке или встроенные, содержащую типы и освобождается при стека Освобождает или когда возвращает освобожденные своим вмещающим типом. Таким образом операций выделения и освобождения типов значений, в целом дешевле, чем операций выделения и освобождения ссылочных типов.  
  
 Далее ссылочные типы массивов выделяются вне строки, то есть элементы массива только ссылки на экземпляры ссылочного типа, размещенных в куче. Массивы типов значений выделяются встроенный, это означает, что элементы массива являются фактических экземпляров типа значения. Поэтому операций выделения и освобождения массивов типа значения являются значительно дешевле, чем операций выделения и освобождения массивов ссылочного типа. Кроме того в большинстве случаев массивы типов значений демонстрируют гораздо лучше расположение ссылок.  
  
 Следующее различие связана с памятью. Типы значений упаковываться когда приводится к типу ссылки или один из интерфейсов, которые они реализуют. Они получают распакованный при приведения к типу значения. Поскольку поля называются объекты, размещенных в куче сбора мусора, слишком сильно упаковка-преобразование и распаковка-преобразование может иметь отрицательное влияние на куче сборщика мусора и в конечном счете производительность приложения.  Напротив такие упаковка-преобразование не происходит, приводятся ссылочных типов.  
  
 Назначение типа ссылок скопируйте справочник, в то время как назначение типа значение копирование всего значения. Таким образом назначения больших ссылочных типов дешевле, чем назначения типов больших значений.  
  
 Наконец ссылочные типы передаются по ссылке, тогда как типы значений передаются по значению. Изменения в экземпляр ссылочного типа, влияют на все ссылки, указывающие на экземпляр. Экземпляры типов значения копируются в том случае, когда они передаются по значению. При изменении экземпляра типа значения, она безусловно не влияет на все ее копии. Поскольку копий не явно создан пользователем, но неявно создаются, если аргументы передаются или значения возвращаются, типы значений, которые могут быть изменены могут показаться сложными многим пользователям. Таким образом типы значений должны быть неизменными.  
  
 Как правило большинство типов в платформе должно быть классы. Однако, существуют некоторые ситуации, в которых характеристики типа значение сделать ее удобнее использовать структуры.  
  
 **✓ Попробуйте** определение структуры вместо класса, если экземпляры типа невелики и имеют короткое время существования или внедрены в другие объекты.  
  
 **X ИЗБЕГАЙТЕ** определение структуры, если тип не содержит все следующие характеристики:  
  
-   Логически представляет одно значение, аналогично типы-примитивы (`int`, `double`и т. д.).  
  
-   Она имеет размер экземпляра менее 16 байтов.  
  
-   Является неизменяемым.  
  
-   Должен быть упакован часто не будет.  
  
 Во всех остальных случаях необходимо определить типы классов.  
  
 *Фрагменты © 2005, 2009 корпорации Майкрософт. Все права защищены.*  
  
 *Перепечатываются разрешении Пирсона для образовательных учреждений, Inc. из [Framework рекомендации по проектированию: условные обозначения, стили и шаблоны для библиотеки .NET для повторного использования, 2-е издание](https://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619) Krzysztof Cwalina и Брэд Абрамс, опубликованные 22 октября 2008 г., Addison-Wesley Professional в составе ряда разработки Microsoft Windows.*  
  
## <a name="see-also"></a>См. также  
 [Рекомендации по разработке типов](../../../docs/standard/design-guidelines/type.md)  
 [Рекомендации по проектированию на основе Framework](../../../docs/standard/design-guidelines/index.md)
