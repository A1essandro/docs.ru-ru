---
title: "Выбор между классом и структурой | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-standard"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "VB"
  - "CSharp"
  - "C++"
  - "jsharp"
helpviewer_keywords: 
  - "Класс рекомендации по разработке библиотек [платформа .NET Framework] структуры"
  - "Класс рекомендации по разработке библиотек [платформа .NET Framework] классы"
  - "структуры [платформа .NET Framework], и классы"
  - "классы [платформа .NET Framework] рекомендации по проектированию"
  - "правила разработки типов, структуры"
  - "структуры [платформа .NET Framework] рекомендации по проектированию"
  - "классы [платформа .NET Framework] сравнение со структурами"
  - "правила разработки типов, классы"
ms.assetid: f8b8ec9b-0ba7-4dea-aadf-a93395cd804f
caps.latest.revision: 11
author: "rpetrusha"
ms.author: "ronpet"
manager: "wpickett"
caps.handback.revision: 11
---
# Выбор между классом и структурой
Одно из основных проектных решений сталкивается каждый конструктор framework является необходимость разработки тип как класс \(ссылочный тип\) или как структура \(тип значения\). При этом важно понять различия в поведении ссылочные типы и типы значений.  
  
 Первое отличие между ссылочные типы и типы значений, которые мы рассмотрим является ссылочных типов выделенными в куче и сбора мусора, тогда как типы значений выделенных либо в стеке или, содержащую типы и освобождаются, когда в процессе освобождения стека или когда освобождается своим вмещающим типом. Таким образом выделения и освобождения типов значений, в целом дешевле, чем операций выделения и освобождения ссылочных типов.  
  
 Затем массивы ссылочные типы выделяются вне строки, то есть элементы массива только ссылки на экземпляры ссылочного типа, размещенных в куче. Массивы типов значений выделяются встроенный, это означает, что элементы массива являются экземплярами фактического типа значения. Следовательно выделения и освобождения массивы типов значений являются гораздо дешевле, чем выделения и освобождения массивов ссылочного типа. Кроме того в большинстве случаев массивы типов значений демонстрируют гораздо лучше расположение ссылок.  
  
 Следующее различие связано с памятью. Типы значений упаковываться при приведении ссылочный тип или один из интерфейсов, которые они реализуют. Они получают распакованную при приведении типу значения. Поскольку поля являются объектами, которые размещаются в куче сбора мусора, слишком много упаковке и распаковке может иметь негативное влияние на кучу сборщика мусора и в конечном счете производительность приложения.  Напротив такие упаковка\-преобразование не происходит, приводятся ссылочных типов.  
  
 Назначение типа ссылок скопируйте ссылку, в то время как назначение типа значение скопируйте все значение. Таким образом назначения больших ссылочных типов дешевле, чем назначения типов больших значений.  
  
 Наконец ссылочные типы передаются по ссылке, тогда как типы значений передаются по значению. Изменение экземпляра ссылочного типа влияет на все ссылки, указывающие на экземпляр. Экземпляры типов значения копируются в том случае, когда они передаются по значению. При изменении экземпляр типа значения, она Конечно не влияет на все его копии. Поскольку копий не явно создан пользователем, но неявно создается, когда аргументы передаются или возвращаемые значения, возвращаемые типы значений, которые могут быть изменены сбивает с толку для большого количества пользователей. Таким образом типы значений должны быть неизменными.  
  
 Как правило большинство типов в платформе должны быть классами. Однако, существуют некоторые ситуации, в которых характеристики типа значения делающие их более подходящими для использования структуры.  
  
 **✓ Рассмотрите ВОЗМОЖНОСТЬ** определение структуры вместо класса, если экземпляры типа малы, и имеют короткое время существования или внедрены в другие объекты.  
  
 **ИЗБЕЖАТЬ X** определения структуры, если тип имеет все следующие характеристики:  
  
-   Он логически представляет единичное значение, подобно примитивным типам \(`int`, `double`, и т. д.\).  
  
-   Он имеет размер экземпляра менее 16 байтов.  
  
-   Тип является неизменяемым.  
  
-   Упаковываться часто не будет.  
  
 Во всех остальных случаях следует определить типы классов.  
  
 *Частей © 2005, 2009 корпорации Microsoft. Все права защищены.*  
  
 *Воспроизведены разрешении Пирсон образования, Inc. из [Framework рекомендации по проектированию: условные обозначения, стили и шаблоны для повторного использования библиотеки .NET, второе издание](http://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619) Krzysztof Cwalina и Брэд Абрамс опубликованы 22 октября 2008 г., издательство Addison\-Wesley Professional как часть цикла разработки Microsoft Windows.*  
  
## См. также  
 [Правила разработки типов](../../../docs/standard/design-guidelines/type.md)   
 [Рекомендации по проектированию Framework](../../../docs/standard/design-guidelines/index.md)