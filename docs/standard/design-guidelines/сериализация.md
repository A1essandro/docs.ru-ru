---
title: "Serialization1 | Microsoft Docs"
ms.custom: ""
ms.date: "12/14/2016"
ms.prod: ".net-framework-4.6"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "VB"
  - "CSharp"
  - "C++"
  - "jsharp"
ms.assetid: bebb27ac-9712-4196-9931-de19fc04dbac
caps.latest.revision: 4
author: "rpetrusha"
ms.author: "ronpet"
manager: "wpickett"
---
# Сериализация
Сериализация — это процесс преобразования объекта в формат, который легко сохранять или передавать. Например можно сериализовать объект, передать его по Интернету с помощью протокола HTTP и десериализовать его на целевой компьютер.  
  
 Платформа .NET Framework предоставляет три основные технологии сериализации оптимизирован для различных сценариев. В следующей таблице перечислены эти технологии и основные типы Framework, связанные с этими технологиями.  
  
|**Имя технологии**|**Основные типы**|**Сценарии**|  
|------------------------|-----------------------|------------------|  
|**Сериализация контракта данных**|<xref:System.Runtime.Serialization.DataContractAttribute> <br /> <xref:System.Runtime.Serialization.DataMemberAttribute> <br /> <xref:System.Runtime.Serialization.DataContractSerializer> <br /> <xref:System.Runtime.Serialization.NetDataContractSerializer> <br /> <xref:System.Runtime.Serialization.Json.DataContractJsonSerializer> <br /> <xref:System.Runtime.Serialization.ISerializable>|Общее сохранение<br />веб\-службы<br />JSON|  
|**XML\-сериализация**|<xref:System.Xml.Serialization.XmlSerializer>|Формат XML с полный контроль над формой XML|  
|**Сериализация во время выполнения \(двоичная и SOAP\)**|<xref:System.SerializableAttribute> <br /> <xref:System.Runtime.Serialization.ISerializable> <br /> <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> <br /> <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter>|Удаленное взаимодействие .NET|  
  
 **✓ сделать** о сериализации при разработке новых типов.  
  
## Выбор технологии сериализации для поддержки  
 **✓ Рассмотрите ВОЗМОЖНОСТЬ** поддержка сериализации контракта данных, если экземпляры типа необходимо сохранять или использовать в веб\-службах.  
  
 **✓ Рассмотрите ВОЗМОЖНОСТЬ** поддержка XML\-сериализации вместе или вместо сериализации контракта данных в том случае, если необходим больший контроль над формат XML, который создается при сериализации типа.  
  
 Это может потребоваться в некоторых взаимодействия создания сценариев, где необходимо использовать XML не поддерживается при сериализации контракта данных, например, для создания XML\-атрибуты.  
  
 **✓ Рассмотрите ВОЗМОЖНОСТЬ** поддержки сериализации во время выполнения, если экземпляры типа должны передаваться через границы удаленного взаимодействия .NET.  
  
 **ИЗБЕЖАТЬ X** поддержки сериализации во время выполнения или XML\-сериализации только в целях общие сохраняемости. Вместо необходимости сериализации контракта данных.  
  
## Поддержка сериализации контракта данных  
 Типы поддерживают сериализации контракта данных, применив <xref:System.Runtime.Serialization.DataContractAttribute> типу и <xref:System.Runtime.Serialization.DataMemberAttribute> членам типа \(поля и свойства\).  
  
 **✓ Рассмотрите ВОЗМОЖНОСТЬ** пометить элементы данных общедоступные тип, если тип может использоваться в режиме частичного доверия.  
  
 С полным доверием сериализаторы контрактов данных могут сериализовать и десериализовать закрытым типам и членам, но только открытые члены, которые можно сериализовать и десериализовать в режиме частичного доверия.  
  
 **✓ сделать** реализовать Get и set для всех свойств, имеющих <xref:System.Runtime.Serialization.DataMemberAttribute>. Сериализаторы контрактов данных требуется метод считывания и метод задания для тип считается сериализуемым. \(В .NET Framework 3.5 SP1, некоторые свойства коллекции может быть только для чтения.\) Если тип не используется в режиме частичного доверия, одного или обоих методов доступа свойства могут быть закрытыми.  
  
 **✓ Рассмотрите ВОЗМОЖНОСТЬ** с помощью обратных вызовов сериализации для инициализации десериализованных экземпляров.  
  
 Конструкторы не вызываются при десериализации объектов. \(Существуют исключения из правила. Конструкторы коллекций, отмеченные <xref:System.Runtime.Serialization.CollectionDataContractAttribute> вызывается во время десериализации.\) Таким образом любая логика, выполняемая при нормальном построении должна быть реализована как один обратные вызовы сериализации.  
  
 `OnDeserializedAttribute` является наиболее часто используемым атрибутом обратного вызова. Другие атрибуты в семействе, <xref:System.Runtime.Serialization.OnDeserializingAttribute>,  <xref:System.Runtime.Serialization.OnSerializingAttribute>, и <xref:System.Runtime.Serialization.OnSerializedAttribute>. Их можно использовать для пометки обратных вызовов, которые выполняются перед десериализацией, перед выполнением сериализации и, наконец, после сериализации соответственно.  
  
 **✓ Рассмотрите ВОЗМОЖНОСТЬ** с помощью <xref:System.Runtime.Serialization.KnownTypeAttribute> для указания конкретных типов, которые должны использоваться при десериализации более сложного графа объекта.  
  
 **✓ сделать** рассмотрите возможность прямой и обратной совместимости при создании или изменении сериализуемых типов.  
  
 Имейте в виду, что сериализуемые потоки будущих версий типа могут быть десериализованы в текущую версию типа и наоборот.  
  
 Убедитесь, что вы понимаете, что данные\-члены, даже закрытые и внутренние, нельзя изменить их имена, типы или даже их порядок в будущих версиях типа, не предприняты специальные меры для сохранения контракта с помощью явных параметров атрибутов контракта данных.  
  
 Проверьте совместимость сериализации, при внесении изменений в сериализуемые типы. Попробуйте десериализовать новую версию в старой версии и наоборот.  
  
 **✓ Рассмотрите ВОЗМОЖНОСТЬ** реализации <xref:System.Runtime.Serialization.IExtensibleDataObject> разрешающее кругового пути между различными версиями типа.  
  
 Интерфейс позволяет сериализатору убедитесь, что данные не потеряны во время кругового пути.<xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A?displayProperty=fullName> Свойство используется для хранения любых данных из будущих версий типа, неизвестные в текущей версии, и поэтому не могут быть сохранены в членах данных. Если текущая версия затем сериализуется и десериализуется в будущей версии, дополнительные данные будут доступны в сериализованном потоке.  
  
## Поддержка XML\-сериализации  
 Сериализации контракта данных является основным \(по умолчанию\) технологией сериализации в .NET Framework, однако существуют сценарии сериализации, сериализации контракта данных не поддерживает. Например он не позволяют полный контроль над формой XML производятся или потребляются сериализатор. При необходимости такие улучшения управления, должен использоваться XML\-сериализации и вам нужно создать типы для поддержки этой технологии сериализации.  
  
 **ИЗБЕЖАТЬ X** полученных разработки типов специально для XML\-сериализации, если у вас нет очень серьезной управления формой XML. Эта технология сериализации заменен сериализации контракта данных, описанных в предыдущем разделе.  
  
 **✓ Рассмотрите ВОЗМОЖНОСТЬ** реализации <xref:System.Xml.Serialization.IXmlSerializable> интерфейс, если требуется еще большего контроля над фигуры сериализованный XML, чем тот, который обеспечивается путем применения атрибутов XML\-сериализации. Два метода интерфейса, <xref:System.Xml.Serialization.IXmlSerializable.ReadXml%2A> и <xref:System.Xml.Serialization.IXmlSerializable.WriteXml%2A>, позволяют полностью управлять сериализованного потока XML. Можно также управлять XML\-схемы, которая создается для типа, применяя `XmlSchemaProviderAttribute`.  
  
## Поддержка сериализации во время выполнения  
 Сериализация во время выполнения — это технология, используемой в удаленном взаимодействии .NET. Если вы считаете, что ваши типы передаются с помощью удаленного взаимодействия .NET, необходимо убедиться, что они поддерживают сериализацию во время выполнения.  
  
 Базовая поддержка сериализации во время выполнения может быть обеспечена с помощью <xref:System.SerializableAttribute>, и более сложные сценарии включают в себя реализации простой шаблон сериализации среды выполнения \(реализовать <xref:System.Runtime.Serialization.ISerializable> и предоставляют конструктор сериализации\).  
  
 **✓ Рассмотрите ВОЗМОЖНОСТЬ** поддержка сериализации во время выполнения, если типы, которые будут использоваться при удаленном взаимодействии .NET. Например <xref:System.AddIn?displayProperty=fullName> пространства имен используется удаленное взаимодействие .NET и поэтому все типы, передаваемые между `System.AddIn` надстройки должны поддерживать сериализацию во время выполнения.  
  
 **✓ Рассмотрите ВОЗМОЖНОСТЬ** реализации шаблона сериализации среды выполнения, если требуется полный контроль над процессом сериализации. Например если требуется преобразовать данные в виде он получает сериализуются и десериализуются.  
  
 Шаблон очень прост. Все, что нужно сделать — реализовать <xref:System.Runtime.Serialization.ISerializable> интерфейса и предоставить специальный конструктор, используемый при десериализации объекта.  
  
 **✓ сделать** сделайте конструктор сериализации защищенным и принимающим два параметра типизированных и именованных точно так, как показано в примере ниже.  
  
```  
[Serializable]  
public class Person : ISerializable {  
    protected Person(SerializationInfo info, StreamingContext context) {  
        ...  
    }  
}  
```  
  
 **✓ сделать** реализовать `ISerializable` члены явным образом.  
  
 **✓ сделать** применить запрос ссылки для <xref:System.Runtime.Serialization.ISerializable.GetObjectData%2A?displayProperty=fullName> реализации. Это гарантирует, что, только полностью доверенный сериализатор и core имеют доступ к этому элементу.  
  
 *Частей © 2005, 2009 корпорации Microsoft. Все права защищены.*  
  
 *Воспроизведены разрешении Пирсон образования, Inc. из [Framework рекомендации по проектированию: условные обозначения, стили и шаблоны для повторного использования библиотеки .NET, второе издание](http://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619) Krzysztof Cwalina и Брэд Абрамс опубликованы 22 октября 2008 г., издательство Addison\-Wesley Professional как часть цикла разработки Microsoft Windows.*  
  
## См. также  
 [Рекомендации по проектированию Framework](../../../docs/standard/design-guidelines/index.md)   
 [Правила использования](../../../docs/standard/design-guidelines/usage-guidelines.md)