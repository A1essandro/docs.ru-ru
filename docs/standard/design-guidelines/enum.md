---
title: Разработка перечислений
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- type design guidelines, enumerations
- simple enumerations
- enumerations [.NET Framework], design guidelines
- class library design guidelines [.NET Framework], enumerations
- flags enumerations
ms.assetid: dd53c952-9d9a-4736-86ff-9540e815d545
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 544f617ca3a352814504125d7a61d70db5a81566
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/04/2018
ms.locfileid: "33579253"
---
# <a name="enum-design"></a>Разработка перечислений
Перечислимые типы — это особая разновидность типа значения. Существует два типа перечислений: простые перечисления и флага перечисления.  
  
 Простые перечисления представляют небольшие наборы закрытых вариантов. Распространенным примером простое перечисление — это набор цветов.  
  
 Флаг перечисления предназначены для поддержки побитовых операций над значения перечисления. Распространенным примером перечисление флагов приведен список параметров.  
  
 **✓ СДЕЛАТЬ** использовать enum для строго типизированных параметров, свойств и возвращаемых значений, которые представляют собой наборы значений.  
  
 **✓ СДЕЛАТЬ** предпочтительнее использовать вместо статических констант перечисления.  
  
 **X не** использовать enum для открытых наборов (например, версия операционной системы, имена друзьями, и т. д.).  
  
 **X не** предоставляют значения зарезервированных перечисления, которые предназначены для использования в будущем.  
  
 Можно всегда просто добавить значения с существующие перечислением в дальнейшем. В разделе [добавления значения к перечислениям](#add_value) Дополнительные сведения о добавлении значения в перечислениях. Зарезервированные значения просто засоряет ряд real значений и, как правило, привести к ошибкам пользователей.  
  
 **X ИЗБЕГАЙТЕ** открытым доступом перечислений с только одним значением.  
  
 Распространенной практикой для обеспечения будущего расширения интерфейсов API C — Добавление зарезервированного параметров в сигнатуры методов. Зарезервированные параметры такого рода может быть выражен как перечисления значение по умолчанию один. Это не должна выполняться в управляемых интерфейсов API. Перегрузка метода позволяет добавление параметров в будущих выпусках.  
  
 **X не** включать значения sentinel в перечислениях.  
  
 Несмотря на то, что иногда они полезны для разработчиков framework, значения sentinel понятны пользователям платформы. Они используются для отслеживания состояния перечисления, а не выполняется одно из значений из набора, представленный перечисления.  
  
 **✓ СДЕЛАТЬ** укажите значение 0 в простые перечисления.  
  
 Рассмотрите возможность вызова значение нечто похожее на «None». Если такое значение не подходит для данного конкретного перечисления, наиболее распространенные по умолчанию для перечисления должно быть назначено значение базовое значение равно нулю.  
  
 **✓ Попробуйте** с помощью <xref:System.Int32> (по умолчанию в большинстве языков программирования) как базовый тип перечисления, если верно любое из следующих:  
  
-   Перечисление является перечисление флагов и иметь более 32 флагов, или планируется в будущем.  
  
-   Базовый тип должен отличаться от <xref:System.Int32> для более простого взаимодействия с неуправляемым кодом, ожидается перечислений другого размера.  
  
-   Базовый тип меньшего размера приведет к значительной экономии пространства. Если ожидается, что перечисление используется главным образом в качестве аргумента для потока управления, размер имеет небольшое значение. Размер экономии может привести к значительной если:  
  
    -   Предполагается, что перечисление для использования в качестве поля в очень часто экземпляра структуры или класса.  
  
    -   Предполагается, что пользователи не могли создавать большие массивы или коллекции экземпляров перечислений.  
  
    -   Предполагается, что большое число экземпляров перечисления должно быть сериализовано.  
  
 Для использования в памяти, имейте в виду, что управляемые объекты всегда являются `DWORD`-выровнены, поэтому фактически требуется несколько перечислений или другие небольшие структуры в экземпляре для пакета на более мелкие перечисление с Чтобы провести различие, поскольку размер общего экземпляра всегда будет округляться до `DWORD`.  
  
 **✓ СДЕЛАТЬ** имя флага перечисления с множественного числа существительных и субстантивных словосочетаний и простые перечисления атрибутом существительные в единственном числе или субстантивные словосочетания.  
  
 **X не** расширить <xref:System.Enum?displayProperty=nameWithType> напрямую.  
  
 <xref:System.Enum?displayProperty=nameWithType> Это специальный тип используется средой CLR для создания перечислений, определяемой пользователем. Большинство языков программирования предоставляют программный элемент, который предоставляет доступ к этой функции. Например, в C# `enum` определить перечисление используется ключевое слово.  
  
<a name="design"></a>   
### <a name="designing-flag-enums"></a>Разработка перечислений флагов  
 **СДЕЛАТЬ ✓** применить <xref:System.FlagsAttribute?displayProperty=nameWithType> для перечислений флагов. Этот атрибут не применяется для простых перечислениях.  
  
 **✓ СДЕЛАТЬ** используют степень числа 2 для значений перечисления флагов, поэтому они могут быть свободно объединены с помощью битовой операции или.  
  
 **✓ Попробуйте** предоставляет специальные перечислимых значений для часто используется сочетание флагов.  
  
 Побитовые операции сложной и не должно быть обязательным для простых задач. <xref:System.IO.FileAccess.ReadWrite> Примером может служить специальное значение.  
  
 **X ИЗБЕГАЙТЕ** Создание перечисления флага, где определенные комбинации значений являются недопустимыми.  
  
 **X ИЗБЕГАЙТЕ** с помощью флага нулевые значения перечисления, если значение представляет «все флаги сняты» и соответствующим образом, как предписано следующем правиле с именем.  
  
 **СДЕЛАТЬ ✓** имя нулевое значение флага перечисления `None`. Для перечисления флага значение всегда должно означать «все флаги сняты».  
  
<a name="add_value"></a>   
### <a name="adding-value-to-enums"></a>Добавив значение перечисления  
 Это очень часто, чтобы обнаружить, что необходимо добавить значения перечисления, после его уже были доставлены. Нет потенциальных проблем совместимости приложений при созданное значение возвращается с существующие интерфейсы API, поскольку плохо написанных приложений может неправильно обрабатывает новое значение.  
  
 **✓ Попробуйте** Добавление значения перечислений, несмотря на риск совместимость небольших.  
  
 При наличии реальные данные о совместимости приложений, вызванных дополнения для перечисления, рассмотрите возможность добавления новых API, который возвращает старое и новое значения и устаревание старый API, который следует продолжить возврат только старые значения. Это позволит гарантировать, что существующие приложения оставаться совместимым.  
  
 *Фрагменты © 2005, 2009 корпорации Майкрософт. Все права защищены.*  
  
 *Перепечатываются разрешении Пирсона для образовательных учреждений, Inc. из [Framework рекомендации по проектированию: условные обозначения, стили и шаблоны для библиотеки .NET для повторного использования, 2-е издание](https://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619) Krzysztof Cwalina и Брэд Абрамс, опубликованные 22 октября 2008 г., Addison-Wesley Professional в составе ряда разработки Microsoft Windows.*  
  
## <a name="see-also"></a>См. также  
 [Рекомендации по разработке типов](../../../docs/standard/design-guidelines/type.md)  
 [Рекомендации по проектированию на основе Framework](../../../docs/standard/design-guidelines/index.md)
