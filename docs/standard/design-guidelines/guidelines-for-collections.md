---
title: "Рекомендации по использованию коллекций"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 297b8f1d-b11f-4dc6-960a-8e990817304e
caps.latest.revision: "4"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: 9eea60dafef508748df53e23c211f5778250e7f2
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2017
---
# <a name="guidelines-for-collections"></a><span data-ttu-id="8e6b8-102">Рекомендации по использованию коллекций</span><span class="sxs-lookup"><span data-stu-id="8e6b8-102">Guidelines for Collections</span></span>
<span data-ttu-id="8e6b8-103">Любой тип, разработанные специально для использования группы объектов, содержащих некоторыми общими характеристиками можно рассматривать как коллекцию.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-103">Any type designed specifically to manipulate a group of objects having some common characteristic can be considered a collection.</span></span> <span data-ttu-id="8e6b8-104">Почти всегда это подходит для таких типов, для реализации <xref:System.Collections.IEnumerable> или <xref:System.Collections.Generic.IEnumerable%601>, поэтому в этом разделе мы только рассмотрите возможность реализации одного или обоих этих интерфейсов подлежащих типов коллекций.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-104">It is almost always appropriate for such types to implement <xref:System.Collections.IEnumerable> or <xref:System.Collections.Generic.IEnumerable%601>, so in this section we only consider types implementing one or both of those interfaces to be collections.</span></span>  
  
 <span data-ttu-id="8e6b8-105">**X не** использования слабо типизированных коллекций в открытых интерфейсах API.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-105">**X DO NOT** use weakly typed collections in public APIs.</span></span>  
  
 <span data-ttu-id="8e6b8-106">Тип все возвращаемые значения и параметры, представляющие элементы коллекции должны быть типа точное элемента, не одному из его базовых типов (это относится только к открытым членам коллекции).</span><span class="sxs-lookup"><span data-stu-id="8e6b8-106">The type of all return values and parameters representing collection items should be the exact item type, not any of its base types (this applies only to public members of the collection).</span></span>  
  
 <span data-ttu-id="8e6b8-107">**X не** использовать <xref:System.Collections.ArrayList> или <xref:System.Collections.Generic.List%601> в открытых интерфейсах API.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-107">**X DO NOT** use <xref:System.Collections.ArrayList> or <xref:System.Collections.Generic.List%601> in public APIs.</span></span>  
  
 <span data-ttu-id="8e6b8-108">Эти типы — это структуры данных, которые предназначены для использования в внутренней реализации, а не в открытых интерфейсах API.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-108">These types are data structures designed to be used in internal implementation, not in public APIs.</span></span> <span data-ttu-id="8e6b8-109">`List<T>`оптимизирован для питания за счет cleanness API-интерфейсов и гибкости и производительности.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-109">`List<T>` is optimized for performance and power at the cost of cleanness of the APIs and flexibility.</span></span> <span data-ttu-id="8e6b8-110">Например, если возвращается `List<T>`, можно не никогда не будет получать уведомления, когда клиентский код изменяет коллекцию.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-110">For example, if you return `List<T>`, you will not ever be able to receive notifications when client code modifies the collection.</span></span> <span data-ttu-id="8e6b8-111">Кроме того `List<T>` предоставляет большое количество элементов, таких как <xref:System.Collections.Generic.List%601.BinarySearch%2A>, который не полезны или применимо во многих сценариях.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-111">Also, `List<T>` exposes many members, such as <xref:System.Collections.Generic.List%601.BinarySearch%2A>, that are not useful or applicable in many scenarios.</span></span> <span data-ttu-id="8e6b8-112">Следующих двух разделах описаны типы (абстракций) разработан специально для использования в открытых интерфейсах API.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-112">The following two sections describe types (abstractions) designed specifically for use in public APIs.</span></span>  
  
 <span data-ttu-id="8e6b8-113">**X не** использовать `Hashtable` или `Dictionary<TKey,TValue>` в открытых интерфейсах API.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-113">**X DO NOT** use `Hashtable` or `Dictionary<TKey,TValue>` in public APIs.</span></span>  
  
 <span data-ttu-id="8e6b8-114">Эти типы являются предназначены для использования в реализации внутренней структуры данных.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-114">These types are data structures designed to be used in internal implementation.</span></span> <span data-ttu-id="8e6b8-115">Следует использовать открытые API <xref:System.Collections.IDictionary>, `IDictionary <TKey, TValue>`, или пользовательский тип, реализующий одно или оба из этих интерфейсов.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-115">Public APIs should use <xref:System.Collections.IDictionary>, `IDictionary <TKey, TValue>`, or a custom type implementing one or both of the interfaces.</span></span>  
  
 <span data-ttu-id="8e6b8-116">**X не** использовать <xref:System.Collections.Generic.IEnumerator%601>, <xref:System.Collections.IEnumerator>, или любого другого типа, который реализует один из этих интерфейсов, за исключением того, как тип возвращаемого значения `GetEnumerator` метод.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-116">**X DO NOT** use <xref:System.Collections.Generic.IEnumerator%601>, <xref:System.Collections.IEnumerator>, or any other type that implements either of these interfaces, except as the return type of a `GetEnumerator` method.</span></span>  
  
 <span data-ttu-id="8e6b8-117">Возврат перечислители из методов, отличный от типов `GetEnumerator` не может использоваться с `foreach` инструкции.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-117">Types returning enumerators from methods other than `GetEnumerator` cannot be used with the `foreach` statement.</span></span>  
  
 <span data-ttu-id="8e6b8-118">**X не** реализовывать `IEnumerator<T>` и `IEnumerable<T>` на тот же тип.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-118">**X DO NOT** implement both `IEnumerator<T>` and `IEnumerable<T>` on the same type.</span></span> <span data-ttu-id="8e6b8-119">Это же правило применяется для неуниверсальных интерфейсов `IEnumerator` и `IEnumerable`.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-119">The same applies to the nongeneric interfaces `IEnumerator` and `IEnumerable`.</span></span>  
  
## <a name="collection-parameters"></a><span data-ttu-id="8e6b8-120">Параметры сбора</span><span class="sxs-lookup"><span data-stu-id="8e6b8-120">Collection Parameters</span></span>  
 <span data-ttu-id="8e6b8-121">**✓ СДЕЛАТЬ** использовать возможные специализированные наименее тип в качестве типа параметра.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-121">**✓ DO** use the least-specialized type possible as a parameter type.</span></span> <span data-ttu-id="8e6b8-122">Большинство членов получение коллекций, как использовать параметры `IEnumerable<T>` интерфейса.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-122">Most members taking collections as parameters use the `IEnumerable<T>` interface.</span></span>  
  
 <span data-ttu-id="8e6b8-123">**X ИЗБЕГАЙТЕ** с помощью <xref:System.Collections.Generic.ICollection%601> или <xref:System.Collections.ICollection> как параметр только для доступа к `Count` свойство.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-123">**X AVOID** using <xref:System.Collections.Generic.ICollection%601> or <xref:System.Collections.ICollection> as a parameter just to access the `Count` property.</span></span>  
  
 <span data-ttu-id="8e6b8-124">Вместо этого рассмотрите возможность использования `IEnumerable<T>` или `IEnumerable` и динамически проверки, реализует ли объект `ICollection<T>` или `ICollection`.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-124">Instead, consider using `IEnumerable<T>` or `IEnumerable` and dynamically checking whether the object implements `ICollection<T>` or `ICollection`.</span></span>  
  
## <a name="collection-properties-and-return-values"></a><span data-ttu-id="8e6b8-125">Свойства коллекции и возвращаемые значения</span><span class="sxs-lookup"><span data-stu-id="8e6b8-125">Collection Properties and Return Values</span></span>  
 <span data-ttu-id="8e6b8-126">**X не** предоставляют настраиваемые коллекции свойств.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-126">**X DO NOT** provide settable collection properties.</span></span>  
  
 <span data-ttu-id="8e6b8-127">Пользователи могут заменить содержимое коллекции, сначала очисткой коллекции, а затем добавьте новое содержимое.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-127">Users can replace the contents of the collection by clearing the collection first and then adding the new contents.</span></span> <span data-ttu-id="8e6b8-128">Если замена всей коллекции это очень распространенный сценарий, следует рассмотреть возможность создания `AddRange` метод в коллекции.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-128">If replacing the whole collection is a common scenario, consider providing the `AddRange` method on the collection.</span></span>  
  
 <span data-ttu-id="8e6b8-129">**СДЕЛАТЬ ✓** использовать `Collection<T>` или подкласс `Collection<T>` для свойства или возвращаемого значения представления коллекции для чтения и записи.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-129">**✓ DO** use `Collection<T>` or a subclass of `Collection<T>` for properties or return values representing read/write collections.</span></span>  
  
 <span data-ttu-id="8e6b8-130">Если `Collection<T>` не соответствует требованиям некоторых (например, коллекции не должен реализовывать <xref:System.Collections.IList>), использовать пользовательскую коллекцию, реализовав `IEnumerable<T>`, `ICollection<T>`, или <xref:System.Collections.Generic.IList%601>.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-130">If `Collection<T>` does not meet some requirement (e.g., the collection must not implement <xref:System.Collections.IList>), use a custom collection by implementing `IEnumerable<T>`, `ICollection<T>`, or <xref:System.Collections.Generic.IList%601>.</span></span>  
  
 <span data-ttu-id="8e6b8-131">**СДЕЛАТЬ ✓** использовать <xref:System.Collections.ObjectModel.ReadOnlyCollection%601>, подкласс `ReadOnlyCollection<T>`, или, в редких случаях `IEnumerable<T>` для свойства или возвращаемого значения представления коллекции только для чтения.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-131">**✓ DO** use <xref:System.Collections.ObjectModel.ReadOnlyCollection%601>, a subclass of `ReadOnlyCollection<T>`, or in rare cases `IEnumerable<T>` for properties or return values representing read-only collections.</span></span>  
  
 <span data-ttu-id="8e6b8-132">Как правило, предпочтительно использовать `ReadOnlyCollection<T>`.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-132">In general, prefer `ReadOnlyCollection<T>`.</span></span> <span data-ttu-id="8e6b8-133">Если он не соответствует требованиям некоторых (например, коллекции не должен реализовывать `IList`), использовать пользовательскую коллекцию, реализовав `IEnumerable<T>`, `ICollection<T>`, или `IList<T>`.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-133">If it does not meet some requirement (e.g., the collection must not implement `IList`), use a custom collection by implementing `IEnumerable<T>`, `ICollection<T>`, or `IList<T>`.</span></span> <span data-ttu-id="8e6b8-134">При реализации пользовательской коллекции только для чтения, следует реализовать `ICollection<T>.ReadOnly` возвращает значение false.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-134">If you do implement a custom read-only collection, implement `ICollection<T>.ReadOnly` to return false.</span></span>  
  
 <span data-ttu-id="8e6b8-135">В случаях, когда вы убедитесь, что единственный случай, когда-нибудь потребуется поддерживать прямой итерации, можно просто использовать `IEnumerable<T>`.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-135">In cases where you are sure that the only scenario you will ever want to support is forward-only iteration, you can simply use `IEnumerable<T>`.</span></span>  
  
 <span data-ttu-id="8e6b8-136">**✓ Попробуйте** с использованием подклассов универсальных коллекций базовый вместо использования коллекций.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-136">**✓ CONSIDER** using subclasses of generic base collections instead of using the collections directly.</span></span>  
  
 <span data-ttu-id="8e6b8-137">Это позволяет для более понятные имена и добавления вспомогательные методы, которые не присутствуют на базового типа коллекции.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-137">This allows for a better name and for adding helper members that are not present on the base collection types.</span></span> <span data-ttu-id="8e6b8-138">Это особенно относится к API высокого уровня.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-138">This is especially applicable to high-level APIs.</span></span>  
  
 <span data-ttu-id="8e6b8-139">**✓ Попробуйте** возврат подкласс `Collection<T>` или `ReadOnlyCollection<T>` из очень часто используемые методы и свойства.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-139">**✓ CONSIDER** returning a subclass of `Collection<T>` or `ReadOnlyCollection<T>` from very commonly used methods and properties.</span></span>  
  
 <span data-ttu-id="8e6b8-140">Это сделает его можно добавить вспомогательные методы или изменить реализацию коллекции в будущем.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-140">This will make it possible for you to add helper methods or change the collection implementation in the future.</span></span>  
  
 <span data-ttu-id="8e6b8-141">**✓ Попробуйте** с помощью является коллекцией с ключом, если элементы, хранящихся в коллекции имеют уникальные ключи (имена, идентификаторы и т. д.).</span><span class="sxs-lookup"><span data-stu-id="8e6b8-141">**✓ CONSIDER** using a keyed collection if the items stored in the collection have unique keys (names, IDs, etc.).</span></span> <span data-ttu-id="8e6b8-142">С ключом коллекции — это коллекции, которые могут быть индексированы по целым и ключ и обычно реализуются путем наследования от `KeyedCollection<TKey,TItem>`.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-142">Keyed collections are collections that can be indexed by both an integer and a key and are usually implemented by inheriting from `KeyedCollection<TKey,TItem>`.</span></span>  
  
 <span data-ttu-id="8e6b8-143">Коллекции с ключом обычно требуют больше ресурсов памяти и не должен использоваться, если нагрузка на память перевешивает преимущества ключи.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-143">Keyed collections usually have larger memory footprints and should not be used if the memory overhead outweighs the benefits of having the keys.</span></span>  
  
 <span data-ttu-id="8e6b8-144">**X не** возвращать значения null из свойства коллекции или методами, возвращающими коллекции.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-144">**X DO NOT** return null values from collection properties or from methods returning collections.</span></span> <span data-ttu-id="8e6b8-145">Возвращает пустую коллекцию, или пустой массив.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-145">Return an empty collection or an empty array instead.</span></span>  
  
 <span data-ttu-id="8e6b8-146">Общее правило — следует null и пустые (без элементов) коллекции или массивы обрабатываются одинаково.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-146">The general rule is that null and empty (0 item) collections or arrays should be treated the same.</span></span>  
  
### <a name="snapshots-versus-live-collections"></a><span data-ttu-id="8e6b8-147">Моментальные снимки и динамической коллекций</span><span class="sxs-lookup"><span data-stu-id="8e6b8-147">Snapshots Versus Live Collections</span></span>  
 <span data-ttu-id="8e6b8-148">Коллекции, представляющий состояние в определенный момент во времени называются моментальный снимок коллекции.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-148">Collections representing a state at some point in time are called snapshot collections.</span></span> <span data-ttu-id="8e6b8-149">Например коллекция, содержащая строки, возвращаемые из запроса к базе данных будет моментального снимка.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-149">For example, a collection containing rows returned from a database query would be a snapshot.</span></span> <span data-ttu-id="8e6b8-150">Коллекции, которые всегда представляют текущее состояние, называются динамической коллекций.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-150">Collections that always represent the current state are called live collections.</span></span> <span data-ttu-id="8e6b8-151">Например, коллекцию `ComboBox` элементов — это динамическая коллекция.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-151">For example, a collection of `ComboBox` items is a live collection.</span></span>  
  
 <span data-ttu-id="8e6b8-152">**X не** возвращают коллекции моментального снимка из свойств.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-152">**X DO NOT** return snapshot collections from properties.</span></span> <span data-ttu-id="8e6b8-153">Свойства должны возвращать динамической коллекций.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-153">Properties should return live collections.</span></span>  
  
 <span data-ttu-id="8e6b8-154">Методы получения свойств должны быть очень простая операции.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-154">Property getters should be very lightweight operations.</span></span> <span data-ttu-id="8e6b8-155">Возвращение моментального снимка требует создания копии внутренней коллекции в операцией O(n).</span><span class="sxs-lookup"><span data-stu-id="8e6b8-155">Returning a snapshot requires creating a copy of an internal collection in an O(n) operation.</span></span>  
  
 <span data-ttu-id="8e6b8-156">**СДЕЛАТЬ ✓** использовать моментальный снимок коллекции или активной `IEnumerable<T>` (или его подтипов) для представления коллекций, которые являются volatile (т. е., можно изменить без явного изменения коллекции).</span><span class="sxs-lookup"><span data-stu-id="8e6b8-156">**✓ DO** use either a snapshot collection or a live `IEnumerable<T>` (or its subtype) to represent collections that are volatile (i.e., that can change without explicitly modifying the collection).</span></span>  
  
 <span data-ttu-id="8e6b8-157">Как правило все коллекции, представляющий общий ресурс (например, файлы в каталоге) являются переменными.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-157">In general, all collections representing a shared resource (e.g., files in a directory) are volatile.</span></span> <span data-ttu-id="8e6b8-158">Такие коллекции — это очень сложно или невозможно реализовать как динамической коллекции, если реализация не просто последовательным перечислителя.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-158">Such collections are very difficult or impossible to implement as live collections unless the implementation is simply a forward-only enumerator.</span></span>  
  
## <a name="choosing-between-arrays-and-collections"></a><span data-ttu-id="8e6b8-159">Выбор между массивы и коллекции</span><span class="sxs-lookup"><span data-stu-id="8e6b8-159">Choosing Between Arrays and Collections</span></span>  
 <span data-ttu-id="8e6b8-160">**✓ СДЕЛАТЬ** предпочтение коллекций и массивы.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-160">**✓ DO** prefer collections over arrays.</span></span>  
  
 <span data-ttu-id="8e6b8-161">Коллекции обеспечивают больший контроль над содержимым, могут изменяться со временем и удобным.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-161">Collections provide more control over contents, can evolve over time, and are more usable.</span></span> <span data-ttu-id="8e6b8-162">Кроме того использование массивов для только для чтения сценариев рекомендуется, так как чрезмерно высокой стоимости для клонирования массива.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-162">In addition, using arrays for read-only scenarios is discouraged because the cost of cloning the array is prohibitive.</span></span> <span data-ttu-id="8e6b8-163">Удобство использования исследования показали, что некоторым разработчикам удобнее работать с помощью интерфейсов API на основе коллекций.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-163">Usability studies have shown that some developers feel more comfortable using collection-based APIs.</span></span>  
  
 <span data-ttu-id="8e6b8-164">Тем не менее если вы разрабатываете низкоуровневые интерфейсы API, возможно, лучше было бы использовать для чтения и записи сценариев массивы.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-164">However, if you are developing low-level APIs, it might be better to use arrays for read-write scenarios.</span></span> <span data-ttu-id="8e6b8-165">Массивы имеют меньший объем памяти, помогает уменьшить рабочее множество, и доступ к элементам в массиве выполняется быстрее, поскольку он оптимизирован средой выполнения.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-165">Arrays have a smaller memory footprint, which helps reduce the working set, and access to elements in an array is faster because it is optimized by the runtime.</span></span>  
  
 <span data-ttu-id="8e6b8-166">**✓ Попробуйте** использование массивов в API нижнего уровня к минимуму потребление памяти и повышения производительности.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-166">**✓ CONSIDER** using arrays in low-level APIs to minimize memory consumption and maximize performance.</span></span>  
  
 <span data-ttu-id="8e6b8-167">**✓ СДЕЛАТЬ** использовать байтовые массивы вместо коллекции байтов.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-167">**✓ DO** use byte arrays instead of collections of bytes.</span></span>  
  
 <span data-ttu-id="8e6b8-168">**X не** используйте массивы для свойств, если свойство будет иметь для возврата нового массива (например, копия внутреннего массива) каждый раз, вызывается метод считывания свойства.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-168">**X DO NOT** use arrays for properties if the property would have to return a new array (e.g., a copy of an internal array) every time the property getter is called.</span></span>  
  
## <a name="implementing-custom-collections"></a><span data-ttu-id="8e6b8-169">Реализация пользовательских коллекций</span><span class="sxs-lookup"><span data-stu-id="8e6b8-169">Implementing Custom Collections</span></span>  
 <span data-ttu-id="8e6b8-170">**✓ Попробуйте** наследование от `Collection<T>`, `ReadOnlyCollection<T>`, или `KeyedCollection<TKey,TItem>` при разработке новых семейств сайтов.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-170">**✓ CONSIDER** inheriting from `Collection<T>`, `ReadOnlyCollection<T>`, or `KeyedCollection<TKey,TItem>` when designing new collections.</span></span>  
  
 <span data-ttu-id="8e6b8-171">**СДЕЛАТЬ ✓** реализации `IEnumerable<T>` при разработке новых семейств сайтов.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-171">**✓ DO** implement `IEnumerable<T>` when designing new collections.</span></span> <span data-ttu-id="8e6b8-172">Рассмотрите возможность реализации `ICollection<T>` или даже `IList<T>` где имеет смысл.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-172">Consider implementing `ICollection<T>` or even `IList<T>` where it makes sense.</span></span>  
  
 <span data-ttu-id="8e6b8-173">При реализации такой пользовательские коллекции, соответствуют шаблону API, заданные в `Collection<T>` и `ReadOnlyCollection<T>` как можно точнее.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-173">When implementing such custom collection, follow the API pattern established by `Collection<T>` and `ReadOnlyCollection<T>` as closely as possible.</span></span> <span data-ttu-id="8e6b8-174">Таким образом следует явным образом реализовывать те же элементы, имена параметров, как эти две коллекции назовите их и т. д.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-174">That is, implement the same members explicitly, name the parameters like these two collections name them, and so on.</span></span>  
  
 <span data-ttu-id="8e6b8-175">**✓ Попробуйте** реализация интерфейсов неуниверсальных коллекций (`IList` и `ICollection`) если коллекции часто передается в API-интерфейсы используя эти интерфейсы в качестве входных данных.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-175">**✓ CONSIDER** implementing nongeneric collection interfaces (`IList` and `ICollection`) if the collection will often be passed to APIs taking these interfaces as input.</span></span>  
  
 <span data-ttu-id="8e6b8-176">**X ИЗБЕГАЙТЕ** реализация интерфейсов коллекций в типах сложных API-интерфейсами, не относящуюся к концепцию коллекции.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-176">**X AVOID** implementing collection interfaces on types with complex APIs unrelated to the concept of a collection.</span></span>  
  
 <span data-ttu-id="8e6b8-177">**X не** наследовать от неуниверсальных коллекций базовый, такие как `CollectionBase`.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-177">**X DO NOT** inherit from nongeneric base collections such as `CollectionBase`.</span></span> <span data-ttu-id="8e6b8-178">Используйте `Collection<T>`, `ReadOnlyCollection<T>`, и `KeyedCollection<TKey,TItem>` вместо него.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-178">Use `Collection<T>`, `ReadOnlyCollection<T>`, and `KeyedCollection<TKey,TItem>` instead.</span></span>  
  
### <a name="naming-custom-collections"></a><span data-ttu-id="8e6b8-179">Об именах пользовательских коллекций</span><span class="sxs-lookup"><span data-stu-id="8e6b8-179">Naming Custom Collections</span></span>  
 <span data-ttu-id="8e6b8-180">Коллекции (типы, реализующие `IEnumerable`) создаются в основном по двум причинам: (1), чтобы создать новую структуру данных с помощью операций, связанных с структуры и часто различаются по быстродействию чем существующие структуры данных (например, <xref:System.Collections.Generic.List%601>, <xref:System.Collections.Generic.LinkedList%601>, <xref:System.Collections.Generic.Stack%601>) и (2) для создания специализированных коллекции для хранения конкретного набора элементов (например, <xref:System.Collections.Specialized.StringCollection>).</span><span class="sxs-lookup"><span data-stu-id="8e6b8-180">Collections (types that implement `IEnumerable`) are created mainly for two reasons: (1) to create a new data structure with structure-specific operations and often different performance characteristics than existing data structures (e.g.,  <xref:System.Collections.Generic.List%601>, <xref:System.Collections.Generic.LinkedList%601>, <xref:System.Collections.Generic.Stack%601>), and (2) to create a specialized collection for holding a specific set of items (e.g.,  <xref:System.Collections.Specialized.StringCollection>).</span></span> <span data-ttu-id="8e6b8-181">Структуры данных, наиболее часто используются в внутренней реализации приложения и библиотеки.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-181">Data structures are most often used in the internal implementation of applications and libraries.</span></span> <span data-ttu-id="8e6b8-182">Специализированные коллекции — это главным образом для доступа в API-интерфейсы (в качестве свойства и параметры типа).</span><span class="sxs-lookup"><span data-stu-id="8e6b8-182">Specialized collections are mainly to be exposed in APIs (as property and parameter types).</span></span>  
  
 <span data-ttu-id="8e6b8-183">**СДЕЛАТЬ ✓** используйте суффикс «Словарь» в именах реализации абстракций `IDictionary` или `IDictionary<TKey,TValue>`.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-183">**✓ DO** use the "Dictionary" suffix in names of abstractions implementing `IDictionary` or `IDictionary<TKey,TValue>`.</span></span>  
  
 <span data-ttu-id="8e6b8-184">**СДЕЛАТЬ ✓** используйте суффикс «Коллекция» в именах типы, реализующие `IEnumerable` (или один из его потомков) и представляет список элементов.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-184">**✓ DO** use the "Collection" suffix in names of types implementing `IEnumerable` (or any of its descendants) and representing a list of items.</span></span>  
  
 <span data-ttu-id="8e6b8-185">**✓ СДЕЛАТЬ** использовать имя структуры соответствующие данные для пользовательских структур данных.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-185">**✓ DO** use the appropriate data structure name for custom data structures.</span></span>  
  
 <span data-ttu-id="8e6b8-186">**X ИЗБЕГАЙТЕ** использовать любые суффиксы, подразумевая конкретной реализации, такие как «LinkedList» или «Хэш-таблица», в именах абстракций коллекции.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-186">**X AVOID** using any suffixes implying particular implementation, such as "LinkedList" or "Hashtable," in names of collection abstractions.</span></span>  
  
 <span data-ttu-id="8e6b8-187">**✓ Попробуйте** префикса имен коллекций с именем типа элемента.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-187">**✓ CONSIDER** prefixing collection names with the name of the item type.</span></span> <span data-ttu-id="8e6b8-188">Например, коллекция хранения элементов типа `Address` (реализации `IEnumerable<Address>`) должен быть назван `AddressCollection`.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-188">For example, a collection storing items of type `Address` (implementing `IEnumerable<Address>`) should be named `AddressCollection`.</span></span> <span data-ttu-id="8e6b8-189">Если тип элемента — это интерфейс, «I» префикс элемента типа может быть опущено.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-189">If the item type is an interface, the "I" prefix of the item type can be omitted.</span></span> <span data-ttu-id="8e6b8-190">Таким образом, коллекция <xref:System.IDisposable> элементов может быть вызван `DisposableCollection`.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-190">Thus, a collection of <xref:System.IDisposable> items can be called `DisposableCollection`.</span></span>  
  
 <span data-ttu-id="8e6b8-191">**✓ Попробуйте** с помощью префикса «ReadOnly» в именах коллекций только для чтения, если соответствующую ему коллекцию для записи могут быть добавлены или уже существует в структуре.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-191">**✓ CONSIDER** using the "ReadOnly" prefix in names of read-only collections if a corresponding writeable collection might be added or already exists in the framework.</span></span>  
  
 <span data-ttu-id="8e6b8-192">Например, следует вызывать только для чтения коллекцию строк `ReadOnlyStringCollection`.</span><span class="sxs-lookup"><span data-stu-id="8e6b8-192">For example, a read-only collection of strings should be called `ReadOnlyStringCollection`.</span></span>  
  
 <span data-ttu-id="8e6b8-193">*Фрагменты © 2005, 2009 корпорации Майкрософт. Все права защищены.*</span><span class="sxs-lookup"><span data-stu-id="8e6b8-193">*Portions © 2005, 2009 Microsoft Corporation. All rights reserved.*</span></span>  
  
 <span data-ttu-id="8e6b8-194">*Перепечатываются разрешении Пирсона для образовательных учреждений, Inc. из [Framework рекомендации по проектированию: условные обозначения, стили и шаблоны для библиотеки .NET для повторного использования, 2-е издание](http://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619) Krzysztof Cwalina и Брэд Абрамс, опубликованные 22 октября 2008 г., Addison-Wesley Professional в составе ряда разработки Microsoft Windows.*</span><span class="sxs-lookup"><span data-stu-id="8e6b8-194">*Reprinted by permission of Pearson Education, Inc. from [Framework Design Guidelines: Conventions, Idioms, and Patterns for Reusable .NET Libraries, 2nd Edition](http://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619) by Krzysztof Cwalina and Brad Abrams, published Oct 22, 2008 by Addison-Wesley Professional as part of the Microsoft Windows Development Series.*</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8e6b8-195">См. также</span><span class="sxs-lookup"><span data-stu-id="8e6b8-195">See Also</span></span>  
 [<span data-ttu-id="8e6b8-196">Рекомендации по проектированию на основе Framework</span><span class="sxs-lookup"><span data-stu-id="8e6b8-196">Framework Design Guidelines</span></span>](../../../docs/standard/design-guidelines/index.md)  
 [<span data-ttu-id="8e6b8-197">Рекомендации по использованию</span><span class="sxs-lookup"><span data-stu-id="8e6b8-197">Usage Guidelines</span></span>](../../../docs/standard/design-guidelines/usage-guidelines.md)
