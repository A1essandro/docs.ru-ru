---
title: "Исключения и производительность | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-standard"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "VB"
  - "CSharp"
  - "C++"
  - "jsharp"
helpviewer_keywords: 
  - "шаблон Tester-doer"
  - "Шаблон TryParse"
  - "исключения, возникновение"
  - "исключения, производительность"
  - "Создание исключений, производительность"
ms.assetid: 3ad6aad9-08e6-4232-b336-0e301f2493e6
caps.latest.revision: 12
author: "rpetrusha"
ms.author: "ronpet"
manager: "wpickett"
caps.handback.revision: 12
---
# Исключения и производительность
Одна из распространенных проблем, связанных с исключениями является то, если они используются для кода, который регулярно завершается с ошибкой, производительность реализации неприемлемо. Это обоснованное предположение. Когда член создает исключение, ее производительность может быть порядков медленнее. Тем не менее можно достичь высокой производительности, предназначенных исключительно для исключения рекомендации, которым запрещено использовать коды ошибок. Два шаблона, описанные в этом разделе касаются способов это сделать.  
  
 **X не** использование кодов ошибок из\-за проблем, что исключения могут негативно повлиять на производительность.  
  
 Чтобы повысить производительность, можно использовать шаблон Tester\-Doer или шаблон Try Parse, описанные в следующих двух разделах.  
  
## Шаблон Tester\-Doer  
 Иногда производительность члена исключения можно повысить, разбив на два элемента. Давайте взглянем на <xref:System.Collections.Generic.ICollection%601.Add%2A> метод <xref:System.Collections.Generic.ICollection%601> интерфейса.  
  
```  
ICollection<int> numbers = ...   
numbers.Add(1);  
```  
  
 Метод `Add` создает исключение, если коллекция доступна только для чтения. Это могут быть проблемы с производительностью в сценариях, в которых ожидается часто сбой вызова метода. Один из способов устранить проблему — проверить, является ли коллекция для записи перед добавлением значение.  
  
```  
ICollection<int> numbers = ...   
...  
if(!numbers.IsReadOnly){  
    numbers.Add(1);  
}  
```  
  
 Элемент, используемый для проверки того, который в нашем примере свойство `IsReadOnly`, называется тест\-инженер. Член, используемый для выполнения операции потенциально возникло исключение `Add` метод в нашем примере называется doer.  
  
 **✓ Рассмотрите ВОЗМОЖНОСТЬ** шаблон Tester\-Doer для членов, которые могут вызвать исключения в общих сценариях, чтобы избежать проблем с производительностью связанных с исключениями.  
  
## Шаблон try Parse  
 Для интерфейсов API очень важна высокая производительность следует использовать шаблон еще быстрее, чем шаблон Tester\-Doer, описанные в предыдущем разделе. Шаблон вызывает для настройки имени члена, чтобы четко определенных тест случае часть семантику члена. Например <xref:System.DateTime> определяет <xref:System.DateTime.Parse%2A> метод, который вызывает исключение, если синтаксический анализ строки завершается ошибкой. Он также определяет соответствующий <xref:System.DateTime.TryParse%2A> метод, который пытается выполнить синтаксический анализ, но возвращает false, если синтаксический анализ завершается неудачно и возвращает результат успешного синтаксического анализа с помощью `out` параметр.  
  
```  
public struct DateTime {  
    public static DateTime Parse(string dateTime){   
        ...   
    }  
    public static bool TryParse(string dateTime, out DateTime result){  
        ...  
    }  
}  
```  
  
 При использовании этого шаблона, важно определить функционал try в strict условия. При сбое члена по любой причине, кроме четко определенных try члена по\-прежнему должен выдавать соответствующее исключение.  
  
 **✓ Рассмотрите ВОЗМОЖНОСТЬ** шаблон Try Parse для членов, которые могут вызвать исключения в общих сценариях, чтобы избежать проблем с производительностью связанных с исключениями.  
  
 **✓ сделать** используйте префикс «Try» и логический тип возвращаемого значения для методов реализации данного шаблона.  
  
 **✓ сделать** предоставляют исключения членов для каждого элемента, используя шаблон Try Parse.  
  
 *Частей © 2005, 2009 корпорации Microsoft. Все права защищены.*  
  
 *Воспроизведены разрешении Пирсон образования, Inc. из [Framework рекомендации по проектированию: условные обозначения, стили и шаблоны для повторного использования библиотеки .NET, второе издание](http://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619) Krzysztof Cwalina и Брэд Абрамс опубликованы 22 октября 2008 г., издательство Addison\-Wesley Professional как часть цикла разработки Microsoft Windows.*  
  
## См. также  
 [Рекомендации по проектированию Framework](../../../docs/standard/design-guidelines/index.md)   
 [Правила разработки исключений](../../../docs/standard/design-guidelines/exceptions.md)