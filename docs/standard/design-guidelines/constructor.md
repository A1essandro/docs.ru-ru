---
title: Разработка конструктора
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: ''
ms.suite: ''
ms.technology: dotnet-standard
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- member design guidelines, constructors
- constructors, design guidelines
- instance constructors
- type constructors
- virtual members
- constructors, types
- default constructors
- static constructors
ms.assetid: b4496afe-5fa7-4bb0-85ca-70b0ef21e6fc
caps.latest.revision: 12
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: d208511bd04d5daf9930ecf6cf53e7708ca4da3f
ms.sourcegitcommit: 2e8acae16ae802f2d6d04e3ce0a6dbf04e476513
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/18/2018
---
# <a name="constructor-design"></a>Разработка конструктора
Существует два типа конструкторов: конструкторы и конструкторы экземпляров.  
  
 Конструкторы типов являются статическими и выполняются средой CLR, прежде чем использовать тип. Конструкторы экземпляров выполняются, когда создается экземпляр типа.  
  
 Конструкторы типов не принимает никаких параметров. Конструкторы экземпляров можно. Конструкторы экземпляров, которые не принимают никаких параметров часто называются конструкторы по умолчанию.  
  
 Конструкторы являются самым естественным способом создания экземпляров типа. Большинство разработчиков будет поиска и попробуйте использовать конструктор, прежде чем они подумать о других способах создания экземпляров (например, фабричные методы).  
  
 **✓ Попробуйте** предоставляет простой, в идеальном случае по умолчанию, конструкторы.  
  
 Простой конструктор имеет очень небольшое число параметров, и все параметры являются примитивами или перечисления. Такой простой конструкторы повысить удобство использования платформы.  
  
 **✓ Попробуйте** вместо статический фабричный метод конструктора, если семантика требуемой операции не сопоставляются непосредственно конструкцию нового экземпляра или следующие рекомендации по разработке конструктора неприменимыми.  
  
 **✓ СДЕЛАТЬ** используйте параметры конструкторов как ярлыки для установки значений основных свойств.  
  
 Должно быть не семантических различий между с помощью пустого конструктора, следуют некоторые наборы свойств и с помощью конструктора с несколькими аргументами.  
  
 **✓ СДЕЛАТЬ** использовать то же имя для параметров конструктора и свойства, если параметры конструктора используются только для установки свойства.  
  
 Единственное различие между таких параметров и свойств должен регистра.  
  
 **✓ СДЕЛАТЬ** минимальных затрат в конструкторе.  
  
 Конструкторы не следует объем работ, отличных от записи параметров конструктора. Затраты на какой-либо другой обработки должен быть задержан только по мере необходимости.  
  
 **✓ СДЕЛАТЬ** вызывайте исключения из конструкторов экземпляров, если это необходимо.  
  
 **✓ СДЕЛАТЬ** явно объявить открытый конструктор по умолчанию в классах, если такой конструктор является обязательным.  
  
 Если явно не объявлен каких-либо конструкторов типа, многие языки (например, C#) автоматически добавит открытый конструктор по умолчанию. (Абстрактные классы получить защищенного конструктора).  
  
 Добавление параметризованного конструктора класса указывает компилятору добавить конструктор по умолчанию. Часто в результате случайного критических изменений.  
  
 **X ИЗБЕГАЙТЕ** явное объявление конструкторы по умолчанию для структуры.  
  
 Это делает при создании массива быстрее, поскольку если конструктор по умолчанию не определен, он не имеет для выполнения на каждый слота в массиве. Обратите внимание, что большинство компиляторов, включая C# не разрешать структуры могут иметь конструкторы без параметров, по этой причине.  
  
 **X ИЗБЕГАЙТЕ** вызов виртуальные члены объекта внутри его конструктор.  
  
 Вызов виртуальный член будет вызвать наибольшие производные переопределения для вызова, даже если конструктор наиболее производный тип не полностью еще не выполнялся.  
  
### <a name="type-constructor-guidelines"></a>Правила конструктора типов  
 **✓ СДЕЛАТЬ** сделать частным статические конструкторы.  
  
 Статический конструктор, также называемый конструктором класса, используется для инициализации типа. Среда CLR вызывает статический конструктор перед созданием первого экземпляра типа или вызываются любые статические члены этого типа. Пользователь не обеспечивает контроль за при вызове статического конструктора. Если статический конструктор не является закрытым, он может быть вызван код, отличный от среды CLR. В зависимости от операций, выполняемых в конструкторе это может привести к непредвиденному поведению. Компилятор C# вызывает статические конструкторы должно быть закрытым.  
  
 **X не** вызывайте исключения из статических конструкторов.  
  
 Если исключение вызывается из конструктора типа, тип не может использоваться в текущем домене приложения.  
  
 **✓ Попробуйте** Инициализация встроенного статических полей, а не явно с использованием статических конструкторов, так как среда выполнения может оптимизировать производительность типов, которые не являются явно определенного статического конструктора.  
  
 *Фрагменты © 2005, 2009 корпорации Майкрософт. Все права защищены.*  
  
 *Перепечатываются разрешении Пирсона для образовательных учреждений, Inc. из [Framework рекомендации по проектированию: условные обозначения, стили и шаблоны для библиотеки .NET для повторного использования, 2-е издание](https://www.informit.com/store/framework-design-guidelines-conventions-idioms-and-9780321545619) Krzysztof Cwalina и Брэд Абрамс, опубликованные 22 октября 2008 г., Addison-Wesley Professional в составе ряда разработки Microsoft Windows.*  
  
## <a name="see-also"></a>См. также  
 [Правила разработки членов](../../../docs/standard/design-guidelines/member.md)  
 [Рекомендации по проектированию на основе Framework](../../../docs/standard/design-guidelines/index.md)
