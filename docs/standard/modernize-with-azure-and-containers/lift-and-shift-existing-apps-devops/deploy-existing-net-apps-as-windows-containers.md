---
title: Развернуть существующих приложений .NET в качестве контейнеров Windows
description: Архитектура Микрослужбами .NET для приложений .NET в контейнерах | Развернуть существующих приложений .NET в качестве контейнеров Windows
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 10/26/2017
ms.openlocfilehash: 49d99c10eacd689760a0f95b4479bb01744a1c74
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/04/2018
---
# <a name="deploy-existing-net-apps-as-windows-containers"></a><span data-ttu-id="d3386-103">Развернуть существующих приложений .NET в качестве контейнеров Windows</span><span class="sxs-lookup"><span data-stu-id="d3386-103">Deploy existing .NET apps as Windows containers</span></span>

<span data-ttu-id="d3386-104">Развертывания, которые основаны на контейнеры Windows относятся к оптимизированную для облачных приложений, собственный облачных приложений и DevOps готовую для облачных приложений.</span><span class="sxs-lookup"><span data-stu-id="d3386-104">Deployments that are based on Windows Containers are applicable to Cloud-Optimized applications, cloud-native applications, and Cloud DevOps-Ready applications.</span></span>

<span data-ttu-id="d3386-105">В этом руководстве и в следующих разделах нацелено на контейнеры Windows для *готовую для облачных DevOps* приложений, при точности прогнозов и переместить существующие приложения .NET.</span><span class="sxs-lookup"><span data-stu-id="d3386-105">The focus in this guide and in the following sections is on using Windows Containers for *Cloud DevOps-Ready* applications, when you lift and shift existing .NET applications.</span></span>

## <a name="what-are-containers-linux-or-windows"></a><span data-ttu-id="d3386-106">Что такое контейнеры?</span><span class="sxs-lookup"><span data-stu-id="d3386-106">What are containers?</span></span> <span data-ttu-id="d3386-107">(Windows или Linux)</span><span class="sxs-lookup"><span data-stu-id="d3386-107">(Linux or Windows)</span></span>

<span data-ttu-id="d3386-108">Контейнеры — это способ подведение приложения в изолированном пакета.</span><span class="sxs-lookup"><span data-stu-id="d3386-108">Containers are a way to wrap up an application into its own isolated package.</span></span> <span data-ttu-id="d3386-109">В своем контейнере приложение не зависит от приложения или процессы, которые существуют вне контейнера.</span><span class="sxs-lookup"><span data-stu-id="d3386-109">In its container, the application is not affected by applications or processes that exist outside of the container.</span></span> <span data-ttu-id="d3386-110">Все приложения от которых зависит запуск успешно как процесс находится внутри контейнера.</span><span class="sxs-lookup"><span data-stu-id="d3386-110">Everything the application depends on to run successfully as a process is inside the container.</span></span> <span data-ttu-id="d3386-111">Везде, где возможно перемещение контейнера, приложения будет всегда удовлетворить требованиям, с точки зрения прямые зависимости, так как он входит в состав все, что ее необходимо выполнять (зависимости библиотеки среды выполнения и т. д).</span><span class="sxs-lookup"><span data-stu-id="d3386-111">Wherever the container might move, the requirements of the application will always be met, in terms of direct dependencies, because it is bundled with everything that it needs to run (library dependencies, runtimes, and so on).</span></span>

<span data-ttu-id="d3386-112">Основной характеристикой контейнер является, поэтому среды же в разных развертываниях поскольку сам контейнер имеет все необходимые зависимости.</span><span class="sxs-lookup"><span data-stu-id="d3386-112">The main characteristic of a container is that it makes the environment the same across different deployments because the container itself comes with all the dependencies it needs.</span></span> <span data-ttu-id="d3386-113">Это означает, что отладка приложения на компьютере и затем развернуть ее на другом компьютере, с той же среде гарантируется.</span><span class="sxs-lookup"><span data-stu-id="d3386-113">This means that you can debug the application on your machine, and then deploy it to another machine, with the same environment guaranteed.</span></span>

<span data-ttu-id="d3386-114">Контейнер — это экземпляр образа контейнера.</span><span class="sxs-lookup"><span data-stu-id="d3386-114">A container is an instance of a container image.</span></span> <span data-ttu-id="d3386-115">Образ контейнера — способ упаковки приложений или служб (например, моментальный снимок), а затем развернуть его надежного и воспроизводимый способом.</span><span class="sxs-lookup"><span data-stu-id="d3386-115">A container image is a way to package an app or service (like a snapshot), and then deploy it in a reliable and reproducible way.</span></span> <span data-ttu-id="d3386-116">Можно сказать, что Docker является не только технологии ИТ-также в основах и процесс.</span><span class="sxs-lookup"><span data-stu-id="d3386-116">You could say that Docker is not only a technology-it's also a philosophy and a process.</span></span>

<span data-ttu-id="d3386-117">Как контейнеры ежедневно становятся чаще всего, они становятся отраслевых «единица развертывания».</span><span class="sxs-lookup"><span data-stu-id="d3386-117">As containers daily become more common, they are becoming an industry-wide "unit of deployment."</span></span>

## <a name="benefits-of-containers-docker-engine-on-linux-or-windows"></a><span data-ttu-id="d3386-118">Преимущества контейнеров (подсистема Docker в Windows или Linux)</span><span class="sxs-lookup"><span data-stu-id="d3386-118">Benefits of containers (Docker Engine on Linux or Windows)</span></span>

<span data-ttu-id="d3386-119">Построение приложений с помощью контейнеров, которое может быть определен как упрощенный стандартные блоки предложения существенное увеличение количества в гибкость для сборки, доставки и выполнения любого приложения на любой инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="d3386-119">Building applications by using containers-which also might be defined as lightweight building blocks-offers a significant increase in agility for building, shipping, and running any application, across any infrastructure.</span></span>

<span data-ttu-id="d3386-120">С помощью контейнеров можно использовать любое приложение от разработки к производству с минимумом или совсем без изменения кода, благодаря интеграции Docker инструменты разработчика Microsoft, операционных систем, и в облаке.</span><span class="sxs-lookup"><span data-stu-id="d3386-120">With containers, you can take any app from development to production with little or no code change, thanks to Docker integration across Microsoft developer tools, operating systems, and cloud.</span></span>

<span data-ttu-id="d3386-121">При развертывании для простых виртуальных машин, метод, вероятно, уже имеют на месте для развертывания приложений ASP.NET на ВМ.</span><span class="sxs-lookup"><span data-stu-id="d3386-121">When you deploy to plain VMs, you probably already have a method in place for deploying ASP.NET apps to your VMs.</span></span> <span data-ttu-id="d3386-122">Вполне вероятно, однако, метод включает несколько действий вручную или сложных автоматизированные процессы с помощью средств развертывания, как Puppet или аналогичное средство.</span><span class="sxs-lookup"><span data-stu-id="d3386-122">It's likely, though, that your method involves multiple manual steps or complex automated processes by using a deployment tool like Puppet, or a similar tool.</span></span> <span data-ttu-id="d3386-123">Может потребоваться выполнить задачи, такие как изменение элементов конфигурации, копирование содержимого приложения между серверами и выполнение интерактивной установки программ, в зависимости от настроек MSI-файл, следуют тестирования.</span><span class="sxs-lookup"><span data-stu-id="d3386-123">You might need to perform tasks like modifying configuration items, copying application content between servers, and running interactive setup programs based on .msi setups, followed by testing.</span></span> <span data-ttu-id="d3386-124">Все эти шаги развертывания для развертываний добавьте времени и риска.</span><span class="sxs-lookup"><span data-stu-id="d3386-124">All those steps in the deployment add time and risk to deployments.</span></span> <span data-ttu-id="d3386-125">Каждый раз, когда отсутствует зависимость в целевой среде приведет к возникновению ошибок.</span><span class="sxs-lookup"><span data-stu-id="d3386-125">You will get failures whenever a dependency is not present in the target environment.</span></span>

<span data-ttu-id="d3386-126">В контейнерах Windows полностью автоматизировать процесс упаковки приложений.</span><span class="sxs-lookup"><span data-stu-id="d3386-126">In Windows Containers, the process of packaging applications is fully automated.</span></span> <span data-ttu-id="d3386-127">Контейнеры Windows основана на платформе Docker, который предлагает автоматического обновления и отката для развертывания контейнера.</span><span class="sxs-lookup"><span data-stu-id="d3386-127">Windows Containers is based on the Docker platform, which offers automatic updates and rollbacks for container deployments.</span></span> <span data-ttu-id="d3386-128">Основной улучшение, полученное при использовании подсистемы Docker — создания образов, которые похожи на моментальные снимки приложения, с его зависимости.</span><span class="sxs-lookup"><span data-stu-id="d3386-128">The main improvement you get from using the Docker engine is that you create images, which are like snapshots of your application, with all its dependencies.</span></span> <span data-ttu-id="d3386-129">Образы — образы Docker (Windows образ контейнера, в данном случае).</span><span class="sxs-lookup"><span data-stu-id="d3386-129">The images are Docker images (a Windows container image, in this case).</span></span> <span data-ttu-id="d3386-130">Изображения, запускать приложения ASP.NET в контейнерах, не Возвращаясь к исходному коду.</span><span class="sxs-lookup"><span data-stu-id="d3386-130">The images run ASP.NET apps in containers, without going back to source code.</span></span> <span data-ttu-id="d3386-131">Контейнер моментальный снимок становится единицей развертывания.</span><span class="sxs-lookup"><span data-stu-id="d3386-131">The container snapshot becomes the unit of deployment.</span></span>

<span data-ttu-id="d3386-132">Большое количество организаций containerizing существующие монолитные приложения по следующим причинам:</span><span class="sxs-lookup"><span data-stu-id="d3386-132">A large number of organizations are containerizing existing monolithic applications for the following reasons:</span></span>

-   <span data-ttu-id="d3386-133">**Освободить гибкость посредством улучшенные развертывания**.</span><span class="sxs-lookup"><span data-stu-id="d3386-133">**Release agility through improved deployment**.</span></span> <span data-ttu-id="d3386-134">Контейнеры обеспечивают развертывания контракт между процессы разработки и эксплуатации.</span><span class="sxs-lookup"><span data-stu-id="d3386-134">Containers offer a consistent deployment contract between development and operations.</span></span> <span data-ttu-id="d3386-135">При использовании контейнеров не слышны разработчики сказать, «Он работает на компьютере, почему бы не в рабочей среде?»</span><span class="sxs-lookup"><span data-stu-id="d3386-135">When you use containers, you won't hear developers say, "It works on my machine, why not in production?"</span></span> <span data-ttu-id="d3386-136">Они просто сказать «Запускается как контейнер, чтобы он выполнялся в рабочей среде.»</span><span class="sxs-lookup"><span data-stu-id="d3386-136">They can simply say, "It runs as a container, so it will run in production."</span></span> <span data-ttu-id="d3386-137">Упакованные приложения, причем все его зависимости могут выполняться в любой поддерживаемой среде на основе контейнера.</span><span class="sxs-lookup"><span data-stu-id="d3386-137">The packaged application, with all its dependencies, can be executed in any supported container-based environment.</span></span> <span data-ttu-id="d3386-138">Он будет работают так, как он был предназначен для выполнения в всех целевых объектов развертывания (разработки, контроля Качества, промежуточной и производственной).</span><span class="sxs-lookup"><span data-stu-id="d3386-138">It will run the way it was intended to run in all deployment targets (dev, QA, staging, production).</span></span> <span data-ttu-id="d3386-139">Контейнеры устранить большинство frictions при их перемещении от одного этапа к другому, что значительно повышает производительность развертывания, и можно переслать быстрее.</span><span class="sxs-lookup"><span data-stu-id="d3386-139">Containers eliminate most frictions when they move from one stage to the next, which greatly improves deployment, and you can ship faster.</span></span>

-   <span data-ttu-id="d3386-140">**Сокращение затрат**.</span><span class="sxs-lookup"><span data-stu-id="d3386-140">**Cost reductions**.</span></span> <span data-ttu-id="d3386-141">Контейнеры привести к снижению затрат, либо консолидации и удаления существующего оборудования или по запуску приложений с более высокой плотности на единицу оборудования.</span><span class="sxs-lookup"><span data-stu-id="d3386-141">Containers lead to lower costs, either by the consolidation and removal of existing hardware, or from running applications at a higher density per unit of hardware.</span></span>

-   <span data-ttu-id="d3386-142">**Переносимость**.</span><span class="sxs-lookup"><span data-stu-id="d3386-142">**Portability**.</span></span> <span data-ttu-id="d3386-143">Контейнеры — это модульная и переносных.</span><span class="sxs-lookup"><span data-stu-id="d3386-143">Containers are modular and portable.</span></span> <span data-ttu-id="d3386-144">Контейнеры docker поддерживаются в любой операционной системы Linux и Windows, в любой основной общедоступного облака (Microsoft Azure, Amazon AWS, Google, IBM), в локальной и частных и гибридных облачных средах.</span><span class="sxs-lookup"><span data-stu-id="d3386-144">Docker containers are supported on any server operating system (Linux and Windows), in any major public cloud (Microsoft Azure, Amazon AWS, Google, IBM), and in on-premises and private or hybrid cloud environments.</span></span>

-   <span data-ttu-id="d3386-145">**Элемент управления**.</span><span class="sxs-lookup"><span data-stu-id="d3386-145">**Control**.</span></span> <span data-ttu-id="d3386-146">Контейнеры обеспечивают гибкий и безопасный среду, которая осуществляется на уровне контейнера.</span><span class="sxs-lookup"><span data-stu-id="d3386-146">Containers offer a flexible and secure environment that's controlled at the container level.</span></span> <span data-ttu-id="d3386-147">Контейнер можно защищены, изоляцией и даже ограничивается установки ограничения политики выполнения для контейнера.</span><span class="sxs-lookup"><span data-stu-id="d3386-147">A container can be secured, isolated, and even limited by setting execution constraint policies on the container.</span></span> <span data-ttu-id="d3386-148">Как описано в разделе о контейнерах Windows Windows Server 2016 и Hyper-V контейнеры обеспечивают enterprise Дополнительные варианты поддержки.</span><span class="sxs-lookup"><span data-stu-id="d3386-148">As detailed in the section about Windows Containers, Windows Server 2016 and Hyper-V containers offer additional enterprise support options.</span></span>

<span data-ttu-id="d3386-149">Значительные усовершенствования, внесенные в элемент управления, гибкость и переносимость счете, сокращение расходов на значительные при использовании контейнеров для разработки и обслуживания приложений.</span><span class="sxs-lookup"><span data-stu-id="d3386-149">Significant improvements in agility, portability, and control ultimately lead to significant cost reductions when you use containers to develop and maintain applications.</span></span>

## <a name="what-is-docker"></a><span data-ttu-id="d3386-150">Что такое Docker?</span><span class="sxs-lookup"><span data-stu-id="d3386-150">What is Docker?</span></span>

<span data-ttu-id="d3386-151">[Docker](https://www.docker.com/) — [проекта с открытым исходным кодом](https://github.com/docker/docker) , позволяет автоматизировать развертывание приложений как переносимой, независимым контейнеры, работающие в облаке или в локальной среде.</span><span class="sxs-lookup"><span data-stu-id="d3386-151">[Docker](https://www.docker.com/) is an [open-source project](https://github.com/docker/docker) that automates the deployment of applications as portable, self-sufficient containers that can run in the cloud or on-premises.</span></span> <span data-ttu-id="d3386-152">Docker — также [компании](https://www.docker.com/) , способствует и развития этой технологии.</span><span class="sxs-lookup"><span data-stu-id="d3386-152">Docker also is a [company](https://www.docker.com/) that promotes and evolves this technology.</span></span> <span data-ttu-id="d3386-153">Компания работает в сотрудничестве с облака, Linux и поставщиков Windows, включая Microsoft.</span><span class="sxs-lookup"><span data-stu-id="d3386-153">The company works in collaboration with cloud, Linux, and Windows vendors, including Microsoft.</span></span>

![](./media/image6.png)

> <span data-ttu-id="d3386-154">**Рис. 4-6.**</span><span class="sxs-lookup"><span data-stu-id="d3386-154">**Figure 4-6.**</span></span> <span data-ttu-id="d3386-155">Docker развертывает контейнеры на всех уровнях гибридного облака</span><span class="sxs-lookup"><span data-stu-id="d3386-155">Docker deploys containers at all layers of the hybrid cloud</span></span>

<span data-ttu-id="d3386-156">Кому-либо знакомы с виртуальными машинами контейнеры могут оказаться весьма схожи.</span><span class="sxs-lookup"><span data-stu-id="d3386-156">To someone familiar with virtual machines, containers might appear to be remarkably similar.</span></span> <span data-ttu-id="d3386-157">Контейнер операционной системой, содержит файловую систему и могут быть доступны через сеть, так же, как в системе физический или виртуальный компьютер.</span><span class="sxs-lookup"><span data-stu-id="d3386-157">A container runs an operating system, has a file system, and can be accessed over a network, just like a physical or virtual computer system.</span></span> <span data-ttu-id="d3386-158">Тем не менее технология и принцип контейнеров значительно отличаются от виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="d3386-158">However, the technology and concepts behind containers are vastly different from virtual machines.</span></span> <span data-ttu-id="d3386-159">С точки зрения разработчика контейнер должен считаться более одного процесса.</span><span class="sxs-lookup"><span data-stu-id="d3386-159">From a developer point of view, a container must be treated more like a single process.</span></span> <span data-ttu-id="d3386-160">На самом деле контейнер имеет единую точку входа для одного процесса.</span><span class="sxs-lookup"><span data-stu-id="d3386-160">In fact, a container has a single entry point for one process.</span></span>

<span data-ttu-id="d3386-161">Контейнеры docker (для простоты *контейнеры*) можно запускать на Windows и Linux.</span><span class="sxs-lookup"><span data-stu-id="d3386-161">Docker containers (for simplicity, *containers*) can run natively on Linux and Windows.</span></span> <span data-ttu-id="d3386-162">При выполнении обычных контейнеров, контейнерами Windows можно выполнять только на узлах Windows (сервера узла или виртуальной Машины), а контейнеры Linux можно запустить только на узлах Linux.</span><span class="sxs-lookup"><span data-stu-id="d3386-162">When running regular containers, Windows containers can run only on Windows hosts (a host server or a VM), and Linux containers can run only on Linux hosts.</span></span> <span data-ttu-id="d3386-163">Тем не менее в последних версиях Windows Server и Hyper-V контейнеров контейнера Linux также можно запускать на Windows Server с помощью технологии Hyper-V изоляции, который в настоящее время доступен только в контейнеры Windows Server.</span><span class="sxs-lookup"><span data-stu-id="d3386-163">However, in recent versions of Windows Server and Hyper-V containers, a Linux container also can run natively on Windows Server by using the Hyper-V isolation technology that currently is available only in Windows Server Containers.</span></span>

<span data-ttu-id="d3386-164">В ближайшем будущем смешанных средах, которые имеют контейнеров Linux и Windows будет невозможно и даже распространенные.</span><span class="sxs-lookup"><span data-stu-id="d3386-164">In the near future, mixed environments that have both Linux and Windows containers will be possible and even common.</span></span>

## <a name="benefits-of-windows-containers-for-your-existing-net-applications"></a><span data-ttu-id="d3386-165">Преимущества контейнеры Windows для приложений .NET</span><span class="sxs-lookup"><span data-stu-id="d3386-165">Benefits of Windows Containers for your existing .NET applications</span></span>

<span data-ttu-id="d3386-166">Преимущества использования контейнеры Windows фактически являются те же преимущества, получаемых из контейнеров, в целом.</span><span class="sxs-lookup"><span data-stu-id="d3386-166">The benefits of using Windows Containers are fundamentally the same benefits you get from containers in general.</span></span> <span data-ttu-id="d3386-167">Контейнеры Windows — это работа значительно повышает гибкость и переносимость, элемент управления.</span><span class="sxs-lookup"><span data-stu-id="d3386-167">Using Windows Containers is about greatly improving agility, portability, and control.</span></span>

<span data-ttu-id="d3386-168">Когда мы говорим о существующих приложений .NET, главным образом означает традиционных приложений, которые были созданы с помощью .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="d3386-168">When we talk about existing .NET applications, we mostly mean traditional applications that were created by using the .NET Framework.</span></span> <span data-ttu-id="d3386-169">Например, они могут выполняться традиционных веб-приложениях ASP.NET — они не используют .NET Core, которая имеет более новую версию и запускает кросс платформенных на Windows, Linux и MacOS.</span><span class="sxs-lookup"><span data-stu-id="d3386-169">For example, they might be traditional ASP.NET web applications-they don't use .NET Core, which is newer and runs cross-platform on Linux, Windows, and MacOS.</span></span>

<span data-ttu-id="d3386-170">Основные зависимости в .NET Framework используется Windows.</span><span class="sxs-lookup"><span data-stu-id="d3386-170">The main dependency in the .NET Framework is Windows.</span></span> <span data-ttu-id="d3386-171">Имеется также дополнительный зависимостей, например IIS и System.Web в традиционных ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="d3386-171">It also has secondary dependencies, like IIS, and System.Web in traditional ASP.NET.</span></span>

<span data-ttu-id="d3386-172">Приложения .NET Framework необходимо запустить в Windows, период.</span><span class="sxs-lookup"><span data-stu-id="d3386-172">A .NET Framework application must run on Windows, period.</span></span> <span data-ttu-id="d3386-173">Если вы хотите упаковываете существующих приложений .NET Framework, и невозможно или нежелательно инвестиций в процедуры миграции на .NET Core («если он работает правильно, не переносить»), единственным вариантом для контейнеров, является использование контейнеров Windows.</span><span class="sxs-lookup"><span data-stu-id="d3386-173">If you want to containerize existing .NET Framework applications and you can't or don't want to invest in a migration to .NET Core ("If it works properly, don't migrate it"), the only choice you have for containers is to use Windows Containers.</span></span>

<span data-ttu-id="d3386-174">Поэтому, одно из основных преимуществ использования контейнеры Windows, они позволяют вам модернизировать существующие приложения .NET Framework, работающих под управлением Windows через создание контейнеров.</span><span class="sxs-lookup"><span data-stu-id="d3386-174">So, one of the main benefits of Windows Containers is that they offer you a way to modernize your existing .NET Framework applications that are running on Windows-through containerization.</span></span> <span data-ttu-id="d3386-175">В конечном счете контейнеры Windows получает преимущества, которые вы ищете с помощью контейнеров гибкость, переносимость и больше возможностей управления.</span><span class="sxs-lookup"><span data-stu-id="d3386-175">Ultimately, Windows Containers gets you the benefits that you are looking for by using containers-agility, portability, and better control.</span></span>

## <a name="choose-an-os-to-target-with-net-based-containers"></a><span data-ttu-id="d3386-176">Выберите целевой объект с ОС. Контейнеры на основе NET</span><span class="sxs-lookup"><span data-stu-id="d3386-176">Choose an OS to target with .NET-based containers</span></span>

<span data-ttu-id="d3386-177">Учитывая разнообразие операционных систем, поддерживаемых в Docker, а также различия между .NET Framework и .NET Core, должно использовать определенные ОС и определенные версии на основе платформы, которую вы используете.</span><span class="sxs-lookup"><span data-stu-id="d3386-177">Given the diversity of operating systems that are supported by Docker, as well as the differences between .NET Framework and .NET Core, you should target a specific OS and specific versions based on the framework you are using.</span></span>

<span data-ttu-id="d3386-178">Для Windows можно использовать Windows Server Core или Windows Nano Server.</span><span class="sxs-lookup"><span data-stu-id="d3386-178">For Windows, you can use Windows Server Core or Windows Nano Server.</span></span> <span data-ttu-id="d3386-179">Эти версии Windows предоставляют разные характеристики (например, IIS и резидентной веб-сервера как Kestrel), которые могут быть необходимы приложениями .NET Framework или .NET Core.</span><span class="sxs-lookup"><span data-stu-id="d3386-179">These Windows versions provide different characteristics (like IIS versus a self-hosted web server like Kestrel) that might be needed by .NET Framework or .NET Core applications.</span></span>

<span data-ttu-id="d3386-180">Для Linux доступно и поддерживается множество дистрибутивов в официальных образах Docker .NET (например, Debian).</span><span class="sxs-lookup"><span data-stu-id="d3386-180">For Linux, multiple distros are available and supported in official .NET Docker images (like Debian).</span></span>

<span data-ttu-id="d3386-181">Рис. 4-7 показано версиями ОС, можно выбрать целевую, в зависимости от версии приложения платформы .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="d3386-181">Figure 4-7 shows OS versions that you can target, depending on the app's version of the .NET Framework.</span></span>

![](./media/image7.png)

> <span data-ttu-id="d3386-182">**Рис. 4-7.**</span><span class="sxs-lookup"><span data-stu-id="d3386-182">**Figure 4-7.**</span></span> <span data-ttu-id="d3386-183">Операционные системы на целевой объект на основании версии платформы .NET Framework</span><span class="sxs-lookup"><span data-stu-id="d3386-183">Operating systems to target based on .NET Framework version</span></span>

<span data-ttu-id="d3386-184">В сценарии миграции для существующих или устаревших приложений с учетом приложений .NET Framework основные зависимости, в Windows и служб IIS.</span><span class="sxs-lookup"><span data-stu-id="d3386-184">In migration scenarios for existing or legacy applications that are based on .NET Framework applications, the main dependencies are on Windows and IIS.</span></span> <span data-ttu-id="d3386-185">Единственным вариантом является использование образов Docker на основе Windows Server Core и .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="d3386-185">Your only option is to use Docker images based on Windows Server Core and the .NET Framework.</span></span>

<span data-ttu-id="d3386-186">При добавлении имени образа в файл Dockerfile, можно выбрать и версия операционной системы с помощью тега, как в следующих примерах для образов контейнера Windows на основе платформы .NET Framework:</span><span class="sxs-lookup"><span data-stu-id="d3386-186">When you add the image name to your Dockerfile file, you can select the operating system and version by using a tag, as in the following examples for .NET Framework-based Windows container images:</span></span>

> | <span data-ttu-id="d3386-187">**Тег**</span><span class="sxs-lookup"><span data-stu-id="d3386-187">**Tag**</span></span> | <span data-ttu-id="d3386-188">**Системы и версии**</span><span class="sxs-lookup"><span data-stu-id="d3386-188">**System and version**</span></span> |
> |---|---|
> | <span data-ttu-id="d3386-189">**microsoft/dotnet-framework:4.x-windowsservercore**</span><span class="sxs-lookup"><span data-stu-id="d3386-189">**microsoft/dotnet-framework:4.x-windowsservercore**</span></span> | <span data-ttu-id="d3386-190">.NET framework 4.x в Windows Server Core</span><span class="sxs-lookup"><span data-stu-id="d3386-190">.NET Framework 4.x on Windows Server Core</span></span> |
> | <span data-ttu-id="d3386-191">**microsoft/aspnet:4.x-windowsservercore**</span><span class="sxs-lookup"><span data-stu-id="d3386-191">**microsoft/aspnet:4.x-windowsservercore**</span></span> | <span data-ttu-id="d3386-192">.NET framework 4.x дополнительной настройки ASP.NET в Windows Server Core</span><span class="sxs-lookup"><span data-stu-id="d3386-192">.NET Framework 4.x with additional ASP.NET customization, on Windows Server Core</span></span> |

<span data-ttu-id="d3386-193">Для .NET Core (кросс платформенных для Linux и Windows) теги будет выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="d3386-193">For .NET Core (cross-platform for Linux and Windows), the tags would look like this:</span></span>

> | <span data-ttu-id="d3386-194">**Тег**</span><span class="sxs-lookup"><span data-stu-id="d3386-194">**Tag**</span></span> | <span data-ttu-id="d3386-195">**Системы и версии**</span><span class="sxs-lookup"><span data-stu-id="d3386-195">**System and version**</span></span>
> |---|---|
> | <span data-ttu-id="d3386-196">**microsoft/dotnet:2.0.0-runtime**</span><span class="sxs-lookup"><span data-stu-id="d3386-196">**microsoft/dotnet:2.0.0-runtime**</span></span> | <span data-ttu-id="d3386-197">.NET core 2.0 только для среды выполнения в Linux</span><span class="sxs-lookup"><span data-stu-id="d3386-197">.NET Core 2.0 runtime-only on Linux</span></span> |
> | <span data-ttu-id="d3386-198">**microsoft/dotnet:2.0.0-runtime-nanoserver**</span><span class="sxs-lookup"><span data-stu-id="d3386-198">**microsoft/dotnet:2.0.0-runtime-nanoserver**</span></span> | <span data-ttu-id="d3386-199">.NET core 2.0 на Nano Windows Server только для среды выполнения</span><span class="sxs-lookup"><span data-stu-id="d3386-199">.NET Core 2.0 runtime-only on Windows Nano Server</span></span> |

### <a name="multi-arch-images"></a><span data-ttu-id="d3386-200">Несколькими arch изображений</span><span class="sxs-lookup"><span data-stu-id="d3386-200">Multi-arch images</span></span>

<span data-ttu-id="d3386-201">Начиная с mid 2017 г., также можно использовать новую функцию в вызове Docker [несколькими arch](https://github.com/moby/moby/issues/15866) изображения.</span><span class="sxs-lookup"><span data-stu-id="d3386-201">Beginning in mid-2017, you also can use a new feature in Docker called [multi-arch](https://github.com/moby/moby/issues/15866) images.</span></span> <span data-ttu-id="d3386-202">Несколькими arch теги можно использовать образы .NET core Docker.</span><span class="sxs-lookup"><span data-stu-id="d3386-202">.NET Core Docker images can use multi-arch tags.</span></span> <span data-ttu-id="d3386-203">Файлы Dockerfile, больше не нужно определять операционной системы, которая будет использоваться.</span><span class="sxs-lookup"><span data-stu-id="d3386-203">Your Dockerfile files no longer need to define the operating system that you are targeting.</span></span> <span data-ttu-id="d3386-204">Несколькими arch позволяет одного тега, которое будет использоваться в нескольких конфигурациях компьютера.</span><span class="sxs-lookup"><span data-stu-id="d3386-204">The multi-arch feature allows a single tag to be used across multiple machine configurations.</span></span> <span data-ttu-id="d3386-205">Для экземпляра с несколькими arch можно использовать один общий тег: **microsoft/dotnet:2.0.0-runtime**.</span><span class="sxs-lookup"><span data-stu-id="d3386-205">For instance, with multi-arch, you can use one common tag: **microsoft/dotnet:2.0.0-runtime**.</span></span> <span data-ttu-id="d3386-206">При перетаскивании указателя тега из контейнера среды Linux, вы получаете образ на основе Debian.</span><span class="sxs-lookup"><span data-stu-id="d3386-206">If you pull that tag from a Linux container environment, you get the Debian-based image.</span></span> <span data-ttu-id="d3386-207">При перетаскивании указателя тега из среды контейнера Windows, вы получаете образа на базе Nano Server.</span><span class="sxs-lookup"><span data-stu-id="d3386-207">If you pull that tag from a Windows container environment, you get the Nano Server-based image.</span></span>

<span data-ttu-id="d3386-208">Для образов платформы .NET Framework поскольку традиционных .NET Framework поддерживает только Windows нельзя использовать функцию несколькими arch.</span><span class="sxs-lookup"><span data-stu-id="d3386-208">For .NET Framework images, because the traditional .NET Framework supports only Windows, you cannot use the multi-arch feature.</span></span>

## <a name="windows-container-types"></a><span data-ttu-id="d3386-209">Типы контейнеров Windows</span><span class="sxs-lookup"><span data-stu-id="d3386-209">Windows container types</span></span>

<span data-ttu-id="d3386-210">Как и контейнеры Linux контейнеры Windows Server осуществляется с помощью подсистемы Docker.</span><span class="sxs-lookup"><span data-stu-id="d3386-210">Like Linux containers, Windows Server containers are managed by using Docker Engine.</span></span> <span data-ttu-id="d3386-211">В отличие от контейнеров Linux контейнеров Windows включает два разных типов контейнеров или запустите раз Windows Server и Hyper-V изоляции.</span><span class="sxs-lookup"><span data-stu-id="d3386-211">Unlike Linux containers, Windows containers include two different container types, or run times-Windows Server containers and Hyper-V isolation.</span></span>

<span data-ttu-id="d3386-212">**Контейнеры Windows Server**: обеспечивает изоляцию приложений благодаря изоляции процессов и пространств имен.</span><span class="sxs-lookup"><span data-stu-id="d3386-212">**Windows Server containers**: Provides application isolation through process and namespace isolation technology.</span></span> <span data-ttu-id="d3386-213">Контейнер Windows Server использует ядро совместно с узлом контейнера и все контейнеры, работающие на узле.</span><span class="sxs-lookup"><span data-stu-id="d3386-213">A Windows Server container shares a kernel with the container host and all containers that are running on the host.</span></span> <span data-ttu-id="d3386-214">Эти контейнеры не имеют границы опасного безопасности и не следует использовать для изоляции кода без доверия.</span><span class="sxs-lookup"><span data-stu-id="d3386-214">These containers do not provide a hostile security boundary and should not be used to isolate untrusted code.</span></span> <span data-ttu-id="d3386-215">Из-за пространство общего ядра эти контейнеры требуют ту же версию ядра и конфигурации.</span><span class="sxs-lookup"><span data-stu-id="d3386-215">Because of the shared kernel space, these containers require the same kernel version and configuration.</span></span>

<span data-ttu-id="d3386-216">**Hyper-V изоляции**: расширяет возможности изоляции по контейнеры Windows Server, каждый контейнер запускается на виртуальной Машине высокой степенью оптимизации.</span><span class="sxs-lookup"><span data-stu-id="d3386-216">**Hyper-V isolation**: Expands on the isolation provided by Windows Server Containers by running each container on a highly optimized VM.</span></span> <span data-ttu-id="d3386-217">В этой конфигурации ядро узла контейнера не используется совместно с другими контейнерами на одном узле.</span><span class="sxs-lookup"><span data-stu-id="d3386-217">In this configuration, the kernel of the container host is not shared with other containers on the same host.</span></span> <span data-ttu-id="d3386-218">Эти контейнеры предназначены для опасного многопользовательских размещения, с одной гарантии безопасности виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="d3386-218">These containers are designed for hostile multitenant hosting, with the same security assurances of a VM.</span></span> <span data-ttu-id="d3386-219">Поскольку эти контейнеры не разглашаем ядра на узле или другие контейнеры на узле, они могут выполняться ядер с различными версиями и конфигурации (с поддерживаемыми версиями).</span><span class="sxs-lookup"><span data-stu-id="d3386-219">Because these containers don't share the kernel with the host or other containers on the host, they can run kernels with different versions and configurations (with supported versions).</span></span> <span data-ttu-id="d3386-220">Например все контейнеры Windows в Windows 10 используйте изоляции Hyper-V на использование версии ядра Windows Server и конфигурации.</span><span class="sxs-lookup"><span data-stu-id="d3386-220">For example, all Windows containers on Windows 10 use Hyper-V isolation to utilize the Windows Server kernel version and configuration.</span></span>

<span data-ttu-id="d3386-221">Контейнер запускается в Windows, независимо от изоляции Hyper-V является решением во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="d3386-221">Running a container on Windows with or without Hyper-V isolation is a run-time decision.</span></span> <span data-ttu-id="d3386-222">Можно выбрать для первоначального создания контейнера Hyper-V изоляции и во время выполнения, решили запустить его как контейнер Windows Server.</span><span class="sxs-lookup"><span data-stu-id="d3386-222">You might choose to create the container with Hyper-V isolation initially, and at run time, choose to run it as a Windows Server container instead.</span></span>

### <a name="additional-resources"></a><span data-ttu-id="d3386-223">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="d3386-223">Additional resources</span></span>

-   <span data-ttu-id="d3386-224">**Документация по контейнерам Windows**</span><span class="sxs-lookup"><span data-stu-id="d3386-224">**Windows Containers documentation**</span></span>

    [https://docs.microsoft.com/virtualization/windowscontainers/](https://docs.microsoft.com/virtualization/windowscontainers/)

-   <span data-ttu-id="d3386-225">**Принципы работы контейнеров Windows**</span><span class="sxs-lookup"><span data-stu-id="d3386-225">**Windows Containers fundamentals**</span></span>

    [https://docs.microsoft.com/virtualization/windowscontainers/about/](https://docs.microsoft.com/virtualization/windowscontainers/about/)

-   <span data-ttu-id="d3386-226">**Инфографикой: Корпорация Майкрософт и контейнеры**</span><span class="sxs-lookup"><span data-stu-id="d3386-226">**Infographic: Microsoft and containers**</span></span>

    [https://info.microsoft.com/rs/157-GQE-382/images/Container%20infographic%201.4.17.pdf](https://info.microsoft.com/rs/157-GQE-382/images/Container%20infographic%201.4.17.pdf)

>[!div class="step-by-step"]
<span data-ttu-id="d3386-227">[Назад](how-to-deploy-existing-net-apps-to-azure-app-service.md)
[Вперед](when-not-to-deploy-to-windows-containers.md)</span><span class="sxs-lookup"><span data-stu-id="d3386-227">[Previous](how-to-deploy-existing-net-apps-to-azure-app-service.md)
[Next](when-not-to-deploy-to-windows-containers.md)</span></span>
