---
title: Развернуть существующих приложений .NET в качестве контейнеров Windows
description: Архитектура Микрослужбами .NET для приложений .NET в контейнерах | Развернуть существующих приложений .NET в качестве контейнеров Windows
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 10/26/2017
ms.prod: .net
ms.topic: article
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 6c70e30c10674c086e6ad880b97151ae1918ed87
ms.sourcegitcommit: 2e8acae16ae802f2d6d04e3ce0a6dbf04e476513
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/18/2018
---
# <a name="deploy-existing-net-apps-as-windows-containers"></a>Развернуть существующих приложений .NET в качестве контейнеров Windows

Развертывания, которые основаны на контейнеры Windows относятся к оптимизированную для облачных приложений, собственный облачных приложений и DevOps готовую для облачных приложений.

В этом руководстве и в следующих разделах нацелено на контейнеры Windows для *готовую для облачных DevOps* приложений, при точности прогнозов и переместить существующие приложения .NET.

## <a name="what-are-containers-linux-or-windows"></a>Что такое контейнеры? (Windows или Linux)

Контейнеры — это способ подведение приложения в изолированном пакета. В своем контейнере приложение не зависит от приложения или процессы, которые существуют вне контейнера. Все приложения от которых зависит запуск успешно как процесс находится внутри контейнера. Везде, где возможно перемещение контейнера, приложения будет всегда удовлетворить требованиям, с точки зрения прямые зависимости, так как он входит в состав все, что ее необходимо выполнять (зависимости библиотеки среды выполнения и т. д).

Основной характеристикой контейнер является, поэтому среды же в разных развертываниях поскольку сам контейнер имеет все необходимые зависимости. Это означает, что отладка приложения на компьютере и затем развернуть ее на другом компьютере, с той же среде гарантируется.

Контейнер — это экземпляр образа контейнера. Образ контейнера — способ упаковки приложений или служб (например, моментальный снимок), а затем развернуть его надежного и воспроизводимый способом. Можно сказать, что Docker является не только технологии ИТ-также в основах и процесс.

Как контейнеры ежедневно становятся чаще всего, они становятся отраслевых «единица развертывания».

## <a name="benefits-of-containers-docker-engine-on-linux-or-windows"></a>Преимущества контейнеров (подсистема Docker в Windows или Linux)

Построение приложений с помощью контейнеров, которое может быть определен как упрощенный стандартные блоки предложения существенное увеличение количества в гибкость для сборки, доставки и выполнения любого приложения на любой инфраструктуры.

С помощью контейнеров можно использовать любое приложение от разработки к производству с минимумом или совсем без изменения кода, благодаря интеграции Docker инструменты разработчика Microsoft, операционных систем, и в облаке.

При развертывании для простых виртуальных машин, метод, вероятно, уже имеют на месте для развертывания приложений ASP.NET на ВМ. Вполне вероятно, однако, метод включает несколько действий вручную или сложных автоматизированные процессы с помощью средств развертывания, как Puppet или аналогичное средство. Может потребоваться выполнить задачи, такие как изменение элементов конфигурации, копирование содержимого приложения между серверами и выполнение интерактивной установки программ, в зависимости от настроек MSI-файл, следуют тестирования. Все эти шаги развертывания для развертываний добавьте времени и риска. Каждый раз, когда отсутствует зависимость в целевой среде приведет к возникновению ошибок.

В контейнерах Windows полностью автоматизировать процесс упаковки приложений. Контейнеры Windows основана на платформе Docker, который предлагает автоматического обновления и отката для развертывания контейнера. Основной улучшение, полученное при использовании подсистемы Docker — создания образов, которые похожи на моментальные снимки приложения, с его зависимости. Образы — образы Docker (Windows образ контейнера, в данном случае). Изображения, запускать приложения ASP.NET в контейнерах, не Возвращаясь к исходному коду. Контейнер моментальный снимок становится единицей развертывания.

Большое количество организаций containerizing существующие монолитные приложения по следующим причинам:

-   **Освободить гибкость посредством улучшенные развертывания**. Контейнеры обеспечивают развертывания контракт между процессы разработки и эксплуатации. При использовании контейнеров не слышны разработчики сказать, «Он работает на компьютере, почему бы не в рабочей среде?» Они просто сказать «Запускается как контейнер, чтобы он выполнялся в рабочей среде.» Упакованные приложения, причем все его зависимости могут выполняться в любой поддерживаемой среде на основе контейнера. Он будет работают так, как он был предназначен для выполнения в всех целевых объектов развертывания (разработки, контроля Качества, промежуточной и производственной). Контейнеры устранить большинство frictions при их перемещении от одного этапа к другому, что значительно повышает производительность развертывания, и можно переслать быстрее.

-   **Сокращение затрат**. Контейнеры привести к снижению затрат, либо консолидации и удаления существующего оборудования или по запуску приложений с более высокой плотности на единицу оборудования.

-   **Переносимость**. Контейнеры — это модульная и переносных. Контейнеры docker поддерживаются в любой операционной системы Linux и Windows, в любой основной общедоступного облака (Microsoft Azure, Amazon AWS, Google, IBM), в локальной и частных и гибридных облачных средах.

-   **Элемент управления**. Контейнеры обеспечивают гибкий и безопасный среду, которая осуществляется на уровне контейнера. Контейнер можно защищены, изоляцией и даже ограничивается установки ограничения политики выполнения для контейнера. Как описано в разделе о контейнерах Windows Windows Server 2016 и Hyper-V контейнеры обеспечивают enterprise Дополнительные варианты поддержки.

Значительные усовершенствования, внесенные в элемент управления, гибкость и переносимость счете, сокращение расходов на значительные при использовании контейнеров для разработки и обслуживания приложений.

## <a name="what-is-docker"></a>Что такое Docker?

[Docker](https://www.docker.com/) — [проекта с открытым исходным кодом](https://github.com/docker/docker) , позволяет автоматизировать развертывание приложений как переносимой, независимым контейнеры, работающие в облаке или в локальной среде. Docker — также [компании](https://www.docker.com/) , способствует и развития этой технологии. Компания работает в сотрудничестве с облака, Linux и поставщиков Windows, включая Microsoft.

![](./media/image6.png)

> **Рис. 4-6.** Docker развертывает контейнеры на всех уровнях гибридного облака

Кому-либо знакомы с виртуальными машинами контейнеры могут оказаться весьма схожи. Контейнер операционной системой, содержит файловую систему и могут быть доступны через сеть, так же, как в системе физический или виртуальный компьютер. Тем не менее технология и принцип контейнеров значительно отличаются от виртуальных машин. С точки зрения разработчика контейнер должен считаться более одного процесса. На самом деле контейнер имеет единую точку входа для одного процесса.

Контейнеры docker (для простоты *контейнеры*) можно запускать на Windows и Linux. При выполнении обычных контейнеров, контейнерами Windows можно выполнять только на узлах Windows (сервера узла или виртуальной Машины), а контейнеры Linux можно запустить только на узлах Linux. Тем не менее в последних версиях Windows Server и Hyper-V контейнеров контейнера Linux также можно запускать на Windows Server с помощью технологии Hyper-V изоляции, который в настоящее время доступен только в контейнеры Windows Server.

В ближайшем будущем смешанных средах, которые имеют контейнеров Linux и Windows будет невозможно и даже распространенные.

## <a name="benefits-of-windows-containers-for-your-existing-net-applications"></a>Преимущества контейнеры Windows для приложений .NET

Преимущества использования контейнеры Windows фактически являются те же преимущества, получаемых из контейнеров, в целом. Контейнеры Windows — это работа значительно повышает гибкость и переносимость, элемент управления.

Когда мы говорим о существующих приложений .NET, главным образом означает традиционных приложений, которые были созданы с помощью .NET Framework. Например, они могут выполняться традиционных веб-приложениях ASP.NET — они не используют .NET Core, которая имеет более новую версию и запускает кросс платформенных на Windows, Linux и MacOS.

Основные зависимости в .NET Framework используется Windows. Имеется также дополнительный зависимостей, например IIS и System.Web в традиционных ASP.NET.

Приложения .NET Framework необходимо запустить в Windows, период. Если вы хотите упаковываете существующих приложений .NET Framework, и невозможно или нежелательно инвестиций в процедуры миграции на .NET Core («если он работает правильно, не переносить»), единственным вариантом для контейнеров, является использование контейнеров Windows.

Поэтому, одно из основных преимуществ использования контейнеры Windows, они позволяют вам модернизировать существующие приложения .NET Framework, работающих под управлением Windows через создание контейнеров. В конечном счете контейнеры Windows получает преимущества, которые вы ищете с помощью контейнеров гибкость, переносимость и больше возможностей управления.

## <a name="choose-an-os-to-target-with-net-based-containers"></a>Выберите целевой объект с ОС. Контейнеры на основе NET

Учитывая разнообразие операционных систем, поддерживаемых в Docker, а также различия между .NET Framework и .NET Core, должно использовать определенные ОС и определенные версии на основе платформы, которую вы используете.

Для Windows можно использовать Windows Server Core или Windows Nano Server. Эти версии Windows предоставляют разные характеристики (например, IIS и резидентной веб-сервера как Kestrel), которые могут быть необходимы приложениями .NET Framework или .NET Core.

Для Linux доступно и поддерживается множество дистрибутивов в официальных образах Docker .NET (например, Debian).

Рис. 4-7 показано версиями ОС, можно выбрать целевую, в зависимости от версии приложения платформы .NET Framework.

![](./media/image7.png)

> **Рис. 4-7.** Операционные системы на целевой объект на основании версии платформы .NET Framework

В сценарии миграции для существующих или устаревших приложений с учетом приложений .NET Framework основные зависимости, в Windows и служб IIS. Единственным вариантом является использование образов Docker на основе Windows Server Core и .NET Framework.

При добавлении имени образа в файл Dockerfile, можно выбрать и версия операционной системы с помощью тега, как в следующих примерах для образов контейнера Windows на основе платформы .NET Framework:

> | **Тег** | **Системы и версии** |
> |---|---|
> | **microsoft/dotnet-framework:4.x-windowsservercore** | .NET framework 4.x в Windows Server Core |
> | **microsoft/aspnet:4.x-windowsservercore** | .NET framework 4.x дополнительной настройки ASP.NET в Windows Server Core |

Для .NET Core (кросс платформенных для Linux и Windows) теги будет выглядеть следующим образом:

> | **Тег** | **Системы и версии**
> |---|---|
> | **microsoft/dotnet:2.0.0-runtime** | .NET core 2.0 только для среды выполнения в Linux |
> | **microsoft/dotnet:2.0.0-runtime-nanoserver** | .NET core 2.0 на Nano Windows Server только для среды выполнения |

### <a name="multi-arch-images"></a>Несколькими arch изображений

Начиная с mid 2017 г., также можно использовать новую функцию в вызове Docker [несколькими arch](https://github.com/moby/moby/issues/15866) изображения. Несколькими arch теги можно использовать образы .NET core Docker. Файлы Dockerfile, больше не нужно определять операционной системы, которая будет использоваться. Несколькими arch позволяет одного тега, которое будет использоваться в нескольких конфигурациях компьютера. Для экземпляра с несколькими arch можно использовать один общий тег: **microsoft/dotnet:2.0.0-runtime**. При перетаскивании указателя тега из контейнера среды Linux, вы получаете образ на основе Debian. При перетаскивании указателя тега из среды контейнера Windows, вы получаете образа на базе Nano Server.

Для образов платформы .NET Framework поскольку традиционных .NET Framework поддерживает только Windows нельзя использовать функцию несколькими arch.

## <a name="windows-container-types"></a>Типы контейнеров Windows

Как и контейнеры Linux контейнеры Windows Server осуществляется с помощью подсистемы Docker. В отличие от контейнеров Linux контейнеров Windows включает два разных типов контейнеров или запустите раз Windows Server и Hyper-V изоляции.

**Контейнеры Windows Server**: обеспечивает изоляцию приложений благодаря изоляции процессов и пространств имен. Контейнер Windows Server использует ядро совместно с узлом контейнера и все контейнеры, работающие на узле. Эти контейнеры не имеют границы опасного безопасности и не следует использовать для изоляции кода без доверия. Из-за пространство общего ядра эти контейнеры требуют ту же версию ядра и конфигурации.

**Hyper-V изоляции**: расширяет возможности изоляции по контейнеры Windows Server, каждый контейнер запускается на виртуальной Машине высокой степенью оптимизации. В этой конфигурации ядро узла контейнера не используется совместно с другими контейнерами на одном узле. Эти контейнеры предназначены для опасного многопользовательских размещения, с одной гарантии безопасности виртуальной машины. Поскольку эти контейнеры не разглашаем ядра на узле или другие контейнеры на узле, они могут выполняться ядер с различными версиями и конфигурации (с поддерживаемыми версиями). Например все контейнеры Windows в Windows 10 используйте изоляции Hyper-V на использование версии ядра Windows Server и конфигурации.

Контейнер запускается в Windows, независимо от изоляции Hyper-V является решением во время выполнения. Можно выбрать для первоначального создания контейнера Hyper-V изоляции и во время выполнения, решили запустить его как контейнер Windows Server.

### <a name="additional-resources"></a>Дополнительные ресурсы

-   **Документация по контейнерам Windows**

    [https://docs.microsoft.com/virtualization/windowscontainers/](https://docs.microsoft.com/virtualization/windowscontainers/)

-   **Принципы работы контейнеров Windows**

    [https://docs.microsoft.com/virtualization/windowscontainers/about/](https://docs.microsoft.com/virtualization/windowscontainers/about/)

-   **Инфографикой: Корпорация Майкрософт и контейнеры**

    [https://info.microsoft.com/rs/157-GQE-382/images/Container%20infographic%201.4.17.pdf](https://info.microsoft.com/rs/157-GQE-382/images/Container%20infographic%201.4.17.pdf)

>[!div class="step-by-step"]
[Назад](how-to-deploy-existing-net-apps-to-azure-app-service.md)
[Вперед](when-not-to-deploy-to-windows-containers.md)
