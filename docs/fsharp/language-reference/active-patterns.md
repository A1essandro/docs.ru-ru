---
title: Активные шаблоны (F#)
description: 'Узнайте, как определять именованные разделы, на которые подразделяются входные данные в языке F # в активные шаблоны.'
ms.date: 05/16/2016
ms.openlocfilehash: b8c3270b1efbeb3495ac69bf1217fddf8a5a73e0
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/04/2018
---
# <a name="active-patterns"></a>Активные шаблоны

*Активные шаблоны* позволяют определять именованные разделы, на которые подразделяются входные данные, чтобы эти имена можно использовать в выражении шаблона так же, как и для размеченного объединения. Активные шаблоны можно использовать для разложения данных в настраиваемом порядке для каждого раздела.


## <a name="syntax"></a>Синтаксис

```fsharp
// Complete active pattern definition.
let (|identifer1|identifier2|...|) [ arguments ] = expression
// Partial active pattern definition.
let (|identifier|_|) [ arguments ] = expression
```

## <a name="remarks"></a>Примечания
В предыдущем синтаксисе идентификаторы — это имена разделов входных данных, представленного *аргументы*, или, иными словами, имена подмножеств набора всех значений аргументов. Активное определение шаблона может быть до семи секций. *Выражение* описание формы, которые разбиваются данные. Активное определение шаблона можно использовать для определения правил по выбору именованные разделы значения, заданные в виде аргументы принадлежат. (| И |) символы называются *клипы банана* и вызывается функция, созданная этим типом привязки let *активный распознаватель*.

Например рассмотрим следующий активный шаблон с аргументом.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet5001.fs)]

Активный шаблон можно использовать в выражении шаблона, как показано в следующем примере.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet5002.fs)]

Выходные данные этой программы выглядит следующим образом:

```
7 is odd
11 is odd
32 is even
```

Другой активных шаблонов используется для разложения типов данных различными способами, например, если существует несколько возможных представлений в те же базовые данные. Например `Color` объекта можно разложить на представления RGB или HSB.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet5003.fs)]

Выходные данные программы выше выглядит следующим образом:

```
Red
 Red: 255 Green: 0 Blue: 0
 Hue: 360.000000 Saturation: 1.000000 Brightness: 0.500000
Black
 Red: 0 Green: 0 Blue: 0
 Hue: 0.000000 Saturation: 0.000000 Brightness: 0.000000
White
 Red: 255 Green: 255 Blue: 255
 Hue: 0.000000 Saturation: 0.000000 Brightness: 1.000000
Gray
 Red: 128 Green: 128 Blue: 128
 Hue: 0.000000 Saturation: 0.000000 Brightness: 0.501961
BlanchedAlmond
 Red: 255 Green: 235 Blue: 205
 Hue: 36.000000 Saturation: 1.000000 Brightness: 0.901961
```

В сочетании эти два способа использования активные шаблоны позволяют объединить в секцию и разбить данные на нужной форме и совершать соответствующие вычисления с нужными данными в форме, наиболее подходящие для вычисления.

Получающиеся выражения шаблона включить данные будут записываться в удобным способом, который очень прочтение, упрощая потенциально сложное ветвление и код анализа данных.


## <a name="partial-active-patterns"></a>Частично активные шаблоны
В некоторых случаях необходимо разделы только часть пространства входных данных. В этом случае набор частичных шаблонов записи из которых соответствует некоторых входных данных, но не соответствует другие входные данные. Активные шаблоны, которые не всегда производят значение, называются *частично активные шаблоны*; они имеют возвращает значение, которое имеет тип параметра. Чтобы определить частичный активный шаблон, используйте подстановочный знак (_) в конце списка шаблонов банана клипы. Следующий код иллюстрирует использование частичного активного шаблона.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet5004.fs)]

Выходные данные предыдущего примера выглядит следующим образом:

```
1.100000 : Floating point
0 : Integer
0.000000 : Floating point
10 : Integer
Something else : Not matched.
```

При использовании частично активные шаблоны, иногда отдельные параметры могут быть несвязанными или взаимоисключающими, но не обязательно. В следующем примере квадрат шаблон и шаблон куба не являются несвязанными, так как некоторые числа квадраты и кубов, например 64. Следующая программа выводит все целые числа до 1000000, которые квадратов и кубов.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet5005.fs)]

Выходные данные выглядят следующим образом:

```
1
64
729
4096
15625
46656
117649
262144
531441
1000000
```

## <a name="parameterized-active-patterns"></a>Параметризованные активные шаблоны
Активные шаблоны всегда принимают хотя бы один аргумент для сопоставляемого элемента, но могут стать дополнительные аргументы, в этом случае имя *параметризованный активный шаблон* применяется. Дополнительные аргументы позволяют общий шаблон для специализации. Например, активные шаблоны, которые используют регулярные выражения для анализа строк, часто включают регулярное выражение в качестве дополнительного параметра, как в следующем коде, которая также использует частичный активный шаблон `Integer` определенный в предыдущем примере кода. В этом примере строки, которые используют регулярные выражения для различных форматов дат, предоставленные настроить общий активный шаблон ParseRegex. Активный шаблон Integer используется для преобразования соответствующие строки в целые числа, которые можно передать конструктору DateTime.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet5006.fs)]

Результат выполнения предыдущего кода выглядит следующим образом:

```
12/22/2008 12:00:00 AM 1/1/2009 12:00:00 AM 1/15/2008 12:00:00 AM 12/28/1995 12:00:00 AM
```

Активные шаблоны не ограничиваются только шаблон выражения, их также можно использовать в привязках let.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet5007.fs)]

Результат выполнения предыдущего кода выглядит следующим образом:

```
Hello, random citizen!
Hello, George!
```

## <a name="see-also"></a>См. также
[Справочник по языку F#](index.md)

[Выражения match](match-expressions.md)

