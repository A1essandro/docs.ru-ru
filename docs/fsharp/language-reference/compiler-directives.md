---
title: "Директивы компилятора (F#)"
description: "Дополнительные сведения о F # язык директивы препроцессора, директивы условной компиляции, строки директивы и директивы компилятора."
keywords: "visual f#, f#, функциональное программирование"
author: cartermp
ms.author: phcart
ms.date: 05/16/2016
ms.topic: language-reference
ms.prod: .net
ms.technology: devlang-fsharp
ms.devlang: fsharp
ms.assetid: 93aef07a-6747-4ce4-a10f-a05168978af6
ms.openlocfilehash: b4305d24163f9b23631d5efb6e838f55127cd9f5
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/18/2017
---
# <a name="compiler-directives"></a>Директивы компилятора

В этом разделе описываются директивы процессора и директивы компилятора.


## <a name="preprocessor-directives"></a>Директивы препроцессора
Директива препроцессора дополняется префиксом с символом «#» и отображается в строке сама по себе. Она интерпретируется препроцессором, который запускается перед самим компилятором.

В следующей таблице перечислены директивы препроцессора, имеющиеся в F#.


|Директива|Описание|
|---------|-----------|
|`#if`*символ*|Поддерживает условную компиляцию. Код в разделе после `#if` включается, если *символ* определен.|
|`#else`|Поддерживает условную компиляцию. Помечает раздел кода, который следует включить, если символ, используемый с предыдущей директивой `#if`, не определен.|
|`#endif`|Поддерживает условную компиляцию. Помечает конец условного раздела кода.|
|`#`[строка] *int*,<br/>`#`[строка] *int* *строка*,<br/>`#`[строка] *int* *буквальная строка*|Указывает исходную строку кода и имя файла для отладки. Эта возможность предназначена для средств, создающих исходный код F#.|
|`#nowarn`*warningcode*|Отключает предупреждение или предупреждения компилятора. Чтобы отключить предупреждение, найдите его номер в выходных данных компилятора и заключите его в кавычки. Не указывайте префикс «FS». Чтобы отключить несколько номеров предупреждений в одной строке, заключите каждый номер в кавычки и отделяйте каждую строку пробелом. Пример:

`#nowarn "9" "40"`


Влияние отключения предупреждения применяется файл целиком, включая части файла выше этой директивы. |

## <a name="conditional-compilation-directives"></a>Директивы условной компиляции
Код, деактивированный одной из этих директив, отображается серым цветом в редакторе Visual StudioCode.


>[!NOTE] 
Поведение директив условной компиляции отличается от их поведения в других языках. Например, нельзя использовать логические выражения с символами, а `true` и `false` не имеют особого значения. Символы, используемые в директиве `if`, должны задаваться с помощью командной строки или в параметрах проекта; в этом языке отсутствует директива препроцессора `define`.


В следующем коде демонстрируется применение директив `#if`, `#else` и `#endif`. В данном примере код содержит две версии определения `function1`. Когда `VERSION1` определяется с помощью [-define-параметр компилятора](https://msdn.microsoft.com/library/434394ae-0d4a-459c-a684-bffede519a04), код между `#if` директивы и `#else` активируется. В противном случае активируется код между директивами `#else` и `#endif`.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet7301.fs)]

В языке F# отсутствует директива препроцессора `#define`. Вы должны использовать параметр компилятора или параметры проекта для определения символов, используемых директивой `#if`.

Директивы условной компиляции не могут быть вложенными. В директивах препроцессора отступ не важен.


## <a name="line-directives"></a>Директивы строк
При сборке компилятор сообщает об ошибках в коде F #, ссылаясь на номера строк, в которых возникли ошибки. Номера строк начинаются с 1 для первой строки в файле. Тем не менее при создании исходного кода F# из другого средства номера строк в сформированном коде обычно не представляют интереса, поскольку ошибки в сформированном коде F#, скорее всего, проистекают из другого источника. Директива `#line` позволяет разработчикам средств, формирующих исходный код F#, передавать сведения о номерах исходных строк и исходных файлах в сформированный код F#.

При использовании директивы `#line` необходимо заключать имена файлов в кавычки. Если в начале строки не указывается токен verbatim (`@`), то чтобы использовать в пути символы обратной косой черты, необходимо их экранировать, указывая две обратные косые черты вместо одной. Далее приводятся допустимые токены строк. В этих примерах предполагается, что исходный файл `Script1` при запуске в соответствующем средстве приводит к автоматическому созданию файла кода F# и что код в месте расположения этих директив формируется из некоторых токенов в строке 25 файла `Script1`.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet7303.fs)]

Эти токены указывают, что код F#, сформированный в этом месте, является производным от некоторых конструкций в строке `25` или рядом с ней в файле `Script1`.


## <a name="compiler-directives"></a>Директивы компилятора
Директивы компилятора сходны с директивами препроцессора, поскольку они имеют префикс в виде знака #, но они не интерпретируются препроцессором; компилировать и действовать в соответствии с этими директивами должен компилятор.

В следующей таблице перечислены директивы компилятора, доступные в языке F#.


|Директива|Описание|
|---------|-----------|
|`#light`[«on»|«off»]|Включает или отключает упрощенный синтаксис для совместимости с другими версиями ML. Упрощенный синтаксис включен по умолчанию. Подробный синтаксис всегда включен. Таким образом, вы можете использовать как упрощенный, так и подробный синтаксис. Директива `#light` сама по себе эквивалентна `#light "on"`. Если указана директива `#light "off"`, то для всех языковых конструкций необходимо использовать подробный синтаксис. Синтаксис в документации по F# представлен исходя из предположения, что используется упрощенный синтаксис. Дополнительные сведения см. в разделе [подробный синтаксис](verbose-syntax.md).|
Директивы интерпретатора (fsi.exe) см. [интерактивного программирование на F #](../tutorials/fsharp-interactive/index.md).


## <a name="see-also"></a>См. также
[Справочник по языку F#](index.md)

[Параметры компилятора](compiler-options.md)

