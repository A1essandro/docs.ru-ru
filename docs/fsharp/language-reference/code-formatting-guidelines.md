---
title: "Рекомендации по форматированию кода (F#)"
description: "Рекомендации по форматированию кода отступ сведения для языка F # язык программирования для удобочитаемости, эстетичность, стандартизация и компиляции."
keywords: "visual f#, f#, функциональное программирование"
author: cartermp
ms.author: phcart
ms.date: 05/16/2016
ms.topic: language-reference
ms.prod: .net
ms.technology: devlang-fsharp
ms.devlang: fsharp
ms.assetid: 3f79717c-f84e-448d-9ce4-90e40a644ba1
ms.openlocfilehash: cc56c67f356b99defd8dc28770f87be1f58443c5
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/18/2017
---
# <a name="code-formatting-guidelines"></a>Рекомендации по форматированию кода

В этом разделе приведены рекомендации по установке отступов кода F #. Поскольку в языке F # чувствителен к разрывы строк и отступы, это не просто удобочитаемости, внешнего вида проблему или кодирования стандартизации проблему на правильное форматирование кода. Необходимо форматировать код правильно для правильной его компиляции.


## <a name="general-rules-for-indentation"></a>Общие правила использования отступов
Если требуется отступ, необходимо использовать пробелы, а не символы табуляции. Требуется по крайней мере один пробел. Организации могут создавать стандарты кодирования, чтобы указать количество пробелов, используемых для отступов; три или четыре пробела отступа на каждом уровне, где происходит отступ является типичным. Можно настроить Visual Studio в соответствии с вашей организации стандартами отступов, изменив параметры в `Options` диалоговое окно «», которое доступно из `Tools` меню. В `Text Editor` узел, разверните `F#` и нажмите кнопку `Tabs`. Описание доступных параметров см. в разделе [параметры, текстовый редактор, все языки, Табуляция](https://msdn.microsoft.com/library/7sffa753.aspx).

В общем случае, когда компилятор анализирует код, он обеспечивает внутреннего стека, которая указывает текущий уровень вложенности. При обнаружении отступа кода на новый уровень вложенности создается или передается этот внутренний стек. Когда конструкция заканчивается, уровень извлекается. Отступы — один из способов сообщить об окончании уровня и pop внутреннего стека, но некоторые маркеры также вызвать уровень извлекаемых, такие как `end` ключевое слово, или закрывающую скобку или скобки.

Код в многострочной конструкции, такие как определение типа, определение функции `try...with` конструкции и конструкции циклов, должен иметь отступ относительно первой строки конструкции. Первая строка с отступом устанавливает позицию колонки для последующего кода в той же конструкции. Уровень отступа называется *контекста*. Задает позицию столбца минимальную колонку, называют *вне строки*, для последующих строк кода в том же контексте. При обнаружении строки кода, отступ меньше, чем этой установленной позиции колонки, компилятор предполагает, что контекст закончился и что теперь написания кода на следующем уровне, в предыдущем контексте. Термин *вне* используется для описания условие, в котором строки кода приводит окончание конструкции, поскольку достаточное количество отступ. Другими словами код слева вне строки находится вне. В коде с правильными отступами воспользоваться преимуществами вне правило, для обозначения конца конструкции. При неправильном использовании отступов, условие вне может вызвать компилятор выдаст предупреждение, или может привести к неверной интерпретации кода.

Вне строки определяются следующим образом.


- `=` Маркером, связанным с `let` устанавливает вне линию в столбце первый токен после `=` входа.


- В `if...then...else` выражение, Позиция столбца первый токен после `then` ключевое слово или `else` ключевое слово представляет вне строки.


- В `try...with` выражение, первый токен после `try` вводит вне строки.


- В `match` выражение, первый токен после `with` и первый токен после каждого `->` вне линии.


- Первый токен после `with` в типе расширения вводит вне строки.


- Первый токен после открывающей фигурной скобки или или `begin` зарезервированное слово, применяется вне строки.


- Первый символ в ключевые слова `let`, `if`, и `module` вне линии.


В следующих примерах кода показаны правила отступа. Здесь инструкций печати зависят от отступы, чтобы связать их с помощью соответствующего контекста. При каждом сдвиге отступа контекст извлекается и возвращает к предыдущему контексту. Таким образом печатается пробел в конце каждой итерации; «Готово». печатается только один раз, поскольку отступ в офсайде указывает, что он не является частью цикла. Печать строки «Верхнего уровня контекст» не является компонентом функции. Таким образом оно выводится во-первых, во время инициализации статических переменных, перед вызовом функции.

[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet1.fs)]

Выходные данные выглядят следующим образом.

```
Top-level context

(Negative number) Zero 1 2 3 Done!
```

При разрыве длинных строк продолжение строки должны иметь отступ относительно его конструкции. Например аргументы функции должны иметь отступ относительно первого символа имени функции, как показано в следующем коде.

[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet2.fs)]

Существуют исключения, чтобы эти правила, как описано в следующем разделе.


## <a name="indentation-in-modules"></a>Отступы в модулях
Код в локальном модуле должен иметь отступ относительно модуля, но не быть структурированный код модуля верхнего уровня. Элементы пространства имен не нужно иметь отступ.

Это показано в следующем примере кода.

[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet3.fs)]
[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet4.fs)]

Дополнительные сведения см. в разделе [модулей](modules.md).


## <a name="exceptions-to-the-basic-indentation-rules"></a>Исключения из основных правил использования отступов
Правило, как описано в предыдущем разделе, — в том, что код в многострочных конструкциях должен иметь отступ относительно отступ первой строки конструкции, и что конец конструкции определяется при возникновении первой вне строки. Исключение из правила окончания контекстов является то, что некоторые конструкции, такие как `try...with` выражение, `if...then...else` выражение и использование `and` синтаксис для объявления взаимно рекурсивные функции или типов, состоят из нескольких частей. Создании отступов части, такие как `then` и `else` в `if...then...else` выражение, в то же уровня в качестве маркера, который начинается выражение, однако вместо указания на конец контекста, это означает следующая часть того же контекста. Таким образом `if...then...else` выражение может быть записано как показано в следующем примере кода.

[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet5.fs)]

Исключением из правила вне применяется только к `then` и `else` ключевые слова. Таким образом несмотря на то, что это не ошибка отступ `then` и `else` , отсутствие отступа строк кода в `then` блока, создается предупреждение. Это показано в следующих строках кода.

[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet6.fs)]
[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet7.fs)]

Для кода в `else` в блоке, дополнительное специальное правило. В предыдущем примере предупреждение только в коде, в `then` блок не в коде в `else` блока. Это позволяет писать код, проверяющий различные условия, в начале функции без принудительного выполнения остальной части кода для функции, которая может находиться в `else` блок отступы. Таким образом не выдавая предупреждение можно написать следующее.

[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet8.fs)]

Еще одно исключение из правила, что контексты заканчиваются, когда строка имеет отступ как предыдущая строка, являются инфиксные операторы, такие как `+` и `|>`. Строки, начинающиеся с инфиксные операторы могут начинаться `(1 + oplength)` столбцов до нормальной позиции, не провоцируя окончания контекста, где `oplength` — количество символов, которые составляют оператора. В результате первый токен после оператора выравнивается в предыдущей строке.

Например, в следующем коде `+` может иметь доступ на две колонки меньше, чем предыдущая строка символов.

[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet9.fs)]

Хотя отступ обычно увеличивается по мере высокий уровень вложенности, существует несколько конструкций, в которых компилятор позволяет сбросить отступ до более низкой позиции колонки.

Ниже приведены конструкциях сброс позиции столбца.


- Тела анонимных функций. В следующем коде выражение печати начинается с позиции столбца, чем дальше слева от `fun` ключевое слово. Однако строка не должна начинаться в столбце слева от начала предыдущего уровня отступа (то есть, слева от `L` в `List`).
[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet10.fs)]

- Конструкции, заключенные в круглые скобки или по `begin` и `end` в `then` или `else` блока `if...then...else` выражение, предоставленное отступы не менее, чем позицию столбца `if` ключевое слово. Это исключение позволяет стиль написания кода, в котором открывающая скобка или `begin` используется в конце строки после `then` или `else`.


- Тела модулей, классов, интерфейсов и структур, разделенные `begin...end`, `{...}`, `class...end`, или `interface...end`. Это позволяет для стиля, в котором открывающее ключевое слово определения типа может находиться в той же строке, что и имя типа без перезагрузки весь текст, чтобы быть относительно открывающего ключевого слова.
[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet13.fs)]


## <a name="see-also"></a>См. также
[Справочник по языку F#](index.md)
