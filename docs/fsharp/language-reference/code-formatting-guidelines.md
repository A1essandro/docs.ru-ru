---
title: Рекомендации по форматированию кода (F#)
description: 'Рекомендации по форматированию кода отступ сведения для языка F # язык программирования для удобочитаемости, эстетичность, стандартизация и компиляции.'
author: cartermp
ms.author: phcart
ms.date: 05/16/2016
ms.topic: language-reference
ms.prod: dotnet-fsharp
ms.devlang: fsharp
ms.openlocfilehash: a16378b42e7d2acd44dcfe0af7c68a55e4be41d1
ms.sourcegitcommit: 03ee570f6f528a7d23a4221dcb26a9498edbdf8c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2018
---
# <a name="code-formatting-guidelines"></a><span data-ttu-id="ef394-103">Рекомендации по форматированию кода</span><span class="sxs-lookup"><span data-stu-id="ef394-103">Code Formatting Guidelines</span></span>

<span data-ttu-id="ef394-104">В этом разделе приведены рекомендации по установке отступов кода F #.</span><span class="sxs-lookup"><span data-stu-id="ef394-104">This topic summarizes code indentation guidelines for F#.</span></span> <span data-ttu-id="ef394-105">Поскольку в языке F # чувствителен к разрывы строк и отступы, это не просто удобочитаемости, внешнего вида проблему или кодирования стандартизации проблему на правильное форматирование кода.</span><span class="sxs-lookup"><span data-stu-id="ef394-105">Because the F# language is sensitive to line breaks and indentation, it is not just a readability issue, aesthetic issue, or coding standardization issue to format your code correctly.</span></span> <span data-ttu-id="ef394-106">Необходимо форматировать код правильно для правильной его компиляции.</span><span class="sxs-lookup"><span data-stu-id="ef394-106">You must format your code correctly for it to compile correctly.</span></span>


## <a name="general-rules-for-indentation"></a><span data-ttu-id="ef394-107">Общие правила использования отступов</span><span class="sxs-lookup"><span data-stu-id="ef394-107">General Rules for Indentation</span></span>
<span data-ttu-id="ef394-108">Если требуется отступ, необходимо использовать пробелы, а не символы табуляции.</span><span class="sxs-lookup"><span data-stu-id="ef394-108">When indentation is required, you must use spaces, not tabs.</span></span> <span data-ttu-id="ef394-109">Требуется по крайней мере один пробел.</span><span class="sxs-lookup"><span data-stu-id="ef394-109">At least one space is required.</span></span> <span data-ttu-id="ef394-110">Организации могут создавать стандарты кодирования, чтобы указать количество пробелов, используемых для отступов; три или четыре пробела отступа на каждом уровне, где происходит отступ является типичным.</span><span class="sxs-lookup"><span data-stu-id="ef394-110">Your organization can create coding standards to specify the number of spaces to use for indentation; three or four spaces of indentation at each level where indentation occurs is typical.</span></span> <span data-ttu-id="ef394-111">Можно настроить Visual Studio в соответствии с вашей организации стандартами отступов, изменив параметры в `Options` диалоговое окно «», которое доступно из `Tools` меню.</span><span class="sxs-lookup"><span data-stu-id="ef394-111">You can configure Visual Studio to match your organization's indentation standards by changing the options in the `Options` dialog box, which is available from the `Tools` menu.</span></span> <span data-ttu-id="ef394-112">В `Text Editor` узел, разверните `F#` и нажмите кнопку `Tabs`.</span><span class="sxs-lookup"><span data-stu-id="ef394-112">In the `Text Editor` node, expand `F#` and then click `Tabs`.</span></span> <span data-ttu-id="ef394-113">Описание доступных параметров см. в разделе [параметры, текстовый редактор, все языки, Табуляция](https://msdn.microsoft.com/library/7sffa753.aspx).</span><span class="sxs-lookup"><span data-stu-id="ef394-113">For a description of the available options, see [Options, Text Editor, All Languages, Tabs](https://msdn.microsoft.com/library/7sffa753.aspx).</span></span>

<span data-ttu-id="ef394-114">В общем случае, когда компилятор анализирует код, он обеспечивает внутреннего стека, которая указывает текущий уровень вложенности.</span><span class="sxs-lookup"><span data-stu-id="ef394-114">In general, when the compiler parses your code, it maintains an internal stack that indicates the current level of nesting.</span></span> <span data-ttu-id="ef394-115">При обнаружении отступа кода на новый уровень вложенности создается или передается этот внутренний стек.</span><span class="sxs-lookup"><span data-stu-id="ef394-115">When code is indented, a new level of nesting is created, or pushed onto this internal stack.</span></span> <span data-ttu-id="ef394-116">Когда конструкция заканчивается, уровень извлекается.</span><span class="sxs-lookup"><span data-stu-id="ef394-116">When a construct ends, the level is popped.</span></span> <span data-ttu-id="ef394-117">Отступы — один из способов сообщить об окончании уровня и pop внутреннего стека, но некоторые маркеры также вызвать уровень извлекаемых, такие как `end` ключевое слово, или закрывающую скобку или скобки.</span><span class="sxs-lookup"><span data-stu-id="ef394-117">Indentation is one way to signal the end of a level and pop the internal stack, but certain tokens also cause the level to be popped, such as the `end` keyword, or a closing brace or parenthesis.</span></span>

<span data-ttu-id="ef394-118">Код в многострочной конструкции, такие как определение типа, определение функции `try...with` конструкции и конструкции циклов, должен иметь отступ относительно первой строки конструкции.</span><span class="sxs-lookup"><span data-stu-id="ef394-118">Code in a multiline construct, such as a type definition, function definition, `try...with` construct, and looping constructs, must be indented relative to the opening line of the construct.</span></span> <span data-ttu-id="ef394-119">Первая строка с отступом устанавливает позицию колонки для последующего кода в той же конструкции.</span><span class="sxs-lookup"><span data-stu-id="ef394-119">The first indented line establishes a column position for subsequent code in the same construct.</span></span> <span data-ttu-id="ef394-120">Уровень отступа называется *контекста*.</span><span class="sxs-lookup"><span data-stu-id="ef394-120">The indentation level is called a *context*.</span></span> <span data-ttu-id="ef394-121">Задает позицию столбца минимальную колонку, называют *вне строки*, для последующих строк кода в том же контексте.</span><span class="sxs-lookup"><span data-stu-id="ef394-121">The column position sets a minimum column, referred to as an *offside line*, for subsequent lines of code that are in the same context.</span></span> <span data-ttu-id="ef394-122">При обнаружении строки кода, отступ меньше, чем этой установленной позиции колонки, компилятор предполагает, что контекст закончился и что теперь написания кода на следующем уровне, в предыдущем контексте.</span><span class="sxs-lookup"><span data-stu-id="ef394-122">When a line of code is encountered that is indented less than this established column position, the compiler assumes that the context has ended and that you are now coding at the next level up, in the previous context.</span></span> <span data-ttu-id="ef394-123">Термин *вне* используется для описания условие, в котором строки кода приводит окончание конструкции, поскольку достаточное количество отступ.</span><span class="sxs-lookup"><span data-stu-id="ef394-123">The term *offside* is used to describe the condition in which a line of code triggers the end of a construct because it is not indented far enough.</span></span> <span data-ttu-id="ef394-124">Другими словами код слева вне строки находится вне.</span><span class="sxs-lookup"><span data-stu-id="ef394-124">In other words, code to the left of an offside line is offside.</span></span> <span data-ttu-id="ef394-125">В коде с правильными отступами воспользоваться преимуществами вне правило, для обозначения конца конструкции.</span><span class="sxs-lookup"><span data-stu-id="ef394-125">In correctly indented code, you take advantage of the offside rule in order to delineate the end of constructs.</span></span> <span data-ttu-id="ef394-126">При неправильном использовании отступов, условие вне может вызвать компилятор выдаст предупреждение, или может привести к неверной интерпретации кода.</span><span class="sxs-lookup"><span data-stu-id="ef394-126">If you use indentation improperly, an offside condition can cause the compiler to issue a warning or can lead to the incorrect interpretation of your code.</span></span>

<span data-ttu-id="ef394-127">Вне строки определяются следующим образом.</span><span class="sxs-lookup"><span data-stu-id="ef394-127">Offside lines are determined as follows.</span></span>


- <span data-ttu-id="ef394-128">`=` Маркером, связанным с `let` устанавливает вне линию в столбце первый токен после `=` входа.</span><span class="sxs-lookup"><span data-stu-id="ef394-128">An `=` token associated with a `let` introduces an offside line at the column of the first token after the `=` sign.</span></span>


- <span data-ttu-id="ef394-129">В `if...then...else` выражение, Позиция столбца первый токен после `then` ключевое слово или `else` ключевое слово представляет вне строки.</span><span class="sxs-lookup"><span data-stu-id="ef394-129">In an `if...then...else` expression, the column position of the first token after the `then` keyword or the `else` keyword introduces an offside line.</span></span>


- <span data-ttu-id="ef394-130">В `try...with` выражение, первый токен после `try` вводит вне строки.</span><span class="sxs-lookup"><span data-stu-id="ef394-130">In a `try...with` expression, the first token after `try` introduces an offside line.</span></span>


- <span data-ttu-id="ef394-131">В `match` выражение, первый токен после `with` и первый токен после каждого `->` вне линии.</span><span class="sxs-lookup"><span data-stu-id="ef394-131">In a `match` expression, the first token after `with` and the first token after each `->` introduce offside lines.</span></span>


- <span data-ttu-id="ef394-132">Первый токен после `with` в типе расширения вводит вне строки.</span><span class="sxs-lookup"><span data-stu-id="ef394-132">The first token after `with` in a type extension introduces an offside line.</span></span>


- <span data-ttu-id="ef394-133">Первый токен после открывающей фигурной скобки или или `begin` зарезервированное слово, применяется вне строки.</span><span class="sxs-lookup"><span data-stu-id="ef394-133">The first token after an opening brace or parenthesis, or after the `begin` keyword, introduces an offside line.</span></span>


- <span data-ttu-id="ef394-134">Первый символ в ключевые слова `let`, `if`, и `module` вне линии.</span><span class="sxs-lookup"><span data-stu-id="ef394-134">The first character in the keywords `let`, `if`, and `module` introduce offside lines.</span></span>


<span data-ttu-id="ef394-135">В следующих примерах кода показаны правила отступа.</span><span class="sxs-lookup"><span data-stu-id="ef394-135">The following code examples illustrate the indentation rules.</span></span> <span data-ttu-id="ef394-136">Здесь инструкций печати зависят от отступы, чтобы связать их с помощью соответствующего контекста.</span><span class="sxs-lookup"><span data-stu-id="ef394-136">Here, the print statements rely on indentation to associate them with the appropriate context.</span></span> <span data-ttu-id="ef394-137">При каждом сдвиге отступа контекст извлекается и возвращает к предыдущему контексту.</span><span class="sxs-lookup"><span data-stu-id="ef394-137">Every time the indentation shifts, the context is popped and returns to the previous context.</span></span> <span data-ttu-id="ef394-138">Таким образом печатается пробел в конце каждой итерации; «Готово».</span><span class="sxs-lookup"><span data-stu-id="ef394-138">Therefore, a space is printed at the end of each iteration; "Done!"</span></span> <span data-ttu-id="ef394-139">печатается только один раз, поскольку отступ в офсайде указывает, что он не является частью цикла.</span><span class="sxs-lookup"><span data-stu-id="ef394-139">is only printed one time because the offside indentation establishes that it is not part of the loop.</span></span> <span data-ttu-id="ef394-140">Печать строки «Верхнего уровня контекст» не является компонентом функции.</span><span class="sxs-lookup"><span data-stu-id="ef394-140">The printing of the string "Top-level context" is not part of the function.</span></span> <span data-ttu-id="ef394-141">Таким образом оно выводится во-первых, во время инициализации статических переменных, перед вызовом функции.</span><span class="sxs-lookup"><span data-stu-id="ef394-141">Therefore, it is printed first, during the static initialization, before the function is called.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet1.fs)]

<span data-ttu-id="ef394-142">Выходные данные выглядят следующим образом.</span><span class="sxs-lookup"><span data-stu-id="ef394-142">The output is as follows.</span></span>

```
Top-level context

(Negative number) Zero 1 2 3 Done!
```

<span data-ttu-id="ef394-143">При разрыве длинных строк продолжение строки должны иметь отступ относительно его конструкции.</span><span class="sxs-lookup"><span data-stu-id="ef394-143">When you break long lines, the continuation of the line must be indented farther than the enclosing construct.</span></span> <span data-ttu-id="ef394-144">Например аргументы функции должны иметь отступ относительно первого символа имени функции, как показано в следующем коде.</span><span class="sxs-lookup"><span data-stu-id="ef394-144">For example, function arguments must be indented farther than the first character of the function name, as shown in the following code.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet2.fs)]

<span data-ttu-id="ef394-145">Существуют исключения, чтобы эти правила, как описано в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="ef394-145">There are exceptions to these rules, as described in the next section.</span></span>


## <a name="indentation-in-modules"></a><span data-ttu-id="ef394-146">Отступы в модулях</span><span class="sxs-lookup"><span data-stu-id="ef394-146">Indentation in Modules</span></span>
<span data-ttu-id="ef394-147">Код в локальном модуле должен иметь отступ относительно модуля, но не быть структурированный код модуля верхнего уровня.</span><span class="sxs-lookup"><span data-stu-id="ef394-147">Code in a local module must be indented relative to the module, but code in a top-level module does not have to be indented.</span></span> <span data-ttu-id="ef394-148">Элементы пространства имен не нужно иметь отступ.</span><span class="sxs-lookup"><span data-stu-id="ef394-148">Namespace elements do not have to be indented.</span></span>

<span data-ttu-id="ef394-149">Это показано в следующем примере кода.</span><span class="sxs-lookup"><span data-stu-id="ef394-149">The following code examples illustrate this.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet3.fs)]
[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet4.fs)]

<span data-ttu-id="ef394-150">Дополнительные сведения см. в разделе [модулей](modules.md).</span><span class="sxs-lookup"><span data-stu-id="ef394-150">For more information, see [Modules](modules.md).</span></span>


## <a name="exceptions-to-the-basic-indentation-rules"></a><span data-ttu-id="ef394-151">Исключения из основных правил использования отступов</span><span class="sxs-lookup"><span data-stu-id="ef394-151">Exceptions to the Basic Indentation Rules</span></span>
<span data-ttu-id="ef394-152">Правило, как описано в предыдущем разделе, — в том, что код в многострочных конструкциях должен иметь отступ относительно отступ первой строки конструкции, и что конец конструкции определяется при возникновении первой вне строки.</span><span class="sxs-lookup"><span data-stu-id="ef394-152">The general rule, as described in the previous section, is that code in multiline constructs must be indented relative to the indentation of the first line of the construct, and that the end of the construct is determined by when the first offside line occurs.</span></span> <span data-ttu-id="ef394-153">Исключение из правила окончания контекстов является то, что некоторые конструкции, такие как `try...with` выражение, `if...then...else` выражение и использование `and` синтаксис для объявления взаимно рекурсивные функции или типов, состоят из нескольких частей.</span><span class="sxs-lookup"><span data-stu-id="ef394-153">An exception to the rule about when contexts end is that some constructs, such as the `try...with` expression, the `if...then...else` expression, and the use of `and` syntax for declaring mutually recursive functions or types, have multiple parts.</span></span> <span data-ttu-id="ef394-154">Создании отступов части, такие как `then` и `else` в `if...then...else` выражение, в то же уровня в качестве маркера, который начинается выражение, однако вместо указания на конец контекста, это означает следующая часть того же контекста.</span><span class="sxs-lookup"><span data-stu-id="ef394-154">You indent the later parts, such as `then` and `else` in an `if...then...else` expression, at the same level as the token that starts the expression, but instead of indicating an end to the context, it represents the next part of the same context.</span></span> <span data-ttu-id="ef394-155">Таким образом `if...then...else` выражение может быть записано как показано в следующем примере кода.</span><span class="sxs-lookup"><span data-stu-id="ef394-155">Therefore, an `if...then...else` expression can be written as in the following code example.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet5.fs)]

<span data-ttu-id="ef394-156">Исключением из правила вне применяется только к `then` и `else` ключевые слова.</span><span class="sxs-lookup"><span data-stu-id="ef394-156">The exception to the offside rule applies only to the `then` and `else` keywords.</span></span> <span data-ttu-id="ef394-157">Таким образом несмотря на то, что это не ошибка отступ `then` и `else` , отсутствие отступа строк кода в `then` блока, создается предупреждение.</span><span class="sxs-lookup"><span data-stu-id="ef394-157">Therefore, although it is not an error to indent the `then` and `else` further, failing to indent the lines of code in a `then` block produces a warning.</span></span> <span data-ttu-id="ef394-158">Это показано в следующих строках кода.</span><span class="sxs-lookup"><span data-stu-id="ef394-158">This is illustrated in the following lines of code.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet6.fs)]
[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet7.fs)]

<span data-ttu-id="ef394-159">Для кода в `else` в блоке, дополнительное специальное правило.</span><span class="sxs-lookup"><span data-stu-id="ef394-159">For code in an `else` block, an additional special rule applies.</span></span> <span data-ttu-id="ef394-160">В предыдущем примере предупреждение только в коде, в `then` блок не в коде в `else` блока.</span><span class="sxs-lookup"><span data-stu-id="ef394-160">The warning in the previous example occurs only on the code in the `then` block, not on the code in the `else` block.</span></span> <span data-ttu-id="ef394-161">Это позволяет писать код, проверяющий различные условия, в начале функции без принудительного выполнения остальной части кода для функции, которая может находиться в `else` блок отступы.</span><span class="sxs-lookup"><span data-stu-id="ef394-161">This allows you to write code that checks for various conditions at the beginning of a function without forcing the rest of the code for the function, which might be in an `else` block, to be indented.</span></span> <span data-ttu-id="ef394-162">Таким образом не выдавая предупреждение можно написать следующее.</span><span class="sxs-lookup"><span data-stu-id="ef394-162">Thus, you can write the following without producing a warning.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet8.fs)]

<span data-ttu-id="ef394-163">Еще одно исключение из правила, что контексты заканчиваются, когда строка имеет отступ как предыдущая строка, являются инфиксные операторы, такие как `+` и `|>`.</span><span class="sxs-lookup"><span data-stu-id="ef394-163">Another exception to the rule that contexts end when a line is not indented as far as a previous line is for infix operators, such as `+` and `|>`.</span></span> <span data-ttu-id="ef394-164">Строки, начинающиеся с инфиксные операторы могут начинаться `(1 + oplength)` столбцов до нормальной позиции, не провоцируя окончания контекста, где `oplength` — количество символов, которые составляют оператора.</span><span class="sxs-lookup"><span data-stu-id="ef394-164">Lines that start with infix operators are permitted to begin `(1 + oplength)` columns before the normal position without triggering an end to the context, where `oplength` is the number of characters that make up the operator.</span></span> <span data-ttu-id="ef394-165">В результате первый токен после оператора выравнивается в предыдущей строке.</span><span class="sxs-lookup"><span data-stu-id="ef394-165">This causes the first token after the operator to align with the previous line.</span></span>

<span data-ttu-id="ef394-166">Например, в следующем коде `+` может иметь доступ на две колонки меньше, чем предыдущая строка символов.</span><span class="sxs-lookup"><span data-stu-id="ef394-166">For example, in the following code, the `+` symbol is permitted to be indented two columns less than the previous line.</span></span>

[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet9.fs)]

<span data-ttu-id="ef394-167">Хотя отступ обычно увеличивается по мере высокий уровень вложенности, существует несколько конструкций, в которых компилятор позволяет сбросить отступ до более низкой позиции колонки.</span><span class="sxs-lookup"><span data-stu-id="ef394-167">Although indentation usually increases as the level of nesting becomes higher, there are several constructs in which the compiler allows you to reset the indentation to a lower column position.</span></span>

<span data-ttu-id="ef394-168">Ниже приведены конструкциях сброс позиции столбца.</span><span class="sxs-lookup"><span data-stu-id="ef394-168">The constructs that permit a reset of column position are as follows:</span></span>


- <span data-ttu-id="ef394-169">Тела анонимных функций.</span><span class="sxs-lookup"><span data-stu-id="ef394-169">Bodies of anonymous functions.</span></span> <span data-ttu-id="ef394-170">В следующем коде выражение печати начинается с позиции столбца, чем дальше слева от `fun` ключевое слово.</span><span class="sxs-lookup"><span data-stu-id="ef394-170">In the following code, the print expression starts at a column position that is farther to the left than the `fun` keyword.</span></span> <span data-ttu-id="ef394-171">Однако строка не должна начинаться в столбце слева от начала предыдущего уровня отступа (то есть, слева от `L` в `List`).</span><span class="sxs-lookup"><span data-stu-id="ef394-171">However, the line must not start at a column to the left of the start of the previous indentation level (that is, to the left of the `L` in `List`).</span></span>
[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet10.fs)]

- <span data-ttu-id="ef394-172">Конструкции, заключенные в круглые скобки или по `begin` и `end` в `then` или `else` блока `if...then...else` выражение, предоставленное отступы не менее, чем позицию столбца `if` ключевое слово.</span><span class="sxs-lookup"><span data-stu-id="ef394-172">Constructs enclosed by parentheses or by `begin` and `end` in a `then` or `else` block of an `if...then...else` expression, provided the indentation is no less than the column position of the `if` keyword.</span></span> <span data-ttu-id="ef394-173">Это исключение позволяет стиль написания кода, в котором открывающая скобка или `begin` используется в конце строки после `then` или `else`.</span><span class="sxs-lookup"><span data-stu-id="ef394-173">This exception allows for a coding style in which an opening parenthesis or `begin` is used at the end of a line after `then` or `else`.</span></span>


- <span data-ttu-id="ef394-174">Тела модулей, классов, интерфейсов и структур, разделенные `begin...end`, `{...}`, `class...end`, или `interface...end`.</span><span class="sxs-lookup"><span data-stu-id="ef394-174">Bodies of modules, classes, interfaces, and structures delimited by `begin...end`, `{...}`, `class...end`, or `interface...end`.</span></span> <span data-ttu-id="ef394-175">Это позволяет для стиля, в котором открывающее ключевое слово определения типа может находиться в той же строке, что и имя типа без перезагрузки весь текст, чтобы быть относительно открывающего ключевого слова.</span><span class="sxs-lookup"><span data-stu-id="ef394-175">This allows for a style in which the opening keyword of a type definition can be on the same line as the type name without forcing the whole body to be indented farther than the opening keyword.</span></span>
[!code-fsharp[Main](../../../samples/snippets/fsharp/code-formatting/snippet13.fs)]


## <a name="see-also"></a><span data-ttu-id="ef394-176">См. также</span><span class="sxs-lookup"><span data-stu-id="ef394-176">See Also</span></span>
[<span data-ttu-id="ef394-177">Справочник по языку F#</span><span class="sxs-lookup"><span data-stu-id="ef394-177">F# Language Reference</span></span>](index.md)
