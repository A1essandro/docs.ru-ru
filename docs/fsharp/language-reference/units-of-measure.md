---
title: Единицы измерения (F#)
description: 'Узнайте, как число с плавающей запятой и целое число со знаком значения в языке F #, могут иметь связанные единицы измерения, которые обычно используются для указания длины, тома и запоминающих устройств.'
ms.date: 05/16/2016
ms.openlocfilehash: 3e47c92100c1dd99161be709a065913f501854f2
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/04/2018
ms.locfileid: "33564955"
---
# <a name="units-of-measure"></a>Единицы измерения

Число с плавающей точкой и значения целого числа со знаком в языке F # могут иметь связанные единицы измерения, которые обычно используются для указания длины, объема, массовый, и т. д. Используя количества единиц, включите компилятору Проверять арифметические связи у правильный единицы, что позволяет избежать ошибок программирования.


## <a name="syntax"></a>Синтаксис

```fsharp
[<Measure>] type unit-name [ = measure ]
```

## <a name="remarks"></a>Примечания
Определяет в предыдущем синтаксисе *имя устройства* как в единицах измерения. Необязательная часть используется для определения новой меры в терминах ранее определенных единиц измерения. Например, в следующей строке определяется мера `cm` (сантиметр).

```fsharp
[<Measure>] type cm
```

В следующей строке определяется мера `ml` (миллиметр определяется) с помощью кубического сантиметра (`cm^3`).

```fsharp
[<Measure>] type ml = cm^3
```

В предыдущем синтаксисе *мер* — это формула, которая содержит единицы измерения. В формулах, содержащих единицы измерения, поддерживаются целочисленные степени (положительные и отрицательные), пробелы между единицами указывают на произведение двух частей, `*` также указывает, измерения, и `/` указывает на частное единиц. Для обратных единиц можно использовать power отрицательное целое число или `/` , разделяющий числитель и знаменатель формулы единицы измерения. Несколько блоков в знаменателе должны быть заключены в круглые скобки. Единицы разделяя их пробелами после `/` , считаются частью знаменателя, но единицы, следующие `*` интерпретируются как часть числитель.

1 можно использовать в выражениях единиц, либо отдельно, чтобы указать количество без измерений, или вместе с другими единицами, как в числителе. Например, единицы частоты записываются в виде `1/s`, где `s` секунд. В формулах единиц не используются скобки. Числовые константы преобразования не указан в формулах единиц; Тем не менее можно определить константы преобразования с использованием единиц отдельно и использовать их в вычислениях с проверкой единиц.

Формулы единиц, означающие одно и то же самое можно записать различными способами. Таким образом компилятор преобразует формулы единиц в единообразный вид, который преобразует отрицательные степени в обратные, группирует единицы в один числитель и знаменатель и выполняет сортировку по алфавиту единицы в числителе и знаменатель.

Например, формулы единиц `kg m s^-2` и `m /s s * kg` преобразуются в `kg m/s^2`.

Единицы измерения используются выражения с плавающей точкой. С помощью числа с плавающей запятой соответствующих единиц измерения повышает уровень безопасности типов и помогает избежать ошибок несоответствие единицы, которые могут произойти в формулах, при использовании слабо типизированным числа с плавающей запятой. При написании плавающей точки выражение, которое использует единицы, единицы измерения в выражении должны совпадать.

Можно снабдить литералы с формулы единиц в угловых скобках, как показано в следующих примерах.

```fsharp
1.0<cm>
55.0<miles/hour>
```

Не следует помещать пробел между числом и угловых скобок; Тем не менее, можно включить суффикс литерала, такие как `f`, как показано в следующем примере.

```fsharp
// The f indicates single-precision floating point.
55.0f<miles/hour>
```

Такой заметки изменяет тип литерала с примитивного (такие как `float`) на тип с измерением, таких как `float<cm>` или, в этом случае `float<miles/hour>`. Заметка единицы `<1>` указывает количество без измерений, а также тип эквивалентен типу-примитиву без параметра единицы измерения.

Тип единицы измерения является тип с плавающей запятой или целочисленным типом, а также дополнительных модульных заметки, указаны в скобках со знаком. Таким образом, при создании типа преобразования из `g` (граммов) для `kg` (килограмм) типы описываются следующим образом.

```fsharp
let convertg2kg (x : float<g>) = x / 1000.0<g/kg>
```

Единицы измерения используются для проверки единиц во время компиляции, но не сохраняются в среде выполнения. Таким образом они не влияют на производительность.

Единицы измерения, которые могут применяться к любому типу, не только типы с плавающей запятой; Однако только типы с плавающей запятой, подписана целочисленных типов и типов decimal поддерживают количества с измерениями. Таким образом он имеет смысл только для использования единиц измерения с примитивными типами и статистическими выражениями, которые содержат эти примитивные типы.

Следующий пример иллюстрирует использование единиц измерения.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6901.fs)]
    
В следующем примере кода показано, как преобразовать из безразмерное число с плавающей запятой в размерные значение с плавающей запятой. Вы только что умножить 1.0, применить размерность 1.0. Абстрактно это можно представить в виде функции типа `degreesFahrenheit`.

Кроме того, при передаче размерные значения в функции, ожидающие безразмерные числа с плавающей запятой, необходимо исключить единицы измерения или привести к `float` с помощью `float` оператор. В этом примере выполняется деление `1.0<degC>` для аргументов `printf` из-за `printf` ожидает безразмерные.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6902.fs)]

В следующем примере сеанса показаны выходные данные и входные данные этого кода.

```
Enter a temperature in degrees Fahrenheit.
90
That temperature in degrees Celsius is    32.22.
```

## <a name="using-generic-units"></a>Использование универсальных единиц
Можно написать универсальных функций, которые работают на данные, которые имеют связанную единицу измерения. Это делается путем указания типа вместе с универсальной единицей в качестве параметра типа, как показано в следующем примере кода.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6903.fs)]
    
## <a name="creating-aggregate-types-with-generic-units"></a>Создание типов статистических выражений с универсальными единицами
Следующий код показано, как создать тип статистических выражений, состоящий из отдельных значений с плавающей запятой с универсальными единицами. Это позволяет создавать один тип должен быть создан, работает с множеством единиц. Кроме того универсальные единицы повышают безопасность типа, гарантируя, что универсальный тип с одним набором единиц, тип которого отличается от одного универсального типа с другим набором значений. Является основой этой технологии, `Measure` атрибут может применяться к параметру типа.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6904.fs)]
    
## <a name="units-at-runtime"></a>Единицы во время выполнения
Единицы измерения используются для проверки статических типов. При компиляции значений с плавающей запятой единицы измерения исключаются, поэтому единицы будут потеряны во время выполнения. Таким образом любые попытки реализовать функциональные возможности, основанные на проверке единиц времени выполнения невозможна. Например, реализация `ToString` функцию для распечатки единиц невозможна.


## <a name="conversions"></a>Преобразования
Для преобразования типа, который содержит единицы (например, `float<'u>`) для типа, у которого нет единиц, можно использовать функцию стандартное преобразование. Например, можно использовать `float` для преобразования `float` значение, которое не имеет единицы, как показано в следующем коде.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6905.fs)]

Чтобы преобразовать значение, которое имеет единицы безразмерное значение, можно умножить значение 1 или 1,0, которое помечается с соответствующие единицы измерения. Однако для создания уровней взаимодействия, существуют некоторые явные функции, которые можно использовать для безразмерное значения преобразуются в значения с единицы. Они находятся в [Microsoft.FSharp.Core.LanguagePrimitives](https://msdn.microsoft.com/library/69d08ac5-5d51-4c20-bf1e-850fd312ece3) модуля. Например, для преобразования из безразмерное `float` для `float<cm>`, используйте [FloatWithMeasure](https://msdn.microsoft.com/library/69520bc7-d67b-46b8-9004-7cac9646b8d9), как показано в следующем коде.

[!code-fsharp[Main](../../../samples/snippets/fsharp/lang-ref-2/snippet6906.fs)]
    
## <a name="units-of-measure-in-the-f-power-pack"></a>Единицы измерения в F # Power Pack
Библиотека модульных доступен в PowerPack F #. Она включает системы СИ и физические константы.


## <a name="see-also"></a>См. также
[Справочник по языку F#](index.md)
