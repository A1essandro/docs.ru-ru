---
title: "Использование библиотек из не вполне надежного кода"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- security [.NET Framework], partially trusted code
- partially trusted code
- partial trust
- AllowPartiallyTrustedCallersAttribute attribute
- code access security, partially trusted code
- APTCA
ms.assetid: dd66cd4c-b087-415f-9c3e-94e3a1835f74
caps.latest.revision: "25"
author: mairaw
ms.author: mairaw
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 00f532e4e93936dbd719f2b8a0c060e54e16425b
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/22/2017
---
# <a name="using-libraries-from-partially-trusted-code"></a>Использование библиотек из не вполне надежного кода
[!INCLUDE[net_security_note](../../../includes/net-security-note-md.md)]  
  
> [!NOTE]
>  Этот раздел описывает поведение сборок со строгими именами и применяется только к [уровня 1](../../../docs/framework/misc/security-transparent-code-level-1.md) сборки. [Прозрачный с точки зрения безопасности код, уровень 2](../../../docs/framework/misc/security-transparent-code-level-2.md) сборок в [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] или более поздних версий не зависят от строгих имен. Дополнительные сведения об изменениях системы безопасности см. в разделе [изменения системы безопасности](../../../docs/framework/security/security-changes.md).  
  
 Приложения, которые получают меньше, чем полное доверие со стороны узла или песочницы не могут вызывать Общие управляемые библиотеки, если только автор библиотеки разрешил это специально для использования <xref:System.Security.AllowPartiallyTrustedCallersAttribute> атрибута. Таким образом, авторы приложений должны иметь в виду, что некоторые библиотеки будут им недоступны в контексте частичного доверия. По умолчанию весь код, выполняемый в частично доверенной ["песочницы"](../../../docs/framework/misc/how-to-run-partially-trusted-code-in-a-sandbox.md) и не входящий в список сборок с полным доверием, имеет частичное доверие. Если не предполагается, что код будет запускаться в частично доверенном контексте или вызываться кодом с частичным доверием, данный раздел можно игнорировать. Однако при написании кода, который должен взаимодействовать с частично доверенным кодом или работать из частично доверенного контекста, следует учитывать следующие факторы.  
  
-   Библиотеки должны быть подписаны строгим именем, чтобы их могли совместно использовать несколько приложений. Строгие имена позволяют помещать код в глобальный кэш сборок или добавлять его в список полного доверия песочницы <xref:System.AppDomain>, а также позволяют потребителям удостовериться, что данный фрагмент мобильного кода действительно исходит от вас.  
  
-   По умолчанию со строгими именами [уровня 1](../../../docs/framework/misc/security-transparent-code-level-1.md) общие библиотеки выполняют неявную [LinkDemand](../../../docs/framework/misc/link-demands.md) для полного доверия автоматически, не требуя никаких действий от автора библиотеки.  
  
-   Если вызывающий объект не имеет полного доверия, однако пытается вызывать такую библиотеку, среда выполнения создает <xref:System.Security.SecurityException>, а вызывающему объекту запрещается связь с библиотекой.  
  
-   Чтобы отключить автоматическое **LinkDemand** и предотвратить возникновение исключения, можно поместить **AllowPartiallyTrustedCallersAttribute** атрибут в области действия сборки общей Библиотека. Этот атрибут позволяет вызывать библиотеки из частично доверенного управляемого кода.  
  
-   На частично доверенный код, получающий доступ к библиотеке при помощи этого атрибута, по-прежнему налагаются дополнительные ограничения, определяемые <xref:System.AppDomain>.  
  
-   Нет программные возможности для частично доверенного кода для вызова библиотеки, которая не имеет **AllowPartiallyTrustedCallersAttribute** атрибута.  
  
 Библиотеки, являющиеся собственными для определенного приложения не требуют строгого имени или **AllowPartiallyTrustedCallersAttribute** атрибута и не может ссылаться потенциально вредоносный код извне приложения. Такой код защищен от преднамеренного или непреднамеренного неправильного использования со стороны мобильного кода с частичным доверием, и никаких дополнительных действий со стороны разработчика не требуется.  
  
 Рекомендуется явно разрешить использование частично доверенным кодом для следующих типов кода.  
  
-   Код, который был тщательно протестирован на наличие уязвимостей безопасности и соответствует рекомендациям, приведенным в [правила написания безопасного кода](../../../docs/standard/security/secure-coding-guidelines.md).  
  
-   Строго именованные библиотеки кода, специально написанные для частично доверенных сценариев.  
  
-   Все компоненты (с частичным или полным доверием), подписанные строгим именем, которые будут вызываться кодом, скачанным из Интернета.  
  
> [!NOTE]
>  Некоторые классы в библиотеке классов .NET Framework не имеют **AllowPartiallyTrustedCallersAttribute** атрибута и не могут вызываться частично доверенным кодом.  
  
## <a name="see-also"></a>См. также  
 [Управление доступом для кода](../../../docs/framework/misc/code-access-security.md)
