---
title: "Практическое руководство. Включение трассировки WIF | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
ms.assetid: 271b6889-3454-46ff-96ab-9feb15e742ee
caps.latest.revision: 3
author: "BrucePerlerMS"
ms.author: "bruceper"
manager: "mbaldwin"
caps.handback.revision: 3
---
# Практическое руководство. Включение трассировки WIF
## Применение  
  
-   Основой \(WIF\) идентификатора Microsoft® Windows®  
  
-   ASP.NET® веб\-форм  
  
## Сводка  
 Это практические предоставляет подробные пошаговые процедуры для включения трассировки WIF в приложении ASP.NET.  Кроме того, инструкции проверки приложение проверять, что прослушиватель трассировки и журнал работают правильно.  Это практические не содержит подробные инструкции по созданию служба маркеров безопасности \(STS\), и вместо нее использует службу маркеров безопасности разработки, поставляемые с помощью идентификатора и доступа.  Служба маркеров безопасности реальную разработки не выполняет проверку подлинности и предназначена только для тестирования.  Необходимо разместить идентификатор и получить средство для выполнения инструкций данного практические.  Его можно загрузить из следующего расположения: [Средство идентификатора и доступа](http://go.microsoft.com/fwlink/?LinkID=245849)  
  
> [!IMPORTANT]
>  Включение трассировки для WIF пассивных применений, т. е. применений, использующие протокол WS\-Federation, потенциально может предоставлять приложения к атакам \(DoS\) атак типа " отказ в обслуживании " или к утечке информации для злоумышленника.  Это относится и к пассивный количестве запросов и пассивное STSes.  По этой причине рекомендуется, чтобы не включать трассировку для WIF пассивный или STSes количестве запросов в производственной среде.  
  
## Содержание  
  
-   Цели  
  
-   Обзор  
  
-   Сводка действий  
  
-   Шаг 1.создание простого приложения веб\-форм ASP.NET и включение трассировки  
  
-   Шаг 2.запуск решения  
  
## Цели  
  
-   Создание простого приложения ASP.NET, которое использует службу маркеров безопасности WIF и разработки от идентификатора и получить средство  
  
-   Включение трассировки и убедитесь, что она работает  
  
## Обзор  
 Трассировка позволяет отлаживать и устранить многие типы проблем с WIF, включая токены, COOKIE\-файлы, служба, сообщения протокола и т д  Трассировка WIF аналогична трассировке WCF; например, можно выбрать детализации трассировок для отображения всего от критических сообщений для всех сообщений.  WIF трассировки можно создавать в файлах **.xml** или **.svclog** в файлах, которые можно просмотреть с помощью средства Trace Viewer службы.  Эта программа находится в каталоге **bin** Windows SDK установит путь на компьютере, например: **C:\\Program Files\\Microsoft SDKs\\Windows\\v7.1\\Bin\\SvcTraceViewer.exe**.  
  
## Сводка действий  
  
-   Шаг 1.создание простого приложения веб\-форм ASP.NET и включение трассировки  
  
-   Шаг 2.запуск решения  
  
## Шаг 1.создание простого приложения веб\-форм ASP.NET и включение трассировки  
 На этом шаге необходимо создать новое приложение веб\-форм ASP.NET и изменить *файл web.config*, чтобы разрешить трассировку.  
  
#### Создание простого приложения ASP.NET  
  
1.  Запустите Visual Studio и щелкните **Файл**, **Создать** и **Проект**.  
  
2.  В поле **Создать проект**, щелкните **Приложение веб\-форм ASP.NET**.  
  
3.  В поле **Имя** введите `TestApp` и нажмите клавишу **ОК**.  
  
4.  Щелкните правой кнопкой мыши проект **TestApp** в **Обозреватель решений**, а затем выберите **Удостоверение и доступ**.  
  
5.  Окно **Удостоверение и доступ**.  В области **Поставщики**, выберите **Тестировать приложение с помощью локальной STS\-разработки** и нажмите кнопку **Применить**.  
  
6.  Создайте новую папку в именованном **журналы** в корневой папке диска, обозначенный как **C:**. **C:\\logs**  
  
7.  Добавьте следующий элемент **\<system.diagnostics\>** в *файл конфигурации Web.config* ее сразу после элемента **\<\/configSections\>**, как указано.  
  
    ```  
    <configuration>  
        <configSections>  
        …  
        </configSections>  
        <system.diagnostics>  
            <sources>  
                <source name="System.IdentityModel" switchValue="Verbose">  
                    <listeners>  
                        <add name="xml" type="System.Diagnostics.XmlWriterTraceListener" initializeData="C:\logs\WIF.xml" />  
                    </listeners>  
                </source>  
            </sources>  
            <trace autoflush="true" />  
        </system.diagnostics>  
    ```  
  
    > [!NOTE]
    >  Расположение каталога, указанное в атрибуте **initializeData** должно существовать до ведение журнала может начинаться.  Если расположение не существует, журналы не будет создан.  
  
     Параметры конфигурации вышеуказанных будет **Подробный** трассировку для WIF и сохранение полученной журнал в файл **C:\\logs\\WIF.xml**.  
  
## Шаг 2.запуск решения  
 На этом шаге будет выполняться в WIF\- включено приложение ASP.NET проверка журналов записываются.  
  
#### Выполнить проверку WIF\- включено приложение ASP.NET для успешной трассировки  
  
1.  Запустите решение, нажав клавишу **F5** ключ.  Необходимо с домашней страницей ASP.NET по умолчанию и автоматически на проверку подлинности с именем пользователя *terri*, которое пользователь по умолчанию, возвращаемых службой маркеров безопасности разработки.  
  
2.  Закройте окно браузера, а затем перейдите в папку **C:\\logs**.  Откройте файл **C:\\logs\\WIF.xml** с помощью текстового редактора.  
  
3.  Проверьте файл **WIF.xml** и убедитесь, что он содержит записи, начинающийся с **\<E2ETraceEvent\>**.  Данные трассировки содержат элементы **\<TraceRecord\>** с описаниями для отслеживаемой работы, например **Проверка SecurityToken**.