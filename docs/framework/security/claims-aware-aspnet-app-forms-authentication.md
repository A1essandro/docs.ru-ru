---
title: "Практическое руководство. Создание приложения ASP.NET, поддерживающего утверждения, использующего проверку подлинности на основе форм | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
ms.assetid: 98a3e029-1a9b-4e0c-b5d0-29d3f23f5b15
caps.latest.revision: 6
author: "BrucePerlerMS"
ms.author: "bruceper"
manager: "mbaldwin"
caps.handback.revision: 6
---
# Практическое руководство. Создание приложения ASP.NET, поддерживающего утверждения, использующего проверку подлинности на основе форм
## Применение  
  
-   Основой идентификатора Microsoft® Windows® \(WIF\)  
  
-   Веб\-формы ASP.NET®  
  
## Сводка  
 Это предоставляет подробные пошаговые процедуры по созданию простого утверждение\- осведомленное приложение веб\-формы ASP.NET, использующим проверку подлинности с помощью форм.  Он также предоставляет инструкции для тестирования приложения убедиться, что утверждения, когда пользователь вход с проверкой подлинности с помощью форм.  
  
## Содержимое  
  
-   Назначения  
  
-   Общие сведения  
  
-   Сводка шагов  
  
-   Шаг 1. создание простого приложения веб\-форм ASP.NET  
  
-   Шаг 2. настройка приложения веб\-форм ASP.NET для утверждений с использованием проверки подлинности с помощью форм  
  
-   Шаг 3 \- теста решение  
  
## Назначения  
  
-   Настройка приложения веб\-форм ASP.NET для утверждений с использованием проверки подлинности с помощью форм  
  
-   Проверьте приложение веб\-формы ASP.NET увидеть, если он работает корректно  
  
## Общие сведения  
 В .NET 4.5 WIF и авторизация на основе утверждение\- были включены как неотъемлемая часть платформы .NET Framework.  Ранее, при необходимости контроля от пользователей ASP.NET, которые были требуется задать WIF, а затем приведение интерфейсы в главный объекты, такие как `Thread.CurrentPrincipal` или `HttpContext.Current.User`.  Теперь работать автоматически следующие утверждения основными объектами.  
  
 Проверка подлинности с помощью форм помогала из результатов WIF в .NET 4.5, поскольку все пользователи, прошедшие проверку подлинности форм автоматически имеющие утверждения, связанные с ними.  Можно сразу начать использовать эти утверждения в приложении ASP.NET, использующим проверку подлинности с помощью форм, как это демонстрируете.  
  
## Сводка шагов  
  
-   Шаг 1. создание простого приложения веб\-форм ASP.NET  
  
-   Шаг 2. настройка приложения веб\-форм ASP.NET для утверждений с использованием проверки подлинности с помощью форм  
  
-   Шаг 3 \- теста решение  
  
## Шаг 1. создание простого приложения веб\-форм ASP.NET  
 На этом шаге создается новое приложение веб\-формы ASP.NET.  
  
#### Создать простое приложение ASP.NET  
  
1.  Запустите Visual Studio и щелкните **Файл**, **Создать**, а затем **Проект**.  
  
2.  В окне **Создать проект**, нажмите кнопку **приложение веб\-формы ASP.NET**.  
  
3.  В **Имя** введите `TestApp` и нажмите клавишу **ОК**.  
  
## Шаг 2. настройка приложения веб\-форм ASP.NET для утверждений с использованием проверки подлинности с помощью форм  
 На этом шаге добавляется запись конфигурации в *файл конфигурации Web.config* и alter Default.aspxfile для отображения данных типов утверждений для учетной записи.  
  
#### Настройка приложения ASP.NET для утверждений с использованием проверки подлинности с помощью форм  
  
1.  В *файле Default.aspx* замените существующие разметки следующим кодом:  
  
    ```  
    <%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="TestApp._Default" %>  
  
    <asp:Content runat="server" ID="BodyContent" ContentPlaceHolderID="MainContent">  
        <p>  
            This page displays the claims associated with a Forms authenticated user.          
        </p>  
        <h3>Your Claims</h3>  
        <p>  
            <asp:GridView ID="ClaimsGridView" runat="server" CellPadding="3">  
                <AlternatingRowStyle BackColor="White" />  
                <HeaderStyle BackColor="#7AC0DA" ForeColor="White" />  
            </asp:GridView>  
        </p>  
    </asp:Content>  
  
    ```  
  
     Этот шаг добавление элемента управления GridView на страницу *Default.aspx*, которая будет заполнитьа с утверждения, извлеченные из проверки подлинности с помощью форм.  
  
2.  Сохраните *файл Default.aspx*, а затем открыть ее файл с выделенным кодом Default.aspx.cs.  Замените существующий код следующим:  
  
    ```csharp  
    using System;  
    using System.Web.UI;  
    using System.Security.Claims;  
  
    namespace TestApp  
    {  
        public partial class _Default : Page  
        {  
            protected void Page_Load(object sender, EventArgs e)  
            {  
                ClaimsPrincipal claimsPrincipal = Page.User as ClaimsPrincipal;  
  
                if (claimsPrincipal != null)  
                {  
                    this.ClaimsGridView.DataSource = claimsPrincipal.Claims;  
                    this.ClaimsGridView.DataBind();  
                }  
            }  
        }  
    }  
    ```  
  
     Приведенный выше код отобразит утверждения о удостоверенном пользователя, в том числе пользователей, определенные проверкой подлинности с помощью форм.  
  
## Шаг 3 \- теста решение  
 На этом этапе тестируемого приложения веб\-форм ASP.NET и проверить, что утверждения, когда пользователь вход с проверкой подлинности с помощью форм.  
  
#### Тестирования приложения веб\-форм ASP.NET для утверждений с использованием проверки подлинности с помощью форм  
  
1.  Нажмите клавишу **F5** для построения и запуска приложения.  Необходимо с *Default.aspx,* имеющий **Зарегистрировать** и **Войти** ссылки в верхнем углу страницы.  Щелкните **Регистрация**.  
  
2.  На странице **Зарегистрировать** создайте учетную запись пользователя, а затем нажмите кнопку **Зарегистрировать**.  Учетная запись будет создана с использованием проверки подлинности с помощью форм и автоматически будет входитьы.  
  
3.  После того как были перенаправитьы на домашней странице, вы должны увидеть таблицу под заголовок **Собственные утверждения**, который включает **Поставщик**, **OriginalIssuer**, **Тип**, **Значение** и утверждения **ValueType** данные об учетной записи.