---
title: "Практическое руководство. Создание приложения ASP.NET, поддерживающего утверждения, использующего проверку подлинности Windows | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
ms.assetid: 11c53d9d-d34a-44b4-8b5e-22e3eaeaee93
caps.latest.revision: 5
author: "BrucePerlerMS"
ms.author: "bruceper"
manager: "mbaldwin"
caps.handback.revision: 5
---
# Практическое руководство. Создание приложения ASP.NET, поддерживающего утверждения, использующего проверку подлинности Windows
## Применение  
  
-   Основой идентификатора Microsoft® Windows® \(WIF\)  
  
-   Веб\-формы ASP.NET®  
  
## Сводка  
 Это предоставляет подробные пошаговые процедуры по созданию простого утверждение\- осведомленное приложение веб\-формы ASP.NET, использующим проверку подлинности Windows.  Он также предоставляет инструкции для тестирования приложения убедиться, что утверждения, когда пользователь вход используется проверка подлинности Windows.  
  
## Содержимое  
  
-   Назначения  
  
-   Общие сведения  
  
-   Сводка шагов  
  
-   Шаг 1. создание простого приложения веб\-форм ASP.NET  
  
-   Шаг 2. настройка приложения веб\-форм ASP.NET для утверждений, используя проверку подлинности Windows  
  
-   Шаг 3 \- теста решение  
  
## Назначения  
  
-   Настройка приложения веб\-форм ASP.NET для утверждений с использованием проверки подлинности Windows  
  
-   Проверьте приложение веб\-формы ASP.NET увидеть, если он работает корректно  
  
## Общие сведения  
 В .NET 4.5 WIF и авторизация на основе утверждение\- были включены как неотъемлемая часть платформы .NET Framework.  Ранее, при необходимости контроля от пользователей ASP.NET, которые были требуется задать WIF, а затем приведение интерфейсы в главный объекты, такие как `Thread.CurrentPrincipal` или `HttpContext.Current.User`.  Теперь работать автоматически следующие утверждения основными объектами.  
  
 Проверка подлинности Windows помогала из результатов WIF в .NET 4.5, поскольку все пользователи, авторизованные учетными данными Windows автоматически имеющие утверждения, связанные с ними.  Можно сразу начать использовать эти утверждения в приложении ASP.NET, которое использует проверку подлинности Windows, как это демонстрируете.  
  
## Сводка шагов  
  
-   Шаг 1. создание простого приложения веб\-форм ASP.NET  
  
-   Шаг 2. настройка приложения веб\-форм ASP.NET для утверждений, используя проверку подлинности Windows  
  
-   Шаг 3 \- теста решение  
  
## Шаг 1. создание простого приложения веб\-форм ASP.NET  
 На этом шаге создается новое приложение веб\-формы ASP.NET.  
  
#### Создать простое приложение ASP.NET  
  
1.  Запустите Visual Studio, а затем щелкните **Файл**, **Создать**, а затем **Проект**.  
  
2.  В окне **Создать проект**, нажмите кнопку **приложение веб\-формы ASP.NET**.  
  
3.  В **Имя** введите `TestApp` и нажмите клавишу **ОК**.  
  
4.  После создания проекта **TestApp** был щелкните его в **Обозреватель решений**.  Свойства проекта отображаются на панели **Свойства** в **Обозреватель решений**.  Установите свойство **Проверка подлинности Windows** к **Включено**.  
  
    > [!WARNING]
    >  Проверка подлинности Windows, отключенные по умолчанию в новых приложениях ASP.NET, поэтому необходимо вручную включить ее.  
  
## Шаг 2. настройка приложения веб\-форм ASP.NET для утверждений, используя проверку подлинности Windows  
 На этом шаге добавляется запись конфигурации в *файл конфигурации Web.config* и измените Default.aspxfile для отображения данных типов утверждений для учетной записи.  
  
#### Настройка приложения ASP.NET для утверждений с использованием проверки подлинности Windows  
  
1.  В *файле Default.aspx* проекта **TestApp** замените существующие разметки следующим кодом:  
  
    ```  
    <%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true"  
        CodeBehind="Default.aspx.cs" Inherits="TestApp._Default" %>  
  
    <asp:Content runat="server" ID="BodyContent" ContentPlaceHolderID="MainContent">  
        <p>  
            This page displays the claims associated with a Windows authenticated user.          
        </p>  
        <h3>Your Claims</h3>  
        <p>  
            <asp:GridView ID="ClaimsGridView" runat="server" CellPadding="3">  
                <AlternatingRowStyle BackColor="White" />  
                <HeaderStyle BackColor="#7AC0DA" ForeColor="White" />  
            </asp:GridView>  
        </p>  
    </asp:Content>  
  
    ```  
  
     Этот шаг добавление элемента управления GridView на страницу *Default.aspx*, которая будет заполнитьа с утверждения, извлеченные из проверки подлинности Windows.  
  
2.  Сохраните *файл Default.aspx*, а затем открыть ее файл с выделенным кодом Default.aspx.cs.  Замените существующий код следующим:  
  
    ```csharp  
    using System;  
    using System.Web.UI;  
    using System.Security.Claims;  
  
    namespace TestApp  
    {  
        public partial class _Default : Page  
        {  
            protected void Page_Load(object sender, EventArgs e)  
            {  
                ClaimsPrincipal claimsPrincipal = Page.User as ClaimsPrincipal;  
                this.ClaimsGridView.DataSource = claimsPrincipal.Claims;  
                this.ClaimsGridView.DataBind();  
            }  
        }  
    }  
    ```  
  
     Приведенный выше код отобразит утверждения о удостоверенном пользователя.  
  
3.  Чтобы изменить тип проверки подлинности приложения, измените блок **\<authentication\>** в разделе **\<system.web\>** *файл web.config* корневой папки проекта, чтобы он только будет содержать следующую запись конфигурации:  
  
    ```  
    <authentication mode="Windows" />  
    ```  
  
4.  Наконец, измените блок **\<authorization\>** в разделе **\<system.web\>** тот же *файл web.config*, чтобы заставить проверку подлинности.  
  
    ```  
    <authorization>  
        <deny users="?" />  
    </authorization>  
    ```  
  
## Шаг 3 \- теста решение  
 На этом этапе тестируемого приложения веб\-форм ASP.NET и проверить, что утверждения, когда пользователь вход с проверкой подлинности Windows.  
  
#### Тестирования приложения веб\-форм ASP.NET для утверждений с использованием проверки подлинности Windows  
  
1.  Нажмите клавишу **F5** для построения и запуска приложения.  Необходимо с *Default.aspx и* имя пользователя учетной записи Windows \(включая имя домена\) уже должно отображаться как прошедший проверку пользователь в верхнем углу страницы.  Содержимое страницы должно включать таблицу заполненную с утверждения, полученные от учетной записи Windows.