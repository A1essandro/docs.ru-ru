---
title: Настройка прокси-сервера
ms.date: 03/30/2017
helpviewer_keywords:
- Networking
- adaptive proxies
- static proxies
- Network Resources
- Internet, proxy configuration
- proxies
- network, proxy configuration
- proxies, configuring
ms.assetid: 353c0a8b-4cee-44f6-8e65-60e286743df9
author: mcleblanc
ms.author: markl
manager: markl
ms.openlocfilehash: 41e1dcee90531de605b6bddc1eedc1c44235d8eb
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/04/2018
ms.locfileid: "33397537"
---
# <a name="proxy-configuration"></a>Настройка прокси-сервера
Прокси-сервер обрабатывает клиентские запросы на ресурсы. Прокси-сервер может возвращать запрошенный ресурс из своего кэша или пересылать запрос на сервер, на котором находится данный ресурс. Прокси-серверы могут повышать производительность сети, благодаря уменьшению числа запросов, отправляемых на удаленные серверы. Прокси-серверы также можно использовать для ограничения доступа к ресурсам.  
  
## <a name="adaptive-proxies"></a>Адаптивные прокси-серверы  
 На платформе .NET Framework могут иметься прокси-серверы двух видов: адаптивные и статические. Адаптивный прокси-серверы настраивают свои параметры при изменении конфигурации сети. Например, если пользователь ноутбука запускает коммутируемое сетевое соединение, то адаптивный прокси-сервер определит это изменение, обнаружит и выполнит свой новый скрипт конфигурации, а также настроит свои параметры соответствующим образом.  
  
 Адаптивные прокси-серверы настраиваются с помощью скрипта конфигурации (см. раздел [Автоматическое обнаружение прокси-сервера](../../../docs/framework/network-programming/automatic-proxy-detection.md)). Скрипт создает набор протоколов приложений и прокси-сервер для каждого протокола.  
  
 Управление режимом выполнения скрипта конфигурации обеспечивают несколько параметров. Можно задать следующие параметры:  
  
-   Частота загрузки и выполнения скрипта конфигурации.  
  
-   Время ожидания загрузки скрипта.  
  
-   Учетные данные, которые ваша система должна использовать для доступа к прокси-серверу.  
  
-   Учетные данные, которые ваша система должна использовать для загрузки скрипта конфигурации.  
  
 В сетевой среде может потребоваться внесение изменений, если система использует новый набор прокси-серверов. Если сетевое соединение пропадает, или выполняется инициализация нового сетевого соединения, то система должна обнаружить соответствующий источник скрипта конфигурации в новой среде и запустить новый скрипт.  
  
 В следующей таблице содержатся параметры конфигурации для адаптивного прокси-сервера.  
  
|Параметр атрибута, свойства или файла конфигурации|Описание:|  
|--------------------------------------------------------|-----------------|  
|`scriptDownloadInterval`|Интервал времени в секундах между сеансами загрузки скрипта.|  
|`scriptDownloadTimeout`|Время ожидания (в секундах) загрузки скрипта.|  
|`useDefaultCredentials` или <xref:System.Net.WebProxy.UseDefaultCredentials>|Определяет, использует ли система для доступа к прокси-серверу сетевые учетные данные по умолчанию.|  
|`useDefaultCredentialForScriptDownload`|Определяет, использует ли система для загрузки скрипта конфигурации сетевые учетные данные по умолчанию.|  
|`usesystemdefaults`|Определяет, должны ли параметры статического прокси-сервера (адрес прокси-сервера, список обхода и локальный обход) считываться из параметров прокси-сервера Internet Explorer для пользователя. Если установлено значение «true», то будут использоваться параметры статического прокси-сервера из Internet Explorer.<br /><br /> Если установлено значение «false» (или значение вообще не задано), то параметры статического прокси-сервера можно указать в конфигурации, и они будут переопределять параметры прокси-сервера в Internet Explorer. Для включения адаптивного прокси-сервера необходимо установить значение «false» (либо вообще не задавать).|  
  
 В следующем примере показана конфигурация обычного адаптивного прокси-сервера.  
  
```xml  
<system.net>  
    <defaultProxy>  
      <proxy  scriptDownloadInterval="600"  
              scriptDownloadTimeout="30"  
              useDefaultCredentials="true"  
              usesystemdefaults="true"  
      />  
    </defaultProxy>  
</system.net>  
```  
  
## <a name="static-proxies"></a>Статические прокси-серверы  
 Статические прокси-серверы обычно настраиваются явным образом приложением, или когда файл конфигурации вызывается приложением или системой. Статические прокси-серверы применяются в сетях, топология которых изменяется редко, например, когда настольный компьютер подключен к корпоративной сети.  
  
 Работой статического прокси-сервера управляют несколько параметров. Можно задать следующие параметры:  
  
-   Адрес прокси-сервера.  
  
-   Определяет, нужно ли обходить прокси-сервер для локальных адресов.  
  
-   Определяет, нужно ли обходить прокси-сервер для набора адресов.  
  
 Ниже указаны параметры конфигурации для статического прокси-сервера.  
  
|Параметр атрибута, свойства или файла конфигурации|Описание:|  
|--------------------------------------------------------|-----------------|  
|`proxyaddress` или <xref:System.Net.WebProxy.Address>|Адрес используемого прокси-сервера.|  
|`bypassonlocal` или <xref:System.Net.WebProxy.BypassProxyOnLocal>|Определяет, выполняется ли обход прокси-сервера для локальных адресов.|  
|`bypasslist` или <xref:System.Net.WebProxy.BypassArrayList>|Описывает (с помощью регулярных выражений) набор адресов, которые обходят прокси-сервер.|  
|`usesystemdefaults`|Определяет, должны ли параметры статического прокси-сервера (адрес прокси-сервера, список обхода и локальный обход) считываться из параметров прокси-сервера Internet Explorer для пользователя. Если установлено значение «true», то будут использоваться параметры статического прокси-сервера из Internet Explorer. На платформе .NET Framework 2.0 (если установлено значение «true») параметры прокси-сервера обозревателя Internet Explorer не переопределяются другими параметрами прокси-сервера в файле конфигурации. На платформе .NET Framework 1.1 параметры прокси-сервера обозревателя Internet Explorer могут переопределяться другими параметрами прокси-сервера в файле конфигурации.<br /><br /> Если установлено значение «false» (или значение вообще не задано), то параметры статического прокси-сервера можно указать в конфигурации, и они будут переопределять параметры прокси-сервера в Internet Explorer. Для включения адаптивного прокси-сервера необходимо установить значение «false» (либо вообще не задавать).|  
  
 В следующем примере показана типовая конфигурация адаптивного прокси-сервера.  
  
```xml  
<system.net>  
    <defaultProxy>  
        <proxy  proxyaddress="http://proxy.contoso.com:3128"  
                bypassonlocal="true"  
        />  
        <bypasslist>  
            <add address="[a-z]+.blueyonderairlines.com$" />  
        </bypasslist>  
    </defaultProxy>  
</system.net>  
```  
  
## <a name="see-also"></a>См. также  
 <xref:System.Net.WebProxy>  
 <xref:System.Net.GlobalProxySelection>  
 [Автоматическое обнаружение прокси-сервера](../../../docs/framework/network-programming/automatic-proxy-detection.md)
