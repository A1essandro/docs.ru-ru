---
title: "Публикация и разрешение имени однорангового узла | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework"
ms.reviewer: ""
ms.suite: ""
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "VB"
  - "CSharp"
  - "C++"
  - "jsharp"
ms.assetid: f0370e08-9fa6-4ee5-ab78-9a58a20a7da2
caps.latest.revision: 5
author: "mcleblanc"
ms.author: "markl"
manager: "markl"
caps.handback.revision: 5
---
# Публикация и разрешение имени однорангового узла
## Публиковать имя однорангового узла  
 Чтобы опубликовать новый идентификатор PNRP, одноранговый узел выполняет следующие действия:  
  
-   Отправляет сообщения публикации PNRP на его соседям кэша \(узлом, зарегистрирован идентификаторы PNRP на самом низком уровне кэша\), чтобы осеменить их кэши.  
  
-   Выбирает случайные узлы в облаке, не являющиеся ее соседей и отправляет их запросы разрешения имен протокола PNRP для собственного идентификатора P2P  Результирующая процесс определения конечной точки осеменяет кэши случайных узлов в облаке PNRP с идентификатором одноранговой публикации.  
  
 Узлы версия 2 протокола PNRP не публикуют идентификаторы PNRP, только если они позволяют другие идентификаторы P2P.  Значение реестра HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\PeerNet\\PNRP\\IPV6\-Global\\SearchOnly\=1 определяет, что узлы только используют протокол PNRP для разрешения имен, никогда для публикации имени.  Это значение реестра можно настраивать через групповую политику.  
  
## Разрешения имени однорангового узла  
 Найти другие одноранговые узлы в сети или облака PNRP процесс, состоящий из 2 шагов:  
  
1.  Определение конечных точек  
  
2.  Разрешение идентификатор PNRP  
  
 В шаге определения конечной точки, узел, который пытается разрешить идентификатор PNRP служб на другом компьютере, указывающее адрес IP версии 6 для удаленного узла.  Удаленный одноранговый узел, публиковало или связать с идентификатор PNRP, компьютера или службы.  
  
 После подтверждения того, что удаленная конечная точка была зарегистрирована в облаке PNRP, запрашивающего одноранговый узел на этапе разрешения идентификатор PNRP отправляет запрос на этой конечной точке однорангового облака PNRP для идентификатор требуемой службы.  Конечная точка отправляет ответ подтвердя идентификатор PNRP службы, комментариев и до 4 килобайт дополнительной информации, запрашивающего узел может использоваться для будущего сообщения.  Например, если нужная конечная точка сервера разыгрыша дополнительные сведения о записи имен одноранговых узелов, могут содержать сведения об игре, уровне игры и текущем количестве проигрывателей.  
  
 В шаге определения конечной точки, используется протокол PNRP итеративный процесс для поиска узла, публиковал идентификатор PNRP, в котором узел выполняя разрешение, можно последовательно узлы, которые отвечает за связаться с ближней к идентификатору PNRP целевого объекта  
  
 Для разрешения имен протокола PNRP одноранговый рассматривает записи в собственном кэше для записи, соответствующее идентификатору PNRP целевого объекта  Если найдено одноранговый отправляет сообщение запроса PNRP к узлу и ожидает ответа.  Если не найдено запись для идентификатора PNRP, то узел отправляет сообщение запроса PNRP к узлу, который соответствует записи, которая имеет идентификатор PNRP, который наиболее близко соответствует идентификатору PNRP целевого объекта  Узел, который получает сообщение запроса PNRP проверяет свой кэш и выполняет следующие действия:  
  
-   Если идентификатор PNRP найдено, то узел конечной точки, запрашивающий запрошенного отвечает непосредственно к узлу.  
  
-   Если идентификатор PNRP не найдено и идентификатор PNRP в кэше ближе к идентификатор PNRP целевого объекта, то запрашиваемое отправляет ответ на одноранговый узел, запрашивающий IP версии 6, содержащий адрес однорангового узла, который представляет запись с идентификатором PNRP, наиболее близко соответствует идентификатору PNRP целевого объекта  С помощью ip\-адреса в ответе, запрашивающего узел отправляет другое сообщение запроса PNRP на адрес IP версии 6 для ответа или просмотреть свой кэш.  
  
-   Если идентификатор PNRP не найдено и идентификатор PNRP в своем кэше, который ближе к идентификатор PNRP целевого объекта одноранговый узел, запрашивающий запрошенного отправляет ответ, указывающий, что это условие.  При запросе одноранговым затем выбирает ближайшее следующ\- идентификатор PNRP  
  
 При запросе одноранговым продолжает этот процесс с последовательными итерации, наконец, используемых при нахождении узел, который регистрировал идентификатор PNRP  
  
 В пространстве имен <xref:System.Net.PeerToPeer>, " многие ко многим " между записями <xref:System.Net.PeerToPeer.PeerName>, которые содержат конечные точки и облака PNRP или сетки в которых они взаимодействуют.  При повторяющихся или устаревшие записи или несколько узлов с тем же именем однорангового узла узлов PNRP, могут получить текущие сведения, используя класс <xref:System.Net.PeerToPeer.PeerNameResolver>.  Методы <xref:System.Net.PeerToPeer.PeerNameResolver> использующие одно имя однорангового узла для упрощения перспективу в записей одного одноранговый\-к\- много имени однорангового узла и того же одному узлу для нескольких облаков.  Это похоже на запрос запустите реляционн\- с помощью соединения таблиц.  При успешном завершении объект распознавателя получает <xref:System.Net.PeerToPeer.PeerNameRecordCollection> для указанного имени однорангового узла.  Например, имя однорангового узла произошло бы на всех записей имен одноранговых узелов в облаке, упорядоченной коллекции.  Эти экземпляры имени однорангового узла данные которого поддержка может быть предложено Протокол на PNRP\- приложением.  
  
## См. также  
 <xref:System.Net.PeerToPeer>