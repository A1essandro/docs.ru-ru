---
title: "XAML Security Considerations | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-wpf"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "security [XAML Services], .NET XAML services"
  - "XAML security [XAML Services]"
ms.assetid: 544296d4-f38e-4498-af49-c9f4dad28964
caps.latest.revision: 7
author: "wadepickett"
ms.author: "wpickett"
manager: "wpickett"
caps.handback.revision: 7
---
# XAML Security Considerations
В этом разделе приводятся рекомендации по обеспечению безопасности приложений при использовании XAML и API\-интерфейсов служб XAML платформы .NET Framework.  
  
## Ненадежный код XAML в приложениях  
 В самом общем смысле ненадежный код XAML — это любой источник XAML, который не был специально включен или выдан приложением.  
  
 Код XAML, скомпилированный или хранящийся в виде ресурса типа `resx` в доверенной и подписанной сборке, не является по определению ненадежным.  Коду XAML можно доверять настолько же, насколько можно доверять сборке в целом.  В большинстве случаев предмет для беспокойства представляют только вопросы доверия свободного XAML — источника XAML, загружаемого из потока или другого средства ввода\-вывода.  Свободный XAML не является отдельным компонентом или функцией модели приложения с инфраструктурой развертывания и упаковки.  Тем не менее, сборка может реализовывать поведение, предполагающее загрузку свободного XAML.  
  
 К ненадежному источнику XAML обычно следует относиться точно так же, как и к ненадежному коду.  Чтобы помешать ненадежному коду XAML получить доступ к доверенному коду, используйте "песочницу" или другие метафоры.  
  
 Природа возможностей XAML предоставляет коду XAML право создавать объекты и задавать их свойства.  В число этих возможностей также входят доступ к преобразователям типов, сопоставление сборок в домене приложения и доступ к ним, использование расширений разметки, блоки `x:Code` и т. д.  
  
 Помимо возможностей уровня языка, во многих технологиях XAML используется для определения пользовательского интерфейса.  Загрузка ненадежного кода XAML потенциально означает загрузку вредоносного поддельного пользовательского интерфейса.  
  
## Совместное использование контекста средствами чтения и записи  
 Архитектуре служб XAML платформы .NET Framework для средств чтения и записи XAML часто требуется предоставление средства чтения XAML средству записи XAML или общий контекст схемы XAML.  Совместное использование объектов или контекстов может требоваться при написании логики цикла узлов XAML или предоставлении пользовательского пути сохранения.  Не следует в доверенном и ненадежном коде совместно использовать экземпляры средств чтения XAML, контекст схемы XAML, не являющийся контекстом по умолчанию, или значения для классов средств чтения\/записи XAML.  
  
 Для большинства сценариев и операций, использующих запись объектов XAML для резервирования типов на основе CLR, может быть достаточным использование контекста схемы XAML по умолчанию.  Контекст схемы XAML по умолчанию явно не содержит параметров, которые могли бы скомпрометировать полное доверие.  Таким образом, она безопасна для совместного использования контекста доверенными и ненадежными компонентами средств чтения\/записи XAML.  Но и в этом случае рекомендуется помещать такие средства чтения и записи в отдельные области <xref:System.AppDomain>, специально назначая\/выделяя одно из них для частичного доверия.  
  
## Пространства имен XAML и доверие к сборке  
 В базовом неполном синтаксисе и в определении того, как код XAML интерпретирует пользовательское сопоставление пространства имен XAML сборке, не различаются доверенные и ненадежные сборки, загруженные в домен приложения.  Таким образом, для ненадежной сборки технически возможно подделать предполагаемое сопоставление пространства имен XAML для доверенной сборки и захватить данные об объявленном объекте и свойствах источника XAML.  Если по требованиям безопасности необходимо избежать подобной ситуации, предполагаемое сопоставление пространства имен XAML следует выполнить, используя один из следующих способов.  
  
-   В любом сопоставлении пространства имен XAML, выполняемом кодом XAML приложения, используйте полное имя сборки со строгим именем.  
  
-   Ограничьте сопоставление сборки фиксированным набором эталонных сборок, создавая конкретный контекст <xref:System.Xaml.XamlSchemaContext> для своих средств чтения и записи объектов XAML.  См. раздел <xref:System.Xaml.XamlSchemaContext.%23ctor%28System.Collections.Generic.IEnumerable%7BSystem.Reflection.Assembly%7D%29>.  
  
## Сопоставление типов XAML и доступ к системе типов  
 XAML поддерживает свою собственную систему типов, которая во многом похожа на то, как среда CLR реализует базовую систему типов CLR.  Но для определенных аспектов распознавания типов, принимая решения о доверии для типа на основе соответствующих сведений о типе, следует обратиться к сведениям о типах в резервных типах среды CLR.  Это вызвано тем, что некоторые отдельные функции сообщения информации системы типов XAML оставлены открытыми в качестве виртуальных методов и, таким образом, не полностью управляются исходными реализациями служб XAML платформы .NET Framework.  Эти точки расширения существуют, потому что система типов XAML является расширяемой, чтобы соответствовать расширяемости самого языка XAML и его возможных альтернативных стратегий сопоставления типов по сравнению с реализацией по умолчанию на основе среды CLR и контекста схемы XAML по умолчанию.  Дополнительные сведения см. в конкретных замечаниях для различных свойств классов <xref:System.Xaml.XamlType> и <xref:System.Xaml.XamlMember>.  
  
## См. также  
 <xref:System.Xaml.Permissions.XamlAccessLevel>