---
title: Контекст схемы языка XAML по умолчанию и контекст схемы языка XAML WPF
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-wpf
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 04e06a15-09b3-4210-9bdf-9a64c2eccb83
caps.latest.revision: 7
author: wadepickett
ms.author: wpickett
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: ec5e29ae9022470f8b583dc1b673a0b93040c862
ms.sourcegitcommit: 86adcc06e35390f13c1e372c36d2e044f1fc31ef
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2018
---
# <a name="default-xaml-schema-context-and-wpf-xaml-schema-context"></a>Контекст схемы языка XAML по умолчанию и контекст схемы языка XAML WPF
Контекст схемы XAML представляет собой концептуальную сущность, который определяет, каким образом рабочей среды XAML, который использует определенный словарь XAML взаимодействует с поведением записи объектов, включая порядок разрешения сопоставлений типов, как сборки загружаются, как определенные средства чтения и записи параметры интерпретируются. В этом разделе описываются функции служб XAML .NET Framework и контекст схемы XAML по умолчанию, которая основана на системе типов среды CLR. Кроме того, в этом разделе описывается контекст схемы XAML, который используется для WPF.  
  
## <a name="default-xaml-schema-context"></a>Контекст схемы XAML по умолчанию  
 Службы XAML .NET framework реализует и использует контекст схемы XAML по умолчанию. Поведение контекста схемы XAML по умолчанию не всегда полностью отображены в API-Интерфейс <xref:System.Xaml.XamlSchemaContext> класса. Однако во многих случаях поведение, которое влияет контекст схемы XAML по умолчанию, можно наблюдать через общий API в системе типов XAML, такие как члены <xref:System.Xaml.XamlMember> или <xref:System.Xaml.XamlType>, или через API-интерфейсы, предоставляемые средствами чтения и записи XAML, которые используют контекст схемы XAML по умолчанию.  
  
 Можно создать <xref:System.Xaml.XamlSchemaContext> , инкапсулирующий поведение по умолчанию путем вызова <xref:System.Xaml.XamlSchemaContext> конструктор. При этом явно создается контекст схемы XAML по умолчанию. Этот же контекст схемы XAML по умолчанию создается неявно, если инициализировать средство чтения XAML и средство записи XAML, с помощью API-интерфейсы, не принимающие явным образом <xref:System.Xaml.XamlSchemaContext> входного параметра.  
  
 Контекст схемы XAML по умолчанию основывается на отражении поведение сопоставления типов среды CLR. Сюда входит рассмотрение определение CLR <xref:System.Type>, а также связанные <xref:System.Reflection.PropertyInfo> или <xref:System.Reflection.MethodInfo>. Кроме того атрибуты среды CLR на типы или члены используются для заполнения в особенности для типа XAML или элементов XAML, использующий среду CLR резервного типа. Контекст схемы XAML по умолчанию не требует методик расширения системы типов, таких как `Invoker` шаблон, поскольку необходимую информацию можно получить из системы типов среды CLR.  
  
 Логики загрузки сборок контекст схемы XAML по умолчанию полагается главным образом на значения сборок в сопоставления пространства имен XAML. Кроме того <xref:System.Xaml.XamlReaderSettings.LocalAssembly%2A> можно указание сборки для загрузки для сценариев, таких как загрузка внутренних типов.  
  
## <a name="wpf-xaml-schema-context"></a>Контекст схемы XAML WPF  
 Контекст схемы WPF XAML описан в данном разделе, так как реализация WPF приведена иллюстрация интересных возможностей, которые можно получить путем реализации контекста схемы XAML не по умолчанию. Кроме того концепции контекста схемы XAML не рассматривается сильно в документации по WPF, который обращается WPF XAML; поведение, которое обеспечивает контекст схемы XAML может быть только полного понимания описание того, как работает контекст схемы XAML по умолчанию. Контекст схемы XAML в WPF реализует следующее поведение.  
  
 **Переопределяет уточняющего запроса:** WPF имеется несколько моделей содержимого для XAML там, где имеются свойства содержимого XAML, работающие без, <xref:System.Windows.Markup.ContentPropertyAttribute> атрибутами. <xref:System.Xaml.XamlType.LookupContentProperty%2A> переопределения для WPF реализации этого поведения.  
  
 **Задержка для выражений WPF:** WPF функции несколько классов выражение, значение отложить, пока не станет доступен контекст среды выполнения. Кроме того расширение шаблона — поведение во время выполнения, который основывается на методиках отсрочки.  
  
 **Введите Оптимизация поиска в системе:** WPF располагает широко XAML терминологию и объект модели, включая определения членов базовых классов, наследуемых буквально сотни классов, определенных в WPF. Кроме того сам WPF распределены между несколькими сборками. WPF оптимизирует поиск типов использованию таблиц подстановки и других способов. Это обеспечивает повышение производительности через контекст схемы XAML по умолчанию и поиск типов, основанных на среде CLR. В случаях, где типы не существуют в таблице подстановки в поведении используются методики контекста схемы XAML, которые похожи на контекст схемы XAML по умолчанию.  
  
 **Расширение XamlType и XamlMember:** WPF расширяет понятия свойств со свойствами зависимости и основные понятия событий с помощью перенаправленных событий. Чтобы предоставить больше видимость этих концепций для операций обработки XAML, WPF расширяет <xref:System.Xaml.XamlType> и <xref:System.Xaml.XamlMember>и добавляет внутренние свойства, свойство зависимостей отчета и перенаправленные события характеристики.  
  
### <a name="accessing-the-wpf-xaml-schema-context"></a>Доступ к контексту схемы XAML в WPF  
 Если вы используете методы XAML, которые основаны на WPF <xref:System.Windows.Markup.XamlReader?displayProperty=nameWithType> или <xref:System.Windows.Markup.XamlWriter?displayProperty=nameWithType>, контекста схемы WPF XAML уже используется на эти средства чтения XAML и реализациях средств записи XAML.  
  
 Если вы используете другие средства чтения XAML и реализациях средств записи XAML, которые не инициализируются с контекстом схемы XAML в WPF, можно получить работающий WPF XAML, контекст схемы из <xref:System.Windows.Markup.XamlReader.GetWpfSchemaContext%2A?displayProperty=nameWithType>. Это значение можно затем использовать для других API, использовать инициализации <xref:System.Xaml.XamlSchemaContext>. Например, можно назвать <xref:System.Xaml.XamlXmlReader.%23ctor%2A> для инициализации и передать контекст схемы XAML в WPF. Или можно использовать контекст схемы XAML в WPF для операций с системой типов XAML. Это может включать инициализацию конструктором <xref:System.Xaml.XamlType> или <xref:System.Xaml.XamlMember>, или вызов <xref:System.Xaml.XamlSchemaContext.GetXamlType%2A?displayProperty=nameWithType>.  
  
 Обратите внимание, что при обращении к некоторые аспекты WPF XAML чисто зрения потока узлов XAML некоторые возможности платформы WPF может не еще не задействованы. Например шаблоны WPF для элементов управления еще не применены. Таким образом при доступе к свойство, которое может быть заполнен полной визуального дерева во время выполнения, могут видеть только значение свойства, ссылающееся на шаблон. Контекст службы, предоставляемый для расширений разметки WPF может быть не точным, если он предоставляется не во время выполнения и могут привести к исключениям при попытке записи графа объектов.  
  
## <a name="xaml-and-assembly-loading"></a>XAML и загрузка сборок  
 Загрузка сборок для XAML и служб XAML .NET Framework интегрируется с понятием определенные CLR <xref:System.AppDomain>. Контекст схемы XAML интерпретирует порядок загрузки сборок, либо поиска типов во время выполнения или во время разработки, основываясь на использование <xref:System.AppDomain> и других факторов. Логика немного отличается в зависимости от того, является ли XAML Свободный XAML для средства чтения XAML, будет скомпилирован в библиотеку DLL с помощью XAML `XamlBuildTask`, или BAML создаваемые WPF `PresentationBuildTask`.  
  
 Контекст схемы XAML для WPF интегрируется с моделью приложения WPF, которая в свою очередь использует <xref:System.AppDomain> а также других факторов, которые являются подробностями реализации WPF.  
  
#### <a name="xaml-reader-input-loose-xaml"></a>Входные данные средства чтения XAML (Свободный XAML)  
  
1.  Контекст схемы XAML проходит по <xref:System.AppDomain> приложения с целью поиска сборки уже загружена, соответствующей всем аспектам имени, начиная с наиболее недавно загруженной сборки. Если найдено совпадение, найденная сборка используется для разрешения.  
  
2.  В противном случае — один из следующих методов на основе CLR <xref:System.Reflection.Assembly> API используются для загрузки сборки:  
  
    -   Если имя определено в сопоставлении, вызовите <xref:System.Reflection.Assembly.Load%28System.String%29?displayProperty=nameWithType> на полное имя.  
  
    -   Если ранее не удается, используйте короткое имя (и токен открытого ключа при его наличии) для вызова <xref:System.Reflection.Assembly.Load%28System.String%29?displayProperty=nameWithType>.  
  
    -   Если имя не определено в сопоставлении, вызовите <xref:System.Reflection.Assembly.LoadWithPartialName%2A?displayProperty=nameWithType>.  
  
#### <a name="xamlbuildtask"></a>XamlBuildTask  
 `XamlBuildTask` используется для [!INCLUDE[vsindigo](../../../includes/vsindigo-md.md)] и Windows Workflow Foundation.  
  
 Обратите внимание, что в ссылки на сборку `XamlBuildTask` всегда являются полными.  
  
1.  Вызов <xref:System.Reflection.Assembly.Load%28System.String%29?displayProperty=nameWithType> на полное имя.  
  
2.  Если ранее не удается, используйте короткое имя (и токен открытого ключа при его наличии) для вызова <xref:System.Reflection.Assembly.Load%28System.String%29?displayProperty=nameWithType>.  
  
#### <a name="baml-presentationbuildtask"></a>BAML (PresentationBuildTask)  
 Существует два аспекта загрузки сборок для BAML: загрузка первоначальной сборки, содержащей BAML как компонент и загрузка сборок резервирования типов для всех типов ссылается производство BAML.  
  
##### <a name="assembly-load-for-initial-markup"></a>Загрузка сборок для первоначальной разметки:  
 Ссылку на сборку, подлежащую загрузке разметка из всегда является неполным.  
  
1.  Контекст схемы WPF XAML перебор <xref:System.AppDomain> приложения WPF с целью поиска сборки уже загружена, соответствующей всем аспектам имени, начиная с наиболее недавно загруженной сборки. Если найдено совпадение, найденная сборка используется для разрешения.  
  
2.  Если ранее не удается, используйте короткое имя (и токен открытого ключа при его наличии) для вызова <xref:System.Reflection.Assembly.Load%28System.String%29?displayProperty=nameWithType>.  
  
##### <a name="assembly-references-by-baml-types"></a>Ссылки на сборки BAML типами:  
 Ссылки на сборки для типов, используемых в производстве BAML, всегда полностью определены, как выходные данные задачи построения.  
  
1.  Контекст схемы WPF XAML перебор <xref:System.AppDomain> приложения WPF с целью поиска сборки уже загружена, соответствующей всем аспектам имени, начиная с наиболее недавно загруженной сборки. Если найдено совпадение, найденная сборка используется для разрешения.  
  
2.  В противном случае — одно из следующих способов используется для загрузки сборки:  
  
    -   Вызов <xref:System.Reflection.Assembly.Load%28System.String%29?displayProperty=nameWithType> на полное имя.  
  
    -   Если короткое имя + открытый маркера сочетание клавиш соответствуют сборки, загруженные из BAML, используйте эту сборку.  
  
    -   Используйте короткое имя + токен открытого ключа для вызова <xref:System.Reflection.Assembly.Load%28System.String%29?displayProperty=nameWithType>.  
  
## <a name="see-also"></a>См. также  
 [Общее представление о понятиях и структурах потока узлов XAML](../../../docs/framework/xaml-services/understanding-xaml-node-stream-structures-and-concepts.md)
