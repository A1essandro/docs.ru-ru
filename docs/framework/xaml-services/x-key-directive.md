---
title: "x:Key Directive | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-wpf"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "xKey"
  - "Key"
  - "x:Key"
helpviewer_keywords: 
  - "x:Key attribute [XAML Services]"
  - "Key attribute in XAML [XAML Services]"
  - "XAML [XAML Services], x:Key attribute"
ms.assetid: 1985cd45-f197-42d5-b75e-886add64b248
caps.latest.revision: 25
author: "wadepickett"
ms.author: "wpickett"
manager: "wpickett"
caps.handback.revision: 25
---
# x:Key Directive
Однозначно определяет элементы, которые создаются и ссылки на которые задаются в словаре XAML.  Добавление значения `x:Key` в элементу объекта XAML — наиболее распространенный способ идентификации ресурса в словаре ресурсов, например в WPF <xref:System.Windows.ResourceDictionary>.  
  
## Использование атрибута XAML  
  
```  
<object x:Key="stringKeyValue".../>  
-or-  
<object x:Key="{markupExtensionUsage}".../>  
```  
  
## Использование атрибутов XAML \(относящихся к WPF\)  
  
```  
<object.Resources>  
  <object x:Key="stringKeyValue".../>  
</object.Resources>  
-or-  
<object.Resources>  
  <object x:Key="{markupExtensionUsage}".../>  
</object.Resources>  
```  
  
## Значения XAML  
  
|||  
|-|-|  
|`stringKeyValue`|Текстовая строка для использования в качестве ключа.  Текстовая строка должно соответствовать [Грамматика XamlName](../../../docs/framework/xaml-services/xamlname-grammar.md).|  
|`markupExtensionUsage`|В пределах разделителей расширение разметки {} расширение разметки, предоставляющее объект, который будет использоваться в качестве ключа.  См. примечания.|  
  
## Заметки  
 `x:Key`поддерживает концепцию объединенного словаря ресурсов XAML.  Язык XAML не определяет реализация словаря ресурсов, это делается в конкретных платформах пользовательского интерфейса.  Подробнее о реализации словарей ресурсов XAML в WPF см. в разделе [Ресурсы XAML](../../../docs/framework/wpf/advanced/xaml-resources.md).  
  
 В XAML 2006 и WPF `x:Key` должен быть указан как атрибут.  Можно по\-прежнему пользоваться нестроковыми ключами, но это требует расширение разметки для предоставления нестрокового значения в виде атрибута.  Если используется XAML 2009, то `x:Key` можно указать как элемент для явной поддержки словарей, ключами которых являются типы объектов, отличные от строк, без необходимости промежуточного расширения разметки.  См. подраздел "XAML 2009" этого раздела.  Остаток раздела "Примечания" применяется к реализации XAML 2006.  
  
 Значением атрибута `x:Key` может быть любая строка, определенная в [Грамматика XamlName](../../../docs/framework/xaml-services/xamlname-grammar.md), или объект, вычисленный с помощью расширения разметки.  Пример WPF см. в разделе "Примечания об использовании WPF".  
  
 Дочерние элементы родительского элемента, которые являются реализацией <xref:System.Collections.IDictionary>, обычно должны включать атрибут `x:Key`, который задает уникальное значение ключа в пределах этого словаря.  Платформы могут реализовать псевдонимы ключевых свойств для замены `x:Key` в определенных типах; типы, определяющие такие свойства, должны быть снабжены атрибутом <xref:System.Windows.Markup.DictionaryKeyPropertyAttribute>.  
  
 Код, эквивалентный заданию `x:Key`, является ключом, используемым для базового <xref:System.Collections.IDictionary>.  Например, `x:Key`, применяемый в разметке для ресурса в WPF, эквивалентен значению параметра `key` метода <xref:System.Windows.ResourceDictionary.Add%2A?displayProperty=fullName> при добавлении ресурса в объект <xref:System.Windows.ResourceDictionary> WPF в коде.  
  
## Примечания об использовании WPF  
 Дочерние объекты родительского объекта, которые являются реализацией <xref:System.Collections.IDictionary>, например <xref:System.Windows.ResourceDictionary> WPF, обычно должны включать атрибут `x:Key`, а значение ключа должно быть уникальным в пределах этого словаря.  Существует два важных исключения:  
  
-   Некоторые типы WPF объявляют неявный ключ для использования словаря.  Например, объект <xref:System.Windows.Style> со свойством <xref:System.Windows.Style.TargetType%2A> или объект <xref:System.Windows.DataTemplate> со свойством <xref:System.Windows.DataTemplate.DataType%2A> может находиться в объекте <xref:System.Windows.ResourceDictionary> и использовать неявный ключ.  
  
-   WPF поддерживает концепцию объединенного словаря ресурсов.  Ключи могут совместно использоваться объединенными словарями, а поведение общего ключа может быть доступно с помощью <xref:System.Windows.FrameworkContentElement.FindResource%2A>.  Для получения дополнительной информации см. [Объединенные словари ресурсов](../../../docs/framework/wpf/advanced/merged-resource-dictionaries.md).  
  
 В общей реализации WPF XAML и модели приложения уникальность ключа не проверяется компилятором разметки XAML.  Вместо этого, если значения `x:Key` отсутствуют или не являются уникальными, возникают ошибки средства синтаксического анализа XAML во время загрузки.  Однако обработка словарей для WPF в [!INCLUDE[vs_current_short](../../../includes/vs-current-short-md.md)] часто обнаруживает такие ошибки на этапе разработки.  
  
 Обратите внимание, что в приведенном синтаксисе объект <xref:System.Windows.ResourceDictionary> является неявным с точки зрения того, как процессор WPF XAML создает коллекцию для заполнения коллекции <xref:System.Windows.FrameworkElement.Resources%2A>.  Обычно элемент <xref:System.Windows.ResourceDictionary> не предоставляется явно как элемент в разметке, хотя в некоторых случаях может присутствовать для ясности \(он будет являться элементом объекта коллекции между элементом свойства <xref:System.Windows.FrameworkElement.Resources%2A> и элементами, которые заполняют словарь\).  Сведения о том, почему объект коллекции почти всегда является неявным элементом в разметке, см. в разделе [Подробное описание синтаксиса XAML](../../../docs/framework/wpf/advanced/xaml-syntax-in-detail.md).  
  
 В реализации XAML WPF обработка ключей словаря ресурсов определяется абстрактным классом <xref:System.Windows.ResourceKey>.  Тем не менее процессор WPF XAML создает различные типы базовых расширений для ключей в зависимости от их применения.  Например, ключ для <xref:System.Windows.DataTemplate> или любого производного класса обрабатывается отдельно и создается объект <xref:System.Windows.DataTemplateKey>.  
  
 Ключи и имена используют различные директивы и языковые элементы \(`x:Key` по сравнению с `x:Name`\) в базовом определении XAML.  Ключи и имена также используются в различных ситуациях определением WPF и приложением этих концепций.  Дополнительные сведения см. в разделе [Области видимости имен XAML в WPF](../../../docs/framework/wpf/advanced/wpf-xaml-namescopes.md).  
  
 Как уже указывалось ранее, значение ключа может предоставляться через расширение разметки и отличаться от строкового значения.  Примером WPF\-сценария является ситуация, в которой значением `x:Key` может быть [ComponentResourceKey](../../../docs/framework/wpf/advanced/componentresourcekey-markup-extension.md).  Некоторые элементы управления предоставляют ключ стиля такого типа для пользовательского ресурса стиля, который частично изменяет внешний вид и поведение этого элемента управления без полной замены стиля.  Примером такого ключа является <xref:System.Windows.Controls.ToolBar.ButtonStyleKey%2A>.  
  
 Функция объединенного словаря WPF представляет дополнительные соображения относительно поведения подстановки ключа и уникальности ключа.  Для получения дополнительной информации см. [Объединенные словари ресурсов](../../../docs/framework/wpf/advanced/merged-resource-dictionaries.md).  
  
## XAML 2009  
 XAML 2009 ослабляет ограничение, которое заключается в том, что `x:Key` всегда предоставляется в виде атрибута.  
  
 В WPF можно использовать возможности XAML 2009, но только для кода XAML, который не является компилированной разметкой.  XAML с компилированной разметкой для WPF и форма BAML кода XAML в настоящее время не поддерживают ключевые слова и возможности XAML 2009.  
  
 В XAML 2009 можно указать элементы `x:Key` следующим образом:  
  
### Использование элементов XAML \(только для XAML 2009\)  
  
```  
<object>  
  <x:Key>  
     keyObject  
  </x:Key>  
...  
</object>  
```  
  
### Значения XAML  
  
|||  
|-|-|  
|`keyObject`|Объектный элемент для объекта, который используется в качестве ключа для заданного `object` в специализированном словаре.|  
  
-   Контейнер\/родитель для этого типа использования здесь не показан.  `object` должен быть потомком объектного элемента, представляющего реализацию специализированного словаря.  `keyObject` должен быть экземпляром объекта \(или значением типа значения\), подходящего в качестве ключа для этой конкретной реализации специализированного словаря.  
  
-   WPF не реализует словари, для которых необходимо такое использование.  Ключи объектов – это более общая функция языка XAML, возможно полезная для определенных сценариев настраиваемых словарей, когда желательно создание словаря в XAML.  Для функций WPF, таких как неявные стили, использующие для ресурсов ключи, не являющиеся строковыми, существуют другие методы установки или указания ключей, поэтому использование ключа объекта не является обязательным.  
  
-   *keyObject* может также быть способом использования расширения разметки в форме элемента объекта, а не непосредственным экземпляром объекта.  
  
## Заметки об использовании Silverlight.  
 `x:Key` для Silverlight описывается отдельно.  Дополнительные сведения см. в разделе [Возможности пространства имен языка XAML \(x:\) \(Silverlight\)](http://go.microsoft.com/fwlink/?LinkId=199081).  
  
## См. также  
 [Ресурсы XAML](../../../docs/framework/wpf/advanced/xaml-resources.md)   
 [Ресурсы и код](../../../docs/framework/wpf/advanced/resources-and-code.md)   
 [Расширение разметки StaticResource](../../../docs/framework/wpf/advanced/staticresource-markup-extension.md)