---
title: Коллекции и типы коллекций для XAML
ms.date: 03/30/2017
ms.assetid: 58f8e7c6-9a41-4f25-8551-c042f1315baa
ms.openlocfilehash: 5605c97b13503e18e2f698f2a19f715663052b08
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/04/2018
ms.locfileid: "33562980"
---
# <a name="collections-and-collection-types-for-xaml"></a><span data-ttu-id="1f142-102">Коллекции и типы коллекций для XAML</span><span class="sxs-lookup"><span data-stu-id="1f142-102">Collections and Collection Types for XAML</span></span>
<span data-ttu-id="1f142-103">В этом разделе описывается определение свойства типов, которые предназначены для поддержки коллекции, которые поддерживают синтаксис XAML для создания экземпляров элементов коллекции как дочерние элементы родительского элемента объекта или свойства элемента.</span><span class="sxs-lookup"><span data-stu-id="1f142-103">This topic describes how to define properties of types that are intended to support a collection, and to support the XAML syntax for instantiating collection items as element children of a parent object element or property element.</span></span>  
  
## <a name="xaml-collection-concepts"></a><span data-ttu-id="1f142-104">Концепции коллекции XAML</span><span class="sxs-lookup"><span data-stu-id="1f142-104">XAML Collection Concepts</span></span>  
 <span data-ttu-id="1f142-105">По существу, ни одной связи, в языке XAML, где имеется несколько дочерних элементов в пределах области элемента объекта XAML или элемента свойства XAML должен быть реализован в виде коллекции.</span><span class="sxs-lookup"><span data-stu-id="1f142-105">Conceptually, any relationship in XAML where there are multiple child items within the scope of a XAML object element or XAML property element must be implemented as a collection.</span></span> <span data-ttu-id="1f142-106">Этой коллекции должна быть связана с определенным свойством XAML типа XAML, которая является родительской в этой связи.</span><span class="sxs-lookup"><span data-stu-id="1f142-106">That collection must be associated with a particular XAML property of the XAML type that is the parent in that relationship.</span></span> <span data-ttu-id="1f142-107">Свойства должен быть коллекцией, поскольку обработчик XAML ожидает назначить каждый элемент в разметке для вновь добавленного элемента свойства коллекции резервное копирование.</span><span class="sxs-lookup"><span data-stu-id="1f142-107">The property must be a collection because a XAML processor expects to assign each item in markup to be a newly added item of the backing collection property.</span></span>  
  
 <span data-ttu-id="1f142-108">На уровне языка XAML точные требования поддержка коллекций определены не полностью.</span><span class="sxs-lookup"><span data-stu-id="1f142-108">At the XAML language level, the exact requirements of collection support are not fully defined.</span></span> <span data-ttu-id="1f142-109">Концепции, что коллекция может быть либо списка или словаря (но не оба) определяется на уровне языка XAML, но какие резервные типы представляют либо списки или словари не определен в языке XAML.</span><span class="sxs-lookup"><span data-stu-id="1f142-109">The concept that a collection can be either a list or a dictionary(but not both) is defined at the XAML language level, but which backing types represent either lists or dictionaries is not defined by the XAML language.</span></span>  
  
 <span data-ttu-id="1f142-110">В службах XAML .NET Framework понятие поддержка коллекций XAML более четко определяется на основе резервных типов .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="1f142-110">In .NET Framework XAML Services, the concept of XAML collection support is more clearly defined in terms of .NET Framework backing types.</span></span> <span data-ttu-id="1f142-111">В частности поддержка коллекций XAML основан на несколько понятий платформы .NET Framework и API-интерфейсы, которые используются для списков и словарей в общие вопросы программирования в .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="1f142-111">Specifically, the XAML support for collections is based on several .NET Framework concepts and APIs that are used for lists and dictionaries in general .NET Framework programming.</span></span>  
  
1.  <span data-ttu-id="1f142-112"><xref:System.Collections.IList> Интерфейс указывает коллекцию списков.</span><span class="sxs-lookup"><span data-stu-id="1f142-112">The <xref:System.Collections.IList> interface indicates a list collection.</span></span>  
  
2.  <span data-ttu-id="1f142-113"><xref:System.Collections.IDictionary> Интерфейс указывает dicionary коллекции.</span><span class="sxs-lookup"><span data-stu-id="1f142-113">The <xref:System.Collections.IDictionary> interface indicates a dicionary collection.</span></span>  
  
3.  <span data-ttu-id="1f142-114"><xref:System.Array> представляет массив и массив поддерживает <xref:System.Collections.IList> методы.</span><span class="sxs-lookup"><span data-stu-id="1f142-114"><xref:System.Array> represents an array, and an array supports <xref:System.Collections.IList> methods.</span></span>  
  
 <span data-ttu-id="1f142-115">В каждом из этих концепций коллекции, обработчик XAML служб XAML .NET Framework ожидает вызова `Add` метода в определенном экземпляре типа свойства коллекции.</span><span class="sxs-lookup"><span data-stu-id="1f142-115">In each of these collection concepts, a .NET Framework XAML Services XAML processor expects to call the `Add` method on a specific instance of the collection property's type.</span></span> <span data-ttu-id="1f142-116">Или, в сценарии сериализации, обработчик XAML создает дискретных экземпляры типа XAML для каждого элемента в списке, словаря или массива, основанного на каждой коллекции узкое понятие «Элементов».</span><span class="sxs-lookup"><span data-stu-id="1f142-116">Or, in a serialization scenario, a XAML processor produces discrete XAML-type instances for each item found in the list, dictionary or array based on each collection's specific concept of "Items".</span></span> <span data-ttu-id="1f142-117">Ниже приведены: <xref:System.Collections.IList.Item%2A>; <xref:System.Collections.IDictionary.Item%2A>; явных <xref:System.Array.System%23Collections%23IList%23Item%2A> для <xref:System.Array>.</span><span class="sxs-lookup"><span data-stu-id="1f142-117">These are : <xref:System.Collections.IList.Item%2A>; <xref:System.Collections.IDictionary.Item%2A>; the explicit <xref:System.Array.System%23Collections%23IList%23Item%2A> for <xref:System.Array>.</span></span>  
  
## <a name="generic-collections"></a><span data-ttu-id="1f142-118">Универсальные коллекции</span><span class="sxs-lookup"><span data-stu-id="1f142-118">Generic Collections</span></span>  
 <span data-ttu-id="1f142-119">Универсальные коллекции может быть полезна для общего программирования платформы .NET Framework и может также использоваться для свойств коллекции XAML.</span><span class="sxs-lookup"><span data-stu-id="1f142-119">Generic collections can be useful for general .NET Framework programming, and can also be used for XAML collection properties.</span></span> <span data-ttu-id="1f142-120">Однако универсальные интерфейсы <xref:System.Collections.Generic.IList%601> и <xref:System.Collections.Generic.IDictionary%602> не идентифицировано процессоры XAML служб XAML .NET Framework как эквивалент неуниверсальные <xref:System.Collections.IList> или <xref:System.Collections.IDictionary>.</span><span class="sxs-lookup"><span data-stu-id="1f142-120">However, the generic interfaces <xref:System.Collections.Generic.IList%601> and <xref:System.Collections.Generic.IDictionary%602> are not identified by .NET Framework XAML Services XAML processors as being equivalent to the non-generic <xref:System.Collections.IList> or <xref:System.Collections.IDictionary>.</span></span> <span data-ttu-id="1f142-121">Вместо того чтобы реализовывать интерфейсы, рекомендуемым подходом для свойств типов универсальных коллекций является являются производными от классов <xref:System.Collections.Generic.List%601> или <xref:System.Collections.Generic.Dictionary%602>.</span><span class="sxs-lookup"><span data-stu-id="1f142-121">Rather than implementing the interfaces, a recommended approach for generic collection property types is to derive from the classes <xref:System.Collections.Generic.List%601> or <xref:System.Collections.Generic.Dictionary%602>.</span></span> <span data-ttu-id="1f142-122">Эти классы реализуют неуниверсальный интерфейсы и таким образом включать ожидаемый поддержка коллекций XAML в базовой реализации.</span><span class="sxs-lookup"><span data-stu-id="1f142-122">These classes implement the non-generic interfaces and thus include the expected support for XAML collections in the base implementation.</span></span>  
  
## <a name="read-only-collections-and-initialization-logic"></a><span data-ttu-id="1f142-123">Коллекции только для чтения и логику инициализации</span><span class="sxs-lookup"><span data-stu-id="1f142-123">Read-Only Collections and Initialization Logic</span></span>  
 <span data-ttu-id="1f142-124">Программирования платформы .NET Framework при шаблоном разработки, чтобы сделать любое свойство, которое хранит значение коллекции в виде коллекции только для чтения.</span><span class="sxs-lookup"><span data-stu-id="1f142-124">In .NET Framework programming, it is a common design pattern to make any property that holds a value of a collection as a read-only collection.</span></span> <span data-ttu-id="1f142-125">Этот шаблон позволяет использовать экземпляр, которому принадлежит свойство коллекции для более эффективного управления, что происходит в коллекцию...</span><span class="sxs-lookup"><span data-stu-id="1f142-125">This pattern permits the instance that owns the collection property to better control what happens to the collection..</span></span> <span data-ttu-id="1f142-126">В частности шаблон предотвращает случайное замены существующего всей коллекции, присвоив свойству.</span><span class="sxs-lookup"><span data-stu-id="1f142-126">Specifically, the pattern prevents accidental replacement of the entire pre-existing collection by setting the property.</span></span> <span data-ttu-id="1f142-127">В этом шаблоне любой доступ к коллекции, вызывающие объекты должны вноситься вместо этого путем вызова методов и свойств, такие как поддерживаемой тип коллекций или интерфейсов соответствующей коллекции <xref:System.Collections.IList>.</span><span class="sxs-lookup"><span data-stu-id="1f142-127">In this pattern, any access to the collection by callers should instead be made by calling methods or properties as supported by the collection type and/or the relevant collection interfaces such as <xref:System.Collections.IList>.</span></span>  
  
 <span data-ttu-id="1f142-128">С помощью этого шаблона подразумевает любой класс, который предоставляет свойство только для чтения коллекцию необходимо вначале инициализировать это свойство для хранения пустую коллекцию.</span><span class="sxs-lookup"><span data-stu-id="1f142-128">Using this pattern implies that any class that exposes a read-only collection property must first initialize that property to hold an empty collection.</span></span> <span data-ttu-id="1f142-129">Как правило, инициализация выполняется в рамках поведение конструктора для класса.</span><span class="sxs-lookup"><span data-stu-id="1f142-129">Typically the initialization is performed as part of the construction behavior for the class.</span></span> <span data-ttu-id="1f142-130">Чтобы быть полезным для XAML, очень важно, такую логику всегда ссылается конструктора по умолчанию, поскольку XAML обычно вызывает конструктор по умолчанию до обработки свойств (свойства коллекции или иным способом).</span><span class="sxs-lookup"><span data-stu-id="1f142-130">To be useful for XAML, it is important that such logic is always referenced by the default constructor, because XAML generally calls the default constructor prior to processing the properties (collection properties or otherwise).</span></span>  
  
## <a name="xaml-type-system-support-and-collections"></a><span data-ttu-id="1f142-131">Поддержка системы типов XAML и коллекций</span><span class="sxs-lookup"><span data-stu-id="1f142-131">XAML Type System Support and Collections</span></span>  
 <span data-ttu-id="1f142-132">Помимо основной механизм синтаксического анализа XAML и заполнении или сериализации свойств коллекции в системе типов XAML, реализованное в службах XAML .NET Framework включает несколько функций разработки, которые относятся к коллекциям в XAML.</span><span class="sxs-lookup"><span data-stu-id="1f142-132">Beyond the basic mechanics of parsing XAML and populating or serializing collection properties, the XAML type system as implemented in .NET Framework XAML Services includes several design features that pertain to collections in XAML.</span></span>  
  
1.  <span data-ttu-id="1f142-133"><xref:System.Xaml.XamlType.IsCollection%2A> Возвращает значение true, если тип XAML, поддерживаемый тип, который обеспечивает поддержку коллекции XAML.</span><span class="sxs-lookup"><span data-stu-id="1f142-133"><xref:System.Xaml.XamlType.IsCollection%2A> returns true if the XAML type is backed by a type that provides XAML collection support.</span></span>  
  
2.  <span data-ttu-id="1f142-134"><xref:System.Xaml.XamlType.IsDictionary%2A> и <xref:System.Xaml.XamlType.IsArray%2A> затем можно определить, какой тип XAML поддерживает режим сбора.</span><span class="sxs-lookup"><span data-stu-id="1f142-134"><xref:System.Xaml.XamlType.IsDictionary%2A> and <xref:System.Xaml.XamlType.IsArray%2A> can further identify which collection mode the XAML type supports.</span></span> <span data-ttu-id="1f142-135">Для пользовательских XAML система типов процессоров, основанных на службах XAML .NET Framework и XAML, но не на основе существующего <xref:System.Xaml.XamlWriter> реализации, знать, какой режим сбора используется может быть необходимо, чтобы знать, какой метод, вызываемый для Обработка коллекций.</span><span class="sxs-lookup"><span data-stu-id="1f142-135">For custom XAML processors that are based on .NET Framework XAML Services and the XAML type system but not based on existing <xref:System.Xaml.XamlWriter> implementations, knowing which collection mode is used might be necessary in order to know which method to invoke for collection processing.</span></span>  
  
3.  <span data-ttu-id="1f142-136">Каждый из предыдущих значений свойств потенциально влиянию переопределения <xref:System.Xaml.XamlType.LookupCollectionKind%2A> типа XAML.</span><span class="sxs-lookup"><span data-stu-id="1f142-136">Each of the previous property values are potentially influenced by overrides of <xref:System.Xaml.XamlType.LookupCollectionKind%2A> on a XAML type.</span></span>
