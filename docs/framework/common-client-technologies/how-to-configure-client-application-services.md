---
title: "Практическое руководство. Настройка служб клиентских приложений"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- client application services, configuring
ms.assetid: 34a8688a-a32c-40d3-94be-c8e610c6a4e8
caps.latest.revision: 23
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.translationtype: HT
ms.sourcegitcommit: 306c608dc7f97594ef6f72ae0f5aaba596c936e1
ms.openlocfilehash: a1d15e380b6b7e8b226f26b261f4d4540eeef88d
ms.contentlocale: ru-ru
ms.lasthandoff: 07/28/2017

---
# <a name="how-to-configure-client-application-services"></a><span data-ttu-id="e1168-102">Практическое руководство. Настройка служб клиентских приложений</span><span class="sxs-lookup"><span data-stu-id="e1168-102">How to: Configure Client Application Services</span></span>
<span data-ttu-id="e1168-103">В этом разделе описывается использование [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)] **конструктора проектов** для включения и настройки служб клиентских приложений.</span><span class="sxs-lookup"><span data-stu-id="e1168-103">This topic describes how to use the [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)] **Project Designer** to enable and configure client application services.</span></span> <span data-ttu-id="e1168-104">Эти службы позволяют проверять подлинность пользователей, извлекать роли пользователей и параметры из существующей службы приложений [!INCLUDE[ajax_current_short](../../../includes/ajax-current-short-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e1168-104">You can use client application services to validate users and retrieve user roles and settings from an existing [!INCLUDE[ajax_current_short](../../../includes/ajax-current-short-md.md)] application service.</span></span> <span data-ttu-id="e1168-105">После настройки можно получить доступ к включенным службам в коде приложения, как описано в разделе [Общие сведения о службах клиентских приложений](../../../docs/framework/common-client-technologies/client-application-services-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e1168-105">After configuration, you can access the enabled services in your application code as described in [Client Application Services Overview](../../../docs/framework/common-client-technologies/client-application-services-overview.md).</span></span> <span data-ttu-id="e1168-106">Дополнительные сведения о службах приложений [!INCLUDE[ajax_current_short](../../../includes/ajax-current-short-md.md)] см. в разделе [Общие сведения о службах приложений ASP.NET](http://msdn.microsoft.com/library/1162e529-0d70-44b2-b3ab-83e60c695013).</span><span class="sxs-lookup"><span data-stu-id="e1168-106">For more information about the [!INCLUDE[ajax_current_short](../../../includes/ajax-current-short-md.md)] application services, see [ASP.NET Application Services Overview](http://msdn.microsoft.com/library/1162e529-0d70-44b2-b3ab-83e60c695013).</span></span>  
  
 <span data-ttu-id="e1168-107">Включать и настраивать службы клиентских приложений можно на странице **Службы** в **конструкторе проектов**.</span><span class="sxs-lookup"><span data-stu-id="e1168-107">You can enable and configure client application services on the **Services** page of the **Project Designer**.</span></span> <span data-ttu-id="e1168-108">Изменения значений в файле проекта App.config вносятся на странице **Службы**.</span><span class="sxs-lookup"><span data-stu-id="e1168-108">The **Services** page updates values in your project's App.config file.</span></span> <span data-ttu-id="e1168-109">Открыть **конструктор проектов** можно с помощью команды **Свойства** в меню **Проект**.</span><span class="sxs-lookup"><span data-stu-id="e1168-109">To access the **Project Designer**, use the **Properties** command on the **Project** menu.</span></span> <span data-ttu-id="e1168-110">Дополнительные сведения о странице **Службы** см. в разделе [Страница "Службы" в конструкторе проектов](https://msdn.microsoft.com/library/bb398109).</span><span class="sxs-lookup"><span data-stu-id="e1168-110">For more information about the **Services** page, see [Services Page, Project Designer](https://msdn.microsoft.com/library/bb398109).</span></span>  
  
 <span data-ttu-id="e1168-111">В следующей процедуре описывается базовая настройка служб клиентских приложений.</span><span class="sxs-lookup"><span data-stu-id="e1168-111">The following procedure describes how to perform basic configuration for client application services.</span></span> <span data-ttu-id="e1168-112">Расширенные параметры настройки описаны в дальнейших разделах.</span><span class="sxs-lookup"><span data-stu-id="e1168-112">Advanced configuration options are described in later sections.</span></span>  
  
### <a name="to-configure-client-application-services"></a><span data-ttu-id="e1168-113">Настройка служб клиентских приложений</span><span class="sxs-lookup"><span data-stu-id="e1168-113">To configure client application services</span></span>  
  
1.  <span data-ttu-id="e1168-114">В **обозревателе решений** выберите узел проекта, а затем в меню **Проект** щелкните пункт **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="e1168-114">In **Solution Explorer**, select a project node and then on the **Project** menu, click **Properties**.</span></span>  
  
     <span data-ttu-id="e1168-115">Открывается **конструктор проектов**.</span><span class="sxs-lookup"><span data-stu-id="e1168-115">The **Project Designer** appears.</span></span>  
  
2.  <span data-ttu-id="e1168-116">Перейдите на вкладку **Службы**.</span><span class="sxs-lookup"><span data-stu-id="e1168-116">Click the **Services** tab.</span></span> <span data-ttu-id="e1168-117">Будет открыта страница **Службы**, как показано на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="e1168-117">The **Services** page appears, as shown in the following illustration.</span></span>  
  
     <span data-ttu-id="e1168-118">![Вкладка "Службы" в конструкторе проектов](../../../docs/framework/common-client-technologies/media/casdesigner.png "casdesigner")</span><span class="sxs-lookup"><span data-stu-id="e1168-118">![The Services tab in the project designer](../../../docs/framework/common-client-technologies/media/casdesigner.png "casdesigner")</span></span>  
  
3.  <span data-ttu-id="e1168-119">На странице **Службы** установите флажок **Включить службы клиентского приложения**.</span><span class="sxs-lookup"><span data-stu-id="e1168-119">On the **Services** page, select **Enable client application services**.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="e1168-120">Для служб клиентских приложений требуется полная версия .NET Framework, и они не поддерживаются в клиентском профиле .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="e1168-120">Client application services require the full version of the .NET Framework, and are not supported in the .NET Framework Client Profile.</span></span> <span data-ttu-id="e1168-121">Если флажок **Включить службы клиентского приложения** снят, убедитесь, что **Целевая рабочая среда** имеет значение .NET Framework 3.5 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="e1168-121">If the **Enable client application services** check box is disabled, verify that the **Target framework** is set to the .NET Framework 3.5 or later.</span></span> <span data-ttu-id="e1168-122">Чтобы просмотреть значение параметра **Целевая рабочая среда** в C#, откройте конструктор проектов и щелкните страницу **Приложение**.</span><span class="sxs-lookup"><span data-stu-id="e1168-122">To view the **Target framework** setting in C#, open the Project Designer and then click the **Application** page.</span></span> <span data-ttu-id="e1168-123">Чтобы просмотреть значение параметра **Целевая рабочая среда** в Visual Basic, откройте конструктор проектов, щелкните страницу **Компиляция** и выберите **Дополнительные параметры компиляции**.</span><span class="sxs-lookup"><span data-stu-id="e1168-123">To view the **Target framework** setting in Visual Basic, open the Project Designer, click the **Compile** page, and then click **Advanced Compile Options**.</span></span>  
  
4.  <span data-ttu-id="e1168-124">Выберите **Использовать проверку подлинности с помощью форм**, если планируется указать собственные элементы управления или окно входа, или выберите **Использовать проверку подлинности Windows**, чтобы использовать учетные данные, предоставляемые операционной системой.</span><span class="sxs-lookup"><span data-stu-id="e1168-124">Select **Use Forms authentication** if you plan to provide your own login controls or dialog box, or select **Use Windows authentication** to use the identity supplied by the operating system.</span></span> <span data-ttu-id="e1168-125">Дополнительные сведения см. в разделе [Общие сведения о службах клиентских приложений](../../../docs/framework/common-client-technologies/client-application-services-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e1168-125">For more information, see [Client Application Services Overview](../../../docs/framework/common-client-technologies/client-application-services-overview.md).</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="e1168-126">При выборе **Использовать проверку подлинности Windows** службы клиентских приложений будут автоматически настроены для использования базы данных SQL Server Compact.</span><span class="sxs-lookup"><span data-stu-id="e1168-126">If you select **Use Windows authentication**, client application services will automatically be configured to use a SQL Server Compact database.</span></span> <span data-ttu-id="e1168-127">Это указано в окне **Дополнительные параметры служб**, как описано в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="e1168-127">This is indicated in the **Advanced Settings for Services** dialog box as described in the next section.</span></span> <span data-ttu-id="e1168-128">Если выбрать **Использовать проверку подлинности с помощью форм**, параметр **Использовать настраиваемую строку подключения** не будет автоматически отключен.</span><span class="sxs-lookup"><span data-stu-id="e1168-128">If you then select **Use Forms authentication**, the **Use custom connection string** setting will not be cleared automatically.</span></span> <span data-ttu-id="e1168-129">Это может привести к ошибкам, если база данных [!INCLUDE[ssEW](../../../includes/ssew-md.md)] уже создана для проверки подлинности Windows.</span><span class="sxs-lookup"><span data-stu-id="e1168-129">This could result in errors if the [!INCLUDE[ssEW](../../../includes/ssew-md.md)] database has already been generated for use with Windows authentication.</span></span> <span data-ttu-id="e1168-130">Чтобы избежать этих ошибок, снимите флажок **Использовать настраиваемую строку подключения** в окне **Дополнительные параметры служб**.</span><span class="sxs-lookup"><span data-stu-id="e1168-130">To fix these errors, clear the **Use custom connection string** setting in the **Advanced Settings for Services** dialog box.</span></span>  
  
5.  <span data-ttu-id="e1168-131">Если выбран параметр **Использовать проверку подлинности с помощью форм**, в поле **Местонахождение службы проверки подлинности** укажите URL-адрес узла службы, не указывая имени файла.</span><span class="sxs-lookup"><span data-stu-id="e1168-131">If you selected **Use Forms authentication**, in the **Authentication service location** box, specify the URL of the service host, not including the file name.</span></span> <span data-ttu-id="e1168-132">Конструктор автоматически добавит стандартное имя файла (Authentication_JSON_AppService.axd) при записи значения в файл конфигурации.</span><span class="sxs-lookup"><span data-stu-id="e1168-132">The designer will automatically append the standard file name (Authentication_JSON_AppService.axd) when it writes the value to the configuration file.</span></span>  
  
6.  <span data-ttu-id="e1168-133">При необходимости, если выбран параметр **Использовать проверку подлинности с помощью форм**, можно указать значение в поле **Поставщик учетных данных**.</span><span class="sxs-lookup"><span data-stu-id="e1168-133">Optionally, if you selected **Use Forms authentication**, you can specify a value in the **Credentials provider** box.</span></span> <span data-ttu-id="e1168-134">Поставщик учетных данных должен реализовать интерфейс <xref:System.Web.ClientServices.Providers.IClientFormsAuthenticationCredentialsProvider>.</span><span class="sxs-lookup"><span data-stu-id="e1168-134">The credentials provider must implement the <xref:System.Web.ClientServices.Providers.IClientFormsAuthenticationCredentialsProvider> interface.</span></span> <span data-ttu-id="e1168-135">Используя поставщик учетных данных, можно отделить интерфейс входа от остального кода приложения.</span><span class="sxs-lookup"><span data-stu-id="e1168-135">By using a credentials provider, you can separate your login user interface from your other application code.</span></span> <span data-ttu-id="e1168-136">Это позволяет создать окно единого входа для использования в нескольких приложениях.</span><span class="sxs-lookup"><span data-stu-id="e1168-136">This enables you to create a single login dialog box for use in multiple applications.</span></span> <span data-ttu-id="e1168-137">Дополнительные сведения см. в разделе [Практическое руководство. Реализация входа пользователя с помощью служб клиентских приложений](../../../docs/framework/common-client-technologies/how-to-implement-user-login-with-client-application-services.md).</span><span class="sxs-lookup"><span data-stu-id="e1168-137">For more information, see [How to: Implement User Login with Client Application Services](../../../docs/framework/common-client-technologies/how-to-implement-user-login-with-client-application-services.md).</span></span>  
  
     <span data-ttu-id="e1168-138">Если указывать поставщика учетных данных, требуется ввести имя типа сборки.</span><span class="sxs-lookup"><span data-stu-id="e1168-138">If you specify a credentials provider, you must specify it as an assembly-qualified type name.</span></span> <span data-ttu-id="e1168-139">Дополнительные сведения см. в разделах <xref:System.Type.AssemblyQualifiedName%2A?displayProperty=fullName> и [Имена сборок](../../../docs/framework/app-domains/assembly-names.md).</span><span class="sxs-lookup"><span data-stu-id="e1168-139">For more information, see <xref:System.Type.AssemblyQualifiedName%2A?displayProperty=fullName> and [Assembly Names](../../../docs/framework/app-domains/assembly-names.md).</span></span> <span data-ttu-id="e1168-140">В простейшем виде имя типа сборки выглядит примерно так:</span><span class="sxs-lookup"><span data-stu-id="e1168-140">In its simplest form, an assembly-qualified type name looks similar to the following example:</span></span>  
  
    ```  
    MyNamespace.MyLoginClass, MyAssembly  
    ```  
  
7.  <span data-ttu-id="e1168-141">В полях **Местоположение службы ролей** и **Местоположение службы веб-параметров** укажите расположение каждой службы, не указывая имени файла.</span><span class="sxs-lookup"><span data-stu-id="e1168-141">In the **Roles service location** and **Web settings service location** text boxes, specify the service location for each service, not including the file name.</span></span> <span data-ttu-id="e1168-142">Конструктор автоматически добавит стандартные имена файлов (Role_JSON_AppService.axd и Profile_JSON_AppService.axd) при записи значения в файл конфигурации.</span><span class="sxs-lookup"><span data-stu-id="e1168-142">The designer will automatically append the standard file names (Role_JSON_AppService.axd and Profile_JSON_AppService.axd) when it writes the value to the configuration file.</span></span>  
  
8.  <span data-ttu-id="e1168-143">При необходимости нажмите кнопку **Дополнительно** для изменения дополнительных параметров, таких как поведение локального кэширования.</span><span class="sxs-lookup"><span data-stu-id="e1168-143">Optionally, click **Advanced** to modify advanced settings, such as the local caching behavior.</span></span> <span data-ttu-id="e1168-144">Дополнительные сведения см. в следующей процедуре.</span><span class="sxs-lookup"><span data-stu-id="e1168-144">For more information, see the next procedure.</span></span>  
  
## <a name="advanced-configuration"></a><span data-ttu-id="e1168-145">Расширенная конфигурация</span><span class="sxs-lookup"><span data-stu-id="e1168-145">Advanced Configuration</span></span>  
 <span data-ttu-id="e1168-146">В следующих процедурах описывается настройку служб клиентских приложений для менее распространенных сценариев.</span><span class="sxs-lookup"><span data-stu-id="e1168-146">The following procedures describe how to configure client application services for less common scenarios.</span></span> <span data-ttu-id="e1168-147">Например, эти параметры конфигурации можно использовать для приложений, развертываемых в общедоступных местах, или для использования зашифрованной базы данных SQL Server Compact в качестве локального кэша данных.</span><span class="sxs-lookup"><span data-stu-id="e1168-147">For example, you can use these configuration options for applications deployed in public locations, or to use an encrypted SQL Server Compact database as the local data cache.</span></span>  
  
#### <a name="to-configure-advanced-settings-for-client-application-services"></a><span data-ttu-id="e1168-148">Настройка дополнительных параметров для служб клиентских приложений</span><span class="sxs-lookup"><span data-stu-id="e1168-148">To configure advanced settings for client application services</span></span>  
  
1.  <span data-ttu-id="e1168-149">На странице **Службы** в **конструкторе проектов** нажмите кнопку **Дополнительно**.</span><span class="sxs-lookup"><span data-stu-id="e1168-149">On the **Services** page of the **Project Designer**, click **Advanced**.</span></span>  
  
     <span data-ttu-id="e1168-150">Откроется диалоговое окно **Дополнительные параметры служб**, как показано на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="e1168-150">The **Advanced Settings for Services** dialog box appears, as shown in the following illustration.</span></span> <span data-ttu-id="e1168-151">Дополнительные сведения об этом диалоговом окне см. в разделе [Диалоговое окно "Дополнительные параметры служб"](/visualstudio/ide/reference/advanced-settings-for-services-dialog-box).</span><span class="sxs-lookup"><span data-stu-id="e1168-151">For more information about this dialog box, see [Advanced Settings for Services Dialog Box](/visualstudio/ide/reference/advanced-settings-for-services-dialog-box).</span></span>  
  
     <span data-ttu-id="e1168-152">![Диалоговое окно "Дополнительные параметры служб"](../../../docs/framework/common-client-technologies/media/casdialog.png "casdialog")</span><span class="sxs-lookup"><span data-stu-id="e1168-152">![Advanced Settings for Services dialog box](../../../docs/framework/common-client-technologies/media/casdialog.png "casdialog")</span></span>  
  
2.  <span data-ttu-id="e1168-153">Установите или снимите флажок **Локально сохранять хэш пароля для обеспечения входа вне сети**.</span><span class="sxs-lookup"><span data-stu-id="e1168-153">Select or clear **Save password hash locally to enable offline login**.</span></span> <span data-ttu-id="e1168-154">При выборе этого параметра зашифрованный пароль пользователя будут кэширован локально.</span><span class="sxs-lookup"><span data-stu-id="e1168-154">When you select this option, an encrypted form of the user's password will be cached locally.</span></span> <span data-ttu-id="e1168-155">Это удобно при реализации автономного режима работы приложения.</span><span class="sxs-lookup"><span data-stu-id="e1168-155">This is useful if you implement offline mode for your application.</span></span> <span data-ttu-id="e1168-156">При выборе этого параметра можно выполнять проверку подлинности пользователей, даже если свойству <xref:System.Web.ClientServices.ConnectivityStatus.IsOffline%2A> было задано значение `true`.</span><span class="sxs-lookup"><span data-stu-id="e1168-156">With this option selected, you can validate users even when the <xref:System.Web.ClientServices.ConnectivityStatus.IsOffline%2A> property has been set to `true`.</span></span>  
  
3.  <span data-ttu-id="e1168-157">Установите или снимите флажок **Требовать, чтобы пользователи повторяли вход, если у файла cookie сервера истек срок действия**.</span><span class="sxs-lookup"><span data-stu-id="e1168-157">Select or clear **Require users to log on again whenever the server cookie expires**.</span></span> <span data-ttu-id="e1168-158">Файл cookie для проверки подлинности настраивается в удаленной службе и указывает, в течение какого времени действует учетная запись пользователя.</span><span class="sxs-lookup"><span data-stu-id="e1168-158">The authentication cookie is configured on the remote service, and indicates how long a user's login will remain active.</span></span> <span data-ttu-id="e1168-159">Дополнительные сведения о настройке файла cookie см. в атрибуте `timeout` в разделе [Элемент "forms" для проверки подлинности (схема параметров ASP.NET)](http://msdn.microsoft.com/en-us/8163b8b5-ea6c-46c8-b5a9-c4c3de31c0b3).</span><span class="sxs-lookup"><span data-stu-id="e1168-159">For more information about how to configure the cookie, see the `timeout` attribute in [forms Element for authentication (ASP.NET Settings Schema)](http://msdn.microsoft.com/en-us/8163b8b5-ea6c-46c8-b5a9-c4c3de31c0b3).</span></span>  
  
     <span data-ttu-id="e1168-160">Если установить этот флажок, то при попытке доступа к удаленным ролям или службам веб-параметров после истечения срока действия файла cookie для проверки подлинности возникнет исключение <xref:System.Net.WebException>.</span><span class="sxs-lookup"><span data-stu-id="e1168-160">If you select this option, attempting to access the remote roles or Web settings services after the authentication cookie has expired will throw a <xref:System.Net.WebException>.</span></span> <span data-ttu-id="e1168-161">Это исключение можно обработать и снова отобразить окно входа для повторной проверки пользователей.</span><span class="sxs-lookup"><span data-stu-id="e1168-161">You can handle this exception and display a login dialog box to revalidate users.</span></span> <span data-ttu-id="e1168-162">Пример этого поведения см. в разделе [Пошаговое руководство. Использование служб клиентских приложений](../../../docs/framework/common-client-technologies/walkthrough-using-client-application-services.md).</span><span class="sxs-lookup"><span data-stu-id="e1168-162">For an example of this behavior, see [Walkthrough: Using Client Application Services](../../../docs/framework/common-client-technologies/walkthrough-using-client-application-services.md).</span></span> <span data-ttu-id="e1168-163">Этот параметр полезен при развертывании приложений в общедоступных системах, чтобы пользователи, которые прекратили пользоваться приложением, не входили в систему автоматически.</span><span class="sxs-lookup"><span data-stu-id="e1168-163">This option is useful for applications deployed in public locations to make sure that users who leave the application running after use will not remain authenticated indefinitely.</span></span>  
  
     <span data-ttu-id="e1168-164">Если снять этот флажок, при попытке доступа к удаленным службам после истечения срока действия файла cookie для проверки подлинности будет автоматически выполнена проверка пользователя.</span><span class="sxs-lookup"><span data-stu-id="e1168-164">If you clear this option and attempt to access the remote services after the authentication cookie has expired, users will be revalidated automatically.</span></span>  
  
4.  <span data-ttu-id="e1168-165">Укажите значение для параметра **Тайм-аут кэша службы ролей**.</span><span class="sxs-lookup"><span data-stu-id="e1168-165">Specify a value for **Role service cache timeout**.</span></span> <span data-ttu-id="e1168-166">Установите небольшой срок действия для часто обновляемых ролей и более длительный срок для редко обновляемых ролей.</span><span class="sxs-lookup"><span data-stu-id="e1168-166">Set this time interval to a small value when roles are updated frequently or to a larger value when roles are updated infrequently.</span></span> <span data-ttu-id="e1168-167">При реализации автономного режима установите длительный срок, чтобы срок действия сведений о ролях не истек, пока приложение находится в автономном режиме.</span><span class="sxs-lookup"><span data-stu-id="e1168-167">If you implement offline mode, set the time interval to a large value to prevent the role information from expiring while the application is offline.</span></span>  
  
     <span data-ttu-id="e1168-168">Поставщик ролей получает кэшированные значения ролей или службы ролей при вызове метода <xref:System.Web.Security.RolePrincipal.IsInRole%2A>.</span><span class="sxs-lookup"><span data-stu-id="e1168-168">The role provider accesses the cached role values or the roles service when you call the <xref:System.Web.Security.RolePrincipal.IsInRole%2A> method.</span></span> <span data-ttu-id="e1168-169">Для программного сброса кэша и принудительного доступа к удаленной службе требуется вызвать метод <xref:System.Web.ClientServices.Providers.ClientRoleProvider.ResetCache%2A>.</span><span class="sxs-lookup"><span data-stu-id="e1168-169">To programmatically reset the cache and force this method to access the remote service, call the <xref:System.Web.ClientServices.Providers.ClientRoleProvider.ResetCache%2A> method.</span></span>  
  
5.  <span data-ttu-id="e1168-170">Установите или снимите флажок **Использовать настраиваемую строку подключения**.</span><span class="sxs-lookup"><span data-stu-id="e1168-170">Select or clear **Use custom connection string**.</span></span> <span data-ttu-id="e1168-171">Дополнительные сведения см. в следующей процедуре.</span><span class="sxs-lookup"><span data-stu-id="e1168-171">For more information, see the next procedure.</span></span>  
  
#### <a name="to-configure-client-application-services-to-use-a-database-for-the-local-cache"></a><span data-ttu-id="e1168-172">Настройка служб клиентских приложений для использования базы данных локального кэша</span><span class="sxs-lookup"><span data-stu-id="e1168-172">To configure client application services to use a database for the local cache</span></span>  
  
1.  <span data-ttu-id="e1168-173">На странице **Службы** в **конструкторе проектов** нажмите кнопку **Дополнительно**.</span><span class="sxs-lookup"><span data-stu-id="e1168-173">On the **Services** page of the **Project Designer**, click **Advanced**.</span></span>  
  
     <span data-ttu-id="e1168-174">Откроется диалоговое окно **Дополнительные параметры служб**.</span><span class="sxs-lookup"><span data-stu-id="e1168-174">The **Advanced Settings for Services** dialog box appears.</span></span>  
  
2.  <span data-ttu-id="e1168-175">Выберите параметр **Использовать настраиваемую строку подключения**.</span><span class="sxs-lookup"><span data-stu-id="e1168-175">Select **Use custom connection string**.</span></span>  
  
     <span data-ttu-id="e1168-176">В текстовом поле отобразится значение по умолчанию `Data Source = |SQL/CE|`.</span><span class="sxs-lookup"><span data-stu-id="e1168-176">The default value of `Data Source = |SQL/CE|` appears in the text box.</span></span>  
  
3.  <span data-ttu-id="e1168-177">Для создания и использования базы данных SQL Server Compact оставьте значение по умолчанию строки подключения.</span><span class="sxs-lookup"><span data-stu-id="e1168-177">To generate and use a SQL Server Compact database, keep the default connection string value.</span></span> [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)]<span data-ttu-id="e1168-178"> создаст файл базы данных и поместит его в каталог, указанный свойством <xref:System.Windows.Forms.Application.UserAppDataPath%2A?displayProperty=fullName>.</span><span class="sxs-lookup"><span data-stu-id="e1168-178"> will generate a database file and put it in the directory indicated by the <xref:System.Windows.Forms.Application.UserAppDataPath%2A?displayProperty=fullName> property.</span></span>  
  
4.  <span data-ttu-id="e1168-179">Для создания и использования зашифрованной базы данных [!INCLUDE[ssEW](../../../includes/ssew-md.md)] добавьте значения `password` и `encrypt database` в строку подключения, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="e1168-179">To generate and use an encrypted [!INCLUDE[ssEW](../../../includes/ssew-md.md)] database, add `password` and `encrypt database` values to the connection string as shown in the following example.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="e1168-180">Обязательно используйте надежный пароль.</span><span class="sxs-lookup"><span data-stu-id="e1168-180">Be sure to specify a strong password.</span></span> <span data-ttu-id="e1168-181">После создания базы данных изменить пароль нельзя.</span><span class="sxs-lookup"><span data-stu-id="e1168-181">You cannot change the password after the database is generated.</span></span>  
  
    ```  
    Data Source = |SQL/CE|;password=<password>;encrypt database=true  
    ```  
  
5.  <span data-ttu-id="e1168-182">Чтобы использовать собственную базу данных [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], укажите собственную строку подключения.</span><span class="sxs-lookup"><span data-stu-id="e1168-182">To use your own [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] database, specify your own connection string.</span></span> <span data-ttu-id="e1168-183">Дополнительные сведения о форматах строки подключения см. в документации к [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e1168-183">For information about valid connection string formats, see the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] documentation.</span></span> <span data-ttu-id="e1168-184">Эта база данных не создается автоматически.</span><span class="sxs-lookup"><span data-stu-id="e1168-184">This database is not generated automatically.</span></span> <span data-ttu-id="e1168-185">Строка подключения должна ссылаться на существующую базу данных, которую можно создать с помощью следующих инструкций SQL.</span><span class="sxs-lookup"><span data-stu-id="e1168-185">The connection string must refer to an existing database that you can create using the following SQL statements.</span></span>  
  
    ```  
    CREATE TABLE ApplicationProperties (PropertyName nvarchar(256),  
        PropertyValue nvarchar(256))  
    CREATE TABLE UserProperties (PropertyName nvarchar(256),  
        PropertyValue nvarchar(256))  
    CREATE TABLE Roles (UserName nvarchar(256),   
        RoleName nvarchar(256))  
    CREATE TABLE Settings (PropertyName nvarchar(256),   
        PropertyStoredAs nvarchar(1), PropertyValue nvarchar(2048))  
    ```  
  
## <a name="using-custom-providers"></a><span data-ttu-id="e1168-186">Использование настраиваемых поставщиков</span><span class="sxs-lookup"><span data-stu-id="e1168-186">Using Custom Providers</span></span>  
 <span data-ttu-id="e1168-187">По умолчанию компонент служб клиентских приложений использует поставщиков в пространстве имен <xref:System.Web.ClientServices.Providers?displayProperty=fullName>.</span><span class="sxs-lookup"><span data-stu-id="e1168-187">By default, the client application services feature uses the providers in the <xref:System.Web.ClientServices.Providers?displayProperty=fullName> namespace.</span></span> <span data-ttu-id="e1168-188">При настройке приложения с помощью страницы **Службы** в **конструкторе проектов** ссылки на этих поставщиков добавляются в файл App.config.</span><span class="sxs-lookup"><span data-stu-id="e1168-188">When you configure your application by using the **Services** page of the **Project Designer**, references to these providers are added to your App.config file.</span></span> <span data-ttu-id="e1168-189">Эти поставщики по умолчанию получают доступ к соответствующим поставщикам на сервере.</span><span class="sxs-lookup"><span data-stu-id="e1168-189">These default providers access corresponding providers on the server.</span></span> <span data-ttu-id="e1168-190">Веб-службы часто настраивается для доступа к данным пользователя через поставщиков, таких как <xref:System.Web.Security.SqlMembershipProvider> и <xref:System.Web.Security.SqlRoleProvider>.</span><span class="sxs-lookup"><span data-stu-id="e1168-190">Web services are often configured to access user data through providers such as <xref:System.Web.Security.SqlMembershipProvider> and <xref:System.Web.Security.SqlRoleProvider>.</span></span>  
  
 <span data-ttu-id="e1168-191">Если нужно использовать других поставщиков, обычно следует изменить поставщиков на стороне сервера, чтобы изменения действовали для всех клиентских приложений, получающих доступ к серверу.</span><span class="sxs-lookup"><span data-stu-id="e1168-191">If you want to use custom service providers, you will typically change the providers on the server side so that they affect all client applications that access the server.</span></span> <span data-ttu-id="e1168-192">Впрочем, есть возможность использовать других поставщиков и на стороне клиента.</span><span class="sxs-lookup"><span data-stu-id="e1168-192">However, you do have the option of using non-default providers on the client side.</span></span> <span data-ttu-id="e1168-193">В файле App.config можно указать настраиваемых поставщиков проверки подлинности и поставщиков ролей.</span><span class="sxs-lookup"><span data-stu-id="e1168-193">You can specify custom authentication or roles providers in your project's App.config file, as shown in the following procedure.</span></span> <span data-ttu-id="e1168-194">Сведения о создании пользовательской проверки подлинности и поставщиков служб см. в разделах [Реализация поставщика членства](http://msdn.microsoft.com/library/d8658b8e-c962-4f64-95e1-4acce35e4582) и [Реализация поставщика ролей](http://msdn.microsoft.com/library/851671ce-bf9b-43f2-aba4-bc9d28b11c7d).</span><span class="sxs-lookup"><span data-stu-id="e1168-194">For information about how to create custom authentication and role providers, see [Implementing a Membership Provider](http://msdn.microsoft.com/library/d8658b8e-c962-4f64-95e1-4acce35e4582) and [Implementing a Role Provider](http://msdn.microsoft.com/library/851671ce-bf9b-43f2-aba4-bc9d28b11c7d).</span></span> <span data-ttu-id="e1168-195">Также можно использовать настраиваемый поставщик параметров, изменив в проекте класс `Settings` (доступен как `Properties.Settings.Default` в C# и `My.Settings` в [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]).</span><span class="sxs-lookup"><span data-stu-id="e1168-195">You can also use a custom settings provider by modifying your project's `Settings` class (accessed as `Properties.Settings.Default` in C# and `My.Settings` in [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]).</span></span> <span data-ttu-id="e1168-196">Дополнительные сведения см. в разделе [Архитектура параметров приложения](../../../docs/framework/winforms/advanced/application-settings-architecture.md).</span><span class="sxs-lookup"><span data-stu-id="e1168-196">For more information, see [Application Settings Architecture](../../../docs/framework/winforms/advanced/application-settings-architecture.md).</span></span>  
  
#### <a name="to-configure-client-application-services-to-use-non-default-providers"></a><span data-ttu-id="e1168-197">Настройка служб клиентских приложений для использования поставщиков, отличных от поставщиков по умолчанию</span><span class="sxs-lookup"><span data-stu-id="e1168-197">To configure client application services to use non-default providers</span></span>  
  
1.  <span data-ttu-id="e1168-198">Для использования настраиваемых поставщиков проверки подлинности или служб ролей сначала нужно задать значения прочим параметрам на странице **Службы**.</span><span class="sxs-lookup"><span data-stu-id="e1168-198">To use a non-default authentication or roles service provider, first complete all other configuration settings by using the **Services** page.</span></span>  
  
2.  <span data-ttu-id="e1168-199">Закройте **конструктор проектов**.</span><span class="sxs-lookup"><span data-stu-id="e1168-199">Close the **Project Designer**.</span></span> <span data-ttu-id="e1168-200">Это необходимо, так как страница **Службы** будет автоматически обновлять файл App.config, даже если вы не меняете никакие параметры.</span><span class="sxs-lookup"><span data-stu-id="e1168-200">This is necessary because the **Services** page will automatically update your App.config file even if you do not modify any settings.</span></span> <span data-ttu-id="e1168-201">Если изменить файл App.config вручную, как описано в этой процедуре, и затем вернуться на страницу **Службы**, все изменения будут сброшены.</span><span class="sxs-lookup"><span data-stu-id="e1168-201">If you manually modify your App.config file as described in this procedure and then return to the **Services** page, your modifications will be reset.</span></span>  
  
3.  <span data-ttu-id="e1168-202">В **обозревателе решений** дважды щелкните файл App.config.</span><span class="sxs-lookup"><span data-stu-id="e1168-202">In **Solution Explorer**, double-click App.config.</span></span>  
  
     <span data-ttu-id="e1168-203">Файл конфигурации приложения откроется в текстовом редакторе.</span><span class="sxs-lookup"><span data-stu-id="e1168-203">The application configuration file opens in the text editor.</span></span>  
  
4.  <span data-ttu-id="e1168-204">Найдите элемент `<providers>` в элементе `<membership>` или `<roleManager>`.</span><span class="sxs-lookup"><span data-stu-id="e1168-204">Find the `<providers>` element within the `<membership>` or `<roleManager>` element.</span></span> <span data-ttu-id="e1168-205">Это дочерние элементы элемента `<system.web>`.</span><span class="sxs-lookup"><span data-stu-id="e1168-205">These elements are children of the `<system.web>` element.</span></span> <span data-ttu-id="e1168-206">Элемент `<membership>` используется для указания поставщиков проверки подлинности, а элемент `<roleManager>` — для указания поставщиков ролей.</span><span class="sxs-lookup"><span data-stu-id="e1168-206">The `<membership>` element is used to specify authentication providers, and the `<roleManager>` element is used to specify role providers.</span></span>  
  
5.  <span data-ttu-id="e1168-207">Добавьте элемент `<add>` в качестве дочернего для элемента `<providers>`.</span><span class="sxs-lookup"><span data-stu-id="e1168-207">Add an `<add>` element as a child of the `<providers>` element.</span></span> <span data-ttu-id="e1168-208">Необходимо указать атрибуты `name` и `type`, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="e1168-208">You must specify `name` and `type` attributes as shown in the following example.</span></span> <span data-ttu-id="e1168-209">Значение атрибута `type` должно представлять собой имя типа сборки.</span><span class="sxs-lookup"><span data-stu-id="e1168-209">The `type` attribute value must be an assembly-qualified type name.</span></span> <span data-ttu-id="e1168-210">Дополнительные сведения см. в разделах <xref:System.Type.AssemblyQualifiedName%2A?displayProperty=fullName> и [Имена сборок](../../../docs/framework/app-domains/assembly-names.md).</span><span class="sxs-lookup"><span data-stu-id="e1168-210">For more information, see <xref:System.Type.AssemblyQualifiedName%2A?displayProperty=fullName> and [Assembly Names](../../../docs/framework/app-domains/assembly-names.md).</span></span>  
  
    ```xml  
    <add name="MyCustomRoleProvider" type="MyNamespace.MyRoleProvider, MyAssembly" />  
    ```  
  
6.  <span data-ttu-id="e1168-211">Измените атрибут `defaultProvider` элемента `<membership>` или `<roleManager>`, чтобы указать значение имени элемента `<add>`, добавленного на предыдущем шаге.</span><span class="sxs-lookup"><span data-stu-id="e1168-211">Modify the `defaultProvider` attribute of the `<membership>` or `<roleManager>` element to specify the name value from the `<add>` element that you added in the previous step.</span></span>  
  
    ```xml  
    <roleManager enabled="true" defaultProvider="MyCustomRoleProvider">  
    ```  
  
## <a name="see-also"></a><span data-ttu-id="e1168-212">См. также</span><span class="sxs-lookup"><span data-stu-id="e1168-212">See Also</span></span>  
 <span data-ttu-id="e1168-213">[Службы клиентских приложений](../../../docs/framework/common-client-technologies/client-application-services.md) </span><span class="sxs-lookup"><span data-stu-id="e1168-213">[Client Application Services](../../../docs/framework/common-client-technologies/client-application-services.md) </span></span>  
 <span data-ttu-id="e1168-214">[Общие сведения о службах клиентских приложений](../../../docs/framework/common-client-technologies/client-application-services-overview.md) </span><span class="sxs-lookup"><span data-stu-id="e1168-214">[Client Application Services Overview](../../../docs/framework/common-client-technologies/client-application-services-overview.md) </span></span>  
 <span data-ttu-id="e1168-215">[Страница "Службы" в конструкторе проектов](https://msdn.microsoft.com/library/bb398109) </span><span class="sxs-lookup"><span data-stu-id="e1168-215">[Services Page, Project Designer](https://msdn.microsoft.com/library/bb398109) </span></span>  
 <span data-ttu-id="e1168-216">[Диалоговое окно "Дополнительные параметры служб"](/visualstudio/ide/reference/advanced-settings-for-services-dialog-box) </span><span class="sxs-lookup"><span data-stu-id="e1168-216">[Advanced Settings for Services Dialog Box](/visualstudio/ide/reference/advanced-settings-for-services-dialog-box) </span></span>  
 <span data-ttu-id="e1168-217">[Практическое руководство. Реализация входа пользователя с помощью служб клиентских приложений](../../../docs/framework/common-client-technologies/how-to-implement-user-login-with-client-application-services.md) </span><span class="sxs-lookup"><span data-stu-id="e1168-217">[How to: Implement User Login with Client Application Services](../../../docs/framework/common-client-technologies/how-to-implement-user-login-with-client-application-services.md) </span></span>  
 <span data-ttu-id="e1168-218">[Пошаговое руководство. Использование служб клиентских приложений](../../../docs/framework/common-client-technologies/walkthrough-using-client-application-services.md) </span><span class="sxs-lookup"><span data-stu-id="e1168-218">[Walkthrough: Using Client Application Services](../../../docs/framework/common-client-technologies/walkthrough-using-client-application-services.md) </span></span>  
 <span data-ttu-id="e1168-219">[Реализация поставщика членства](http://msdn.microsoft.com/library/d8658b8e-c962-4f64-95e1-4acce35e4582) </span><span class="sxs-lookup"><span data-stu-id="e1168-219">[Implementing a Membership Provider](http://msdn.microsoft.com/library/d8658b8e-c962-4f64-95e1-4acce35e4582) </span></span>  
 <span data-ttu-id="e1168-220">[Реализация поставщика ролей](http://msdn.microsoft.com/library/851671ce-bf9b-43f2-aba4-bc9d28b11c7d) </span><span class="sxs-lookup"><span data-stu-id="e1168-220">[Implementing a Role Provider](http://msdn.microsoft.com/library/851671ce-bf9b-43f2-aba4-bc9d28b11c7d) </span></span>  
 <span data-ttu-id="e1168-221">[Архитектура параметров приложения](../../../docs/framework/winforms/advanced/application-settings-architecture.md) </span><span class="sxs-lookup"><span data-stu-id="e1168-221">[Application Settings Architecture](../../../docs/framework/winforms/advanced/application-settings-architecture.md) </span></span>  
 [<span data-ttu-id="e1168-222">Создание и настройка базы данных служб приложений для SQL Server</span><span class="sxs-lookup"><span data-stu-id="e1168-222">Creating and Configuring the Application Services Database for SQL Server</span></span>](http://msdn.microsoft.com/library/ab894e83-7e2f-4af8-a116-b1bff8f815b2)

