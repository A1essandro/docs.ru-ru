---
title: "Практическое руководство. Настройка приложения для поддержки платформы .NET Framework 4 или 4.5"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- configuring apps to support .NET Framework 4
- .NET Framework 4, configuring apps
- .NET Framework 4.5, configuring apps
ms.assetid: 63c6b9a8-0088-4077-9aa3-521ab7290f79
caps.latest.revision: "14"
author: mairaw
ms.author: mairaw
manager: wpickett
ms.openlocfilehash: 95266f9f28d5054db3ea8552ebb45e5a83aba060
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2017
---
# <a name="how-to-configure-an-app-to-support-net-framework-4-or-45"></a>Практическое руководство. Настройка приложения для поддержки платформы .NET Framework 4 или 4.5
Все приложения, которые размещают в себе среду CLR, должны запускать или *активировать* среду CLR для выполнения управляемого кода. Как правило, приложение .NET Framework запускается в той версии среды CLR, в которой оно было собрано, однако для приложений для настольных систем это поведение можно изменить с помощью файла конфигурации приложения (иногда называемого файлом app.config). Однако, для приложений Магазина Windows или приложений Windows Phone, изменить предусмотренное по умолчанию поведение активации с помощью файла конфигурации приложения невозможно. В этой статье поясняется, как разрешить приложению для настольных систем запускаться в другой версии .NET Framework, а также приводятся примеры нацеливания на версию 4 или 4.5.  
  
 Версия .NET Framework, в которой запускается приложение, определяется в следующем порядке:  
  
-   Файл конфигурации.  
  
     Если файл конфигурации приложения содержит записи [\<supportedRuntime>](../../../docs/framework/configure-apps/file-schema/startup/supportedruntime-element.md), в которых указана одна или несколько версий платформы .NET Framework, и одна из этих версий присутствует на компьютере пользователя, приложение запускается в этой версии. Записи [\<supportedRuntime>](../../../docs/framework/configure-apps/file-schema/startup/supportedruntime-element.md) в файле конфигурации считываются в порядке следования, и используется первая указанная версия платформы .NET Framework, которая есть на компьютере пользователя. (Для версии 1.0 используется [элемент \<requiredRuntime>](../../../docs/framework/configure-apps/file-schema/startup/requiredruntime-element.md)).  
  
-   Скомпилированная версия.  
  
     Если файла конфигурации нет, но версия .NET Framework, в которой было собрано приложение, присутствует на компьютере пользователя, приложение запускается в этой версии.  
  
-   Последняя установленная версия.  
  
     Если версия .NET Framework, для которой было собрано приложение, отсутствует, и в файле конфигурации не указана версия в [элементе \<supportedRuntime>](../../../docs/framework/configure-apps/file-schema/startup/supportedruntime-element.md), приложение пытается запуститься в последней версии .NET Framework, присутствующей на компьютере пользователя.  
  
     Однако приложения .NET Framework 1.0, 1.1, 2.0, 3.0 и 3.5 не запускаются автоматически в .NET Framework 4 или более поздних версиях, и в некоторых случаях пользователь может получить сообщение об ошибке, и ему будет предложено установить .NET Framework 3.5. Поведение активации может также зависеть от операционной системы пользователя, потому что в состав разных версий Windows входят разные версии .NET Framework. Если приложение поддерживает и .NET Framework 3.5, и .NET Framework 4 или более поздние версии, рекомендуется указывать это путем включения в файл конфигурации нескольких записей во избежание ошибок инициализации .NET Framework. Дополнительные сведения см. в статье [Версии и зависимости платформы .NET Framework](../../../docs/framework/migration-guide/versions-and-dependencies.md).  
  
 Также можно настроить приложения .NET Framework 3.5 для запуска на платформе .NET Framework 4 или 4.5 даже на компьютерах, на которых установлена .NET Framework 3.5, чтобы воспользоваться направленными на повышение производительности преимуществами версий 4 и 4.5.  
  
> [!IMPORTANT]
>  Рекомендуется всегда тестировать приложение в каждой из поддерживаемых им версий .NET Framework. Сведения об обновлении приложения для поддержки более поздних версий платформы .NET Framework см. в статье [Совместимость версий в .NET Framework](../../../docs/framework/migration-guide/version-compatibility.md).  
  
 Сведения о том, как внести в приложения .NET Framework 1.0 и 1.1 изменения для поддержки Windows 7 и Windows 8, см. в статье [Миграция из .NET Framework 1.1](../../../docs/framework/migration-guide/migrating-from-the-net-framework-1-1.md).  
  
### <a name="to-configure-your-app-to-run-on-the-net-framework-4-or-45"></a>Настройка приложения для запуска в .NET Framework 4 или 4.5  
  
1.  Добавьте или найдите файл конфигурации проекта .NET Framework. Файл конфигурации приложения находится в том же каталоге, что и приложение, и имеет то же имя, однако с расширением .config. Например, для приложения с именем MyExecutable.exe файл конфигурации приложения называется MyExecutable.exe.config.  
  
     Чтобы добавить файл конфигурации, в строке меню Visual Studio выберите **Проект**, **Добавить новый элемент**. Выберите **Общие** в области слева, а затем выберите **Файл конфигурации**.  Назовите файл конфигурации *appName*.exe.config. Для проектов приложений Магазина Windows или Windows Phone эти элементы меню недоступны, поскольку изменить политику активации на этих платформах невозможно.  
  
2.  Добавьте в файл конфигурации приложения элемент [\<supportedRuntime>](../../../docs/framework/configure-apps/file-schema/startup/supportedruntime-element.md) следующим образом:  
  
    ```xml  
    <configuration>  
      <startup>  
        <supportedRuntime version="<version>"/>  
      </startup>  
    </configuration>  
    ```  
  
     где *\<version>* указывает версию среды CLR, соответствующей версии платформы .NET Framework, которую поддерживает приложение. Можно использовать следующие строки:  
  
    -   .NET Framework 1.0: "v1.0.3705"  
  
    -   .NET Framework 1.1: "v1.1.4322"  
  
    -   .NET Framework 2.0, 3.0 и 3.5: "v2.0.50727"  
  
    -   .NET Framework 4 и 4.5 (включая точечные выпуски, например 4.5.1): "v4.0"  
  
     Можно добавить несколько элементов [\<supportedRuntime>](../../../docs/framework/configure-apps/file-schema/startup/supportedruntime-element.md), перечислив их в порядке предпочтения, чтобы задать поддержку нескольких версий .NET Framework.  
  
 В следующей таблице показано, как параметры файла конфигурации приложения и версии платформы .NET Framework, установленные на компьютере, определяют версию, в которой запускается приложение .NET Framework 3.5. Примеры относятся к приложению .NET Framework 3.5, однако аналогичную логику можно использовать для нацеливания приложений, собранных с использованием более ранних версий .NET Framework. Обратите внимание, что для указания .NET Framework 3.5 в файле конфигурации приложения используется номер версии .NET Framework 2.0 (v2.0.50727).  
  
|Параметр файла app.config|На компьютере с установленной версией 3.5|На компьютере с установленными версиями 3.5 и 4 или 4.5|На компьютере с установленной версией 4 или 4.5|  
|-|-|-|-|  
|Нет|Запускается в 3.5|Запускается в 3.5|Выводит сообщение об ошибке, предлагая пользователю установить нужную версию *|  
|`<supportedRuntime version="v2.0.50727"/>`|Запускается в 3.5|Запускается в 3.5|Выводит сообщение об ошибке, предлагая пользователю установить нужную версию *|  
|`<supportedRuntime version="v2.0.50727"/>` <br /> `<supportedRuntime version="v4.0"/>`|Запускается в 3.5|Запускается в 3.5|Запускается в 4 или 4.5|  
|`<supportedRuntime version="v4.0"/>` <br /> `<supportedRuntime version="v2.0.50727"/>`|Запускается в 3.5|Запускается в 4 или 4.5|Запускается в 4 или 4.5|  
|`<supportedRuntime version="v4.0"/>`|Выводит сообщение об ошибке, предлагая пользователю установить нужную версию *|Запускается в 4 или 4.5|Запускается в 4 или 4.5|  
  
 \*Дополнительные сведения об этом сообщении об ошибке и о том, как избежать этой ошибки, см. в статье [Ошибки инициализации платформы .NET Framework. Управление взаимодействием с пользователем](../../../docs/framework/deployment/initialization-errors-managing-the-user-experience.md).  
  
## <a name="see-also"></a>См. также  
 [Миграция из .NET Framework 1.1](../../../docs/framework/migration-guide/migrating-from-the-net-framework-1-1.md)  
 [Руководство по миграции](../../../docs/framework/migration-guide/index.md)
