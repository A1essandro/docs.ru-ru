---
title: "Общие сведения об объявлении привязок | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-wpf"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "привязка данных, декларации"
  - "объявления привязки"
  - "привязка данных, декларации"
  - "расширения разметки"
  - "синтаксис объектных элементов"
  - "синтаксис, объектные элементы"
ms.assetid: b97fd626-4c0d-4761-872a-2bca5820da2c
caps.latest.revision: 34
author: "dotnet-bot"
ms.author: "dotnetcontent"
manager: "wpickett"
caps.handback.revision: 33
---
# Общие сведения об объявлении привязок
В этом разделе обсуждаются различные способы объявления привязок.  
  
   
  
<a name="Prereq"></a>   
## Предварительные требования  
 Перед прочтением этого раздела следует ознакомиться с основными понятиями и принципами использования расширений разметки.  Дополнительные сведения о расширениях разметки см. в разделе [Расширения разметки и XAML WPF](../../../../docs/framework/wpf/advanced/markup-extensions-and-wpf-xaml.md).  
  
 В этом разделе не рассматриваются понятия привязки данных.  Сведения о понятиях привязки данных см. в разделе [Общие сведения о связывании данных](../../../../docs/framework/wpf/data/data-binding-overview.md).  
  
<a name="BindinginXAML"></a>   
## Объявление привязки в XAML  
 В этом разделе описывается объявление привязки в языке XAML.  
  
<a name="MarkupExtensionSyntax"></a>   
### Использование расширения разметки  
 <xref:System.Windows.Data.Binding> является расширением разметки.  Объявление привязки, выполняемое с помощью расширения привязки, состоит из ряда предложений, следующих за ключевым словом `Binding` и разделенных запятыми \(,\).  Предложения в объявлении привязки могут следовать в любом порядке и составлять множество различных комбинаций.  Эти предложения представляют собой пары *имя*\=*значение*, где *имя* — это имя свойства <xref:System.Windows.Data.Binding>, а *значение* — значение, устанавливаемое для свойства.  
  
 Создаваемые строки объявления привязки в разметке должны быть вложены к определенному [свойству зависимостей](GTMT) целевого объекта.  В следующем примере показывается, как привязать свойство <xref:System.Windows.Controls.TextBox.Text%2A?displayProperty=fullName> с помощью расширения привязки, задавая свойства <xref:System.Windows.Data.Binding.Source%2A> и <xref:System.Windows.Data.Binding.Path%2A>.  
  
 [!code-xml[SimpleBinding#BDO1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/SimpleBinding/CSharp/Page1.xaml#bdo1)]  
  
 Таким способом можно указать большинство свойств класса <xref:System.Windows.Data.Binding>.  Дополнительные сведения о расширении привязки, а также о списке свойств класса <xref:System.Windows.Data.Binding>, которые не могут быть заданы с помощью расширения привязки, см. в разделе [Привязка расширения разметки](../../../../docs/framework/wpf/advanced/binding-markup-extension.md).  
  
<a name="ObjectElementSyntax"></a>   
### Синтаксис объектного элемента  
 Синтаксис объектного элемента является альтернативным вариантом для создания объявления привязки.  В большинстве случаев нет каких\-либо преимуществ в использовании расширения разметки или синтаксиса объектного элемента.  Тем не менее, если расширение разметки не поддерживает скрипт разработчика \(например, если значение свойства имеет нестроковый тип, для которого не существует преобразования\), следует использовать синтаксис объектного элемента.  
  
 Ниже приведен пример использования синтаксиса объектного элемента и расширения разметки:  
  
 [!code-xml[BindConversionMarkup#1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/BindConversionMarkup/CSharp/Page1.xaml#1)]  
  
 В этом примере выполняется привязка свойства <xref:System.Windows.Controls.TextBlock.Foreground%2A> посредством объявления привязки с помощью синтаксиса расширения.  В объявлении привязки для свойства <xref:System.Windows.Controls.TextBlock.Text%2A> используется синтаксис объектного элемента.  
  
 Дополнительные сведения о различных терминах см. в разделе [Подробное описание синтаксиса XAML](../../../../docs/framework/wpf/advanced/xaml-syntax-in-detail.md).  
  
<a name="MBandPB"></a>   
### Классы MultiBinding и PriorityBinding  
 Классы <xref:System.Windows.Data.MultiBinding> и <xref:System.Windows.Data.PriorityBinding> не поддерживают синтаксис расширения XAML.  Таким образом, при объявлении классов <xref:System.Windows.Data.MultiBinding> или <xref:System.Windows.Data.PriorityBinding> в XAML следует использовать синтаксис объектного элемента.  
  
<a name="BindinginCode"></a>   
## Создание привязки в коде  
 Другим способом указания привязки является установка свойств непосредственно в объекте <xref:System.Windows.Data.Binding> в коде.  В следующем примере демонстрируется создание объекта <xref:System.Windows.Data.Binding> и указание свойств в коде.  В данном примере `TheConverter` — это объект, реализующий интерфейс <xref:System.Windows.Data.IValueConverter>.  
  
 [!code-csharp[BindConversion#1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/BindConversion/CSharp/Window1.xaml.cs#1)]
 [!code-vb[BindConversion#1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/BindConversion/visualbasic/window1.xaml.vb#1)]  
[!code-csharp[BindConversion#end1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/BindConversion/CSharp/Window1.xaml.cs#end1)]
[!code-vb[BindConversion#end1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/BindConversion/visualbasic/window1.xaml.vb#end1)]  
  
 Если привязываемый объект имеет тип <xref:System.Windows.FrameworkElement> или <xref:System.Windows.FrameworkContentElement>, можно вызвать метод `SetBinding` объекта вместо метода <xref:System.Windows.Data.BindingOperations.SetBinding%2A?displayProperty=fullName>.  Пример см. в разделе [Создание привязки в коде](../../../../docs/framework/wpf/data/how-to-create-a-binding-in-code.md).  
  
<a name="Path_Syntax"></a>   
## Синтаксис Binding.Path  
 Свойство<xref:System.Windows.Data.Binding.Path%2A> служит для определения исходного значения, к которому необходимо выполнить привязку:  
  
-   В простейшем случае значение свойства <xref:System.Windows.Data.Binding.Path%2A> является именем свойства исходного объекта, используемого для привязки, например `Path=PropertyName`.  
  
-   Вложенные свойства могут задаваться с использованием того же синтаксиса, что и в [!INCLUDE[TLA#tla_cshrp](../../../../includes/tlasharptla-cshrp-md.md)].  Например, предложение `Path=ShoppingCart.Order` устанавливает привязку к вложенному свойству `Order` объекта или свойства `ShoppingCart`.  
  
-   Чтобы осуществить привязку к [вложенному свойству зависимостей](GTMT), заключите [вложенное свойство зависимостей](GTMT) в круглые скобки.  Например, для привязки [вложенного свойства зависимостей](GTMT) <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=fullName> используется синтаксис `Path=(DockPanel.Dock)`.  
  
-   Индексаторы свойства могут задаваться в квадратных скобках, следующих за именем свойства, в котором они применяются.  Например, предложение `Path=ShoppingCart[0]` устанавливает привязку к индексу, который соответствует порядку обработки символьной строки "0" с использованием внутренней индексации свойства.  Также поддерживаются вложенные индексаторы.  
  
-   Индексаторы и вложенные свойства могут использоваться в предложении `Path` одновременно, например: `Path=ShoppingCart.ShippingInfo[MailingAddress,Street].`.  
  
-   Индексаторы могут иметь несколько внутренних параметров, разделенных запятыми \(,\).  Тип каждого параметра может быть указан в круглых скобках.  Например, допускается выражение `Path="[(sys:Int32)42,(sys:Int32)24]"`, где `sys` соответствует пространству имен `System`.  
  
-   Если источник является представлением коллекции, текущий элемент можно задать косой чертой \(\/\).  Например, предложение `Path=/` задает привязку к текущему элементу в представлении.  Если источником является коллекция, этот синтаксис задает текущий элемент представления коллекции по умолчанию.  
  
-   Имена свойств и косые черты можно объединять для обхода свойств, представляющих собой коллекции.  Например, `Path=/Offices/ManagerName` указывает текущий элемент исходной коллекции, которая содержит свойство `Offices`, являющееся также коллекцией.  Ее текущий элемент представляет собой объект, содержащий свойство `ManagerName`.  
  
-   При необходимости можно также использовать путь в виде точки \(.\) для привязки к текущему источнику.  Например, запись `Text="{Binding}"` эквивалентна записи `Text="{Binding Path=.}"`.  
  
### Механизм исключения  
  
-   Внутри индексаторов \(\[ \]\) знак "крышки" \(^\) используется для пропуска следующего символа.  
  
-   При задании значения <xref:System.Windows.Data.Binding.Path%2A> в XAML, также необходимо избегать определенных знаков \(с помощью сущностей XML\), которые являются особыми для определения языка XML.  
  
    -   Чтобы избежать знака "&", используйте выражение `&`.  
  
    -   Чтобы избежать завершающего тега "\>", используйте выражение `>`.  
  
-   Кроме того, если вся привязка описывается в атрибуте с помощью синтаксиса расширения разметки, необходимо пропустить с помощью знака обратной косой черты \(\\\) символы, которые зарезервированы для анализатора расширения разметки [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]:  
  
    -   Знак обратной косой черты \(\\\) используется в качестве escape\-символ а для самого себя.  
  
    -   Знак равенства \(\=\) разделяет имя и значение свойства.  
  
    -   Запятая \(,\) разделяет свойства.  
  
    -   Правая фигурная скобка \(}\) определяет конец расширения разметки.  
  
<a name="Default"></a>   
## Поведения по умолчанию  
 Если иное не указано в объявлении, поведение по умолчанию выглядит следующим образом.  
  
-   Создается преобразователь по умолчанию, который пытается выполнить преобразование типа из значения [исходного объекта привязки](GTMT) в значение [целевого объекта привязки](GTMT).  Если преобразование не может быть выполнено, используемый по умолчанию преобразователь возвращает значение `null`.  
  
-   Если не установлено свойство <xref:System.Windows.Data.Binding.ConverterCulture%2A>, механизм привязки использует свойство `Language` [целевого объекта привязки](GTMT).  В XAML по умолчанию — это "en\-US", или же значение, унаследованное у корневого элемента \(или любого другого элемента страницы\), если для него оно было задано явно.  
  
-   Если уже существует контекст данных привязки \(например контекст данных, унаследованный от родительского элемента\), и возвращаемые этим контекстом объект или коллекция могут использоваться для привязки без изменения пути, в объявлении привязки допускается отсутствие предложений: `{Binding}`. Таким способом часто выполняется привязка для стилизации данных \(в этом случае выполняется привязка коллекции\).  Дополнительные сведения см. в разделе "Целые объекты, используемые в качестве источника привязки" раздела [Общие сведения об источниках привязки](../../../../docs/framework/wpf/data/binding-sources-overview.md).  
  
-   Используемое по умолчанию свойство <xref:System.Windows.Data.Binding.Mode%2A> может быть односторонним и двусторонним в соответствии со [свойством зависимостей](GTMT), привязка которого осуществляется.  Чтобы обеспечить необходимое поведение привязки, можно явно объявить режим привязки.  В общем случае для свойств элементов управления, редактируемых пользователем, например <xref:System.Windows.Controls.TextBox.Text%2A?displayProperty=fullName> и <xref:System.Windows.Controls.Primitives.RangeBase.Value%2A?displayProperty=fullName>, по умолчанию используются двусторонние привязки, а для большинства других свойств — односторонние привязки.  
  
-   Свойство <xref:System.Windows.Data.Binding.UpdateSourceTrigger%2A> по умолчанию может иметь значения <xref:System.Windows.Data.UpdateSourceTrigger> и <xref:System.Windows.Data.UpdateSourceTrigger>, в зависимости от привязанного [свойства зависимостей](GTMT).  Значением по умолчанию для большинства [свойств зависимостей](GTMT) является <xref:System.Windows.Data.UpdateSourceTrigger>, в то время как свойство<xref:System.Windows.Controls.TextBox.Text%2A?displayProperty=fullName> по умолчанию имеет значение <xref:System.Windows.Data.UpdateSourceTrigger>.  
  
## См. также  
 [Общие сведения о связывании данных](../../../../docs/framework/wpf/data/data-binding-overview.md)   
 [Практические руководства](../../../../docs/framework/wpf/data/data-binding-how-to-topics.md)   
 [Привязка данных](../../../../docs/framework/wpf/advanced/optimizing-performance-data-binding.md)   
 [Синтаксис PropertyPath XAML](../../../../docs/framework/wpf/advanced/propertypath-xaml-syntax.md)