---
title: "События изменения свойств"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-wpf
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- dependency properties [WPF], change events
- property value changes [WPF]
- change events [WPF], property
- events [WPF], change in property values
- creating property triggers [WPF]
- property change events [WPF], types of
- property change events [WPF]
- property triggers [WPF]
- identifying changed property events [WPF]
- property triggers [WPF], definition of
ms.assetid: 0a7989df-9674-4cc1-bc50-5d8ef5d9c055
caps.latest.revision: "10"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: e415d5ab46bc354198135fc4e0902e3017923e20
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2017
---
# <a name="property-change-events"></a>События изменения свойств
[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] определяет несколько событий, которые возникают в ответ на изменение значения свойства. Часто этим свойством является свойство зависимостей. Самим событием иногда является перенаправляемое событие, а иногда — стандартное событие [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)]. Определение события зависит от сценария, так как некоторые изменения свойств лучше перенаправлять через дерево элементов, тогда как другие в основном влияют только на объект, в котором это свойство изменено.  
  
## <a name="identifying-a-property-change-event"></a>Определение события изменения свойства  
 Не все события, сообщающие об изменении свойства, явным образом определяются как событие изменения свойства на основании шаблона сигнатуры или именования. Как правило, в описании события в документации [!INCLUDE[TLA#tla_sdk](../../../../includes/tlasharptla-sdk-md.md)] указывается, связано ли событие непосредственно с изменением значения свойства, и предоставляются перекрестные ссылки между свойством и событием.  
  
### <a name="routedpropertychanged-events"></a>События RoutedPropertyChanged  
 Некоторые события используют тип данных события и делегат, которые явно используются для событий изменения свойств. Тип данных события является <xref:System.Windows.RoutedPropertyChangedEventArgs%601>, и делегат <xref:System.Windows.RoutedPropertyChangedEventHandler%601>. Данные события и делегат имеют параметр универсального типа, который используется для указания фактического типа изменяющегося свойства при определении обработчика. Данные события содержит два свойства <xref:System.Windows.RoutedPropertyChangedEventArgs%601.OldValue%2A> и <xref:System.Windows.RoutedPropertyChangedEventArgs%601.NewValue%2A>, который затем передаются в качестве аргумента типа событий данных.  
  
 "Перенаправляемая" часть имени указывает, что событие изменения свойства зарегистрировано как перенаправляемое событие. Преимуществом перенаправления события изменения свойства является то, что верхний уровень элемента управления может получать события изменения свойств, если свойства дочерних элементов (составные части элемента управления) изменяют значения. Например, можно создать элемент управления, который включает в себя <xref:System.Windows.Controls.Primitives.RangeBase> элементов управления, таких как <xref:System.Windows.Controls.Slider>. Если значение <xref:System.Windows.Controls.Primitives.RangeBase.Value%2A> часть ползунка изменения свойств, может потребоваться обработать эти изменения в родительском элементе управления, а не на части.  
  
 Поскольку имеется старое и новое значение, то может казаться заманчивым использовать этот обработчик событий в качестве проверяющего элемента управления для значения свойства. Однако большинство событий изменения свойств создается не для этого. Как правило, предоставляются значения, на основе которых можно действовать в других логических областях кода, но на самом деле изменение значений из обработчика событий не рекомендуется и может привести к непреднамеренной рекурсии в зависимости от реализации обработчика.  
  
 Если свойство является пользовательское свойство зависимостей, или если вы работаете с производным классом где определен код создания экземпляра, лучше механизма для отслеживания изменений свойств, встроенной в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] системы свойств: обратных вызовов системы свойств <xref:System.Windows.CoerceValueCallback> и <xref:System.Windows.PropertyChangedCallback>. Дополнительные сведения об использовании системы свойств [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] для проверки и приведения см. в разделах [Проверка и обратные вызовы свойства зависимостей](../../../../docs/framework/wpf/advanced/dependency-property-callbacks-and-validation.md) и [Пользовательские свойства зависимостей](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md).  
  
### <a name="dependencypropertychanged-events"></a>События DependencyPropertyChanged  
 Является еще одной пары типов, которые являются частью скрипта события изменения свойства <xref:System.Windows.DependencyPropertyChangedEventArgs> и <xref:System.Windows.DependencyPropertyChangedEventHandler>. События для этих изменений свойств не перенаправляются; это стандартные события [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]. <xref:System.Windows.DependencyPropertyChangedEventArgs>данные событий, необычных тип отчета, так как он не является производным от <xref:System.EventArgs>; <xref:System.Windows.DependencyPropertyChangedEventArgs> представляет собой структуру, а не класс.  
  
 События, использующие <xref:System.Windows.DependencyPropertyChangedEventArgs> и <xref:System.Windows.DependencyPropertyChangedEventHandler> немного более распространены, чем `RoutedPropertyChanged` события. Пример события, которое использует эти типы — <xref:System.Windows.UIElement.IsMouseCapturedChanged>.  
  
 Как <xref:System.Windows.RoutedPropertyChangedEventArgs%601>, <xref:System.Windows.DependencyPropertyChangedEventArgs> также сообщает старое и новое значение для свойства. Аналогично это относится и к тому, что вы можете делать со значениями. Обычно не рекомендуется пытаться снова изменить значения в отправителе в ответ на это событие.  
  
## <a name="property-triggers"></a>Триггеры свойств  
 С событием изменения свойств тесно связана другая концепция — триггер свойств. Триггер свойств создается внутри стиля или шаблона и позволяет создавать условное поведение на основе значения свойства, которому назначается триггер.  
  
 У триггера свойств должно быть свойство зависимостей. Оно может быть (и часто является) свойством зависимостей только для чтения. Хорошим указанием на то, что свойство зависимостей, предоставляемое элементом управления, хотя бы частично разработано как триггер свойства, является Is в начале имени свойства. Свойства с таким именованием часто являются логическим свойством зависимостей только для чтения, а основной сценарий для свойства — предоставление состояния элемента управления, которое может иметь последствия для пользовательского интерфейса реального времени и, следовательно, является кандидатом на роль триггера свойств.  
  
 Некоторые из этих свойств также имеют специальное событие изменения свойства. Например, свойство <xref:System.Windows.UIElement.IsMouseCaptured%2A> имеет событие изменения свойства <xref:System.Windows.UIElement.IsMouseCapturedChanged>. Само свойство доступно только для чтения, его значение настраивается системой ввода и входных система вызывает <xref:System.Windows.UIElement.IsMouseCapturedChanged> на каждое изменение в режиме реального времени.  
  
 По сравнению с истинным событием изменения свойства, использование триггера свойств для реагирования на изменение свойства имеет некоторые ограничения.  
  
 Триггеры свойств работают через логику точного соответствия. Нужно указать свойство и конкретное значение, для которого будет срабатывать триггер. Например: `<Setter Property="IsMouseCaptured" Value="true"> ... </Setter>`. Из-за этого ограничения большая часть триггеров свойств будет использоваться для логических свойств или свойств, которые принимают определенное значение перечисления, когда возможный диапазон значений достаточно управляем, чтобы определить триггер для каждого случая. Триггеры свойств могут существовать только для специальных значений, например когда количество элементов достигает нуля, а также нет триггера, который учитывает случаи, когда значение свойства изменяется от нуля (вместо триггеров для всех случаев вам может понадобиться обработчик события кода или поведение по умолчанию, которое снова возвращается из состояния триггера, когда значение отлично от нуля).  
  
 Синтаксис триггера свойств аналогичен оператору if в программировании. Если условие триггера истинно, тогда "тело" триггера свойств "выполняется". "Тело" триггера свойств является не кодом, а разметкой. Ограничивается использованием одного или нескольких, разметку <xref:System.Windows.Setter> элементы для задания других свойств объекта, где применяется стиль или шаблон.  
  
 Чтобы сместить условие «if» триггера свойства, которое имеет широкий набор возможных значений, обычно рекомендуется, чтобы установить это же значение свойства по умолчанию с помощью <xref:System.Windows.Setter>. В этом случае <xref:System.Windows.Trigger> автономной задания будет иметь приоритет, если условие триггера имеет значение true и <xref:System.Windows.Setter> , не находится в <xref:System.Windows.Trigger> будет иметь приоритет всякий раз, когда условие триггера не выполняется.  
  
 Триггеры свойств, как правило, подходят для сценариев, в которых одно или несколько свойств Appearance должны изменяться в зависимости от состояния другого свойства в том же элементе.  
  
 Дополнительные сведения о триггерах свойств см. в разделе [Использование стилей и шаблонов](../../../../docs/framework/wpf/controls/styling-and-templating.md).  
  
## <a name="see-also"></a>См. также  
 [Общие сведения о перенаправленных событиях](../../../../docs/framework/wpf/advanced/routed-events-overview.md)  
 [Общие сведения о свойствах зависимости](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md)
