---
title: "Сериализация ограничений XamlWriter.Save | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-wpf"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "XamlWriter.Save - ограничения"
  - "XamlWriter.Save - сериализация ограничений"
  - "XamlWriter.Save, сериализация ограничений"
ms.assetid: f86acc91-2b67-4039-8555-505734491d36
caps.latest.revision: 10
author: "dotnet-bot"
ms.author: "dotnetcontent"
manager: "wpickett"
caps.handback.revision: 9
---
# Сериализация ограничений XamlWriter.Save
[!INCLUDE[TLA#tla_api](../../../../includes/tlasharptla-api-md.md)] <xref:System.Windows.Markup.XamlWriter.Save%2A> можно использовать для сериализации содержимого приложения [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] в качестве файла [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)].  Однако, существуют некоторые важные ограничения в то, что можно сериализовать.  Эти ограничения и некоторые общие вопросы описаны в данном разделе.  
  
 [!INCLUDE[autoOutline](../Token/autoOutline_md.md)]  
  
<a name="Run_Time__Not_Design_Time_Representation"></a>   
## Время выполнения, представление времени разработки  
 Основная философия того, что может сериализоваться с помощью вызова <xref:System.Windows.Markup.XamlWriter.Save%2A>, заключается в том, что результатом будет представление сериализованного объекта во время выполнения.  Многие свойства разработки исходного файла [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] уже могут быть оптимизированы или потеряны во временя загрузки [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] в качестве объектов памяти, и не сохраняются при вызове <xref:System.Windows.Markup.XamlWriter.Save%2A> для сериализации.  Результат сериализации является эффективным представлением построенного логического дерева приложения, но не обязателен для исходного [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], который его создал.  Эти проблемы затрудняют использование сериализации <xref:System.Windows.Markup.XamlWriter.Save%2A> как части расширенной оболочки конструктора [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].  
  
<a name="Serialization_is_Self_Contained"></a>   
## Сериализация является самодостаточной  
 Сериализованные выходные данные <xref:System.Windows.Markup.XamlWriter.Save%2A> самодостаточны; все, что сериализуется, содержится внутри одной страницы [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], с одним корневым элементом и отсутствием внешних ссылок, кроме [!INCLUDE[TLA2#tla_uri#plural](../../../../includes/tla2sharptla-urisharpplural-md.md)].  Например, ссылочные ресурсы страницы ресурсов приложения будут отображаться, если они были компонентом сериализуемой страницы.  
  
<a name="Extension_References_are_Dereferenced"></a>   
## Расширенные ссылки являются разыменованными  
 Общие ссылки на объекты, сделанные различными расширенными форматами разметки, такими как `StaticResource` или `Binding`, будут разыменованы в процессе сериализации.  Они были уже разыменованы на момент создания объектов памяти средой выполнения приложения, и логика <xref:System.Windows.Markup.XamlWriter.Save%2A> повторно не посещает исходный [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] для восстановления таких ссылок для сериализованных выходных данных.  Это потенциально замораживает привязки данных или полученное значение ресурса, используемого последним в представлении времени выполнения, с ограниченной или косвенной возможностью отличать такое значение от любого другого значения, установленного локально.  Рисунки также сериализуются как объектные ссылки на изображения в том виде, в котором они существуют в проекте, вместо исходных ссылок, теряющих имя файла или [!INCLUDE[TLA2#tla_uri](../../../../includes/tla2sharptla-uri-md.md)], на который первоначально ссылались.  Даже ресурсы, объявленные внутри одной и той же страницы, сериализованы там же, где они ссылались, а не там где сохранены в качестве ключа коллекции ресурсов.  
  
<a name="Event_Handling_is_Not_Preserved"></a>   
## Обработка событий не сохраняется  
 При сериализации обработчиков событий, которые добавляются с помощью [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], они не сохраняются.  [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] без выделенного кода \(также без связанного механизма x:Code\) не имеет способа сериализации процедурной логики среды выполнения.  Поскольку сериализация является самодостаточной и ограничивается логическим деревом, не существует средства для хранения обработчиков событий.  В результате атрибуты обработчика событий, и сам атрибут, и строковое значение имени обработчика, удаляются из выходных данных [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].  
  
<a name="Realistic_Scenarios_for_Use_of_XAMLWriter_Save"></a>   
## Реалистичные сценарии использования XAMLWriter.Save  
 Так как ограничения, перечисленные здесь, является достаточно значительными, существует еще несколько подходящих скриптов использования <xref:System.Windows.Markup.XamlWriter.Save%2A> для сериализации.  
  
-   Вектор или вывод графической информации: выходные данные отображаемой области могут использоваться для воспроизведения того же вектора или рисунков при перезагрузке.  
  
-   Поле форматированного текста и потоковые документы: текст, форматирование элементов и вложенность элементов сохраняются в выходных данных.  Это может быть полезен для механизмов, оценивающих возможности буфер обмена.  
  
-   Сохранение данных бизнес\-объекта: если у вас есть сохраненные данные в пользовательских элементах, такие как данные [!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)], поэтому до тех пор, пока ваши бизнес\-объекты следуют основным правилам [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], например, предоставление пользовательских конструкторов и преобразование значений свойств по ссылке, эти бизнес\-объекты могут быть сохранены с помощью сериализации.