---
title: Наследование значения свойства
ms.date: 03/30/2017
helpviewer_keywords:
- inheritance [WPF], property values
- value inheritance [WPF]
- properties [WPF], value inheritance
ms.assetid: d7c338f9-f2bf-48ed-832c-7be58ac390e4
ms.openlocfilehash: 6af356d1c6325714fbc98cd5fe8c3ebc1825fcb1
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/04/2018
---
# <a name="property-value-inheritance"></a>Наследование значения свойства
Наследование значения свойства — это функция системы свойств [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]. Наследование значения свойства позволяет дочерним элементам в дереве элементов получать значение конкретного свойства из родительских элементов, наследуя это значение, настроенное в ближайшем родительском элементе. Родительский элемент также мог получить свое значение через наследование значения свойства, поэтому система потенциально рекурсивно проходит по элементам к корню страницы. Наследование значения свойства не является стандартным поведением системы свойств. Чтобы свойство инициировало наследование значения свойства для дочерних элементов, оно должно быть установлено с определенным параметром метаданных.  
  

  
<a name="Property_Value_Inheritance_is_Containment_Inheritance"></a>   
## <a name="property-value-inheritance-is-containment-inheritance"></a>Наследование значения свойства является наследованием вложений  
 Используемый здесь термин "наследование" отличается от концепции наследования в контексте типов и общего объектно-ориентированного программирования, где производные классы наследуют определения членов от своих базовых классов. Это значение наследования также активно в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]: свойства, определенные в различных базовых классах, отображаются как атрибуты для производных классов [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] при использовании в качестве элементов и представляются для кода как члены. В частности, наследование значения свойства заключается в том, как значения свойств могут наследоваться от одного элемента к другому на основе иерархических отношений в дереве элементов. Это дерево элементов наиболее явно видно при встраивании элементов в другие элементы во время определения приложения в разметке [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]. Деревья объектов также могут создаваться программно путем добавления объектов к выделенным коллекциям других объектов, а наследование значения свойства работает аналогично в конечном дереве во время выполнения.  
  
<a name="Practical_Applications_of_Property_Value_Inheritance"></a>   
## <a name="practical-applications-of-property-value-inheritance"></a>Практическое применение наследования значения свойства  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA#tla_api#plural](../../../../includes/tlasharptla-apisharpplural-md.md)] включают несколько свойств, в которых включено наследование свойства. Как правило, сценарий для них состоит во включении свойства там, где уместно устанавливать свойство только один раз на странице, но это свойство также является членом одного из базовых классов элементов и, таким образом, может существовать в большинстве дочерних элементов. Например <xref:System.Windows.FrameworkElement.FlowDirection%2A> свойства элементов управления, переданное содержимое которых должен быть представлен и располагаются на странице. Как правило, требуется, чтобы концепция направления текста согласованно обрабатывалась во всех дочерних элементах. Если направление передачи по какой-то причине было прервано на некотором уровне дерева элементов в результате действия пользователя или среды, то оно должно быть перезапущено повсюду. Когда <xref:System.Windows.FrameworkElement.FlowDirection%2A> свойство выполняется наследование, значение должны быть только установить или сбросить один раз на уровне в дереве элементов, которое охватывает потребности представления каждой страницы в приложении. Таким образом будет наследоваться даже начальное значение по умолчанию. Модель наследования значений свойств также позволяет отдельным элементам сбрасывать значение в тех редких случаях, когда сочетание направлений текста является преднамеренным.  
  
<a name="Making_a_Custom_Property_Inheritable"></a>   
## <a name="making-a-custom-property-inheritable"></a>Создание настраиваемого наследуемого свойства  
 Изменяя метаданные настраиваемого свойства, можно создать собственные наследуемые свойства. Обратите внимание, что назначение свойства как наследуемого оказывает определенное влияние на производительность. В случаях, когда это свойство не имеет установленного локального значения или значения, полученного через стили, шаблоны или привязки данных, наследуемое свойство предоставляет присвоенные ему значения всем дочерним элементам в логическом дереве.  
  
 Чтобы свойство участвовало в наследовании значения, создайте настраиваемое присоединенное свойство, как описано в разделе [Регистрация присоединенного свойства](../../../../docs/framework/wpf/advanced/how-to-register-an-attached-property.md). Зарегистрируйте свойство с метаданными (<xref:System.Windows.FrameworkPropertyMetadata>) и укажите параметр «Inherits» в параметры в этих метаданных. Также убедитесь, что для свойства задано значение по умолчанию, так как теперь это значение будет наследоваться. Несмотря на регистрацию свойства как присоединенного, можно создать "оболочку" свойства для получения/настройки доступа к типу владельца точно так же, как и для "неприсоединенного" свойства зависимостей. После этого наследуемое свойство может быть установлено либо с помощью оболочки прямой свойства для типа-владельца или производного типа, или это можно сделать с помощью синтаксиса вложенного свойства для какого-либо <xref:System.Windows.DependencyObject>.  
  
 Вложенные свойства похожи на глобальные свойства; можно проверять значение для какого-либо <xref:System.Windows.DependencyObject> и получить допустимый результат. Типичный сценарий для вложенных свойств — для задания значений свойств для дочерних элементов, и этот скрипт будет более эффективен, если рассматриваемое свойство является присоединенным свойством, всегда неявно присутствует в качестве вложенного свойства для каждого элемента (<xref:System.Windows.DependencyObject>) в дереве.  
  
> [!NOTE]
>  Несмотря на то что наследование значения свойства может выполняться для неприсоединенных свойств зависимостей, поведение наследования для таких свойств через определенные границы элементов в дереве среды выполнения не определено. Всегда используйте <xref:System.Windows.DependencyProperty.RegisterAttached%2A> для регистрации свойства, где указываются <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> в метаданных.  
  
<a name="InheritanceContext"></a>   
## <a name="inheriting-property-values-across-tree-boundaries"></a>Наследование значений свойств за границами дерева  
 Наследование свойств работает путем обхода дерева элементов. Это дерево часто параллельно логическому дереву. Однако при включении объект уровня ядра WPF в разметку, определяющую дерево элементов, таких как <xref:System.Windows.Media.Brush>, вы создали дискретное логическое дерево. Истинное логическое дерево концептуально не расширяется через <xref:System.Windows.Media.Brush>, так как логическое дерево является понятием уровня платформы WPF. Это отражено в результаты при использовании методов <xref:System.Windows.LogicalTreeHelper>. Тем не менее, можно устранить этот разрыв в логическом дереве наследование значения свойства и по-прежнему передавать унаследованные значения до до тех пор, пока наследуемое свойство зарегистрировано в качестве вложенного и не преднамеренное границ Блокирование наследования (например <xref:System.Windows.Controls.Frame>) обнаружен.  
  
## <a name="see-also"></a>См. также  
 [Метаданные свойства зависимостей](../../../../docs/framework/wpf/advanced/dependency-property-metadata.md)  
 [Общие сведения о присоединенных свойствах](../../../../docs/framework/wpf/advanced/attached-properties-overview.md)  
 [Приоритет значения свойства зависимостей](../../../../docs/framework/wpf/advanced/dependency-property-value-precedence.md)
