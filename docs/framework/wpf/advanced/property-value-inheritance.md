---
title: "Наследование значения свойства | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-wpf"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "наследование, значения свойств"
  - "свойства, наследование значений"
  - "наследование значений"
ms.assetid: d7c338f9-f2bf-48ed-832c-7be58ac390e4
caps.latest.revision: 16
author: "dotnet-bot"
ms.author: "dotnetcontent"
manager: "wpickett"
caps.handback.revision: 15
---
# Наследование значения свойства
Наследование значения свойства является компонентом системы свойств [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].  Наследование значения свойства позволяет дочерним элементам в дереве элементов получить значение конкретного свойства из родительского элемента, наследующего это значение, если оно было установлено в любом ближайшем родительском элементе.  Родительский элемент может также получить свое значение через наследование значения свойства, таким образом система потенциально рекурсивно проходит по всем путям к корню страницы.  Наследование значения свойства не является стандартным режимом системы свойств; свойство должно быть установлено с конкретными параметрами метаданных, чтобы вызвать инициирование этим свойством наследования значения свойства в дочерних элементах.  
  
 [!INCLUDE[autoOutline](../Token/autoOutline_md.md)]  
  
<a name="Property_Value_Inheritance_is_Containment_Inheritance"></a>   
## Наследование значения свойства является вложенным наследованием  
 Термин «наследование» здесь отличается от наследования в контексте типов и общего объектно\-ориентированного программирования, где производные классы наследуют определения членов от своих базовых классов.  Это значение наследования также активно в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]: свойства, определенные в различных базовых классах, представляются как атрибуты для производных классов [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] при использовании в качестве элементов и как элементы — в коде.  Наследование значения свойства зависит, главным образом, от того, как значения свойства могут наследоваться от одного элемента в другой в зависимости от связи типа "родители\-потомки" в дереве элементов.  Это дерево элементов наиболее полно отображается при наличии вложенных элементов внутри других элементов во время определения приложения в разметке [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].  Деревья объектов могут также создаваться программно, путем добавления объектов в указанную коллекцию других объектов, и наследование значения свойства происходит таким же образом в конечном дереве во время выполнения.  
  
<a name="Practical_Applications_of_Property_Value_Inheritance"></a>   
## Практическое применение наследования значения свойства  
 [!INCLUDE[TLA#tla_api#plural](../../../../includes/tlasharptla-apisharpplural-md.md)] [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] включают несколько свойств, имеющих активное наследование свойства.  Как правило, скриптом для этого является вызов свойства в том случае, где необходимо установить свойство только один раз на каждой странице, но где свойство является также членом одного из классов базовых элементов и, таким образом, будет существовать в большей части дочерних элементов.  Например, элементы управления свойства <xref:System.Windows.FrameworkElement.FlowDirection%2A>, переданное содержимое которых должно быть предоставлено и организовано на странице.  Как правило, требуется единообразная обработка концепции потока текста во всех дочерних элементах.  Если направление передачи по какой\-либо причине было прервано на некотором уровне дерева элементов действием пользователя или среды, оно должно быть прервано везде.  Если свойство <xref:System.Windows.FrameworkElement.FlowDirection%2A> подлежит наследованию, значение должно быть задано или сброшено только один раз на каждом уровне в дереве элементов, которое охватывает потребности представления каждой страницы приложения.  Даже начальное значение по умолчанию будет наследовать таким образом.  Модель наследования значения свойства по\-прежнему позволяет отдельным элементам сбрасывать значение в редких случаях, когда намеренно возникает смешение направлений потока.  
  
<a name="Making_a_Custom_Property_Inheritable"></a>   
## Создание настраиваемого наследования свойства  
 Изменяя настраиваемые метаданные свойства, можно также создавать собственное настраиваемое наследование свойств.  Однако стоит отметить, что назначение свойства как наследуемого оказывает определенное влияние на производительность.  В случаях, когда это свойство не имеет установленного локального значения или значения, полученного через стили, шаблоны или связывание данных, наследуемое свойство предоставляет свое назначенное значение свойства для всех дочерних элементов в логическом дереве.  
  
 Чтобы настроить участие свойства в наследовании значений, создайте настраиваемое вложенное свойство зависимостей, как описано в разделе [Регистрация вложенного свойства зависимостей](../../../../docs/framework/wpf/advanced/how-to-register-an-attached-property.md).  Зарегистрируйте свойство с метаданными \(<xref:System.Windows.FrameworkPropertyMetadata>\) и укажите параметр «Inherits» в установках параметров в этих метаданных.  Также убедитесь, что свойство имеет установленное значение по умолчанию, так как теперь будет наследоваться это значение.  Несмотря на то, что свойство было зарегистрировано как вложенное, может также потребоваться создать «оболочку» свойства для методов доступа Get и Set для типа\-владельца так же, как потребовалось бы для «невложенного» [свойства зависимостей](GTMT).  После этого наследуемое свойство может быть установлено либо с помощью непосредственной «оболочки» свойства для типа\-владельца или производного типа, либо с помощью синтаксиса вложенного свойства зависимостей для любого объекта <xref:System.Windows.DependencyObject>.  
  
 Концептуально, вложенные свойства зависимостей похожи на глобальные свойства; можно проверить значение любого объекта <xref:System.Windows.DependencyObject> и получить допустимый результат.  Типичным скриптом для вложенных свойств зависимостей является установка значений свойства для дочерних элементов, и этот скрипт будет более эффективен, если рассматриваемое свойство является присоединенным свойством зависимостей, неявно представленным в качестве вложенного свойства для каждого элемента \(<xref:System.Windows.DependencyObject>\) в дереве.  
  
> [!NOTE]
>  Хотя может показаться, что наследование значения свойства работает для невложенных свойств зависимости, поведение наследования для невложенного свойства в определенных границах элемента в дереве времени выполнения неизвестно.  Всегда используйте метод <xref:System.Windows.DependencyProperty.RegisterAttached%2A> для регистрации свойства, где в метаданных указывается параметр <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A>.  
  
<a name="InheritanceContext"></a>   
## Наследование значений свойства за границами дерева  
 Наследование свойства работает посредством пересечения границ дерева элементов.  Это дерево часто соответствует логическому дереву.  Однако при включении объекта [уровня ядра WPF](GTMT) в разметку, определяющую дерево элементов, например, <xref:System.Windows.Media.Brush>, создается дискретное логическое дерево.  Истинное логическое дерево концептуально не расширяется через <xref:System.Windows.Media.Brush>, поскольку логическое дерево является понятием [уровня инфраструктуры WPF](GTMT).  Это отражено в результатах использования методов <xref:System.Windows.LogicalTreeHelper>.  Тем не менее, наследование значения свойства может связывать промежутки логического дерева и может по\-прежнему передавать унаследованные значения до тех пор, пока наследуемое свойство зарегистрировано в качестве вложенного и не встречается преднамеренное ограничение блоков наследования \(например <xref:System.Windows.Controls.Frame>\).  
  
## См. также  
 [Метаданные свойства зависимости](../../../../docs/framework/wpf/advanced/dependency-property-metadata.md)   
 [Общие сведения о вложенных свойствах зависимостей](../../../../docs/framework/wpf/advanced/attached-properties-overview.md)   
 [Приоритет значения свойств зависимостей](../../../../docs/framework/wpf/advanced/dependency-property-value-precedence.md)