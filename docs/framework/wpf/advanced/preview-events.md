---
title: "События предварительного просмотра | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-wpf"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "события, Предварительный просмотр"
  - "события, подавление"
  - "События предварительного просмотра"
  - "подавление событий"
ms.assetid: b5032308-aa9c-4d02-af11-630ecec8df7e
caps.latest.revision: 7
author: "dotnet-bot"
ms.author: "dotnetcontent"
manager: "wpickett"
caps.handback.revision: 7
---
# События предварительного просмотра
События предварительного просмотра \(также называются событиями с нисходящей маршрутизацией\) представляют собой перенаправленные события, в которых направление маршрута перемещается из корня приложения в сторону элемента, вызвавшего данное событие, и передается в качестве источника данным события.  События предварительного просмотра поддерживаются и являются обязательными не для всех скриптов событий. В этом разделе описываются ситуации, в которых существуют события предварительного просмотра, порядок их обработки в приложениях или компонентах, а также случаи, в которых рекомендуется создание событий предварительного просмотра в пользовательских компонентах или классах.  
  
## События и входные данные предварительного просмотра  
 В процессе общей обработки события предварительного просмотра следует внимательно относиться к пометке событий обработанными в данных события.  Обработка события предварительного просмотра для любого элемента, отличного от вызвавшего его \(элемент, который передается в качестве источника данным события\), не позволяет выполнить обработку события для элемента, которым оно вызвано.  В некоторых случаях, особенно если существуют указанные элементы, связанные с компоновкой элемента управления, такое поведение является желательным.  
  
 В частности, для событий ввода экземпляры данных события совместно используются событиями предварительного просмотра и эквивалентными событиями с восходящей маршрутизацией.  Если для пометки события ввода обработанным используется класс события предварительного просмотра, класс события ввода с восходящей маршрутизацией не вызывается.  Если для пометки события обработанным используется экземпляр события предварительного просмотра, обработчики событий с восходящей маршрутизацией обычно не вызываются.  Обработчики класса или экземпляра могут быть зарегистрированы или присоединены с возможностью вызова даже в том случае, если событие помечено обработанным \(этот способ обычно не используется\).  
  
 Дополнительные сведения об обработке классов и о том, как они связаны с событиями предварительного просмотра, см. в разделе [Маркировка перенаправленных событий как обработанных и обработка классов](../../../../docs/framework/wpf/advanced/marking-routed-events-as-handled-and-class-handling.md).  
  
### Обход скрытия события элементами управления  
 События предварительного просмотра часто используются при обработке составного элемента управления событий ввода.  В некоторых случаях вызов некоторых событий элемента управления запрещается при разработке, например, для его последующей замены определяемым в компоненте событием, которое содержит более точные сведения и подразумевает более конкретное поведение.  Например, в элементе управления [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <xref:System.Windows.Controls.Button> запрещаются события с восходящей маршрутизацией <xref:System.Windows.UIElement.MouseLeftButtonDown> и <xref:System.Windows.UIElement.MouseLeftButtonDown>, которые вызываются элементом <xref:System.Windows.Controls.Button> или его составными элементами для регистрации действий мыши. Вместо них всегда вызывается событие <xref:System.Windows.Controls.Primitives.ButtonBase.Click> самим элементом управления <xref:System.Windows.Controls.Button>.  Событие и его данные по\-прежнему продолжают перемещаться по маршруту, но, поскольку в элементе управления <xref:System.Windows.Controls.Button> данные события помечаются как <xref:System.Windows.RoutedEventArgs.Handled%2A>, вызываются только те обработчики событий, для которых явно указана необходимость их вызова для параметра `handledEventsToo`.  Чтобы обрабатывать запрещенное элементом управления событие, в других элементах, расположенных по направлению к корню приложения, присоедините в коде обработчики со значением параметра `handledEventsToo`, равным `true`.  В большинстве случаев более простым способом изменения направления маршрутизации является обработка события ввода, эквивалентного событию предварительного просмотра.  Например, если в элементе управления запрещено событие <xref:System.Windows.UIElement.MouseLeftButtonDown>, попробуйте присоединить обработчик событий <xref:System.Windows.UIElement.PreviewMouseLeftButtonDown>.  Этот метод подходит только для базовых событий ввода элементов, например <xref:System.Windows.UIElement.MouseLeftButtonDown>.  Для этих событий ввода используются пары событий с нисходящей и восходящей маршрутизацией, вызов обоих событий и совместное использование данных события.  
  
 Каждый из этих методов имеет побочные эффекты или ограничения.  Побочным эффектом обработки события предварительного просмотра является то, что обработка события в конкретный момент времени может отключить обработчики, которые запрограммированы для обработки событий с восходящей маршрутизацией. В связи с этим обычно не рекомендуется помечать событие обработанным, если оно по\-прежнему находится в части предварительного просмотра маршрута.  Ограничение метода `handledEventsToo` заключается в том, что нельзя задать обработчик `handledEventsToo` в [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] в качестве атрибута. Вместо этого необходимо зарегистрировать обработчик событий в коде после получения объектной ссылки на элемент, к которому обработчик будет присоединен.  
  
## См. также  
 [Маркировка перенаправленных событий как обработанных и обработка классов](../../../../docs/framework/wpf/advanced/marking-routed-events-as-handled-and-class-handling.md)   
 [Общие сведения о перенаправленных событиях](../../../../docs/framework/wpf/advanced/routed-events-overview.md)