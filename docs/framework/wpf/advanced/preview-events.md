---
title: События предварительного просмотра
ms.date: 03/30/2017
helpviewer_keywords:
- Preview events [WPF]
- suppressing events [WPF]
- events [WPF], Preview
- events [WPF], suppressing
ms.assetid: b5032308-aa9c-4d02-af11-630ecec8df7e
ms.openlocfilehash: 2d6c1ab32cb43730af2f935f4bd4405059994c12
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/04/2018
ms.locfileid: "33546140"
---
# <a name="preview-events"></a><span data-ttu-id="2b6c5-102">События предварительного просмотра</span><span class="sxs-lookup"><span data-stu-id="2b6c5-102">Preview Events</span></span>
<span data-ttu-id="2b6c5-103">События предварительного просмотра, также известные как туннелирование событий, являются перенаправленных событий, где направление маршрута перемещается из корня приложения в сторону элемента, вызвавшего событие и отображается как источник в данных события.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-103">Preview events, also known as tunneling events, are routed events where the direction of the route travels from the application root towards the element that raised the event and is reported as the source in event data.</span></span> <span data-ttu-id="2b6c5-104">Не для всех сценариев событий поддерживаться или требуется события предварительного просмотра; в этом разделе описываются ситуациях, где существуют события предварительного просмотра, каким образом приложениями или компонентами их обработки, и случаи, где создание событий предварительного просмотра в пользовательских компонентов или классов может быть целесообразным.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-104">Not all event scenarios support or require preview events; this topic describes the situations where preview events exist, how applications or components should handle them, and cases where creating preview events in custom components or classes might be appropriate.</span></span>  
  
## <a name="preview-events-and-input"></a><span data-ttu-id="2b6c5-105">Просмотр событий и входных данных</span><span class="sxs-lookup"><span data-stu-id="2b6c5-105">Preview Events and Input</span></span>  
 <span data-ttu-id="2b6c5-106">При обработке события в общем случае следует осторожно предварительного просмотра пометке событий обработано в данных.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-106">When you handle Preview events in general, be cautious about marking the events handled in the event data.</span></span> <span data-ttu-id="2b6c5-107">Обработка события предварительного просмотра для любого элемента, отличного от элемента, вызвавшего его (элемент отображается как источник в данных события) приводит к не создавая элемент возможность обработки события, она была создана.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-107">Handling a Preview event on any element other than the element that raised it (the element that is reported as the source in the event data) has the effect of not providing an element the opportunity to handle the event that it originated.</span></span> <span data-ttu-id="2b6c5-108">Иногда это нужный результат, особенно в том случае, если указанные элементы существуют в с компоновкой элемента управления.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-108">Sometimes this is the desired result, particularly if the elements in question exist in relationships within the compositing of a control.</span></span>  
  
 <span data-ttu-id="2b6c5-109">Для входных событий в частности, события предварительного просмотра также совместно использовать экземпляры данных события с эквивалентный восходящей.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-109">For input events specifically, Preview events also share event data instances with the equivalent bubbling event.</span></span> <span data-ttu-id="2b6c5-110">Если для пометки события ввода обработанным используется класс события предварительного просмотра, восходящей обработчика события ввода класса не будет вызываться.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-110">If you use a Preview event class handler to mark the input event handled, the bubbling input event class handler will not be invoked.</span></span> <span data-ttu-id="2b6c5-111">Или, если пометить событие как обработанное используется экземпляр события предварительного просмотра, обработчики событий с восходящей маршрутизацией обычно не вызываются.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-111">Or, if you use a Preview event instance handler to mark the event handled, handlers for the bubbling event will not typically be invoked.</span></span> <span data-ttu-id="2b6c5-112">Обработчики класса или экземпляра может быть зарегистрирован или присоединенного с возможностью вызван, даже если событие помечено как обработанное, но этот метод обычно не используется.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-112">Class handlers or instance handlers can be registered or attached with an option to be invoked even if the event is marked handled, but that technique is not commonly used.</span></span>  
  
 <span data-ttu-id="2b6c5-113">Дополнительные сведения об обработке классов и как они связаны с событиями предварительного просмотра в разделе [как Handled и обработка класса](../../../../docs/framework/wpf/advanced/marking-routed-events-as-handled-and-class-handling.md).</span><span class="sxs-lookup"><span data-stu-id="2b6c5-113">For more information about class handling and how it relates to Preview events see [Marking Routed Events as Handled, and Class Handling](../../../../docs/framework/wpf/advanced/marking-routed-events-as-handled-and-class-handling.md).</span></span>  
  
### <a name="working-around-event-suppression-by-controls"></a><span data-ttu-id="2b6c5-114">Обход скрытия события элементами управления</span><span class="sxs-lookup"><span data-stu-id="2b6c5-114">Working Around Event Suppression by Controls</span></span>  
 <span data-ttu-id="2b6c5-115">Единственный случай, где часто используются события предварительного просмотра — для обработки входных событий составной элемент управления.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-115">One scenario where Preview events are commonly used is for composited control handling of input events.</span></span> <span data-ttu-id="2b6c5-116">В некоторых случаях автор элемента управления подавляет некоторые события из исходящих от их управления, возможно, чтобы заменить это событие, определяемых компонентом, которое содержит дополнительные сведения или подразумевает особое поведение.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-116">Sometimes, the author of the control suppresses a certain event from originating from their control, perhaps in order to substitute a component-defined event that carries more information or implies a more specific behavior.</span></span> <span data-ttu-id="2b6c5-117">Для экземпляра [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <xref:System.Windows.Controls.Button> подавляет <xref:System.Windows.UIElement.MouseLeftButtonDown> и <xref:System.Windows.UIElement.MouseLeftButtonDown> восходящей события, вызванные <xref:System.Windows.Controls.Button> или его составными элементами для регистрации действий мыши и вызов <xref:System.Windows.Controls.Primitives.ButtonBase.Click> событие, которое всегда вызывает <xref:System.Windows.Controls.Button> сам.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-117">For instance, a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <xref:System.Windows.Controls.Button> suppresses <xref:System.Windows.UIElement.MouseLeftButtonDown> and <xref:System.Windows.UIElement.MouseLeftButtonDown> bubbling events raised by the <xref:System.Windows.Controls.Button> or its composite elements in favor of capturing the mouse and raising a <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event that is always raised by the <xref:System.Windows.Controls.Button> itself.</span></span> <span data-ttu-id="2b6c5-118">Событие и его данные по-прежнему в маршруте, но поскольку <xref:System.Windows.Controls.Button> помечает данных события к <xref:System.Windows.RoutedEventArgs.Handled%2A>, только обработчики событий, для которых явно указана необходимость их вызова `handledEventsToo` вызываются.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-118">The event and its data still continue along the route, but because the <xref:System.Windows.Controls.Button> marks the event data as <xref:System.Windows.RoutedEventArgs.Handled%2A>, only handlers for the event that specifically indicated they should act in the `handledEventsToo` case  are invoked.</span></span>  <span data-ttu-id="2b6c5-119">Если другие элементы к корню приложения по-прежнему нужна возможность обрабатывать запрещенное управления событие, один из вариантов — присоединение обработчиков в коде с `handledEventsToo` указанный в виде `true`.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-119">If other elements towards the root of your application still wanted an opportunity to handle a control-suppressed event, one alternative is to attach handlers in code with `handledEventsToo` specified as `true`.</span></span> <span data-ttu-id="2b6c5-120">Однако часто является более простым способом для изменения направления маршрутизации обрабатывать эквивалентом предварительного просмотра входного события.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-120">But often a simpler technique is to change the routing direction you handle to be the Preview equivalent of an input event.</span></span> <span data-ttu-id="2b6c5-121">Например если отключает элемент управления <xref:System.Windows.UIElement.MouseLeftButtonDown>, попробуйте присоединить обработчик <xref:System.Windows.UIElement.PreviewMouseLeftButtonDown> вместо.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-121">For instance, if a control suppresses <xref:System.Windows.UIElement.MouseLeftButtonDown>, try attaching a handler for <xref:System.Windows.UIElement.PreviewMouseLeftButtonDown> instead.</span></span> <span data-ttu-id="2b6c5-122">Этот метод подходит только для базовых событий ввода элементов например <xref:System.Windows.UIElement.MouseLeftButtonDown>.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-122">This technique only works for base element input events such as <xref:System.Windows.UIElement.MouseLeftButtonDown>.</span></span> <span data-ttu-id="2b6c5-123">Эти события ввода используйте пары нисходящей/восходящей, вызов обоих событий и совместно использовать данные события.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-123">These input events use tunnel/bubble pairs, raise both events, and share the event data.</span></span>  
  
 <span data-ttu-id="2b6c5-124">Каждый из этих способов имеет побочные эффекты или ограничения.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-124">Each of these techniques has either side effects or limitations.</span></span> <span data-ttu-id="2b6c5-125">Является побочным эффектом обработки события предварительного просмотра, обработки событий в этот момент может отключить обработчики, которые запрограммированы для обработки события восходящей и поэтому ограничение заключается в том, что он обычно не рекомендуется пометить событие как обработанное, хотя по-прежнему Previ часть овый маршрута.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-125">The side effect of handling the Preview event is that handling the event at that point might disable handlers that expect to handle the bubbling event, and therefore the limitation is that it is usually not a good idea to mark the event handled while it is still on the Preview part of the route.</span></span> <span data-ttu-id="2b6c5-126">Ограничения `handledEventsToo` бывает, что нельзя задать `handledEventsToo` обработчик в [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] как атрибут, необходимо зарегистрировать обработчик событий в коде после получения ссылку на элемент, в которой должен быть присоединен обработчик.</span><span class="sxs-lookup"><span data-stu-id="2b6c5-126">The limitation of the `handledEventsToo` technique is that you cannot specify a `handledEventsToo` handler in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] as an attribute, you must register the event handler in code after obtaining an object reference to the element where the handler is to be attached.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2b6c5-127">См. также</span><span class="sxs-lookup"><span data-stu-id="2b6c5-127">See Also</span></span>  
 [<span data-ttu-id="2b6c5-128">Маркировка перенаправленных событий как обработанных и обработка классов</span><span class="sxs-lookup"><span data-stu-id="2b6c5-128">Marking Routed Events as Handled, and Class Handling</span></span>](../../../../docs/framework/wpf/advanced/marking-routed-events-as-handled-and-class-handling.md)  
 [<span data-ttu-id="2b6c5-129">Общие сведения о перенаправленных событиях</span><span class="sxs-lookup"><span data-stu-id="2b6c5-129">Routed Events Overview</span></span>](../../../../docs/framework/wpf/advanced/routed-events-overview.md)
