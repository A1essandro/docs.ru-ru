---
title: "События времени жизни объекта"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-wpf
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- events [WPF], ContentRendered
- events [WPF], Deactivated
- events [WPF], Unloaded
- Activated events [WPF]
- events [WPF], Loaded
- Application objects [WPF], lifetime events
- events [WPF], Activated
- ContentRendered events [WPF]
- Deactivated events [WPF]
- events [WPF], Initialized
- events [WPF], Closing
- Unloaded events [WPF]
- exit events [WPF]
- objects' lifetime events [WPF]
- Loaded events [WPF]
- Closing events [WPF]
- events [WPF], Closed
- Initialized events [WPF]
- Closed events [WPF]
- startup events [WPF]
- lifetime events of objects [WPF]
ms.assetid: face6fc7-465b-4502-bfe5-e88d2e729a78
caps.latest.revision: "19"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 81bd06811e428645a9a3103be457d30266a353c5
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/22/2017
---
# <a name="object-lifetime-events"></a><span data-ttu-id="2c366-102">События времени жизни объекта</span><span class="sxs-lookup"><span data-stu-id="2c366-102">Object Lifetime Events</span></span>
<span data-ttu-id="2c366-103">В этом разделе описываются определенные события [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], обозначающие этапы создания, использования и удаления времени жизни объекта.</span><span class="sxs-lookup"><span data-stu-id="2c366-103">This topic describes the specific [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] events that signify stages in an object lifetime of creation, use, and destruction.</span></span>  
  

  
<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="2c366-104">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="2c366-104">Prerequisites</span></span>  
 <span data-ttu-id="2c366-105">Предполагается, что вы имеете представление о свойствах зависимостей с точки зрения потребителя существующих свойств зависимостей в классах [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] и ознакомились с разделом [Общие сведения о свойствах зависимостей](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="2c366-105">This topic assumes that you understand dependency properties from the perspective of a consumer of existing dependency properties on [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] classes, and have read the [Dependency Properties Overview](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md) topic.</span></span> <span data-ttu-id="2c366-106">Чтобы выполнить примеры в этом разделе, следует также иметь представление о [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] (см. раздел [Обзор XAML (WPF)](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md)) и знать, как создаются приложения [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2c366-106">In order to follow the examples in this topic, you should also understand [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] (see [XAML Overview (WPF)](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md)) and know how to write [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] applications.</span></span>  
  
<a name="intro"></a>   
## <a name="object-lifetime-events"></a><span data-ttu-id="2c366-107">События времени жизни объекта</span><span class="sxs-lookup"><span data-stu-id="2c366-107">Object Lifetime Events</span></span>  
 <span data-ttu-id="2c366-108">Все объекты в управляемом коде [!INCLUDE[TLA#tla_netframewk](../../../../includes/tlasharptla-netframewk-md.md)] проходят через одни и те же этапы создания, использования и удаления.</span><span class="sxs-lookup"><span data-stu-id="2c366-108">All objects in [!INCLUDE[TLA#tla_netframewk](../../../../includes/tlasharptla-netframewk-md.md)] managed code go through a similar set of stages of life, creation, use, and destruction.</span></span> <span data-ttu-id="2c366-109">Многие объекты также имеют этап завершения, который возникает как часть этапа удаления.</span><span class="sxs-lookup"><span data-stu-id="2c366-109">Many objects also have a finalization stage of life that occurs as part of the destruction phase.</span></span> <span data-ttu-id="2c366-110">Объекты [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], особенно визуальные объекты, которые [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] определяет как элементы, также имеют набор общих этапов жизни объекта.</span><span class="sxs-lookup"><span data-stu-id="2c366-110">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] objects, more specifically the visual objects that [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] identifies as elements, also have a set of common stages of object life.</span></span> <span data-ttu-id="2c366-111">Модель приложений и модель программирования [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] предоставляют эти этапы как последовательность событий.</span><span class="sxs-lookup"><span data-stu-id="2c366-111">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] programming and application models expose these stages as a series of events.</span></span> <span data-ttu-id="2c366-112">В [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] существует четыре основных типа объектов, связанных с событиями времени жизни: элементы в целом, элементы окна, узлы навигации и объекты приложения.</span><span class="sxs-lookup"><span data-stu-id="2c366-112">There are four main types of objects in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] with respect to lifetime events; elements in general, window elements, navigation hosts, and application objects.</span></span> <span data-ttu-id="2c366-113">Узлы окон и навигации также входят в более крупные группы визуальных объектов (элементов).</span><span class="sxs-lookup"><span data-stu-id="2c366-113">Windows and navigation hosts are also within the larger grouping of visual objects (elements).</span></span> <span data-ttu-id="2c366-114">В этом разделе описываются события времени жизни, которые являются общими для всех элементов, а затем даются общие сведения о конкретных событиях, которые относятся к определениям приложений, узлам окон или навигации.</span><span class="sxs-lookup"><span data-stu-id="2c366-114">This topic describes the lifetime events that are common to all elements and then introduces the more specific ones that apply to application definitions, windows or navigation hosts.</span></span>  
  
<a name="common_events"></a>   
## <a name="common-lifetime-events-for-elements"></a><span data-ttu-id="2c366-115">Общие события времени жизни для элементов</span><span class="sxs-lookup"><span data-stu-id="2c366-115">Common Lifetime Events for Elements</span></span>  
 <span data-ttu-id="2c366-116">Любой элемент уровня платформы WPF (эти объекты, производные от <xref:System.Windows.FrameworkElement> или <xref:System.Windows.FrameworkContentElement>) имеет три общие события времени жизни: <xref:System.Windows.FrameworkElement.Initialized>, <xref:System.Windows.FrameworkElement.Loaded>, и <xref:System.Windows.FrameworkElement.Unloaded>.</span><span class="sxs-lookup"><span data-stu-id="2c366-116">Any WPF framework-level element (those objects deriving from either <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>) has three common lifetime events: <xref:System.Windows.FrameworkElement.Initialized>, <xref:System.Windows.FrameworkElement.Loaded>, and <xref:System.Windows.FrameworkElement.Unloaded>.</span></span>  
  
### <a name="initialized"></a><span data-ttu-id="2c366-117">инициализированные</span><span class="sxs-lookup"><span data-stu-id="2c366-117">Initialized</span></span>  
 <span data-ttu-id="2c366-118"><xref:System.Windows.FrameworkElement.Initialized>Сначала вызывается и примерно соответствует инициализации объекта при вызове его конструктору.</span><span class="sxs-lookup"><span data-stu-id="2c366-118"><xref:System.Windows.FrameworkElement.Initialized> is raised first, and roughly corresponds to the initialization of the object by the call to its constructor.</span></span> <span data-ttu-id="2c366-119">Поскольку событие происходит в ответ на инициализацию, можно гарантировать, что все свойства объекта установлены.</span><span class="sxs-lookup"><span data-stu-id="2c366-119">Because the event happens in response to initialization, you are guaranteed that all properties of the object are set.</span></span> <span data-ttu-id="2c366-120">(Исключением является использование таких выражений, как динамические ресурсы или привязки; это будут необработанные выражения.) Как следствие, заданы все свойства, требование последовательность <xref:System.Windows.FrameworkElement.Initialized> , вызванных вложенными элементами, которые определены в разметке в порядке вложенности элементов в дереве элементов сначала отображается, затем от родительского элемента к корню.</span><span class="sxs-lookup"><span data-stu-id="2c366-120">(An exception is expression usages such as dynamic resources or binding; these will be unevaluated expressions.) As a consequence of the requirement that all properties are set, the sequence of <xref:System.Windows.FrameworkElement.Initialized> being raised by nested elements that are defined in markup appears to occur in order of deepest elements in the element tree first, then parent elements toward the root.</span></span> <span data-ttu-id="2c366-121">Этот порядок обусловлен тем, что отношения и вложения «родитель/потомок» являются свойствами, и поэтому родитель не может завершить инициализацию, пока дочерние элементы, указанные в свойстве, не будут полностью инициализированы.</span><span class="sxs-lookup"><span data-stu-id="2c366-121">This order is because the parent-child relationships and containment are properties, and therefore the parent cannot report initialization until the child elements that fill the property are also completely initialized.</span></span>  
  
 <span data-ttu-id="2c366-122">При написании обработчика в ответ на <xref:System.Windows.FrameworkElement.Initialized> событий, необходимо учитывать, что нет никакой гарантии, что все остальные элементы в дереве элементов (логического дерева или визуального дерева), по которому присоединен обработчик были созданы, особенно родительские элементы.</span><span class="sxs-lookup"><span data-stu-id="2c366-122">When you are writing handlers in response to the <xref:System.Windows.FrameworkElement.Initialized> event, you must consider that there is no guarantee that all other elements in the element tree (either logical tree or visual tree) around where the handler is attached have been created, particularly parent elements.</span></span> <span data-ttu-id="2c366-123">Переменные члены могут быть null, или источники данных могут быть еще не заполненными через базовую привязку (даже на уровне выражения).</span><span class="sxs-lookup"><span data-stu-id="2c366-123">Member variables may be null, or data sources might not yet be populated by the underlying binding (even at the expression level).</span></span>  
  
### <a name="loaded"></a><span data-ttu-id="2c366-124">Загружен</span><span class="sxs-lookup"><span data-stu-id="2c366-124">Loaded</span></span>  
 <span data-ttu-id="2c366-125"><xref:System.Windows.FrameworkElement.Loaded>вызывается далее.</span><span class="sxs-lookup"><span data-stu-id="2c366-125"><xref:System.Windows.FrameworkElement.Loaded> is raised next.</span></span> <span data-ttu-id="2c366-126"><xref:System.Windows.FrameworkElement.Loaded> События до окончательной подготовки отчетов, но после система макета вычислила все необходимые значения для подготовки к просмотру.</span><span class="sxs-lookup"><span data-stu-id="2c366-126">The <xref:System.Windows.FrameworkElement.Loaded> event is raised before the final rendering, but after the layout system has calculated all necessary values for rendering.</span></span> <span data-ttu-id="2c366-127"><xref:System.Windows.FrameworkElement.Loaded>влечет за собой логического дерева, в котором элемент завершения, которое подключается к источнику презентации, который предоставляет HWND и поверхность для отрисовки.</span><span class="sxs-lookup"><span data-stu-id="2c366-127"><xref:System.Windows.FrameworkElement.Loaded> entails that the logical tree that an element is contained within is complete, and connects to a presentation source that provides the HWND and the rendering surface.</span></span> <span data-ttu-id="2c366-128">Стандартная привязка данных (привязки локальных источников, таких как другие свойства или явно определенные источник данных) произойдет до <xref:System.Windows.FrameworkElement.Loaded>.</span><span class="sxs-lookup"><span data-stu-id="2c366-128">Standard data binding (binding to local sources, such as other properties or directly defined data sources) will have occurred prior to <xref:System.Windows.FrameworkElement.Loaded>.</span></span> <span data-ttu-id="2c366-129">Асинхронная привязка данных (к внешним или динамическим источникам) может произойти, но по определению асинхронности не обязательно произойдет.</span><span class="sxs-lookup"><span data-stu-id="2c366-129">Asynchronous data binding (external or dynamic sources) might have occurred, but by definition of its asynchronous nature cannot be guaranteed to have occurred.</span></span>  
  
 <span data-ttu-id="2c366-130">Механизм, по которому <xref:System.Windows.FrameworkElement.Loaded> события отличается от <xref:System.Windows.FrameworkElement.Initialized>.</span><span class="sxs-lookup"><span data-stu-id="2c366-130">The mechanism by which the <xref:System.Windows.FrameworkElement.Loaded> event is raised is different than <xref:System.Windows.FrameworkElement.Initialized>.</span></span> <span data-ttu-id="2c366-131"><xref:System.Windows.FrameworkElement.Initialized> Событие является вызванным элементом, без прямого согласования с завершенным деревом элементов.</span><span class="sxs-lookup"><span data-stu-id="2c366-131">The <xref:System.Windows.FrameworkElement.Initialized> event is raised element by element, without a direct coordination by a completed element tree.</span></span> <span data-ttu-id="2c366-132">В отличие от этого <xref:System.Windows.FrameworkElement.Loaded> событие вызывается в качестве согласованного усилия по всему дереву элементов (в частности, логическое дерево).</span><span class="sxs-lookup"><span data-stu-id="2c366-132">By contrast, the <xref:System.Windows.FrameworkElement.Loaded> event is raised as a coordinated effort throughout the entire element tree (specifically, the logical tree).</span></span> <span data-ttu-id="2c366-133">Если все элементы в дереве находятся в состоянии, где они считаются загружены <xref:System.Windows.FrameworkElement.Loaded> сначала события для корневого элемента.</span><span class="sxs-lookup"><span data-stu-id="2c366-133">When all elements in the tree are in a state where they are considered loaded, the <xref:System.Windows.FrameworkElement.Loaded> event is first raised on the root element.</span></span> <span data-ttu-id="2c366-134"><xref:System.Windows.FrameworkElement.Loaded> Затем события последовательно для каждого дочернего элемента.</span><span class="sxs-lookup"><span data-stu-id="2c366-134">The <xref:System.Windows.FrameworkElement.Loaded> event is then raised successively on each child element.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="2c366-135">Такое поведение может внешне напоминать туннелирование для перенаправленного события.</span><span class="sxs-lookup"><span data-stu-id="2c366-135">This behavior might superficially resemble tunneling for a routed event.</span></span> <span data-ttu-id="2c366-136">Тем не менее информация не переносится от события к событию.</span><span class="sxs-lookup"><span data-stu-id="2c366-136">However, no information is carried from event to event.</span></span> <span data-ttu-id="2c366-137">Каждый элемент всегда имеет возможность обработать его <xref:System.Windows.FrameworkElement.Loaded> событий и пометить данные о событии как обработанное не оказывает влияния за пределами этого элемента.</span><span class="sxs-lookup"><span data-stu-id="2c366-137">Each element always has the opportunity to handle its <xref:System.Windows.FrameworkElement.Loaded> event, and marking the event data as handled has no effect beyond that element.</span></span>  
  
### <a name="unloaded"></a><span data-ttu-id="2c366-138">Выгружен</span><span class="sxs-lookup"><span data-stu-id="2c366-138">Unloaded</span></span>  
 <span data-ttu-id="2c366-139"><xref:System.Windows.FrameworkElement.Unloaded>вызывается последним и инициируется источником представления или удаления визуального родителя.</span><span class="sxs-lookup"><span data-stu-id="2c366-139"><xref:System.Windows.FrameworkElement.Unloaded> is raised last and is initiated by either the presentation source or the visual parent being removed.</span></span> <span data-ttu-id="2c366-140">Когда <xref:System.Windows.FrameworkElement.Unloaded> возникает и обрабатывается, элемент, который является родительским источником события (как определено <xref:System.Windows.FrameworkElement.Parent%2A> свойство) или любой заданный элемент в логических или визуальных деревьях могут уже быть сброшен, это означает, что связывание данных, ссылки на ресурсы , и стили, не могут быть установлены в обычное или последнее известное значение времени выполнения.</span><span class="sxs-lookup"><span data-stu-id="2c366-140">When <xref:System.Windows.FrameworkElement.Unloaded> is raised and handled, the element that is the event source parent (as determined by <xref:System.Windows.FrameworkElement.Parent%2A> property) or any given element upwards in the logical or visual trees may have already been unset, meaning that data binding, resource references, and styles may not be set to their normal or last known run-time value.</span></span>  
  
<a name="application_model_elements"></a>   
## <a name="lifetime-events-application-model-elements"></a><span data-ttu-id="2c366-141">Элементы модели приложений событий времени жизни</span><span class="sxs-lookup"><span data-stu-id="2c366-141">Lifetime Events Application Model Elements</span></span>  
 <span data-ttu-id="2c366-142">Основываясь на общие события времени жизни для элементов являются следующие элементы модели приложения: <xref:System.Windows.Application>, <xref:System.Windows.Window>, <xref:System.Windows.Controls.Page>, <xref:System.Windows.Navigation.NavigationWindow>, и <xref:System.Windows.Controls.Frame>.</span><span class="sxs-lookup"><span data-stu-id="2c366-142">Building on the common lifetime events for elements are the following application model elements: <xref:System.Windows.Application>, <xref:System.Windows.Window>, <xref:System.Windows.Controls.Page>, <xref:System.Windows.Navigation.NavigationWindow>, and <xref:System.Windows.Controls.Frame>.</span></span> <span data-ttu-id="2c366-143">Они расширяют общие события времени жизни дополнительными событиями, которые связаны с их конкретными целями.</span><span class="sxs-lookup"><span data-stu-id="2c366-143">These extend the common lifetime events with additional events that are relevant to their specific purpose.</span></span> <span data-ttu-id="2c366-144">Эти темы подробно рассматриваются в следующих разделах.</span><span class="sxs-lookup"><span data-stu-id="2c366-144">These are discussed in detail in the following locations:</span></span>  
  
-   <span data-ttu-id="2c366-145"><xref:System.Windows.Application>: [Общие сведения об управлении приложения](../../../../docs/framework/wpf/app-development/application-management-overview.md).</span><span class="sxs-lookup"><span data-stu-id="2c366-145"><xref:System.Windows.Application>: [Application Management Overview](../../../../docs/framework/wpf/app-development/application-management-overview.md).</span></span>  
  
-   <span data-ttu-id="2c366-146"><xref:System.Windows.Window>: [Обзор Windows WPF](../../../../docs/framework/wpf/app-development/wpf-windows-overview.md).</span><span class="sxs-lookup"><span data-stu-id="2c366-146"><xref:System.Windows.Window>: [WPF Windows Overview](../../../../docs/framework/wpf/app-development/wpf-windows-overview.md).</span></span>  
  
-   <span data-ttu-id="2c366-147"><xref:System.Windows.Controls.Page>, <xref:System.Windows.Navigation.NavigationWindow>, и <xref:System.Windows.Controls.Frame>: [Общие сведения о навигации](../../../../docs/framework/wpf/app-development/navigation-overview.md).</span><span class="sxs-lookup"><span data-stu-id="2c366-147"><xref:System.Windows.Controls.Page>, <xref:System.Windows.Navigation.NavigationWindow>, and <xref:System.Windows.Controls.Frame>: [Navigation Overview](../../../../docs/framework/wpf/app-development/navigation-overview.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2c366-148">См. также</span><span class="sxs-lookup"><span data-stu-id="2c366-148">See Also</span></span>  
 [<span data-ttu-id="2c366-149">Приоритет значения свойства зависимостей</span><span class="sxs-lookup"><span data-stu-id="2c366-149">Dependency Property Value Precedence</span></span>](../../../../docs/framework/wpf/advanced/dependency-property-value-precedence.md)  
 [<span data-ttu-id="2c366-150">Общие сведения о перенаправленных событиях</span><span class="sxs-lookup"><span data-stu-id="2c366-150">Routed Events Overview</span></span>](../../../../docs/framework/wpf/advanced/routed-events-overview.md)
