---
title: "Безопасность свойства зависимости | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-wpf"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "свойства зависимостей, access"
  - "свойства зависимостей, безопасность"
  - "безопасность, свойства зависимостей"
  - "безопасность, оболочки"
  - "проверка, свойства зависимостей"
  - "оболочки, access"
  - "оболочки, безопасность"
ms.assetid: d10150ec-90c5-4571-8d35-84bafa2429a4
caps.latest.revision: 8
author: "dotnet-bot"
ms.author: "dotnetcontent"
manager: "wpickett"
caps.handback.revision: 7
---
# Безопасность свойства зависимости
Свойства зависимости в общем следует рассматривать как открытые свойства.  Структура системы свойств [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] исключает возможность предоставления гарантий безопасности значения свойства зависимостей.  
  
   
  
<a name="AccessSecurity"></a>   
## Доступ и безопасность свойств оболочек и свойств зависимости  
 Как правило, свойства зависимости реализуются вместе со свойствами «оболочки» [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)], которые упрощают получение или присвоение значения для свойства из экземпляра.  Но на самом деле оболочки — это всего лишь удобные методы, реализующие внутренние статические вызовы <xref:System.Windows.DependencyObject.GetValue%2A> и <xref:System.Windows.DependencyObject.SetValue%2A>, которые используются при взаимодействии со свойствами зависимости.  С другой стороны, свойства предоставляются как свойства [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)], обеспечение которых осуществляется с помощью свойства зависимости, а не закрытого поля.  Механизмы безопасности, применяемые к оболочкам, не распараллеливают поведение системы свойств и доступ к основному свойству зависимости.  Помещение требования безопасности в программу\-оболочку только предотвратит использование подходящего метода, но не предотвратит вызов метода <xref:System.Windows.DependencyObject.GetValue%2A> или <xref:System.Windows.DependencyObject.SetValue%2A>.  Аналогично, предоставление защищенного или закрытого уровня доступа к оболочке не обеспечит эффективной защиты.  
  
 При написании собственных свойств зависимости следует объявлять оболочки и поле идентификатора <xref:System.Windows.DependencyProperty> в качестве общих членов так, чтобы вызывающие объекты не получали неправильные сведения о действительном уровне доступа значения этого свойства \(так как его хранилище реализовано как свойство зависимости\).  
  
 Для настраиваемого свойства зависимости можно зарегистрировать свойство как свойство зависимости только для чтения. Это является эффективным средством, предотвращающим установку значений свойства любым пользователем, не имеющим ссылки на объект <xref:System.Windows.DependencyPropertyKey> для этого свойства.  Дополнительные сведения см. в разделе [Свойства зависимости "только для чтения"](../../../../docs/framework/wpf/advanced/read-only-dependency-properties.md).  
  
> [!NOTE]
>  Объявление поля идентификатора <xref:System.Windows.DependencyProperty> как закрытого не запрещено, и он может быть использован для уменьшения немедленного предоставления пространства имен настраиваемого класса, но такое свойство не следует рассматривать как «закрытое» в том же смысле, что и уровень доступа в определениях языка [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] \(основания см. в следующем разделе\).  
  
<a name="PropertySystemExposure"></a>   
## Предоставление системы свойств свойства зависимости  
 Как правило, объявление <xref:System.Windows.DependencyProperty> как любого уровня доступа, отличного от общего доступа, нецелесообразно \(и даже может оказаться недостоверным\).  Этот параметр уровня доступа только запрещает получение пользователем ссылки на экземпляр из объявленного класса.  Но существует несколько аспектов системы свойств, которые возвращают свойство <xref:System.Windows.DependencyProperty> в качестве средства для идентификации конкретного свойства, как оно находится в экземпляре класса или экземпляре производного класса. Этот идентификатор по\-прежнему может использоваться в вызове <xref:System.Windows.DependencyObject.SetValue%2A> даже в том случае, если исходный статический идентификатор объявлен как внутренний.  Кроме того, виртуальные методы <xref:System.Windows.DependencyObject.OnPropertyChanged%2A> получают сведения о любом существующем свойстве зависимости, которое изменило значение.  Более того, метод <xref:System.Windows.DependencyObject.GetLocalValueEnumerator%2A> возвращает идентификаторы для любого свойства в экземплярах с локально заданным значением.  
  
### Проверка и безопасность  
 Применение требований к <xref:System.Windows.DependencyProperty.ValidateValueCallback%2A> и ожидание ошибок проверки сбоя запроса для предотвращения задания значения свойства не является достаточно безопасным механизмом.  Признание недействительности установленного значения, принудительно применяемое <xref:System.Windows.DependencyProperty.ValidateValueCallback%2A>, может подавляться вредоносными вызывающими объектами, если эти объекты функционируют в домене приложения.  
  
## См. также  
 [Пользовательские свойства зависимостей](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md)