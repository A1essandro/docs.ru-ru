---
title: "Код программной части и XAML в WPF"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-wpf
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- XAML [WPF], code-behind
- code-behind files [WPF], XAML
ms.assetid: 9df6d3c9-aed3-471c-af36-6859b19d999f
caps.latest.revision: "14"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 19c7c2cdd49663a57a4184027fd7d6ad8fcd7656
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/22/2017
---
# <a name="code-behind-and-xaml-in-wpf"></a><span data-ttu-id="2053a-102">Код программной части и XAML в WPF</span><span class="sxs-lookup"><span data-stu-id="2053a-102">Code-Behind and XAML in WPF</span></span>
<a name="introduction"></a><span data-ttu-id="2053a-103">Выделенный код — это термин, используемый для описания кода, который объединяется с объектами, определенными разметкой, при [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] страницы, скомпилированного с разметкой.</span><span class="sxs-lookup"><span data-stu-id="2053a-103">Code-behind is a term used to describe the code that is joined with markup-defined objects, when a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] page is markup-compiled.</span></span> <span data-ttu-id="2053a-104">В этом разделе описываются требования для кода, а также альтернативный механизм встроенного кода для кода в [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2053a-104">This topic describes requirements for code-behind as well as an alternative inline code mechanism for code in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span>  
  
 <span data-ttu-id="2053a-105">В этом разделе содержатся следующие подразделы.</span><span class="sxs-lookup"><span data-stu-id="2053a-105">This topic contains the following sections:</span></span>  
  
-   [<span data-ttu-id="2053a-106">Необходимые компоненты</span><span class="sxs-lookup"><span data-stu-id="2053a-106">Prerequisites</span></span>](#Prerequisites)  
  
-   [<span data-ttu-id="2053a-107">Код программной части и языка XAML</span><span class="sxs-lookup"><span data-stu-id="2053a-107">Code-Behind and the XAML Language</span></span>](#codebehind_and_the_xaml_language)  
  
-   [<span data-ttu-id="2053a-108">Кода, обработчик событий и требования разделяемого класса в WPF</span><span class="sxs-lookup"><span data-stu-id="2053a-108">Code-behind, Event Handler, and Partial Class Requirements in WPF</span></span>](#Code_behind__Event_Handler__and_Partial_Class)  
  
-   [<span data-ttu-id="2053a-109">x: Code</span><span class="sxs-lookup"><span data-stu-id="2053a-109">x:Code</span></span>](#x_Code)  
  
-   [<span data-ttu-id="2053a-110">Ограничения встроенного кода</span><span class="sxs-lookup"><span data-stu-id="2053a-110">Inline Code Limitations</span></span>](#Inline_Code_Limitations)  
  
<a name="Prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="2053a-111">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="2053a-111">Prerequisites</span></span>  
 <span data-ttu-id="2053a-112">В этом разделе предполагается, что вы прочитали [Обзор XAML (WPF)](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md) и иметь базовые знания о [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] и объектно ориентированного программирования.</span><span class="sxs-lookup"><span data-stu-id="2053a-112">This topic assumes that you have read the [XAML Overview (WPF)](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md) and have some basic knowledge of the [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] and object-oriented programming.</span></span>  
  
<a name="codebehind_and_the_xaml_language"></a>   
## <a name="code-behind-and-the-xaml-language"></a><span data-ttu-id="2053a-113">Код программной части и языка XAML</span><span class="sxs-lookup"><span data-stu-id="2053a-113">Code-Behind and the XAML Language</span></span>  
 <span data-ttu-id="2053a-114">Язык XAML включает возможности языка, упрощающие можно связать с файлами разметки, со стороны файла разметки файлы кода.</span><span class="sxs-lookup"><span data-stu-id="2053a-114">The XAML language includes language-level features that make it possible to associate code files with markup files, from the markup file side.</span></span> <span data-ttu-id="2053a-115">В частности, язык XAML задает функции языка [директива x: Class](../../../../docs/framework/xaml-services/x-class-directive.md), [директива x: Subclass](../../../../docs/framework/xaml-services/x-subclass-directive.md), и [директива x: ClassModifier](../../../../docs/framework/xaml-services/x-classmodifier-directive.md).</span><span class="sxs-lookup"><span data-stu-id="2053a-115">Specifically, the XAML language defines the language features [x:Class Directive](../../../../docs/framework/xaml-services/x-class-directive.md), [x:Subclass Directive](../../../../docs/framework/xaml-services/x-subclass-directive.md), and [x:ClassModifier Directive](../../../../docs/framework/xaml-services/x-classmodifier-directive.md).</span></span> <span data-ttu-id="2053a-116">Точно как код должен создаваться и как интегрировать разметку и код, не является частью указывает языка XAML.</span><span class="sxs-lookup"><span data-stu-id="2053a-116">Exactly how the code should be produced, and how to integrate markup and code, is not part of what the XAML language specifies.</span></span> <span data-ttu-id="2053a-117">Он остается до платформы, например WPF, чтобы определить, как интегрировать в коде, как для использования XAML в приложении и моделей программирования и построение действия или другие поддерживать, все это требуется.</span><span class="sxs-lookup"><span data-stu-id="2053a-117">It is left up to frameworks such as WPF to determine how to integrate the code, how to use XAML in the application and programming models, and the build actions or other support that all this requires.</span></span>  
  
<a name="Code_behind__Event_Handler__and_Partial_Class"></a>   
## <a name="code-behind-event-handler-and-partial-class-requirements-in-wpf"></a><span data-ttu-id="2053a-118">Кода, обработчик событий и требования разделяемого класса в WPF</span><span class="sxs-lookup"><span data-stu-id="2053a-118">Code-behind, Event Handler, and Partial Class Requirements in WPF</span></span>  
  
-   <span data-ttu-id="2053a-119">Разделяемый класс должен быть производным от типа, который возвращает корневой элемент.</span><span class="sxs-lookup"><span data-stu-id="2053a-119">The partial class must derive from the type that backs the root element.</span></span>  
  
-   <span data-ttu-id="2053a-120">Обратите внимание, что в группе по умолчанию поведение действий сборки компиляции разметки, можно оставить наследование пустым в определении разделяемого класса на стороне кода.</span><span class="sxs-lookup"><span data-stu-id="2053a-120">Note that under the default behavior of the markup compile build actions, you can leave the derivation blank in the partial class definition on the code-behind side.</span></span> <span data-ttu-id="2053a-121">Скомпилированный результат будет считать резервного типа корневой страницы, чтобы служить основой для разделяемого класса, даже если он не указан.</span><span class="sxs-lookup"><span data-stu-id="2053a-121">The compiled result will assume the page root's backing type to be the basis for the partial class, even if it not specified.</span></span> <span data-ttu-id="2053a-122">Однако полагаться на это поведение не рекомендуется.</span><span class="sxs-lookup"><span data-stu-id="2053a-122">However, relying on this behavior is not a best practice.</span></span>  
  
-   <span data-ttu-id="2053a-123">Обработчики событий, создаваемых в коде должны быть методами экземпляра и не может быть статические методы.</span><span class="sxs-lookup"><span data-stu-id="2053a-123">The event handlers you write in the code behind must be instance methods and cannot be static methods.</span></span> <span data-ttu-id="2053a-124">Эти методы должны быть определены разделяемым классом в пространстве имен среды CLR, определяемый `x:Class`.</span><span class="sxs-lookup"><span data-stu-id="2053a-124">These methods must be defined by the partial class within the CLR namespace identified by `x:Class`.</span></span> <span data-ttu-id="2053a-125">Нельзя уточнить имя обработчика событий, чтобы указать [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] процессора для поиска для обработчика событий для события, написанного в другой области класса.</span><span class="sxs-lookup"><span data-stu-id="2053a-125">You cannot qualify the name of an event handler to instruct a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor to look for an event handler for event wiring in a different class scope.</span></span>  
  
-   <span data-ttu-id="2053a-126">Обработчик должен соответствовать делегату для соответствующего события в системе резервных типов.</span><span class="sxs-lookup"><span data-stu-id="2053a-126">The handler must match the delegate for the appropriate event in the backing type system.</span></span>  
  
-   <span data-ttu-id="2053a-127">Для [!INCLUDE[TLA#tla_visualb](../../../../includes/tlasharptla-visualb-md.md)] языка в частности, можно использовать конкретного языка `Handles` ключевое слово, чтобы связать обработчики с экземплярами и событиями в объявлении обработчика, вместо присоединения обработчиков с атрибутами в [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2053a-127">For the [!INCLUDE[TLA#tla_visualb](../../../../includes/tlasharptla-visualb-md.md)] language specifically, you can use the language-specific `Handles` keyword to associate handlers with instances and events in the handler declaration, instead of attaching handlers with attributes in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span> <span data-ttu-id="2053a-128">Однако этот метод имеет некоторые ограничения, так как `Handles` ключевое слово не поддерживает все особые функции [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] системы событий, такие как определенные сценарии перенаправленных событий или вложенные события.</span><span class="sxs-lookup"><span data-stu-id="2053a-128">However, this technique does have some limitations because the `Handles` keyword cannot support all of the specific features of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] event system, such as certain routed event scenarios or attached events.</span></span> <span data-ttu-id="2053a-129">Дополнительные сведения см. в разделе [Visual Basic и обработка событий WPF](../../../../docs/framework/wpf/advanced/visual-basic-and-wpf-event-handling.md).</span><span class="sxs-lookup"><span data-stu-id="2053a-129">For details, see [Visual Basic and WPF Event Handling](../../../../docs/framework/wpf/advanced/visual-basic-and-wpf-event-handling.md).</span></span>  
  
<a name="x_Code"></a>   
## <a name="xcode"></a><span data-ttu-id="2053a-130">x: Code</span><span class="sxs-lookup"><span data-stu-id="2053a-130">x:Code</span></span>  
 <span data-ttu-id="2053a-131">[x: Code](../../../../docs/framework/xaml-services/x-code-intrinsic-xaml-type.md) определен элемент директивы в [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2053a-131">[x:Code](../../../../docs/framework/xaml-services/x-code-intrinsic-xaml-type.md) is a directive element defined in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span> <span data-ttu-id="2053a-132">`x:Code` Директива может содержать встроенный программный код.</span><span class="sxs-lookup"><span data-stu-id="2053a-132">An `x:Code` directive element can contain inline programming code.</span></span> <span data-ttu-id="2053a-133">Код, определенный встроенным может взаимодействовать с [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] на одной странице.</span><span class="sxs-lookup"><span data-stu-id="2053a-133">The code that is defined inline can interact with the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] on the same page.</span></span> <span data-ttu-id="2053a-134">В следующем примере показан встроенный [!INCLUDE[TLA2#tla_cshrp](../../../../includes/tla2sharptla-cshrp-md.md)] кода.</span><span class="sxs-lookup"><span data-stu-id="2053a-134">The following example illustrates inline [!INCLUDE[TLA2#tla_cshrp](../../../../includes/tla2sharptla-cshrp-md.md)] code.</span></span> <span data-ttu-id="2053a-135">Обратите внимание, что код внутри `x:Code` элемент, и что код должен быть заключен в `<CDATA[`... `]]>` Чтобы избежать содержимого для [!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)], после чего [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] процессора (либо Интерпретация [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] схемы или [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] схемы) не будет пытаться интерпретировать содержимое буквально как [!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2053a-135">Notice that the code is inside the `x:Code` element and that the code must be surrounded by `<CDATA[`...`]]>` to escape the contents for [!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)], so that a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor (interpreting either the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] schema or the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] schema) will not try to interpret the contents literally as [!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)].</span></span>  
  
 [!code-xaml[XAMLOvwSupport#ButtonWithInlineCode](../../../../samples/snippets/csharp/VS_Snippets_Wpf/XAMLOvwSupport/CSharp/page4.xaml#buttonwithinlinecode)]  
  
<a name="Inline_Code_Limitations"></a>   
## <a name="inline-code-limitations"></a><span data-ttu-id="2053a-136">Ограничения встроенного кода</span><span class="sxs-lookup"><span data-stu-id="2053a-136">Inline Code Limitations</span></span>  
 <span data-ttu-id="2053a-137">Следует избегать или ограничивать использование встроенного кода.</span><span class="sxs-lookup"><span data-stu-id="2053a-137">You should consider avoiding or limiting the use of inline code.</span></span> <span data-ttu-id="2053a-138">С точки зрения архитектуры и философии кодирования обеспечение разделения между разметки и кода сохраняет роли конструктора и разработчика гораздо более четкое.</span><span class="sxs-lookup"><span data-stu-id="2053a-138">In terms of architecture and coding philosophy, maintaining a separation between markup and code-behind keeps the designer and developer roles much more distinct.</span></span> <span data-ttu-id="2053a-139">На более техническом уровне код, написанный для встроенного кода может быть неудобно записи, поскольку разработчик всегда пишет в [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] созданный разделяемый класс и может использовать только сопоставления пространства имен XML по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="2053a-139">On a more technical level, the code that you write for inline code can be awkward to write, because you are always writing into the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] generated partial class, and can only use the default XML namespace mappings.</span></span> <span data-ttu-id="2053a-140">Так как не удается добавить `using` инструкций, необходимо указывать полное многие [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] вызовов.</span><span class="sxs-lookup"><span data-stu-id="2053a-140">Because you cannot add `using` statements, you must fully qualify many of the [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] calls that you make.</span></span> <span data-ttu-id="2053a-141">Значение по умолчанию [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] сопоставления включают большинство, но не все [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] пространства имен, которые присутствуют в [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] сборки; необходимо будет полностью определить вызовы типы и члены, содержащиеся в других пространствах имен среды CLR.</span><span class="sxs-lookup"><span data-stu-id="2053a-141">The default [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] mappings include most but not all [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] namespaces that are present in the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] assemblies; you will have to fully qualify calls to types and members contained within the other CLR namespaces.</span></span> <span data-ttu-id="2053a-142">Также любых других разделяемый класс нельзя определить во встроенном коде, и все сущности пользовательского кода, ссылки на которые должны существовать в качестве членов или переменных внутри созданного разделяемого класса.</span><span class="sxs-lookup"><span data-stu-id="2053a-142">You also cannot define anything beyond the partial class in the inline code, and all user code entities you reference must exist as a member or variable within the generated partial class.</span></span> <span data-ttu-id="2053a-143">Другие программирования функции для конкретных языков, такими как макросы или `#ifdef` глобальные переменные или переменные сборки, не также доступны.</span><span class="sxs-lookup"><span data-stu-id="2053a-143">Other language specific programming features, such as macros or `#ifdef` against global variables or build variables, are also not available.</span></span> <span data-ttu-id="2053a-144">Дополнительные сведения см. в разделе [встроенный тип XAML x: Code](../../../../docs/framework/xaml-services/x-code-intrinsic-xaml-type.md).</span><span class="sxs-lookup"><span data-stu-id="2053a-144">For more information, see [x:Code Intrinsic XAML Type](../../../../docs/framework/xaml-services/x-code-intrinsic-xaml-type.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2053a-145">См. также</span><span class="sxs-lookup"><span data-stu-id="2053a-145">See Also</span></span>  
 [<span data-ttu-id="2053a-146">Общие сведения о языке XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="2053a-146">XAML Overview (WPF)</span></span>](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md)  
 [<span data-ttu-id="2053a-147">Встроенный тип XAML x:Code</span><span class="sxs-lookup"><span data-stu-id="2053a-147">x:Code Intrinsic XAML Type</span></span>](../../../../docs/framework/xaml-services/x-code-intrinsic-xaml-type.md)  
 [<span data-ttu-id="2053a-148">Построение приложения WPF</span><span class="sxs-lookup"><span data-stu-id="2053a-148">Building a WPF Application</span></span>](../../../../docs/framework/wpf/app-development/building-a-wpf-application-wpf.md)  
 [<span data-ttu-id="2053a-149">Подробное описание синтаксиса XAML</span><span class="sxs-lookup"><span data-stu-id="2053a-149">XAML Syntax In Detail</span></span>](../../../../docs/framework/wpf/advanced/xaml-syntax-in-detail.md)
