---
title: "Оптимизация производительности: ресурсы приложения | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-wpf"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "ресурсы приложений, производительность"
  - "кисти, производительность"
  - "ресурсы, производительность"
  - "совместное использование кистей без копирования"
  - "общий доступ к ресурсам"
  - "статические ресурсы"
ms.assetid: 62b88488-c08e-4804-b7de-a1c34fbe929c
caps.latest.revision: 6
author: "dotnet-bot"
ms.author: "dotnetcontent"
manager: "wpickett"
caps.handback.revision: 6
---
# Оптимизация производительности: ресурсы приложения
[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] позволяет совместно использовать ресурсы приложения так, чтобы можно поддерживать единообразный вид или поведение с помощью элементов одинакового типа.  Данный раздел содержит несколько рекомендаций в этой области, которые помогут улучшить производительность приложений.  
  
 Дополнительные сведения о ресурсах содержатся в разделе [Ресурсы XAML](../../../../docs/framework/wpf/advanced/xaml-resources.md).  
  
## Общий доступ к ресурсам  
 Если приложение использует пользовательские элементы управления и определяет ресурсы в объекте <xref:System.Windows.ResourceDictionary> \(или на узле ресурсов XAML\), рекомендуется определить ресурсы на уровне объекта <xref:System.Windows.Application> или <xref:System.Windows.Window> либо определить их в теме по умолчанию для пользовательских элементов управления.  Определение ресурсов в объекте <xref:System.Windows.ResourceDictionary> пользовательского элемента управления влияет на производительность каждого экземпляра этого элемента управления.  Например, при интенсивных действиях с кистью, требующих высокой производительности, определенных как часть определения ресурсов для нескольких экземпляров пользовательского элемента управления, значительно увеличивается рабочее множество приложения.  
  
 Чтобы проиллюстрировать это, рассмотрим следующее.  Предположим, что с помощью [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] разрабатывается карточная игра.  Для большинства карточных игр необходимо 52 карты с 52 различными вариантами лицевой стороны.  Было решено реализовать пользовательский карточный элемент управления и определить 52 кисти \(для лицевой стороны каждой карты\) в ресурсах этого пользовательского элемента управления.  В главном приложении первоначально создается 52 экземпляра этого пользовательского карточного элемента управления.  Каждый экземпляр этого элемента управления создает 52 экземпляра объекта <xref:System.Windows.Media.Brush>, что в итоге дает 52 \* 52 объектов <xref:System.Windows.Media.Brush> в приложении.  Перемещая кисти из ресурсов этого элемента управления на уровень объекта <xref:System.Windows.Application> или <xref:System.Windows.Window> либо определяя их для пользовательского элемента управления в теме по умолчанию, можно уменьшить рабочее множество приложения, так как теперь 52 экземпляра пользовательского элемента управления совместно используют 52 кисти.  
  
## Общее использование кисти без копирования  
 Если имеется несколько элементов, использующих один объект <xref:System.Windows.Media.Brush>, определите кисть как ресурс и получите ссылку на него, вместо определения встроенной в [!INCLUDE[TLA#tla_titlexaml](../../../../includes/tlasharptla-titlexaml-md.md)] кисти.  Этот метод создаст один экземпляр и повторно использует его, тогда как определение встроенной в [!INCLUDE[TLA#tla_titlexaml](../../../../includes/tlasharptla-titlexaml-md.md)] кисти создает новый экземпляр для каждого элемента.  
  
 Это иллюстрируется в следующем примере разметки:  
  
 [!code-xml[Performance#PerformanceSnippet7](../../../../samples/snippets/csharp/VS_Snippets_Wpf/Performance/CSharp/BrushResource.xaml#performancesnippet7)]  
  
## Использование статических ресурсов, если это возможно  
 Статический ресурс предоставляет значение для любого атрибута свойства XAML с помощью поиска ссылки на уже определенный ресурс.  Механизм поиска этого ресурса аналогичен поиску во время компиляции.  
  
 С другой стороны, во время начальной компиляции динамический ресурс создаст временное выражение и, таким образом, поиск ресурсов отложится до тех пор, пока запрашиваемое значение ресурса не потребуется для создания объекта.  Поиск такого ресурса аналогичен поиску во время выполнения, что оказывает влияние на производительность.  Используйте статические ресурсы в приложении по мере возможности, а динамические — только по необходимости.  
  
 В следующем примере разметки показано использование обоих типов ресурсов:  
  
 [!code-xml[Performance#PerformanceSnippet8](../../../../samples/snippets/csharp/VS_Snippets_Wpf/Performance/CSharp/DynamicResource.xaml#performancesnippet8)]  
  
## См. также  
 [Улучшение производительности приложений WPF](../../../../docs/framework/wpf/advanced/optimizing-wpf-application-performance.md)   
 [Планирование производительности приложения](../../../../docs/framework/wpf/advanced/planning-for-application-performance.md)   
 [Использование преимуществ оборудования](../../../../docs/framework/wpf/advanced/optimizing-performance-taking-advantage-of-hardware.md)   
 [Разметка и разработка](../../../../docs/framework/wpf/advanced/optimizing-performance-layout-and-design.md)   
 [двумерная графика и изображения](../../../../docs/framework/wpf/advanced/optimizing-performance-2d-graphics-and-imaging.md)   
 [Поведение объекта](../../../../docs/framework/wpf/advanced/optimizing-performance-object-behavior.md)   
 [Text](../../../../docs/framework/wpf/advanced/optimizing-performance-text.md)   
 [Привязка данных](../../../../docs/framework/wpf/advanced/optimizing-performance-data-binding.md)   
 [Дополнительные рекомендации по повышению производительности](../../../../docs/framework/wpf/advanced/optimizing-performance-other-recommendations.md)