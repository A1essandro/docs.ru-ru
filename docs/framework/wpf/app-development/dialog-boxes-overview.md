---
title: Общие сведения о диалоговых окнах
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- modeless dialog boxes [WPF]
- dialog boxes [WPF]
- message boxes [WPF]
- modal dialog boxes [WPF]
ms.assetid: 0d23d544-a393-4a02-a3aa-d8cd5d3d6511
ms.openlocfilehash: 110e42fea8d5586e471ae36ead46bed304cf9f48
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/04/2018
---
# <a name="dialog-boxes-overview"></a><span data-ttu-id="27050-102">Общие сведения о диалоговых окнах</span><span class="sxs-lookup"><span data-stu-id="27050-102">Dialog Boxes Overview</span></span>
<span data-ttu-id="27050-103">Автономные приложения обычно имеют главного окна, что оба отображает основных данных, по которому приложение работает и предоставляет функциональные возможности для обработки этих данных через [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)] механизмы, такие как строки меню, панелей инструментов и строки состояния.</span><span class="sxs-lookup"><span data-stu-id="27050-103">Standalone applications typically have a main window that both displays the main data over which the application operates and exposes the functionality to process that data through [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)] mechanisms like menu bars, tool bars, and status bars.</span></span> <span data-ttu-id="27050-104">Нетривиальное приложение может также отображать дополнительные окна для следующих целей:</span><span class="sxs-lookup"><span data-stu-id="27050-104">A non-trivial application may also display additional windows to do the following:</span></span>  
  
-   <span data-ttu-id="27050-105">отображения определенных сведений для пользователей;</span><span class="sxs-lookup"><span data-stu-id="27050-105">Display specific information to users.</span></span>  
  
-   <span data-ttu-id="27050-106">сбора сведений от пользователей;</span><span class="sxs-lookup"><span data-stu-id="27050-106">Gather information from users.</span></span>  
  
-   <span data-ttu-id="27050-107">сбора и отображения сведений.</span><span class="sxs-lookup"><span data-stu-id="27050-107">Both display and gather information.</span></span>  
  
 <span data-ttu-id="27050-108">Эти типы windows называются *диалоговым окнам*, существует два типа: модальные и немодальные.</span><span class="sxs-lookup"><span data-stu-id="27050-108">These types of windows are known as *dialog boxes*, and there are two types: modal and modeless.</span></span>  
  
 <span data-ttu-id="27050-109">Объект *модального* диалоговое окно отображается функцией, когда она требует дополнительные данные от пользователя для продолжения.</span><span class="sxs-lookup"><span data-stu-id="27050-109">A *modal* dialog box is displayed by a function when the function needs additional data from a user to continue.</span></span> <span data-ttu-id="27050-110">Поскольку функция зависит от модального диалогового окна для сбора данных, это окно также не разрешает пользователю активизировать другие окна в приложении, пока остается открытым.</span><span class="sxs-lookup"><span data-stu-id="27050-110">Because the function depends on the modal dialog box to gather data, the modal dialog box also prevents a user from activating other windows in the application while it remains open.</span></span> <span data-ttu-id="27050-111">В большинстве случаев модального диалогового окна разрешает пользователю оповещать о завершении работы с помощью модального диалогового окна, либо нажав **ОК** или **отменить** кнопки.</span><span class="sxs-lookup"><span data-stu-id="27050-111">In most cases, a modal dialog box allows a user to signal when they have finished with the modal dialog box by pressing either an **OK** or **Cancel** button.</span></span> <span data-ttu-id="27050-112">Нажав клавишу **ОК** кнопка показывает, что пользователь ввел данные и желает, чтобы функция продолжить обработку данных.</span><span class="sxs-lookup"><span data-stu-id="27050-112">Pressing the **OK** button indicates that a user has entered data and wants the function to continue processing with that data.</span></span> <span data-ttu-id="27050-113">Нажав клавишу **отменить** кнопка показывает, что пользователь хочет остановить выполнение функции.</span><span class="sxs-lookup"><span data-stu-id="27050-113">Pressing the **Cancel** button indicates that a user wants to stop the function from executing altogether.</span></span> <span data-ttu-id="27050-114">Наиболее распространенными примерами модальных диалоговых окон являются окна, которые отображаются для открытия, сохранения и печати данных.</span><span class="sxs-lookup"><span data-stu-id="27050-114">The most common examples of modal dialog boxes are shown to open, save, and print data.</span></span>  
  
 <span data-ttu-id="27050-115">Объект *немодальное* диалоговое окно, с другой стороны, не запрещает пользователю активацию других окон, когда он открыт.</span><span class="sxs-lookup"><span data-stu-id="27050-115">A *modeless* dialog box, on the other hand, does not prevent a user from activating other windows while it is open.</span></span> <span data-ttu-id="27050-116">Например, если пользователь хочет найти вхождения конкретного слова в документе, главное окно часто открывает диалоговое окно с запросом слова для поиска.</span><span class="sxs-lookup"><span data-stu-id="27050-116">For example, if a user wants to find occurrences of a particular word in a document, a main window will often open a dialog box to ask a user what word they are looking for.</span></span> <span data-ttu-id="27050-117">Так как поиск слова не мешает пользователю редактировать документ, диалоговое окно не обязательно должно быть модальным.</span><span class="sxs-lookup"><span data-stu-id="27050-117">Since finding a word doesn't prevent a user from editing the document, however, the dialog box doesn't need to be modal.</span></span> <span data-ttu-id="27050-118">По крайней мере предоставляет немодального диалогового окна **закрыть** кнопку, чтобы закрыть диалоговое окно, а также может предоставлять дополнительные кнопки для выполнения отдельных функций, таких как **Найти далее** кнопку, чтобы найти Далее, word соответствует критерию поиска.</span><span class="sxs-lookup"><span data-stu-id="27050-118">A modeless dialog box at least provides a **Close** button to close the dialog box, and may provide additional buttons to execute specific functions, such as a **Find Next** button to find the next word that matches the find criteria of a word search.</span></span>  
  
 <span data-ttu-id="27050-119">Windows Presentation Foundation (WPF) позволяет создавать несколько типов диалоговых окон, включая окна сообщений, общие диалоговые окна и пользовательским диалоговым окнам.</span><span class="sxs-lookup"><span data-stu-id="27050-119">Windows Presentation Foundation (WPF) allows you to create several types of dialog boxes, including message boxes, common dialog boxes, and custom dialog boxes.</span></span> <span data-ttu-id="27050-120">В этом разделе обсуждаются каждой из них и [пример диалогового окна](http://go.microsoft.com/fwlink/?LinkID=159984) содержатся соответствующие примеры.</span><span class="sxs-lookup"><span data-stu-id="27050-120">This topic discusses each, and the [Dialog Box Sample](http://go.microsoft.com/fwlink/?LinkID=159984) provides matching examples.</span></span>  
  
 
  
<a name="Message_Boxes"></a>   
## <a name="message-boxes"></a><span data-ttu-id="27050-121">Окна сообщений</span><span class="sxs-lookup"><span data-stu-id="27050-121">Message Boxes</span></span>  
 <span data-ttu-id="27050-122">Объект *окно сообщения* является диалоговым окном, которое можно использовать для отображения текстовых данных и разрешить пользователям принимать решения с помощью кнопок.</span><span class="sxs-lookup"><span data-stu-id="27050-122">A *message box* is a dialog box that can be used to display textual information and to allow users to make decisions with buttons.</span></span> <span data-ttu-id="27050-123">На следующем рисунке показано окно сообщения, в котором отображается текстовая информация, задается вопрос и предоставляются три кнопки для ответа на этот вопрос.</span><span class="sxs-lookup"><span data-stu-id="27050-123">The following figure shows a message box that displays textual information, asks a question, and provides the user with three buttons to answer the question.</span></span>  
  
 <span data-ttu-id="27050-124">![Диалоговое окно "Текстовый процессор"](../../../../docs/framework/wpf/app-development/media/dialogboxesoverviewfigure1.png "DialogBoxesOverviewFigure1")</span><span class="sxs-lookup"><span data-stu-id="27050-124">![Word Processor dialog box](../../../../docs/framework/wpf/app-development/media/dialogboxesoverviewfigure1.png "DialogBoxesOverviewFigure1")</span></span>  
  
 <span data-ttu-id="27050-125">Для создания окна сообщения, используйте <xref:System.Windows.MessageBox> класса.</span><span class="sxs-lookup"><span data-stu-id="27050-125">To create a message box, you use the <xref:System.Windows.MessageBox> class.</span></span> <span data-ttu-id="27050-126"><xref:System.Windows.MessageBox> позволяет настраивать текста окна сообщения, заголовок, значок и кнопки, с помощью следующего кода.</span><span class="sxs-lookup"><span data-stu-id="27050-126"><xref:System.Windows.MessageBox> lets you configure the message box text, title, icon, and buttons, using code like the following.</span></span>  
  
 [!code-csharp[DialogBoxesOverviewSnippets#MsgBoxConfigureCODEBEHIND](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxesOverviewSnippets/CSharp/Window1.xaml.cs#msgboxconfigurecodebehind)]
 [!code-vb[DialogBoxesOverviewSnippets#MsgBoxConfigureCODEBEHIND](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxesOverviewSnippets/VisualBasic/window1.xaml.vb#msgboxconfigurecodebehind)]  
  
 <span data-ttu-id="27050-127">Чтобы вывести на экран окно сообщения, вызовите `static` <xref:System.Windows.MessageBox.Show%2A> метода, как показано в следующем коде.</span><span class="sxs-lookup"><span data-stu-id="27050-127">To show a message box, you call the `static`<xref:System.Windows.MessageBox.Show%2A> method, as demonstrated in the following code.</span></span>  
  
 [!code-csharp[DialogBoxesOverviewSnippets#MsgBoxShowCODEBEHIND](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxesOverviewSnippets/CSharp/Window1.xaml.cs#msgboxshowcodebehind)]
 [!code-vb[DialogBoxesOverviewSnippets#MsgBoxShowCODEBEHIND](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxesOverviewSnippets/VisualBasic/window1.xaml.vb#msgboxshowcodebehind)]  
  
 <span data-ttu-id="27050-128">Когда коду, который показывает окно сообщения, нужно определить и обработать решение пользователя (какая кнопка была нажата), он может проверить результат окна сообщения, как показано в следующем коде.</span><span class="sxs-lookup"><span data-stu-id="27050-128">When code that shows a message box needs to detect and process the user's decision (which button was pressed), the code can inspect the message box result, as shown in the following code.</span></span>  
  
 [!code-csharp[DialogBoxesOverviewSnippets#MsgBoxShowAndResultCODEBEHIND1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxesOverviewSnippets/CSharp/Window1.xaml.cs#msgboxshowandresultcodebehind1)]
 [!code-vb[DialogBoxesOverviewSnippets#MsgBoxShowAndResultCODEBEHIND1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxesOverviewSnippets/VisualBasic/window1.xaml.vb#msgboxshowandresultcodebehind1)]  
  
 <span data-ttu-id="27050-129">Дополнительные сведения об использовании окон сообщений см. в разделе <xref:System.Windows.MessageBox>, [MessageBox образец](http://go.microsoft.com/fwlink/?LinkID=160023), и [пример диалогового окна](http://go.microsoft.com/fwlink/?LinkID=159984).</span><span class="sxs-lookup"><span data-stu-id="27050-129">For more information on using message boxes, see <xref:System.Windows.MessageBox>, [MessageBox Sample](http://go.microsoft.com/fwlink/?LinkID=160023), and [Dialog Box Sample](http://go.microsoft.com/fwlink/?LinkID=159984).</span></span>  
  
 <span data-ttu-id="27050-130">Несмотря на то что <xref:System.Windows.MessageBox> может предложить простого диалогового окна поле взаимодействия с пользователями, преимущество использования <xref:System.Windows.MessageBox> , является единственным типом окна, которое может быть отображено приложениями, выполняемыми в песочнице с частичным доверием (в разделе [безопасности](../../../../docs/framework/wpf/security-wpf.md)), такие как [!INCLUDE[TLA#tla_xbap#plural](../../../../includes/tlasharptla-xbapsharpplural-md.md)].</span><span class="sxs-lookup"><span data-stu-id="27050-130">Although <xref:System.Windows.MessageBox> may offer a simple dialog box user experience, the advantage of using <xref:System.Windows.MessageBox> is that is the only type of window that can be shown by applications that run within a partial trust security sandbox (see [Security](../../../../docs/framework/wpf/security-wpf.md)), such as [!INCLUDE[TLA#tla_xbap#plural](../../../../includes/tlasharptla-xbapsharpplural-md.md)].</span></span>  
  
 <span data-ttu-id="27050-131">Большинство диалоговых окон отображают и собирают более сложные данные, чем результат окна сообщения, в том числе текст, выбранные варианты (флажки), взаимоисключающий выбор (переключатели) и списки выбора (списки, поля со списком, поля с раскрывающимся списком).</span><span class="sxs-lookup"><span data-stu-id="27050-131">Most dialog boxes display and gather more complex data than the result of a message box, including text, selection (check boxes), mutually exclusive selection (radio buttons), and list selection (list boxes, combo boxes, drop-down list boxes).</span></span> <span data-ttu-id="27050-132">В этом случае Windows Presentation Foundation (WPF) предоставляет несколько общих диалоговых окон и позволяет создавать пользовательские диалоговые окна, хотя их использование ограничено приложениям, работающим с полным доверием.</span><span class="sxs-lookup"><span data-stu-id="27050-132">For these, Windows Presentation Foundation (WPF) provides several common dialog boxes and allows you to create your own dialog boxes, although the use of either is limited to applications running with full trust.</span></span>  
  
<a name="Common_Dialogs"></a>   
## <a name="common-dialog-boxes"></a><span data-ttu-id="27050-133">Общие диалоговые окна</span><span class="sxs-lookup"><span data-stu-id="27050-133">Common Dialog Boxes</span></span>  
 [!INCLUDE[TLA#tla_mswin](../../../../includes/tlasharptla-mswin-md.md)]<span data-ttu-id="27050-134"> реализует различные, многократно используемые диалоговые окна, которые являются общими для всех приложений, включая диалоговые окна для открытия файлов, сохранения файлов и печати.</span><span class="sxs-lookup"><span data-stu-id="27050-134"> implements a variety of reusable dialog boxes that are common to all applications, including dialog boxes for opening files, saving files, and printing.</span></span> <span data-ttu-id="27050-135">Поскольку эти диалоговые окна реализованы операционной системой, они могут совместно использоваться всеми приложениями, работающими в операционной системе, что помогает поддерживать единообразие пользовательского интерфейса; если пользователи знакомы с диалоговым окном, предоставляемым операционной системой в одном приложении, им не нужно учиться пользоваться этим диалоговым окном в других приложениях.</span><span class="sxs-lookup"><span data-stu-id="27050-135">Since these dialog boxes are implemented by the operating system, they can be shared among all the applications that run on the operating system, which helps user experience consistency; when users are familiar with the use of an operating system-provided dialog box in one application, they don't need to learn how to use that dialog box in other applications.</span></span> <span data-ttu-id="27050-136">Так как этим диалоговым окнам, доступны для всех приложений и обеспечивают целостное взаимодействие с пользователем, они называются *общие диалоговые окна*.</span><span class="sxs-lookup"><span data-stu-id="27050-136">Because these dialog boxes are available to all applications and because they help provide a consistent user experience, they are known as *common dialog boxes*.</span></span>  
  
 <span data-ttu-id="27050-137">Windows Presentation Foundation (WPF) инкапсулирует открыть файл, сохраните файл, печать общие диалоговые окна и предоставляет их как управляемые классы для использования в автономных приложений.</span><span class="sxs-lookup"><span data-stu-id="27050-137">Windows Presentation Foundation (WPF) encapsulates the open file, save file, and print common dialog boxes and exposes them as managed classes for you to use in standalone applications.</span></span> <span data-ttu-id="27050-138">В этом разделе приводится краткий обзор каждого типа диалоговых окон.</span><span class="sxs-lookup"><span data-stu-id="27050-138">This topic provides a brief overview of each.</span></span>  
  
<a name="Open_File_Dialog"></a>   
### <a name="open-file-dialog"></a><span data-ttu-id="27050-139">Диалоговое окно открытия файлов</span><span class="sxs-lookup"><span data-stu-id="27050-139">Open File Dialog</span></span>  
 <span data-ttu-id="27050-140">Диалоговое окно открытия файлов, показанное на следующем рисунке, используется функциональностью открытия файла для получения имени открываемого файла.</span><span class="sxs-lookup"><span data-stu-id="27050-140">The open file dialog box, shown in the following figure, is used by file opening functionality to retrieve the name of a file to open.</span></span>  
  
 <span data-ttu-id="27050-141">![Диалоговое окно открытия](../../../../docs/framework/wpf/app-development/media/dialogboxesoverviewfigure2.png "DialogBoxesOverviewFigure2")</span><span class="sxs-lookup"><span data-stu-id="27050-141">![Open dialog box](../../../../docs/framework/wpf/app-development/media/dialogboxesoverviewfigure2.png "DialogBoxesOverviewFigure2")</span></span>  
  
 <span data-ttu-id="27050-142">Стандартным диалоговым окном открытия реализуется в виде <xref:Microsoft.Win32.OpenFileDialog> класса и находится в папке <xref:Microsoft.Win32> пространства имен.</span><span class="sxs-lookup"><span data-stu-id="27050-142">The common open file dialog box is implemented as the <xref:Microsoft.Win32.OpenFileDialog> class and is located in the <xref:Microsoft.Win32> namespace.</span></span> <span data-ttu-id="27050-143">Следующий код показывает, как создавать, настраивать и отображать такое окно, а также как обрабатывать результат.</span><span class="sxs-lookup"><span data-stu-id="27050-143">The following code shows how to create, configure, and show one, and how to process the result.</span></span>  
  
 [!code-csharp[DialogBoxesOverviewSnippets#OpenFileDialogBoxCODEBEHIND](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxesOverviewSnippets/CSharp/Window1.xaml.cs#openfiledialogboxcodebehind)]
 [!code-vb[DialogBoxesOverviewSnippets#OpenFileDialogBoxCODEBEHIND](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxesOverviewSnippets/VisualBasic/window1.xaml.vb#openfiledialogboxcodebehind)]  
  
 <span data-ttu-id="27050-144">Дополнительные сведения о диалоговом окне Открытие файла см. в разделе <xref:Microsoft.Win32.OpenFileDialog?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="27050-144">For more information on the open file dialog box, see <xref:Microsoft.Win32.OpenFileDialog?displayProperty=nameWithType>.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="27050-145"><xref:Microsoft.Win32.OpenFileDialog> может использоваться для безопасного извлечения имен файлов приложениями, выполняемыми с частичным доверием (в разделе [безопасности](../../../../docs/framework/wpf/security-wpf.md)).</span><span class="sxs-lookup"><span data-stu-id="27050-145"><xref:Microsoft.Win32.OpenFileDialog> can be used to safely retrieve file names by applications running with partial trust (see [Security](../../../../docs/framework/wpf/security-wpf.md)).</span></span>  
  
<a name="Save_File_Dialog"></a>   
### <a name="save-file-dialog-box"></a><span data-ttu-id="27050-146">Диалоговое окно сохранения файлов</span><span class="sxs-lookup"><span data-stu-id="27050-146">Save File Dialog Box</span></span>  
 <span data-ttu-id="27050-147">Диалоговое окно сохранения файлов, показанное на следующем рисунке, используется функциональностью сохранения файла для получения имени сохраняемого файла.</span><span class="sxs-lookup"><span data-stu-id="27050-147">The save file dialog box, shown in the following figure, is used by file saving functionality to retrieve the name of a file to save.</span></span>  
  
 <span data-ttu-id="27050-148">![Диалоговое окно "Сохранить как"](../../../../docs/framework/wpf/app-development/media/dialogboxesoverviewfigure3.png "DialogBoxesOverviewFigure3")</span><span class="sxs-lookup"><span data-stu-id="27050-148">![Save As dialog box](../../../../docs/framework/wpf/app-development/media/dialogboxesoverviewfigure3.png "DialogBoxesOverviewFigure3")</span></span>  
  
 <span data-ttu-id="27050-149">Общий файл-диалоговое окно сохранения реализуется в виде <xref:Microsoft.Win32.SaveFileDialog> класса и находится в папке <xref:Microsoft.Win32> пространства имен.</span><span class="sxs-lookup"><span data-stu-id="27050-149">The common save file dialog box is implemented as the <xref:Microsoft.Win32.SaveFileDialog> class, and is located in the <xref:Microsoft.Win32> namespace.</span></span> <span data-ttu-id="27050-150">Следующий код показывает, как создавать, настраивать и отображать такое окно, а также как обрабатывать результат.</span><span class="sxs-lookup"><span data-stu-id="27050-150">The following code shows how to create, configure, and show one, and how to process the result.</span></span>  
  
 [!code-csharp[DialogBoxesOverviewSnippets#SaveFileDialogBoxCODEBEHIND](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxesOverviewSnippets/CSharp/Window1.xaml.cs#savefiledialogboxcodebehind)]
 [!code-vb[DialogBoxesOverviewSnippets#SaveFileDialogBoxCODEBEHIND](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxesOverviewSnippets/VisualBasic/window1.xaml.vb#savefiledialogboxcodebehind)]  
  
 <span data-ttu-id="27050-151">Дополнительные сведения о сохранении диалоговое окно файла см. в разделе <xref:Microsoft.Win32.SaveFileDialog?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="27050-151">For more information on the save file dialog box, see <xref:Microsoft.Win32.SaveFileDialog?displayProperty=nameWithType>.</span></span>  
  
<a name="Print_Dialog"></a>   
### <a name="print-dialog-box"></a><span data-ttu-id="27050-152">Диалоговое окно печати</span><span class="sxs-lookup"><span data-stu-id="27050-152">Print Dialog Box</span></span>  
 <span data-ttu-id="27050-153">Диалоговое окно печати, показанное на следующем рисунке, используется функциональными возможностями печати для выбора и настройки принтера, на котором пользователь хочет печатать данные.</span><span class="sxs-lookup"><span data-stu-id="27050-153">The print dialog box, shown in the following figure, is used by printing functionality to choose and configure the printer that a user would like to print data to.</span></span>  
  
 <span data-ttu-id="27050-154">![Диалоговое окно печати](../../../../docs/framework/wpf/app-development/media/dialogboxesoverviewfigure4.png "DialogBoxesOverviewFigure4")</span><span class="sxs-lookup"><span data-stu-id="27050-154">![Print dialog box](../../../../docs/framework/wpf/app-development/media/dialogboxesoverviewfigure4.png "DialogBoxesOverviewFigure4")</span></span>  
  
 <span data-ttu-id="27050-155">Общее диалоговое окно печати реализуется как <xref:System.Windows.Controls.PrintDialog> класса и находится в папке <xref:System.Windows.Controls> пространства имен.</span><span class="sxs-lookup"><span data-stu-id="27050-155">The common print dialog box is implemented as the <xref:System.Windows.Controls.PrintDialog> class, and is located in the <xref:System.Windows.Controls> namespace.</span></span> <span data-ttu-id="27050-156">Следующий код показывает, как создавать, настраивать и отображать такое окно.</span><span class="sxs-lookup"><span data-stu-id="27050-156">The following code shows how to create, configure, and show one.</span></span>  
  
 [!code-csharp[DialogBoxesOverviewSnippets#PrintDialogBoxCODEBEHIND](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxesOverviewSnippets/CSharp/Window1.xaml.cs#printdialogboxcodebehind)]
 [!code-vb[DialogBoxesOverviewSnippets#PrintDialogBoxCODEBEHIND](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxesOverviewSnippets/VisualBasic/window1.xaml.vb#printdialogboxcodebehind)]  
  
 <span data-ttu-id="27050-157">Дополнительные сведения о диалоговом окне печати см. в разделе <xref:System.Windows.Controls.PrintDialog?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="27050-157">For more information on the print dialog box, see <xref:System.Windows.Controls.PrintDialog?displayProperty=nameWithType>.</span></span> <span data-ttu-id="27050-158">Подробное описание печати в [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], в разделе [Обзор печати](../../../../docs/framework/wpf/advanced/printing-overview.md).</span><span class="sxs-lookup"><span data-stu-id="27050-158">For detailed discussion of printing in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], see [Printing Overview](../../../../docs/framework/wpf/advanced/printing-overview.md).</span></span>  
  
<a name="Custom_Dialog_Boxes"></a>   
## <a name="custom-dialog-boxes"></a><span data-ttu-id="27050-159">Пользовательские диалоговые окна</span><span class="sxs-lookup"><span data-stu-id="27050-159">Custom Dialog Boxes</span></span>  
 <span data-ttu-id="27050-160">Хотя общие диалоговые окна полезны и должны использоваться, когда это возможно, они не поддерживают требований диалоговых окон отдельного домена.</span><span class="sxs-lookup"><span data-stu-id="27050-160">While common dialog boxes are useful, and should be used when possible, they do not support the requirements of domain-specific dialog boxes.</span></span> <span data-ttu-id="27050-161">В этих случаях необходимо создавать собственные диалоговые окна.</span><span class="sxs-lookup"><span data-stu-id="27050-161">In these cases, you need to create your own dialog boxes.</span></span> <span data-ttu-id="27050-162">Как мы увидим, диалоговое окно является окном со специальным поведением.</span><span class="sxs-lookup"><span data-stu-id="27050-162">As we'll see, a dialog box is a window with special behaviors.</span></span> <span data-ttu-id="27050-163"><xref:System.Windows.Window> Это поведение реализуется и, следовательно, можно использовать <xref:System.Windows.Window> для создания пользовательских модальные и немодальные диалоговые окна.</span><span class="sxs-lookup"><span data-stu-id="27050-163"><xref:System.Windows.Window> implements those behaviors and, consequently, you use <xref:System.Windows.Window> to create custom modal and modeless dialog boxes.</span></span>  
  
<a name="Creating_a_Modal_Custom_Dialog_Box"></a>   
### <a name="creating-a-modal-custom-dialog-box"></a><span data-ttu-id="27050-164">Создание модального пользовательского диалогового окна</span><span class="sxs-lookup"><span data-stu-id="27050-164">Creating a Modal Custom Dialog Box</span></span>  
 <span data-ttu-id="27050-165">В этом разделе показано, как использовать <xref:System.Windows.Window> для создания реализации типичного модального диалогового окна поле, с помощью `Margins` диалоговое окно «» в качестве примера (см. [пример диалогового окна](http://go.microsoft.com/fwlink/?LinkID=159984)).</span><span class="sxs-lookup"><span data-stu-id="27050-165">This topic shows how to use <xref:System.Windows.Window> to create a typical modal dialog box implementation, using the `Margins` dialog box as an example (see [Dialog Box Sample](http://go.microsoft.com/fwlink/?LinkID=159984)).</span></span> <span data-ttu-id="27050-166">`Margins` На следующем рисунке показано диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="27050-166">The `Margins` dialog box is shown in the following figure.</span></span>  
  
 <span data-ttu-id="27050-167">![Диалоговое окно "Поля"](../../../../docs/framework/wpf/app-development/media/dialogboxesoverviewfigure5.png "DialogBoxesOverviewFigure5")</span><span class="sxs-lookup"><span data-stu-id="27050-167">![Margins dialog box](../../../../docs/framework/wpf/app-development/media/dialogboxesoverviewfigure5.png "DialogBoxesOverviewFigure5")</span></span>  
  
#### <a name="configuring-a-modal-dialog-box"></a><span data-ttu-id="27050-168">Настройка модального диалогового окна</span><span class="sxs-lookup"><span data-stu-id="27050-168">Configuring a Modal Dialog Box</span></span>  
 <span data-ttu-id="27050-169">Пользовательский интерфейс для типичного диалогового окна включает следующее.</span><span class="sxs-lookup"><span data-stu-id="27050-169">The user interface for a typical dialog box includes the following:</span></span>  
  
-   <span data-ttu-id="27050-170">Различные элементы управления, которые необходимы для сбора нужных данных.</span><span class="sxs-lookup"><span data-stu-id="27050-170">The various controls that are required to gather the desired data.</span></span>  
  
-   <span data-ttu-id="27050-171">Отображение **ОК** кнопку, пользователи щелкните, чтобы закрыть диалоговое окно, возвращаемого в функцию и продолжить обработку.</span><span class="sxs-lookup"><span data-stu-id="27050-171">Showing an **OK** button that users click to close the dialog box, return to the function, and continue processing.</span></span>  
  
-   <span data-ttu-id="27050-172">Отображение **отменить** кнопку, пользователи щелкните, чтобы закрыть диалоговое окно и остановить дальнейшую обработку функции.</span><span class="sxs-lookup"><span data-stu-id="27050-172">Showing a **Cancel** button that users click to close the dialog box and stop the function from further processing.</span></span>  
  
-   <span data-ttu-id="27050-173">Отображение **закрыть** кнопки в заголовке окна.</span><span class="sxs-lookup"><span data-stu-id="27050-173">Showing a **Close** button in the title bar.</span></span>  
  
-   <span data-ttu-id="27050-174">Отображение значка.</span><span class="sxs-lookup"><span data-stu-id="27050-174">Showing an icon.</span></span>  
  
-   <span data-ttu-id="27050-175">Отображение **свернуть**, **развернуть**, и **восстановить** кнопки.</span><span class="sxs-lookup"><span data-stu-id="27050-175">Showing **Minimize**, **Maximize**, and **Restore** buttons.</span></span>  
  
-   <span data-ttu-id="27050-176">Отображение **системы** меню, чтобы свести к минимуму, максимизировать, восстановление и закрыть диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="27050-176">Showing a **System** menu to minimize, maximize, restore, and close the dialog box.</span></span>  
  
-   <span data-ttu-id="27050-177">Открытие выше и в центре окна, которое открывает диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="27050-177">Opening above and in the center of the window that opened the dialog box.</span></span>  
  
-   <span data-ttu-id="27050-178">Диалоговые окна должны быть регулируемого размера, где это возможно, и чтобы предотвратить появление окна слишком малого размера, а также предоставить пользователю удобный размер по умолчанию, необходимо установить минимальные размеры окна и размеры по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="27050-178">Dialog boxes should be resizable where possible so, to prevent the dialog box from being too small, and to provide the user with a useful default size, you need to set both default and a minimum dimensions respectively.</span></span>  
  
-   <span data-ttu-id="27050-179">Нажатие клавиши ESC следует настроить как сочетание клавиш, которое вызывает **отменить** нажатие кнопки.</span><span class="sxs-lookup"><span data-stu-id="27050-179">Pressing the ESC key should be configured as a keyboard shortcut that causes the **Cancel** button to be pressed.</span></span> <span data-ttu-id="27050-180">Это достигается путем установки <xref:System.Windows.Controls.Button.IsCancel%2A> свойство **отменить** кнопки `true`.</span><span class="sxs-lookup"><span data-stu-id="27050-180">This is achieved by setting the <xref:System.Windows.Controls.Button.IsCancel%2A> property of the **Cancel** button to `true`.</span></span>  
  
-   <span data-ttu-id="27050-181">Нажатие клавиши ВВОД (или возврата) настраивается, как сочетание клавиш, которое вызывает **ОК** нажатие кнопки.</span><span class="sxs-lookup"><span data-stu-id="27050-181">Pressing the ENTER (or RETURN) key should be configured as a keyboard shortcut that causes the **OK** button to be pressed.</span></span> <span data-ttu-id="27050-182">Это достигается путем установки <xref:System.Windows.Controls.Button.IsDefault%2A> свойство **ОК** кнопку `true`.</span><span class="sxs-lookup"><span data-stu-id="27050-182">This is achieved by setting the <xref:System.Windows.Controls.Button.IsDefault%2A> property of the **OK** button `true`.</span></span>  
  
 <span data-ttu-id="27050-183">Следующий код демонстрирует такую конфигурацию.</span><span class="sxs-lookup"><span data-stu-id="27050-183">The following code demonstrates this configuration.</span></span>  
  
 [!code-xaml[DialogBoxSample#MarginsDialogBoxMainBitsMARKUP1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MarginsDialogBox.xaml#marginsdialogboxmainbitsmarkup1)]  
[!code-xaml[DialogBoxSample#MarginsDialogBoxMainBitsMARKUP2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MarginsDialogBox.xaml#marginsdialogboxmainbitsmarkup2)]  
  
 [!code-csharp[DialogBoxSample#MarginsDialogBoxMainBitsCODEBEHIND1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MarginsDialogBox.xaml.cs#marginsdialogboxmainbitscodebehind1)]
 [!code-vb[DialogBoxSample#MarginsDialogBoxMainBitsCODEBEHIND1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MarginsDialogBox.xaml.vb#marginsdialogboxmainbitscodebehind1)]  
[!code-csharp[DialogBoxSample#MarginsDialogBoxMainBitsCODEBEHIND2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MarginsDialogBox.xaml.cs#marginsdialogboxmainbitscodebehind2)]
[!code-vb[DialogBoxSample#MarginsDialogBoxMainBitsCODEBEHIND2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MarginsDialogBox.xaml.vb#marginsdialogboxmainbitscodebehind2)]  
  
 <span data-ttu-id="27050-184">Пользовательский интерфейс для диалогового окна также распространяется в строку меню окна, открывающего диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="27050-184">The user experience for a dialog box also extends into the menu bar of the window that opens the dialog box.</span></span> <span data-ttu-id="27050-185">Если пункт меню вызывает функцию, которая перед продолжением выполнения требует взаимодействия с пользователем посредством диалогового окна, то в названии этого пункта меню будет многоточие в заголовке, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="27050-185">When a menu item runs a function that requires user interaction through a dialog box before the function can continue, the menu item for the function will have an ellipsis in its header, as shown here.</span></span>  
  
 [!code-xaml[DialogBoxSample#MainWindowMarginsDialogBoxMenuItemMARKUP1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MainWindow.xaml#mainwindowmarginsdialogboxmenuitemmarkup1)]  
[!code-xaml[DialogBoxSample#MainWindowMarginsDialogBoxMenuItemMARKUP2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MainWindow.xaml#mainwindowmarginsdialogboxmenuitemmarkup2)]  
  
 <span data-ttu-id="27050-186">Если пункт меню вызывает функцию, которая отображает диалоговое окно, не требующее взаимодействия с пользователем, например диалоговое окно "О программе", многоточие не требуется.</span><span class="sxs-lookup"><span data-stu-id="27050-186">When a menu item runs a function that displays a dialog box which does not require user interaction, such as an About dialog box, an ellipsis is not required.</span></span>  
  
#### <a name="opening-a-modal-dialog-box"></a><span data-ttu-id="27050-187">Открытие модального диалогового окна</span><span class="sxs-lookup"><span data-stu-id="27050-187">Opening a Modal Dialog Box</span></span>  
 <span data-ttu-id="27050-188">Диалоговое окно обычно отображается в результате выбора пользователем пункта меню для выполнения доменной функции, такой как установка полей документа в текстовом процессоре.</span><span class="sxs-lookup"><span data-stu-id="27050-188">A dialog box is typically shown as a result of a user selecting a menu item to perform a domain-specific function, such as setting the margins of a document in a word processor.</span></span> <span data-ttu-id="27050-189">Отображение диалогового окна похоже на отображение обычного окна, хотя требуется дополнительная настройка для диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="27050-189">Showing a window as a dialog box is similar to showing a normal window, although it requires additional dialog box-specific configuration.</span></span> <span data-ttu-id="27050-190">Весь процесс создания, настройки и открытия диалогового окна показан в следующем коде.</span><span class="sxs-lookup"><span data-stu-id="27050-190">The entire process of instantiating, configuring, and opening a dialog box is shown in the following code.</span></span>  
  
 [!code-csharp[DialogBoxSample#OpenMarginsDialogCODEBEHIND1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MainWindow.xaml.cs#openmarginsdialogcodebehind1)]
 [!code-vb[DialogBoxSample#OpenMarginsDialogCODEBEHIND1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MainWindow.xaml.vb#openmarginsdialogcodebehind1)]  
[!code-csharp[DialogBoxSample#OpenMarginsDialogCODEBEHIND2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MainWindow.xaml.cs#openmarginsdialogcodebehind2)]
[!code-vb[DialogBoxSample#OpenMarginsDialogCODEBEHIND2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MainWindow.xaml.vb#openmarginsdialogcodebehind2)]  
[!code-csharp[DialogBoxSample#OpenMarginsDialogCODEBEHIND3](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MainWindow.xaml.cs#openmarginsdialogcodebehind3)]
[!code-vb[DialogBoxSample#OpenMarginsDialogCODEBEHIND3](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MainWindow.xaml.vb#openmarginsdialogcodebehind3)]  
[!code-csharp[DialogBoxSample#OpenMarginsDialogCODEBEHIND4](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MainWindow.xaml.cs#openmarginsdialogcodebehind4)]
[!code-vb[DialogBoxSample#OpenMarginsDialogCODEBEHIND4](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MainWindow.xaml.vb#openmarginsdialogcodebehind4)]  
  
 <span data-ttu-id="27050-191">Здесь код передает в диалоговое окно сведения по умолчанию (о текущих полях).</span><span class="sxs-lookup"><span data-stu-id="27050-191">Here, the code is passing default information (the current margins) to the dialog box.</span></span> <span data-ttu-id="27050-192">Он также задает <xref:System.Windows.Window.Owner%2A?displayProperty=nameWithType> свойства со ссылкой на окно, которое отображает диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="27050-192">It is also setting the <xref:System.Windows.Window.Owner%2A?displayProperty=nameWithType> property with a reference to the window that is showing the dialog box.</span></span> <span data-ttu-id="27050-193">Как правило, следует всегда устанавливать владельца для диалогового окна, чтобы задать поведения, связанные с состоянием окна, общие для всех диалоговых окнах (см. [Обзор Windows WPF](../../../../docs/framework/wpf/app-development/wpf-windows-overview.md) для получения дополнительной информации).</span><span class="sxs-lookup"><span data-stu-id="27050-193">In general, you should always set the owner for a dialog box to provide window state-related behaviors that are common to all dialog boxes (see [WPF Windows Overview](../../../../docs/framework/wpf/app-development/wpf-windows-overview.md) for more information).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="27050-194">Необходимо задать владельца для поддержки [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)] автоматизации для диалоговых окон (см. [Обзор модели автоматизации пользовательского интерфейса](../../../../docs/framework/ui-automation/ui-automation-overview.md)).</span><span class="sxs-lookup"><span data-stu-id="27050-194">You must provide an owner to support [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)] automation for dialog boxes (see [UI Automation Overview](../../../../docs/framework/ui-automation/ui-automation-overview.md)).</span></span>  
  
 <span data-ttu-id="27050-195">После настройки диалогового она отображается как модальная путем вызова <xref:System.Windows.Window.ShowDialog%2A> метод.</span><span class="sxs-lookup"><span data-stu-id="27050-195">After the dialog box is configured, it is shown modally by calling the <xref:System.Windows.Window.ShowDialog%2A> method.</span></span>  
  
#### <a name="validating-user-provided-data"></a><span data-ttu-id="27050-196">Проверка пользовательских данных</span><span class="sxs-lookup"><span data-stu-id="27050-196">Validating User-Provided Data</span></span>  
 <span data-ttu-id="27050-197">Если открывается диалоговое окно и пользователь предоставляет требуемые данные, диалоговое окно отвечает за проверку допустимости предоставленных данных по следующим причинам.</span><span class="sxs-lookup"><span data-stu-id="27050-197">When a dialog box is opened and the user provides the required data, a dialog box is responsible for ensuring that the provided data is valid for the following reasons:</span></span>  
  
-   <span data-ttu-id="27050-198">С точки зрения безопасности следует проверять все входные данные.</span><span class="sxs-lookup"><span data-stu-id="27050-198">From a security perspective, all input should be validated.</span></span>  
  
-   <span data-ttu-id="27050-199">С точки зрения конкретного домена проверка данных предотвращает обработку в коде ошибочных данных, которые могут вызывать исключения.</span><span class="sxs-lookup"><span data-stu-id="27050-199">From a domain-specific perspective, data validation prevents erroneous data from being processed by the code, which could potentially throw exceptions.</span></span>  
  
-   <span data-ttu-id="27050-200">С точки зрения взаимодействия с пользователем диалоговое окно может помочь пользователям, показывая, какие введенные ими данные являются недопустимыми.</span><span class="sxs-lookup"><span data-stu-id="27050-200">From a user-experience perspective, a dialog box can help users by showing them which data they have entered is invalid.</span></span>  
  
-   <span data-ttu-id="27050-201">С точки зрения производительности проверка данных в многоуровневом приложении может уменьшить количество циклов обработки между уровнями клиента и приложения, особенно в том случае, если в приложение входят веб-службы или серверные базы данных.</span><span class="sxs-lookup"><span data-stu-id="27050-201">From a performance perspective, data validation in a multi-tier application can reduce the number of round trips between the client and the application tiers, particularly when the application is composed of Web services or server-based databases.</span></span>  
  
 <span data-ttu-id="27050-202">Чтобы проверить связанный элемент управления в [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], необходимо определить правило проверки и связать его с привязкой.</span><span class="sxs-lookup"><span data-stu-id="27050-202">To validate a bound control in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)], you need to define a validation rule and associate it with the binding.</span></span> <span data-ttu-id="27050-203">Правило проверки — пользовательский класс, производный от <xref:System.Windows.Controls.ValidationRule>.</span><span class="sxs-lookup"><span data-stu-id="27050-203">A validation rule is a custom class that derives from <xref:System.Windows.Controls.ValidationRule>.</span></span> <span data-ttu-id="27050-204">В следующем примере показано правило проверки, `MarginValidationRule`, которое проверяет, что связанным значением является <xref:System.Double> и находится в пределах указанного диапазона.</span><span class="sxs-lookup"><span data-stu-id="27050-204">The following example shows a validation rule, `MarginValidationRule`, which checks that a bound value is a <xref:System.Double> and is within a specified range.</span></span>  
  
 [!code-csharp[DialogBoxSample#MarginValidationRuleCODE](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MarginValidationRule.cs#marginvalidationrulecode)]
 [!code-vb[DialogBoxSample#MarginValidationRuleCODE](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MarginValidationRule.vb#marginvalidationrulecode)]  
  
 <span data-ttu-id="27050-205">В этом коде логики проверки правила проверки реализована путем переопределения <xref:System.Windows.Controls.ValidationRule.Validate%2A> метод, который проверяет данные и возвращает соответствующий <xref:System.Windows.Controls.ValidationResult>.</span><span class="sxs-lookup"><span data-stu-id="27050-205">In this code, the validation logic of a validation rule is implemented by overriding the <xref:System.Windows.Controls.ValidationRule.Validate%2A> method, which validates the data and returns an appropriate <xref:System.Windows.Controls.ValidationResult>.</span></span>  
  
 <span data-ttu-id="27050-206">Чтобы сопоставить это правило проверки со связанным элементом управления, используется следующая разметка.</span><span class="sxs-lookup"><span data-stu-id="27050-206">To associate the validation rule with the bound control, you use the following markup.</span></span>  
  
 [!code-xaml[DialogBoxSample#MarginsValidationMARKUP1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MarginsDialogBox.xaml#marginsvalidationmarkup1)]  
[!code-xaml[DialogBoxSample#MarginsValidationMARKUP2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MarginsDialogBox.xaml#marginsvalidationmarkup2)]  
[!code-xaml[DialogBoxSample#MarginsValidationMARKUP3](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MarginsDialogBox.xaml#marginsvalidationmarkup3)]  
  
 <span data-ttu-id="27050-207">После связывания, правила проверки [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] автоматически применяет его при вводе данных в связанном элементе управления.</span><span class="sxs-lookup"><span data-stu-id="27050-207">Once the validation rule is associated, [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] will automatically apply it when data is entered into the bound control.</span></span> <span data-ttu-id="27050-208">Если элемент управления содержит недопустимые данные [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] отображаются красные границы вокруг недопустимого элемента, как показано на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="27050-208">When a control contains invalid data, [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] will display a red border around the invalid control, as shown in the following figure.</span></span>  
  
 <span data-ttu-id="27050-209">![Недопустимое значение левого поля](../../../../docs/framework/wpf/app-development/media/dialogboxesoverviewfigure7.png "DialogBoxesOverviewFigure7")</span><span class="sxs-lookup"><span data-stu-id="27050-209">![Invalid left margin](../../../../docs/framework/wpf/app-development/media/dialogboxesoverviewfigure7.png "DialogBoxesOverviewFigure7")</span></span>  
  
 [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="27050-210"> не препятствует выходу пользователя из недопустимого элемента управления до ввода правильных данных.</span><span class="sxs-lookup"><span data-stu-id="27050-210"> does not restrict a user to the invalid control until they have entered valid data.</span></span> <span data-ttu-id="27050-211">Это правильное поведение диалогового окна; пользователь должен иметь возможность свободно перемещаться по элементам управления в диалоговом окне, независимо от того, правильны ли введенные данные.</span><span class="sxs-lookup"><span data-stu-id="27050-211">This is good behavior for a dialog box; a user should be able to freely navigate the controls in a dialog box whether or not data is valid.</span></span> <span data-ttu-id="27050-212">Тем не менее, это означает, пользователь может ввести недопустимые данные и нажмите клавишу **ОК** кнопки.</span><span class="sxs-lookup"><span data-stu-id="27050-212">However, this means a user can enter invalid data and press the **OK** button.</span></span> <span data-ttu-id="27050-213">По этой причине код также должен проверить все элементы управления в диалоговом окне когда **ОК** нажата кнопка путем обработки <xref:System.Windows.Controls.Primitives.ButtonBase.Click> событий.</span><span class="sxs-lookup"><span data-stu-id="27050-213">For this reason, your code also needs to validate all controls in a dialog box when the **OK** button is pressed by handling the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event.</span></span>  
  
 [!code-csharp[DialogBoxSample#MarginsDialogBoxValidationCODEBEHIND1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MarginsDialogBox.xaml.cs#marginsdialogboxvalidationcodebehind1)]
 [!code-vb[DialogBoxSample#MarginsDialogBoxValidationCODEBEHIND1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MarginsDialogBox.xaml.vb#marginsdialogboxvalidationcodebehind1)]  
[!code-csharp[DialogBoxSample#MarginsDialogBoxValidationCODEBEHIND2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MarginsDialogBox.xaml.cs#marginsdialogboxvalidationcodebehind2)]
[!code-vb[DialogBoxSample#MarginsDialogBoxValidationCODEBEHIND2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MarginsDialogBox.xaml.vb#marginsdialogboxvalidationcodebehind2)]  
[!code-csharp[DialogBoxSample#MarginsDialogBoxValidationCODEBEHIND3](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MarginsDialogBox.xaml.cs#marginsdialogboxvalidationcodebehind3)]
[!code-vb[DialogBoxSample#MarginsDialogBoxValidationCODEBEHIND3](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MarginsDialogBox.xaml.vb#marginsdialogboxvalidationcodebehind3)]  
  
 <span data-ttu-id="27050-214">Этот код перечисляет все зависимые объекты в окне и, если какой-либо недопустимые (возвращенные <xref:System.Windows.Controls.Validation.GetHasError%2A>, недопустимый элемент управления получает фокус, `IsValid` возвращает `false`, и окно считается недопустимым.</span><span class="sxs-lookup"><span data-stu-id="27050-214">This code enumerates all dependency objects on a window and, if any are invalid (as returned by <xref:System.Windows.Controls.Validation.GetHasError%2A>, the invalid control gets the focus, the `IsValid` method returns `false`, and the window is considered invalid.</span></span>  
  
 <span data-ttu-id="27050-215">Если диалоговое окно является допустимым, оно может быть безопасно закрыто и выполнен возврат.</span><span class="sxs-lookup"><span data-stu-id="27050-215">Once a dialog box is valid, it can safely close and return.</span></span> <span data-ttu-id="27050-216">В рамках процесса возврата необходимо возвращать результат в вызывающую функцию.</span><span class="sxs-lookup"><span data-stu-id="27050-216">As part of the return process, it needs to return a result to the calling function.</span></span>  
  
#### <a name="setting-the-modal-dialog-result"></a><span data-ttu-id="27050-217">Установка результата модального диалогового окна</span><span class="sxs-lookup"><span data-stu-id="27050-217">Setting the Modal Dialog Result</span></span>  
 <span data-ttu-id="27050-218">Открытие диалогового окна при помощи <xref:System.Windows.Window.ShowDialog%2A> — это по сути, как вызов метода: код, который открывается диалоговое окно с помощью <xref:System.Windows.Window.ShowDialog%2A> ждет, пока <xref:System.Windows.Window.ShowDialog%2A> возвращает.</span><span class="sxs-lookup"><span data-stu-id="27050-218">Opening a dialog box using <xref:System.Windows.Window.ShowDialog%2A> is fundamentally like calling a method: the code that opened the dialog box using <xref:System.Windows.Window.ShowDialog%2A> waits until <xref:System.Windows.Window.ShowDialog%2A> returns.</span></span> <span data-ttu-id="27050-219">При <xref:System.Windows.Window.ShowDialog%2A> возвращает, код, который вызвал его нужно решить, следует ли продолжить или прекратить обработку, на основе ли пользователь нажал **ОК** кнопку или **отменить** кнопки.</span><span class="sxs-lookup"><span data-stu-id="27050-219">When <xref:System.Windows.Window.ShowDialog%2A> returns, the code that called it needs to decide whether to continue processing or stop processing, based on whether the user pressed the **OK** button or the **Cancel** button.</span></span> <span data-ttu-id="27050-220">Для упрощения этого решения, диалоговое окно должно возвращать выбора пользователя как <xref:System.Boolean> значение, которое возвращается из <xref:System.Windows.Window.ShowDialog%2A> метод.</span><span class="sxs-lookup"><span data-stu-id="27050-220">To facilitate this decision, the dialog box needs to return the user's choice as a <xref:System.Boolean> value that is returned from the <xref:System.Windows.Window.ShowDialog%2A> method.</span></span>  
  
 <span data-ttu-id="27050-221">Когда **ОК** по нажатию кнопки <xref:System.Windows.Window.ShowDialog%2A> должен возвращать `true`.</span><span class="sxs-lookup"><span data-stu-id="27050-221">When the **OK** button is clicked, <xref:System.Windows.Window.ShowDialog%2A> should return `true`.</span></span> <span data-ttu-id="27050-222">Это достигается путем установки <xref:System.Windows.Window.DialogResult%2A> свойства диалогового окна поле, когда **ОК** кнопки.</span><span class="sxs-lookup"><span data-stu-id="27050-222">This is achieved by setting the <xref:System.Windows.Window.DialogResult%2A> property of the dialog box when the **OK** button is clicked.</span></span>  
  
 [!code-csharp[DialogBoxSample#MarginsDialogBoxOKResultSetCODEBEHIND1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MarginsDialogBox.xaml.cs#marginsdialogboxokresultsetcodebehind1)]
 [!code-vb[DialogBoxSample#MarginsDialogBoxOKResultSetCODEBEHIND1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MarginsDialogBox.xaml.vb#marginsdialogboxokresultsetcodebehind1)]  
[!code-csharp[DialogBoxSample#MarginsDialogBoxOKResultSetCODEBEHIND2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MarginsDialogBox.xaml.cs#marginsdialogboxokresultsetcodebehind2)]
[!code-vb[DialogBoxSample#MarginsDialogBoxOKResultSetCODEBEHIND2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MarginsDialogBox.xaml.vb#marginsdialogboxokresultsetcodebehind2)]  
[!code-csharp[DialogBoxSample#MarginsDialogBoxOKResultSetCODEBEHIND3](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MarginsDialogBox.xaml.cs#marginsdialogboxokresultsetcodebehind3)]
[!code-vb[DialogBoxSample#MarginsDialogBoxOKResultSetCODEBEHIND3](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MarginsDialogBox.xaml.vb#marginsdialogboxokresultsetcodebehind3)]  
[!code-csharp[DialogBoxSample#MarginsDialogBoxOKResultSetCODEBEHIND4](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MarginsDialogBox.xaml.cs#marginsdialogboxokresultsetcodebehind4)]
[!code-vb[DialogBoxSample#MarginsDialogBoxOKResultSetCODEBEHIND4](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MarginsDialogBox.xaml.vb#marginsdialogboxokresultsetcodebehind4)]  
  
 <span data-ttu-id="27050-223">Обратите внимание, что <xref:System.Windows.Window.DialogResult%2A> свойства также вызывает автоматическое закрытие окна, который устраняет необходимость явно вызывать <xref:System.Windows.Window.Close%2A>.</span><span class="sxs-lookup"><span data-stu-id="27050-223">Note that setting the <xref:System.Windows.Window.DialogResult%2A> property also causes the window to close automatically, which alleviates the need to explicitly call <xref:System.Windows.Window.Close%2A>.</span></span>  
  
 <span data-ttu-id="27050-224">Когда **отменить** по нажатию кнопки <xref:System.Windows.Window.ShowDialog%2A> должен возвращать `false`, что также требует настройки <xref:System.Windows.Window.DialogResult%2A> свойство.</span><span class="sxs-lookup"><span data-stu-id="27050-224">When the **Cancel** button is clicked, <xref:System.Windows.Window.ShowDialog%2A> should return `false`, which also requires setting the <xref:System.Windows.Window.DialogResult%2A> property.</span></span>  
  
 [!code-csharp[DialogBoxSample#MarginsDialogBoxCancelResultSetCODEBEHIND1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MarginsDialogBox.xaml.cs#marginsdialogboxcancelresultsetcodebehind1)]
 [!code-vb[DialogBoxSample#MarginsDialogBoxCancelResultSetCODEBEHIND1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MarginsDialogBox.xaml.vb#marginsdialogboxcancelresultsetcodebehind1)]  
[!code-csharp[DialogBoxSample#MarginsDialogBoxCancelResultSetCODEBEHIND2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MarginsDialogBox.xaml.cs#marginsdialogboxcancelresultsetcodebehind2)]
[!code-vb[DialogBoxSample#MarginsDialogBoxCancelResultSetCODEBEHIND2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MarginsDialogBox.xaml.vb#marginsdialogboxcancelresultsetcodebehind2)]  
[!code-csharp[DialogBoxSample#MarginsDialogBoxCancelResultSetCODEBEHIND3](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MarginsDialogBox.xaml.cs#marginsdialogboxcancelresultsetcodebehind3)]
[!code-vb[DialogBoxSample#MarginsDialogBoxCancelResultSetCODEBEHIND3](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MarginsDialogBox.xaml.vb#marginsdialogboxcancelresultsetcodebehind3)]  
  
 <span data-ttu-id="27050-225">Когда кнопка <xref:System.Windows.Controls.Button.IsCancel%2A> свойству `true` и пользователь нажимает клавишу **отменить** кнопку или клавишу ESC, <xref:System.Windows.Window.DialogResult%2A> автоматически устанавливается значение `false`.</span><span class="sxs-lookup"><span data-stu-id="27050-225">When a button's <xref:System.Windows.Controls.Button.IsCancel%2A> property is set to `true` and the user presses either the **Cancel** button or the ESC key, <xref:System.Windows.Window.DialogResult%2A> is automatically set to `false`.</span></span> <span data-ttu-id="27050-226">Приведенная ниже разметка действует так же, как предыдущий код, без необходимости обрабатывать <xref:System.Windows.Controls.Primitives.ButtonBase.Click> событий.</span><span class="sxs-lookup"><span data-stu-id="27050-226">The following markup has the same effect as the preceding code, without the need to handle the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event.</span></span>  
  
 [!code-xaml[DialogBoxSample#MarginsDialogDefaultCancelMARKUP](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MarginsDialogBox.xaml#marginsdialogdefaultcancelmarkup)]  
  
 <span data-ttu-id="27050-227">Диалоговое окно автоматически возвращает `false` при нажатии клавиши **закрыть** кнопку в строке заголовка или выбирает **закрыть** элемент меню из **системы** меню.</span><span class="sxs-lookup"><span data-stu-id="27050-227">A dialog box automatically returns `false` when a user presses the **Close** button in the title bar or chooses the **Close** menu item from the **System** menu.</span></span>  
  
#### <a name="processing-data-returned-from-a-modal-dialog-box"></a><span data-ttu-id="27050-228">Обработка данных, возвращенных из модального диалогового окна</span><span class="sxs-lookup"><span data-stu-id="27050-228">Processing Data Returned from a Modal Dialog Box</span></span>  
 <span data-ttu-id="27050-229">Когда <xref:System.Windows.Window.DialogResult%2A> задано диалоговым окном, функция, открывший его можно получить результат диалогового окна путем проверки <xref:System.Windows.Window.DialogResult%2A> свойство при <xref:System.Windows.Window.ShowDialog%2A> возвращает.</span><span class="sxs-lookup"><span data-stu-id="27050-229">When <xref:System.Windows.Window.DialogResult%2A> is set by a dialog box, the function that opened it can get the dialog box result by inspecting the <xref:System.Windows.Window.DialogResult%2A> property when <xref:System.Windows.Window.ShowDialog%2A> returns.</span></span>  
  
 [!code-csharp[DialogBoxSample#OpenMarginsDialogProcessReturnCODEBEHIND1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MainWindow.xaml.cs#openmarginsdialogprocessreturncodebehind1)]
 [!code-vb[DialogBoxSample#OpenMarginsDialogProcessReturnCODEBEHIND1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MainWindow.xaml.vb#openmarginsdialogprocessreturncodebehind1)]  
[!code-csharp[DialogBoxSample#OpenMarginsDialogProcessReturnCODEBEHIND2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MainWindow.xaml.cs#openmarginsdialogprocessreturncodebehind2)]
[!code-vb[DialogBoxSample#OpenMarginsDialogProcessReturnCODEBEHIND2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MainWindow.xaml.vb#openmarginsdialogprocessreturncodebehind2)]  
[!code-csharp[DialogBoxSample#OpenMarginsDialogProcessReturnCODEBEHIND3](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MainWindow.xaml.cs#openmarginsdialogprocessreturncodebehind3)]
[!code-vb[DialogBoxSample#OpenMarginsDialogProcessReturnCODEBEHIND3](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MainWindow.xaml.vb#openmarginsdialogprocessreturncodebehind3)]  
[!code-csharp[DialogBoxSample#OpenMarginsDialogProcessReturnCODEBEHIND4](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MainWindow.xaml.cs#openmarginsdialogprocessreturncodebehind4)]
[!code-vb[DialogBoxSample#OpenMarginsDialogProcessReturnCODEBEHIND4](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MainWindow.xaml.vb#openmarginsdialogprocessreturncodebehind4)]  
  
 <span data-ttu-id="27050-230">Если результатом диалогового окна является `true`, функция использует его в качестве подсказки для получения и обработки данных, предоставленных пользователем.</span><span class="sxs-lookup"><span data-stu-id="27050-230">If the dialog result is `true`, the function uses that as a cue to retrieve and process the data provided by the user.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="27050-231">После <xref:System.Windows.Window.ShowDialog%2A> вернул, нельзя снова открыть диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="27050-231">After <xref:System.Windows.Window.ShowDialog%2A> has returned, a dialog box cannot be reopened.</span></span> <span data-ttu-id="27050-232">Вместо этого придется создать новый экземпляр.</span><span class="sxs-lookup"><span data-stu-id="27050-232">Instead, you need to create a new instance.</span></span>  
  
 <span data-ttu-id="27050-233">Если результатом диалогового окна является `false`, функция должна соответствующим образом закончить обработку.</span><span class="sxs-lookup"><span data-stu-id="27050-233">If the dialog result is `false`, the function should end processing appropriately.</span></span>  
  
<a name="Creating_a_Modeless_Custom_Dialog_Box"></a>   
### <a name="creating-a-modeless-custom-dialog-box"></a><span data-ttu-id="27050-234">Создание немодального пользовательского диалогового окна</span><span class="sxs-lookup"><span data-stu-id="27050-234">Creating a Modeless Custom Dialog Box</span></span>  
 <span data-ttu-id="27050-235">Немодальное диалоговое окно, например диалоговое окно поиска, показанное на следующем рисунке, в основном имеет такой же внешний вид, как и модальное диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="27050-235">A modeless dialog box, such as the Find Dialog Box shown in the following figure, has the same fundamental appearance as the modal dialog box.</span></span>  
  
 <span data-ttu-id="27050-236">![Диалоговое окно поиска](../../../../docs/framework/wpf/app-development/media/dialogboxesoverviewfigure6.PNG "DialogBoxesOverviewFigure6")</span><span class="sxs-lookup"><span data-stu-id="27050-236">![Find dialog box](../../../../docs/framework/wpf/app-development/media/dialogboxesoverviewfigure6.PNG "DialogBoxesOverviewFigure6")</span></span>  
  
 <span data-ttu-id="27050-237">Однако поведение несколько отличается, как показано в следующих разделах.</span><span class="sxs-lookup"><span data-stu-id="27050-237">However, the behavior is slightly different, as described in the following sections.</span></span>  
  
#### <a name="opening-a-modeless-dialog-box"></a><span data-ttu-id="27050-238">Открытие немодального диалогового окна</span><span class="sxs-lookup"><span data-stu-id="27050-238">Opening a Modeless Dialog Box</span></span>  
 <span data-ttu-id="27050-239">Немодальное диалоговое окно открывается вызовом <xref:System.Windows.Window.Show%2A> метод.</span><span class="sxs-lookup"><span data-stu-id="27050-239">A modeless dialog box is opened by calling the <xref:System.Windows.Window.Show%2A> method.</span></span>  
  
 [!code-xaml[DialogBoxSample#OpenFindDialogMARKUP1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MainWindow.xaml#openfinddialogmarkup1)]  
  
 [!code-csharp[DialogBoxSample#OpenFindDialogCODEBEHIND1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MainWindow.xaml.cs#openfinddialogcodebehind1)]
 [!code-vb[DialogBoxSample#OpenFindDialogCODEBEHIND1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MainWindow.xaml.vb#openfinddialogcodebehind1)]  
[!code-csharp[DialogBoxSample#OpenFindDialogCODEBEHIND2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MainWindow.xaml.cs#openfinddialogcodebehind2)]
[!code-vb[DialogBoxSample#OpenFindDialogCODEBEHIND2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MainWindow.xaml.vb#openfinddialogcodebehind2)]  
[!code-csharp[DialogBoxSample#OpenFindDialogCODEBEHIND3](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MainWindow.xaml.cs#openfinddialogcodebehind3)]
[!code-vb[DialogBoxSample#OpenFindDialogCODEBEHIND3](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MainWindow.xaml.vb#openfinddialogcodebehind3)]  
  
 <span data-ttu-id="27050-240">В отличие от <xref:System.Windows.Window.ShowDialog%2A>, <xref:System.Windows.Window.Show%2A> возвращается немедленно.</span><span class="sxs-lookup"><span data-stu-id="27050-240">Unlike <xref:System.Windows.Window.ShowDialog%2A>, <xref:System.Windows.Window.Show%2A> returns immediately.</span></span> <span data-ttu-id="27050-241">Следовательно, вызывающее окно не может определить, когда немодальное диалоговое окно закрывается, и поэтому не знает, когда следует проверить результат диалогового окна или получить данные из диалогового окна для дальнейшей обработки.</span><span class="sxs-lookup"><span data-stu-id="27050-241">Consequently, the calling window cannot tell when the modeless dialog box is closed and, therefore, does not know when to check for a dialog box result or get data from the dialog box for further processing.</span></span> <span data-ttu-id="27050-242">Поэтому диалоговому окну необходимо создать альтернативный способ возврата данных в вызывающее окно для обработки.</span><span class="sxs-lookup"><span data-stu-id="27050-242">Instead, the dialog box needs to create an alternative way to return data to the calling window for processing.</span></span>  
  
#### <a name="processing-data-returned-from-a-modeless-dialog-box"></a><span data-ttu-id="27050-243">Обработка данных, возвращенных из немодального диалогового окна</span><span class="sxs-lookup"><span data-stu-id="27050-243">Processing Data Returned from a Modeless Dialog Box</span></span>  
 <span data-ttu-id="27050-244">В этом примере `FindDialogBox` может возвращать один или несколько результатов главного окна, в зависимости от текста, поиск которого выполняется без определенного интервала времени поиска.</span><span class="sxs-lookup"><span data-stu-id="27050-244">In this example, the `FindDialogBox` may return one or more find results to the main window, depending on the text being searched for without any specific frequency.</span></span> <span data-ttu-id="27050-245">Как и в случае с модальным диалоговым окном, немодальное диалоговое окно может возвращать результаты с помощью свойств.</span><span class="sxs-lookup"><span data-stu-id="27050-245">As with a modal dialog box, a modeless dialog box can return results using properties.</span></span> <span data-ttu-id="27050-246">Однако окну, которому принадлежит данное диалоговое окно, нужно знать, когда следует проверять эти свойства.</span><span class="sxs-lookup"><span data-stu-id="27050-246">However, the window that owns the dialog box needs to know when to check those properties.</span></span> <span data-ttu-id="27050-247">Один из способов сделать это — реализовать для диалогового окна событие, которое возникает всякий раз, когда текст найден.</span><span class="sxs-lookup"><span data-stu-id="27050-247">One way to enable this is for the dialog box to implement an event that is raised whenever text is found.</span></span> <span data-ttu-id="27050-248">`FindDialogBox` реализует `TextFoundEvent` для этой цели, который сначала требуется делегат.</span><span class="sxs-lookup"><span data-stu-id="27050-248">`FindDialogBox` implements the `TextFoundEvent` for this purpose, which first requires a delegate.</span></span>  
  
 [!code-csharp[DialogBoxSample#TextFoundEventHandlerCODE](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/TextFoundEventHandler.cs#textfoundeventhandlercode)]
 [!code-vb[DialogBoxSample#TextFoundEventHandlerCODE](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/TextFoundEventHandler.vb#textfoundeventhandlercode)]  
  
 <span data-ttu-id="27050-249">С помощью `TextFoundEventHandler` делегировать, `FindDialogBox` реализует `TextFoundEvent`.</span><span class="sxs-lookup"><span data-stu-id="27050-249">Using the `TextFoundEventHandler` delegate, `FindDialogBox` implements the `TextFoundEvent`.</span></span>  
  
 [!code-csharp[DialogBoxSample#TextFoundEventCODEBEHIND1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/FindDialogBox.xaml.cs#textfoundeventcodebehind1)]
 [!code-vb[DialogBoxSample#TextFoundEventCODEBEHIND1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/FindDialogBox.xaml.vb#textfoundeventcodebehind1)]  
[!code-csharp[DialogBoxSample#TextFoundEventCODEBEHIND2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/FindDialogBox.xaml.cs#textfoundeventcodebehind2)]
[!code-vb[DialogBoxSample#TextFoundEventCODEBEHIND2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/FindDialogBox.xaml.vb#textfoundeventcodebehind2)]  
  
 <span data-ttu-id="27050-250">Следовательно `Find` может вызывать событие, когда найден результат поиска.</span><span class="sxs-lookup"><span data-stu-id="27050-250">Consequently, `Find` can raise the event when a search result is found.</span></span>  
  
 [!code-csharp[DialogBoxSample#TextFoundEventRaiseCODEBEHIND1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/FindDialogBox.xaml.cs#textfoundeventraisecodebehind1)]
 [!code-vb[DialogBoxSample#TextFoundEventRaiseCODEBEHIND1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/FindDialogBox.xaml.vb#textfoundeventraisecodebehind1)]  
[!code-csharp[DialogBoxSample#TextFoundEventRaiseCODEBEHIND2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/FindDialogBox.xaml.cs#textfoundeventraisecodebehind2)]
[!code-vb[DialogBoxSample#TextFoundEventRaiseCODEBEHIND2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/FindDialogBox.xaml.vb#textfoundeventraisecodebehind2)]  
[!code-csharp[DialogBoxSample#TextFoundEventRaiseCODEBEHIND3](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/FindDialogBox.xaml.cs#textfoundeventraisecodebehind3)]
[!code-vb[DialogBoxSample#TextFoundEventRaiseCODEBEHIND3](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/FindDialogBox.xaml.vb#textfoundeventraisecodebehind3)]  
[!code-csharp[DialogBoxSample#TextFoundEventRaiseCODEBEHIND4](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/FindDialogBox.xaml.cs#textfoundeventraisecodebehind4)]
[!code-vb[DialogBoxSample#TextFoundEventRaiseCODEBEHIND4](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/FindDialogBox.xaml.vb#textfoundeventraisecodebehind4)]  
[!code-csharp[DialogBoxSample#TextFoundEventRaiseCODEBEHIND5](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/FindDialogBox.xaml.cs#textfoundeventraisecodebehind5)]
[!code-vb[DialogBoxSample#TextFoundEventRaiseCODEBEHIND5](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/FindDialogBox.xaml.vb#textfoundeventraisecodebehind5)]  
  
 <span data-ttu-id="27050-251">Затем окну-владельцу нужно зарегистрировать и обработать это событие.</span><span class="sxs-lookup"><span data-stu-id="27050-251">The owner window then needs to register with and handle this event.</span></span>  
  
 [!code-csharp[DialogBoxSample#OpenFindDialogResultCODEBEHIND1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MainWindow.xaml.cs#openfinddialogresultcodebehind1)]
 [!code-vb[DialogBoxSample#OpenFindDialogResultCODEBEHIND1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MainWindow.xaml.vb#openfinddialogresultcodebehind1)]  
[!code-csharp[DialogBoxSample#OpenFindDialogResultCODEBEHIND2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/MainWindow.xaml.cs#openfinddialogresultcodebehind2)]
[!code-vb[DialogBoxSample#OpenFindDialogResultCODEBEHIND2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/MainWindow.xaml.vb#openfinddialogresultcodebehind2)]  
  
#### <a name="closing-a-modeless-dialog-box"></a><span data-ttu-id="27050-252">Закрытие немодального диалогового окна</span><span class="sxs-lookup"><span data-stu-id="27050-252">Closing a Modeless Dialog Box</span></span>  
 <span data-ttu-id="27050-253">Поскольку <xref:System.Windows.Window.DialogResult%2A> не требуется устанавливать, можно закрыть немодального диалогового окна с помощью системы предоставления механизмов, включая следующие:</span><span class="sxs-lookup"><span data-stu-id="27050-253">Because <xref:System.Windows.Window.DialogResult%2A> does not need to be set, a modeless dialog can be closed using system provide mechanisms, including the following:</span></span>  
  
-   <span data-ttu-id="27050-254">Щелкнув **закрыть** кнопки в заголовке окна.</span><span class="sxs-lookup"><span data-stu-id="27050-254">Clicking the **Close** button in the title bar.</span></span>  
  
-   <span data-ttu-id="27050-255">Нажатие клавиш ALT+F4.</span><span class="sxs-lookup"><span data-stu-id="27050-255">Pressing ALT+F4.</span></span>  
  
-   <span data-ttu-id="27050-256">Выбор **закрыть** из **системы** меню.</span><span class="sxs-lookup"><span data-stu-id="27050-256">Choosing **Close** from the **System** menu.</span></span>  
  
 <span data-ttu-id="27050-257">Кроме того, код может вызвать <xref:System.Windows.Window.Close%2A> при **закрыть** кнопки.</span><span class="sxs-lookup"><span data-stu-id="27050-257">Alternatively, your code can call <xref:System.Windows.Window.Close%2A> when the **Close** button is clicked.</span></span>  
  
 [!code-csharp[DialogBoxSample#FindDialogCloseCODEBEHIND1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/FindDialogBox.xaml.cs#finddialogclosecodebehind1)]
 [!code-vb[DialogBoxSample#FindDialogCloseCODEBEHIND1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/FindDialogBox.xaml.vb#finddialogclosecodebehind1)]  
[!code-csharp[DialogBoxSample#FindDialogCloseCODEBEHIND2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/DialogBoxSample/CSharp/FindDialogBox.xaml.cs#finddialogclosecodebehind2)]
[!code-vb[DialogBoxSample#FindDialogCloseCODEBEHIND2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/DialogBoxSample/VisualBasic/FindDialogBox.xaml.vb#finddialogclosecodebehind2)]  
  
## <a name="see-also"></a><span data-ttu-id="27050-258">См. также</span><span class="sxs-lookup"><span data-stu-id="27050-258">See Also</span></span>  
 [<span data-ttu-id="27050-259">Общие сведения о контекстном меню</span><span class="sxs-lookup"><span data-stu-id="27050-259">Popup Overview</span></span>](../../../../docs/framework/wpf/controls/popup-overview.md)  
 [<span data-ttu-id="27050-260">Пример диалогового окна</span><span class="sxs-lookup"><span data-stu-id="27050-260">Dialog Box Sample</span></span>](http://go.microsoft.com/fwlink/?LinkID=159984)  
 [<span data-ttu-id="27050-261">Пример пользовательского элемента управления ColorPicker</span><span class="sxs-lookup"><span data-stu-id="27050-261">ColorPicker Custom Control Sample</span></span>](http://go.microsoft.com/fwlink/?LinkID=159977)
