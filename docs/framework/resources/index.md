---
title: Ресурсы в приложениях для настольных систем
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-bcl
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- deploying applications [.NET Framework], resources
- application resources
- resource files
- satellite assemblies
- localization
- packaging application resources
- localizing resources
ms.assetid: 8ad495d4-2941-40cf-bf64-e82e85825890
caps.latest.revision: 19
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: d8fa1521a5516a4be18352c1bce6abf93e40287f
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/22/2017
---
# <a name="resources-in-desktop-apps"></a><span data-ttu-id="44daa-102">Ресурсы в приложениях для настольных систем</span><span class="sxs-lookup"><span data-stu-id="44daa-102">Resources in Desktop Apps</span></span>
<span data-ttu-id="44daa-103">Практически любое высококачественное приложение должно использовать ресурсы.</span><span class="sxs-lookup"><span data-stu-id="44daa-103">Nearly every production-quality app has to use resources.</span></span> <span data-ttu-id="44daa-104">Ресурс представляет собой любые неисполняемые данные, которые логически развертываются вместе с приложением.</span><span class="sxs-lookup"><span data-stu-id="44daa-104">A resource is any nonexecutable data that is logically deployed with an app.</span></span> <span data-ttu-id="44daa-105">Ресурсы могут отображаться в приложении в виде сообщений об ошибках либо как часть интерфейса пользователя.</span><span class="sxs-lookup"><span data-stu-id="44daa-105">A resource might be displayed in an app as error messages or as part of the user interface.</span></span> <span data-ttu-id="44daa-106">Ресурсы могут содержать данные различных видов, включая символьные строки, изображения и объекты.</span><span class="sxs-lookup"><span data-stu-id="44daa-106">Resources can contain data in a number of forms, including strings, images, and persisted objects.</span></span> <span data-ttu-id="44daa-107">(Для записи сохраняемых объектов в файл ресурсов объекты должны быть сериализуемыми.) Благодаря хранению данных в файле ресурсов сами данные можно изменять без перекомпиляции всего приложения.</span><span class="sxs-lookup"><span data-stu-id="44daa-107">(To write persisted objects to a resource file, the objects must be serializable.) Storing your data in a resource file enables you to change the data without recompiling your entire app.</span></span> <span data-ttu-id="44daa-108">Это также позволяет хранить данные в одном месте и исключает необходимость в использовании жестко закодированных данных, которые хранятся в нескольких местах.</span><span class="sxs-lookup"><span data-stu-id="44daa-108">It also enables you to store data in a single location, and eliminates the need to rely on hard-coded data that is stored in multiple locations.</span></span>  
  
 <span data-ttu-id="44daa-109">.NET Framework обеспечивает всестороннюю поддержку для создания и локализации ресурсов в настольных приложениях.</span><span class="sxs-lookup"><span data-stu-id="44daa-109">The .NET Framework provides comprehensive support for the creation and localization of resources in desktop apps.</span></span> <span data-ttu-id="44daa-110">Кроме того, платформа .NET Framework поддерживает простую модель упаковки и развертывания локализованных ресурсов в настольных приложениях.</span><span class="sxs-lookup"><span data-stu-id="44daa-110">In addition, the .NET Framework supports a simple model for packaging and deploying these localized resources in desktop apps.</span></span>  
  
 <span data-ttu-id="44daa-111">Сведения о ресурсах в ASP.NET см. в разделе [Общие сведения о ресурсах веб-страницы ASP.NET](http://msdn.microsoft.com/library/0936b3b2-9e6e-4abe-9c06-364efef9dbbd) в центре разработчиков Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="44daa-111">For information about resources in ASP.NET, see [ASP.NET Web Page Resources Overview](http://msdn.microsoft.com/library/0936b3b2-9e6e-4abe-9c06-364efef9dbbd) in the Internet Explorer Developer Center.</span></span>  
  
 <span data-ttu-id="44daa-112">Приложения [!INCLUDE[win8_appname_long](../../../includes/win8-appname-long-md.md)] используют модель ресурсов, отличную от настольных приложений, и сохраняют ресурсы в одном файле индекса пакета ресурсов (PRI).</span><span class="sxs-lookup"><span data-stu-id="44daa-112">[!INCLUDE[win8_appname_long](../../../includes/win8-appname-long-md.md)] apps use a different resource model from desktop apps and store their resources in a single package resource index (PRI) file.</span></span> <span data-ttu-id="44daa-113">Дополнительные сведения о ресурсах в приложениях [!INCLUDE[win8_appname_long](../../../includes/win8-appname-long-md.md)] см. на странице [Создание и извлечение ресурсов в приложениях для Магазина Windows](http://go.microsoft.com/fwlink/p/?LinkId=241674) в Центре разработки для Windows.</span><span class="sxs-lookup"><span data-stu-id="44daa-113">For information about resources in [!INCLUDE[win8_appname_long](../../../includes/win8-appname-long-md.md)] apps, see [Creating and retrieving resources in Windows Store apps](http://go.microsoft.com/fwlink/p/?LinkId=241674) in the Windows Dev Center.</span></span>  
  
## <a name="creating-and-localizing-resources"></a><span data-ttu-id="44daa-114">Создание и локализация ресурсов</span><span class="sxs-lookup"><span data-stu-id="44daa-114">Creating and Localizing Resources</span></span>  
 <span data-ttu-id="44daa-115">В нелокализованном приложении файлы ресурсов можно использовать как хранилище для данных приложения, особенно для строк, которые в противном случае было бы необходимо жестко задавать в нескольких местах в исходном коде.</span><span class="sxs-lookup"><span data-stu-id="44daa-115">In a non-localized app, you can use resource files as a repository for app data, particularly for strings that might otherwise be hard-coded in multiple locations in source code.</span></span> <span data-ttu-id="44daa-116">Чаще всего ресурсы создаются в виде текстовых (txt) или XML-файлов (.resx), а для их компиляции в двоичные RESOURCES-файлы используется [Resgen.exe (генератор файлов ресурсов)](../../../docs/framework/tools/resgen-exe-resource-file-generator.md).</span><span class="sxs-lookup"><span data-stu-id="44daa-116">Most commonly, you create resources as either text (.txt) or XML (.resx) files, and use [Resgen.exe (Resource File Generator)](../../../docs/framework/tools/resgen-exe-resource-file-generator.md) to compile them into binary .resources files.</span></span> <span data-ttu-id="44daa-117">Эти файлы можно затем встроить в исполняемый файл приложения с помощью компилятора языка.</span><span class="sxs-lookup"><span data-stu-id="44daa-117">These files can then be embedded in the app's executable file by a language compiler.</span></span> <span data-ttu-id="44daa-118">Дополнительные сведения о создании ресурсов см. в разделе [Создание файлов ресурсов](../../../docs/framework/resources/creating-resource-files-for-desktop-apps.md).</span><span class="sxs-lookup"><span data-stu-id="44daa-118">For more information about creating resources, see [Creating Resource Files](../../../docs/framework/resources/creating-resource-files-for-desktop-apps.md).</span></span>  
  
 <span data-ttu-id="44daa-119">Вы также можете локализовать ресурсы приложения для конкретных языков и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="44daa-119">You can also localize your app's resources for specific cultures.</span></span> <span data-ttu-id="44daa-120">Это позволяет создавать локализованные (переведенные) версии приложений.</span><span class="sxs-lookup"><span data-stu-id="44daa-120">This enables you to build localized (translated) versions of your apps.</span></span> <span data-ttu-id="44daa-121">При разработке приложения, использующего локализованные ресурсы, необходимо назначить язык и региональные параметры, являющиеся нейтральными или резервными, языком и региональными параметрами, ресурсы которого используются в случае отсутствия подходящих ресурсов.</span><span class="sxs-lookup"><span data-stu-id="44daa-121">When you develop an app that uses localized resources, you designate a culture that serves as the neutral or fallback culture whose resources are used if no suitable resources are available.</span></span> <span data-ttu-id="44daa-122">Как правило, ресурсы нейтрального языка и региональных параметров хранятся в исполняемом файле приложения.</span><span class="sxs-lookup"><span data-stu-id="44daa-122">Typically, the resources of the neutral culture are stored in the app's executable.</span></span> <span data-ttu-id="44daa-123">Остальные ресурсы для отдельных языков и региональных параметров хранятся в автономных вспомогательных сборках.</span><span class="sxs-lookup"><span data-stu-id="44daa-123">The remaining resources for individual localized cultures are stored in standalone satellite assemblies.</span></span> <span data-ttu-id="44daa-124">Дополнительные сведения см. в разделе [Создание вспомогательных сборок](../../../docs/framework/resources/creating-satellite-assemblies-for-desktop-apps.md).</span><span class="sxs-lookup"><span data-stu-id="44daa-124">For more information, see [Creating Satellite Assemblies](../../../docs/framework/resources/creating-satellite-assemblies-for-desktop-apps.md).</span></span>  
  
## <a name="packaging-and-deploying-resources"></a><span data-ttu-id="44daa-125">Упаковка и развертывание ресурсов</span><span class="sxs-lookup"><span data-stu-id="44daa-125">Packaging and Deploying Resources</span></span>  
 <span data-ttu-id="44daa-126">Развертывание ресурсов локализованного приложения выполняется во [вспомогательных сборках](../../../docs/framework/resources/packaging-and-deploying-resources-in-desktop-apps.md).</span><span class="sxs-lookup"><span data-stu-id="44daa-126">You deploy localized app resources in [satellite assemblies](../../../docs/framework/resources/packaging-and-deploying-resources-in-desktop-apps.md).</span></span> <span data-ttu-id="44daa-127">Вспомогательная сборка содержит ресурсы для одного языка и региональных параметров; в ней нет никакого кода приложения.</span><span class="sxs-lookup"><span data-stu-id="44daa-127">A satellite assembly contains the resources of a single culture; it does not contain any app code.</span></span> <span data-ttu-id="44daa-128">В модели развертывания вспомогательной сборки вы создаете приложение с одной сборкой по умолчанию (которая обычно является главной сборкой) и одной вспомогательной сборкой для каждого языка и региональных параметров, поддерживаемых приложением.</span><span class="sxs-lookup"><span data-stu-id="44daa-128">In the satellite assembly deployment model, you create an app with one default assembly (which is typically the main assembly) and one satellite assembly for each culture that the app supports.</span></span> <span data-ttu-id="44daa-129">Поскольку вспомогательные сборки не являются частью главной сборки, ресурсы, относящиеся к конкретному языку и региональным параметрам, можно легко заменять или обновлять, не заменяя главную сборку приложения.</span><span class="sxs-lookup"><span data-stu-id="44daa-129">Because the satellite assemblies are not part of the main assembly, you can easily replace or update resources corresponding to a specific culture without replacing the app's main assembly.</span></span>  
  
 <span data-ttu-id="44daa-130">Точно определите ресурсы, которые будут применяться в сборке ресурсов по умолчанию для приложения.</span><span class="sxs-lookup"><span data-stu-id="44daa-130">Carefully determine which resources will make up your app's default resource assembly.</span></span> <span data-ttu-id="44daa-131">Так как сборка по умолчанию является частью главной сборки, то при внесении в нее любых изменений потребуется замена главной сборки.</span><span class="sxs-lookup"><span data-stu-id="44daa-131">Because it is a part of the main assembly, any changes to it will require you to replace the main assembly.</span></span> <span data-ttu-id="44daa-132">Если ресурс по умолчанию не предоставлен, то в случае его поиска [процессом использования резервных ресурсов](../../../docs/framework/resources/packaging-and-deploying-resources-in-desktop-apps.md) будет создаваться исключение.</span><span class="sxs-lookup"><span data-stu-id="44daa-132">If you do not provide a default resource, an exception will be thrown when the [resource fallback process](../../../docs/framework/resources/packaging-and-deploying-resources-in-desktop-apps.md) attempts to find it.</span></span> <span data-ttu-id="44daa-133">В хорошо спроектированном приложении при использовании ресурсов исключения никогда не создаются.</span><span class="sxs-lookup"><span data-stu-id="44daa-133">In a well-designed app, using resources should never throw an exception.</span></span>  
  
 <span data-ttu-id="44daa-134">Дополнительные сведения см. в статье [Упаковка и развертывание ресурсов](../../../docs/framework/resources/packaging-and-deploying-resources-in-desktop-apps.md).</span><span class="sxs-lookup"><span data-stu-id="44daa-134">For more information, see the [Packaging and Deploying Resources](../../../docs/framework/resources/packaging-and-deploying-resources-in-desktop-apps.md) article.</span></span>  
  
## <a name="retrieving-resources"></a><span data-ttu-id="44daa-135">Извлечение ресурсов</span><span class="sxs-lookup"><span data-stu-id="44daa-135">Retrieving Resources</span></span>  
 <span data-ttu-id="44daa-136">Приложение во время выполнения загружает соответствующие локализованные ресурсы отдельно для каждого потока на основе языка и региональных параметров, которые заданы свойством <xref:System.Globalization.CultureInfo.CurrentUICulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="44daa-136">At run time, an app loads the appropriate localized resources on a per-thread basis, based on the culture specified by the <xref:System.Globalization.CultureInfo.CurrentUICulture%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="44daa-137">Значение этого свойства формируется следующим образом:</span><span class="sxs-lookup"><span data-stu-id="44daa-137">This property value is derived as follows:</span></span>  
  
-   <span data-ttu-id="44daa-138">Присвоением свойству <xref:System.Threading.Thread.CurrentUICulture%2A?displayProperty=nameWithType> объекта <xref:System.Globalization.CultureInfo>, который представляет локализованные значения языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="44daa-138">By directly assigning a <xref:System.Globalization.CultureInfo> object that represents the localized culture to the <xref:System.Threading.Thread.CurrentUICulture%2A?displayProperty=nameWithType> property.</span></span>  
  
-   <span data-ttu-id="44daa-139">Если язык и региональные параметры не заданы явным образом, соответствующие значения по умолчанию для пользовательского интерфейса каждого потока извлекаются из свойства <xref:System.Globalization.CultureInfo.DefaultThreadCurrentUICulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="44daa-139">If a culture is not explicitly assigned, by retrieving the default thread UI culture from the <xref:System.Globalization.CultureInfo.DefaultThreadCurrentUICulture%2A?displayProperty=nameWithType> property.</span></span>  
  
-   <span data-ttu-id="44daa-140">Если заданные по умолчанию язык и региональные параметры пользовательского интерфейса для потоков явно не назначены, путем получения языка и региональных параметров для текущего пользователя на локальном компьютере путем вызова функции Windows `GetUserDefaultUILanguage`.</span><span class="sxs-lookup"><span data-stu-id="44daa-140">If a default thread UI culture is not explicitly assigned, by retrieving the culture for the current user on the local computer by calling the Windows `GetUserDefaultUILanguage` function.</span></span>  
  
 <span data-ttu-id="44daa-141">Дополнительные сведения об указании языка и региональных параметров для пользовательского интерфейса см. в разделах справки <xref:System.Globalization.CultureInfo> и <xref:System.Globalization.CultureInfo.CurrentUICulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="44daa-141">For more information about how the current UI culture is set, see the <xref:System.Globalization.CultureInfo> and <xref:System.Globalization.CultureInfo.CurrentUICulture%2A?displayProperty=nameWithType> reference pages.</span></span>  
  
 <span data-ttu-id="44daa-142">Ресурсы для текущего или определенного языка и региональных параметров пользовательского интерфейса можно получить с помощью класса <xref:System.Resources.ResourceManager?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="44daa-142">You can then retrieve resources for the current UI culture or for a specific culture by using the <xref:System.Resources.ResourceManager?displayProperty=nameWithType> class.</span></span> <span data-ttu-id="44daa-143">Хотя класс <xref:System.Resources.ResourceManager> чаще всего используется для получения ресурсов в настольных приложениях, пространство имен приложение <xref:System.Resources?displayProperty=nameWithType> содержит дополнительные типы, которые также можно использовать для получения ресурсов.</span><span class="sxs-lookup"><span data-stu-id="44daa-143">Although the <xref:System.Resources.ResourceManager> class is most commonly used for retrieving resources in desktop apps, the <xref:System.Resources?displayProperty=nameWithType> namespace contains additional types that you can use to retrieve resources.</span></span> <span data-ttu-id="44daa-144">К ним относятся следующие методы.</span><span class="sxs-lookup"><span data-stu-id="44daa-144">These include:</span></span>  
  
-   <span data-ttu-id="44daa-145">Класс <xref:System.Resources.ResourceReader>, который позволяет перечислять ресурсы, встроенные в сборку или хранящиеся в отдельном двоичном RESOURCES-файле.</span><span class="sxs-lookup"><span data-stu-id="44daa-145">The <xref:System.Resources.ResourceReader> class, which enables you to enumerate resources embedded in an assembly or stored in a standalone binary .resources file.</span></span> <span data-ttu-id="44daa-146">Это удобно, когда точные имена ресурсов, доступных во время выполнения, неизвестны.</span><span class="sxs-lookup"><span data-stu-id="44daa-146">It is useful when you don't know the precise names of the resources that are available at run time.</span></span>  
  
-   <span data-ttu-id="44daa-147">Класс <xref:System.Resources.ResXResourceReader>, который позволяет получать ресурсы из XML-файла (.resx).</span><span class="sxs-lookup"><span data-stu-id="44daa-147">The <xref:System.Resources.ResXResourceReader> class, which enables you to retrieve resources from an XML (.resx) file.</span></span>  
  
-   <span data-ttu-id="44daa-148">Класс <xref:System.Resources.ResourceSet>, который позволяет получать ресурсы для конкретного языка и региональных параметров без учета правил отката.</span><span class="sxs-lookup"><span data-stu-id="44daa-148">The <xref:System.Resources.ResourceSet> class, which enables you to retrieve the resources of a specific culture without observing fallback rules.</span></span> <span data-ttu-id="44daa-149">Ресурсы могут храниться в сборке или отдельном двоичном RESOURCES-файле.</span><span class="sxs-lookup"><span data-stu-id="44daa-149">The resources can be stored in an assembly or a standalone binary .resources file.</span></span> <span data-ttu-id="44daa-150">Можно также разработать реализацию <xref:System.Resources.IResourceReader>, которая позволит использовать класс <xref:System.Resources.ResourceSet> для извлечения ресурсов из другого источника.</span><span class="sxs-lookup"><span data-stu-id="44daa-150">You can also develop an <xref:System.Resources.IResourceReader> implementation that enables you to use the <xref:System.Resources.ResourceSet> class to retrieve resources from some other source.</span></span>  
  
-   <span data-ttu-id="44daa-151">Класс <xref:System.Resources.ResXResourceSet>, который позволяет получить в память все элементы из XML-файла ресурсов.</span><span class="sxs-lookup"><span data-stu-id="44daa-151">The <xref:System.Resources.ResXResourceSet> class, which enables you to retrieve all the items in an XML resource file into memory.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="44daa-152">См. также</span><span class="sxs-lookup"><span data-stu-id="44daa-152">See Also</span></span>  
 <xref:System.Globalization.CultureInfo>  
 <xref:System.Globalization.CultureInfo.CurrentUICulture%2A?displayProperty=nameWithType>  
 <span data-ttu-id="44daa-153">[.NET Framework Application Essentials](../../../docs/standard/application-essentials.md) (Основные сведения о приложениях .NET Framework)</span><span class="sxs-lookup"><span data-stu-id="44daa-153">[Application Essentials](../../../docs/standard/application-essentials.md)</span></span>  
 [<span data-ttu-id="44daa-154">Создание файлов ресурсов</span><span class="sxs-lookup"><span data-stu-id="44daa-154">Creating Resource Files</span></span>](../../../docs/framework/resources/creating-resource-files-for-desktop-apps.md)  
 [<span data-ttu-id="44daa-155">Упаковка и развертывание ресурсов</span><span class="sxs-lookup"><span data-stu-id="44daa-155">Packaging and Deploying Resources</span></span>](../../../docs/framework/resources/packaging-and-deploying-resources-in-desktop-apps.md)  
 [<span data-ttu-id="44daa-156">Создание вспомогательных сборок</span><span class="sxs-lookup"><span data-stu-id="44daa-156">Creating Satellite Assemblies</span></span>](../../../docs/framework/resources/creating-satellite-assemblies-for-desktop-apps.md)  
 [<span data-ttu-id="44daa-157">Извлечение ресурсов</span><span class="sxs-lookup"><span data-stu-id="44daa-157">Retrieving Resources</span></span>](../../../docs/framework/resources/retrieving-resources-in-desktop-apps.md)
