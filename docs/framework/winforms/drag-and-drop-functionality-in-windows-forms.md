---
title: Функциональная возможность перетаскивания в Windows Forms
ms.date: 03/30/2017
helpviewer_keywords:
- drag and drop [Windows Forms], Windows Forms
- Windows Forms, drag and drop
ms.assetid: 65cd2c03-8782-474e-b958-cbe43eeb902c
ms.openlocfilehash: 9c8580f61bcb311ca6b2e1cc2a11b4d4a4dbe79c
ms.sourcegitcommit: 160a88c8087b0e63606e6e35f9bd57fa5f69c168
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/09/2019
ms.locfileid: "57719420"
---
# <a name="drag-and-drop-functionality-in-windows-forms"></a><span data-ttu-id="ebedc-102">Функциональная возможность перетаскивания в Windows Forms</span><span class="sxs-lookup"><span data-stu-id="ebedc-102">Drag-and-Drop Functionality in Windows Forms</span></span>
<span data-ttu-id="ebedc-103">Windows Forms включает набор методов, событий и классов, реализующих режим перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="ebedc-103">Windows Forms includes a set of methods, events, and classes that implement drag-and-drop behavior.</span></span> <span data-ttu-id="ebedc-104">В этом разделе приводится обзор поддержки перетаскивания в Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="ebedc-104">This topic provides an overview of the drag-and-drop support in Windows Forms.</span></span>  <span data-ttu-id="ebedc-105">Также см. в разделе [и-операции перетаскивания и поддержка буфера обмена](./advanced/drag-and-drop-operations-and-clipboard-support.md).</span><span class="sxs-lookup"><span data-stu-id="ebedc-105">Also see [Drag-and-Drop Operations and Clipboard Support](./advanced/drag-and-drop-operations-and-clipboard-support.md).</span></span>  
  
## <a name="performing-drag-and-drop-operations"></a><span data-ttu-id="ebedc-106">Выполнение операций перетаскивания</span><span class="sxs-lookup"><span data-stu-id="ebedc-106">Performing Drag-and-Drop Operations</span></span>  
 <span data-ttu-id="ebedc-107">Для выполнения операций перетаскивания используйте метод <xref:System.Windows.Forms.Control.DoDragDrop%2A> класса <xref:System.Windows.Forms.Control>.</span><span class="sxs-lookup"><span data-stu-id="ebedc-107">To perform a drag-and-drop operation, use the <xref:System.Windows.Forms.Control.DoDragDrop%2A> method of the <xref:System.Windows.Forms.Control> class.</span></span> <span data-ttu-id="ebedc-108">Подробнее о том, как выполняется операция перетаскивания, см. в описании метода <xref:System.Windows.Forms.Control.DoDragDrop%2A>.</span><span class="sxs-lookup"><span data-stu-id="ebedc-108">For more information about how a drag-and-drop operation is performed, see <xref:System.Windows.Forms.Control.DoDragDrop%2A>.</span></span> <span data-ttu-id="ebedc-109">Для получения прямоугольника, над которым должен быть перемещен указатель мыши, чтобы началась операция перетаскивания, используется свойство <xref:System.Windows.Forms.SystemInformation.DragSize%2A> класса <xref:System.Windows.Forms.SystemInformation>.</span><span class="sxs-lookup"><span data-stu-id="ebedc-109">To get the rectangle that the mouse pointer must be dragged over before a drag-and-drop operation begins, use the <xref:System.Windows.Forms.SystemInformation.DragSize%2A> property of the <xref:System.Windows.Forms.SystemInformation> class.</span></span>  
  
## <a name="events-related-to-drag-and-drop-operations"></a><span data-ttu-id="ebedc-110">События, относящиеся к операциям перетаскивания</span><span class="sxs-lookup"><span data-stu-id="ebedc-110">Events Related to Drag-and-Drop Operations</span></span>  
 <span data-ttu-id="ebedc-111">С операцией перетаскивания связаны две категории событий: события, возникающие в текущем целевом объекте операции перетаскивания, и события, возникающие в ее исходном объекте.</span><span class="sxs-lookup"><span data-stu-id="ebedc-111">There are two categories of events in a drag and drop operation: events that occur on the current target of the drag-and-drop operation, and events that occur on the source of the drag and drop operation.</span></span>  
  
### <a name="events-on-the-current-target"></a><span data-ttu-id="ebedc-112">События в текущем целевом объекте</span><span class="sxs-lookup"><span data-stu-id="ebedc-112">Events on the Current Target</span></span>  
 <span data-ttu-id="ebedc-113">В приведенной ниже таблице перечислены события, возникающие в текущем целевом объекте операции перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="ebedc-113">The following table shows the events that occur on the current target of a drag-and-drop operation.</span></span>  
  
|<span data-ttu-id="ebedc-114">Событие мыши</span><span class="sxs-lookup"><span data-stu-id="ebedc-114">Mouse Event</span></span>|<span data-ttu-id="ebedc-115">Описание:</span><span class="sxs-lookup"><span data-stu-id="ebedc-115">Description</span></span>|  
|-----------------|-----------------|  
|<xref:System.Windows.Forms.Control.DragEnter>|<span data-ttu-id="ebedc-116">Это событие происходит при перетаскивании объекта внутрь границ элемента управления.</span><span class="sxs-lookup"><span data-stu-id="ebedc-116">This event occurs when an object is dragged into the control's bounds.</span></span> <span data-ttu-id="ebedc-117">Обработчик этого события принимает аргумент типа <xref:System.Windows.Forms.DragEventArgs>.</span><span class="sxs-lookup"><span data-stu-id="ebedc-117">The handler for this event receives an argument of type <xref:System.Windows.Forms.DragEventArgs>.</span></span>|  
|<xref:System.Windows.Forms.Control.DragOver>|<span data-ttu-id="ebedc-118">Это событие происходит при перетаскивании объекта, пока указатель мыши находится в пределах границ элемента управления.</span><span class="sxs-lookup"><span data-stu-id="ebedc-118">This event occurs when an object is dragged while the mouse pointer is within the control's bounds.</span></span> <span data-ttu-id="ebedc-119">Обработчик этого события принимает аргумент типа <xref:System.Windows.Forms.DragEventArgs>.</span><span class="sxs-lookup"><span data-stu-id="ebedc-119">The handler for this event receives an argument of type <xref:System.Windows.Forms.DragEventArgs>.</span></span>|  
|<xref:System.Windows.Forms.Control.DragDrop>|<span data-ttu-id="ebedc-120">Это событие происходит при завершении операции перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="ebedc-120">This event occurs when a drag-and-drop operation is completed.</span></span> <span data-ttu-id="ebedc-121">Обработчик этого события принимает аргумент типа <xref:System.Windows.Forms.DragEventArgs>.</span><span class="sxs-lookup"><span data-stu-id="ebedc-121">The handler for this event receives an argument of type <xref:System.Windows.Forms.DragEventArgs>.</span></span>|  
|<xref:System.Windows.Forms.Control.DragLeave>|<span data-ttu-id="ebedc-122">Это событие возникает при перемещении объекта за границы элемента управления.</span><span class="sxs-lookup"><span data-stu-id="ebedc-122">This event occurs when an object is dragged out of the control's bounds.</span></span> <span data-ttu-id="ebedc-123">Обработчик этого события принимает аргумент типа <xref:System.EventArgs>.</span><span class="sxs-lookup"><span data-stu-id="ebedc-123">The handler for this event receives an argument of type <xref:System.EventArgs>.</span></span>|  
  
 <span data-ttu-id="ebedc-124">В классе <xref:System.Windows.Forms.DragEventArgs> содержится расположение указателя мыши, текущее состояние кнопок мыши и клавиш-модификаторов, перетаскиваемые данные и значения <xref:System.Windows.Forms.DragDropEffects>, указывающие, какие операции допускаются источником события перетаскивания, и результат операции перетаскивания в целевой объект.</span><span class="sxs-lookup"><span data-stu-id="ebedc-124">The <xref:System.Windows.Forms.DragEventArgs> class provides the location of the mouse pointer, the current state of the mouse buttons and modifier keys of the keyboard, the data being dragged, and <xref:System.Windows.Forms.DragDropEffects> values that specify the operations allowed by the source of the drag event and the target drop effect for the operation.</span></span>  
  
### <a name="events-on-the-source"></a><span data-ttu-id="ebedc-125">События в исходном объекте</span><span class="sxs-lookup"><span data-stu-id="ebedc-125">Events on the Source</span></span>  
 <span data-ttu-id="ebedc-126">В таблице ниже приведены события, возникающие в исходном объекте операции перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="ebedc-126">The following table shows the events that occur on the source of the drag-and-drop operation.</span></span>  
  
|<span data-ttu-id="ebedc-127">Событие мыши</span><span class="sxs-lookup"><span data-stu-id="ebedc-127">Mouse Event</span></span>|<span data-ttu-id="ebedc-128">Описание</span><span class="sxs-lookup"><span data-stu-id="ebedc-128">Description</span></span>|  
|-----------------|-----------------|  
|<xref:System.Windows.Forms.Control.GiveFeedback>|<span data-ttu-id="ebedc-129">Это событие возникает во время операции перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="ebedc-129">This event occurs during a drag operation.</span></span> <span data-ttu-id="ebedc-130">Оно позволяет дать пользователю визуальную подсказку о том, что происходит операция перетаскивания, в виде, например, изменения указателя мыши.</span><span class="sxs-lookup"><span data-stu-id="ebedc-130">It provides an opportunity to give a visual cue to the user that the drag-and-drop operation is occurring, such as changing the mouse pointer.</span></span> <span data-ttu-id="ebedc-131">Обработчик этого события принимает аргумент типа <xref:System.Windows.Forms.GiveFeedbackEventArgs>.</span><span class="sxs-lookup"><span data-stu-id="ebedc-131">The handler for this event receives an argument of type <xref:System.Windows.Forms.GiveFeedbackEventArgs>.</span></span>|  
|<xref:System.Windows.Forms.Control.QueryContinueDrag>|<span data-ttu-id="ebedc-132">Это событие возникает во время операции перетаскивания и позволяет исходному объекту определить, следует ли отменить эту операцию.</span><span class="sxs-lookup"><span data-stu-id="ebedc-132">This event is raised during a drag-and-drop operation and enables the drag source to determine whether the drag-and-drop operation should be canceled.</span></span> <span data-ttu-id="ebedc-133">Обработчик этого события принимает аргумент типа <xref:System.Windows.Forms.QueryContinueDragEventArgs>.</span><span class="sxs-lookup"><span data-stu-id="ebedc-133">The handler for this event receives an argument of type <xref:System.Windows.Forms.QueryContinueDragEventArgs>.</span></span>|  
  
 <span data-ttu-id="ebedc-134">В классе <xref:System.Windows.Forms.QueryContinueDragEventArgs> содержится текущее состояние кнопок мыши и клавиш-модификаторов, значение, указывающее, была ли нажата клавиша ESC, и значение <xref:System.Windows.Forms.DragAction>, с помощью которого можно указать, следует ли продолжать операцию перетаскивания.</span><span class="sxs-lookup"><span data-stu-id="ebedc-134">The <xref:System.Windows.Forms.QueryContinueDragEventArgs> class provides the current state of the mouse buttons and modifier keys of the keyboard, a value specifying whether the ESC key was pressed, and a <xref:System.Windows.Forms.DragAction> value that can be set to specify whether the drag-and-drop operation should continue.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ebedc-135">См. также</span><span class="sxs-lookup"><span data-stu-id="ebedc-135">See also</span></span>
- [<span data-ttu-id="ebedc-136">Ввод данных мышью в приложении Windows Forms</span><span class="sxs-lookup"><span data-stu-id="ebedc-136">Mouse Input in a Windows Forms Application</span></span>](mouse-input-in-a-windows-forms-application.md)
