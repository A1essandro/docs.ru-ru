---
title: Слияние элементов меню в элементе управления MenuStrip в Windows Forms
ms.date: 03/30/2017
helpviewer_keywords:
- MenuStrip [Windows Forms], merging
- merging [Windows Forms], general concepts
ms.assetid: 95e113ba-f362-4dda-8a76-6d95ddc45cee
ms.openlocfilehash: 2782ae483d673f8f1eccab10876aca858737260a
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/04/2018
---
# <a name="merging-menu-items-in-the-windows-forms-menustrip-control"></a><span data-ttu-id="ab6a6-102">Слияние элементов меню в элементе управления MenuStrip в Windows Forms</span><span class="sxs-lookup"><span data-stu-id="ab6a6-102">Merging Menu Items in the Windows Forms MenuStrip Control</span></span>
<span data-ttu-id="ab6a6-103">Если у вас есть приложения многодокументного интерфейса (MDI), можно объединять пункты меню или целые меню из дочерней формы в меню родительской формы.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-103">If you have a multiple-document interface (MDI) application, you can merge menu items or whole menus from the child form into the menus of the parent form.</span></span>  
  
 <span data-ttu-id="ab6a6-104">В этом разделе описываются основные понятия, связанные с слияние элементов меню в приложении MDI.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-104">This topic describes the basic concepts associated with merging menu items in an MDI application.</span></span>  
  
## <a name="general-concepts"></a><span data-ttu-id="ab6a6-105">Общие понятия</span><span class="sxs-lookup"><span data-stu-id="ab6a6-105">General Concepts</span></span>  
 <span data-ttu-id="ab6a6-106">Процедуры слияния охватывают целевым объектом и системы управления версиями:</span><span class="sxs-lookup"><span data-stu-id="ab6a6-106">Merging procedures involve both a target and a source control:</span></span>  
  
-   <span data-ttu-id="ab6a6-107">Целевой объект — <xref:System.Windows.Forms.MenuStrip> управления на главной или родительской MDI-формы, в которой выполняется слияние пунктов меню.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-107">The target is the <xref:System.Windows.Forms.MenuStrip> control on the main or MDI parent form into which you are merging menu items.</span></span>  
  
-   <span data-ttu-id="ab6a6-108">Источником является <xref:System.Windows.Forms.MenuStrip> элемента управления в дочерней форме MDI, содержащий пункты меню, которые требуется объединить с целевым меню.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-108">The source is the <xref:System.Windows.Forms.MenuStrip> control on the MDI child form that contains the menu items you want to merge into the target menu.</span></span>  
  
 <span data-ttu-id="ab6a6-109"><xref:System.Windows.Forms.MenuStrip.MdiWindowListItem%2A> Свойство идентифицирует элемент меню, список раскрывающегося списка, в которой будет заполнен заголовками MDI текущей родительской дочерние формы MDI.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-109">The <xref:System.Windows.Forms.MenuStrip.MdiWindowListItem%2A> property identifies the menu item whose drop-down list you will populate with the titles of the current MDI parent form's MDI children.</span></span> <span data-ttu-id="ab6a6-110">Например, обычно список дочерних окон MDI, открытые в настоящий момент на **окна** меню.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-110">For example, you typically list MDI children that are currently open on the **Window** menu.</span></span>  
  
 <span data-ttu-id="ab6a6-111"><xref:System.Windows.Forms.ToolStripMenuItem.IsMdiWindowListEntry%2A> Свойство указано, какие пункты меню берутся из <xref:System.Windows.Forms.MenuStrip> в дочерней форме MDI.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-111">The <xref:System.Windows.Forms.ToolStripMenuItem.IsMdiWindowListEntry%2A> property identifies which menu items come from a <xref:System.Windows.Forms.MenuStrip> on an MDI child form.</span></span>  
  
 <span data-ttu-id="ab6a6-112">Пункты меню можно объединить вручную или автоматически.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-112">You can merge menu items manually or automatically.</span></span> <span data-ttu-id="ab6a6-113">Слияние пунктов меню для обоих методов таким же образом, но включается по-разному, как описано в разделах «Слияние вручную» и «Автоматическое слияние» далее в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-113">The menu items merge in the same way for both methods, but the merge is activated differently, as discussed in the "Manual Merging" and "Automatic Merging" sections later in this topic.</span></span> <span data-ttu-id="ab6a6-114">В процессе ручного и автоматического слияния каждое действие слияния затрагивает следующее.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-114">In both manual and automatic merging, each merge action affects the next merge action.</span></span>  
  
 <span data-ttu-id="ab6a6-115"><xref:System.Windows.Forms.MenuStrip> пункты меню Слияние перемещаются из одного <xref:System.Windows.Forms.ToolStrip> в другой а не клонируются, как в случае с <xref:System.Windows.Forms.MainMenu>.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-115"><xref:System.Windows.Forms.MenuStrip> merging moves menu items from one <xref:System.Windows.Forms.ToolStrip> to another rather than cloning them, as was the case with <xref:System.Windows.Forms.MainMenu>.</span></span>  
  
## <a name="mergeaction-values"></a><span data-ttu-id="ab6a6-116">MergeAction значения</span><span class="sxs-lookup"><span data-stu-id="ab6a6-116">MergeAction Values</span></span>  
 <span data-ttu-id="ab6a6-117">Задайте действие слияния пунктов меню в источнике <xref:System.Windows.Forms.MenuStrip> с помощью <xref:System.Windows.Forms.MergeAction> свойство.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-117">You set the merge action on menu items in the source <xref:System.Windows.Forms.MenuStrip> using the <xref:System.Windows.Forms.MergeAction> property.</span></span>  
  
 <span data-ttu-id="ab6a6-118">В следующей таблице описаны значения и типичные случаи использования доступных операций слияния.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-118">The following table describes the meaning and typical use of the available merge actions.</span></span>  
  
|<span data-ttu-id="ab6a6-119">Значение MergeAction</span><span class="sxs-lookup"><span data-stu-id="ab6a6-119">MergeAction Value</span></span>|<span data-ttu-id="ab6a6-120">Описание</span><span class="sxs-lookup"><span data-stu-id="ab6a6-120">Description</span></span>|<span data-ttu-id="ab6a6-121">Типичные случаи использования</span><span class="sxs-lookup"><span data-stu-id="ab6a6-121">Typical Use</span></span>|  
|-----------------------|-----------------|-----------------|  
|<xref:System.Windows.Forms.MergeAction.Append>|<span data-ttu-id="ab6a6-122">(По умолчанию) Добавляет исходный элемент в конец коллекции целевого элемента.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-122">(Default) Adds the source item to the end of the target item's collection.</span></span>|<span data-ttu-id="ab6a6-123">Добавление пунктов меню в конец меню при активации определенной части программы.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-123">Adding menu items to the end of the menu when some part of the program is activated.</span></span>|  
|<xref:System.Windows.Forms.MergeAction.Insert>|<span data-ttu-id="ab6a6-124">Добавляет элемент источника целевого элемента коллекции, в расположении, заданном <xref:System.Windows.Forms.ToolStripItem.MergeIndex%2A> свойство, заданное для исходного элемента.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-124">Adds the source item to the target item's collection, in the location specified by the <xref:System.Windows.Forms.ToolStripItem.MergeIndex%2A> property set on the source item.</span></span>|<span data-ttu-id="ab6a6-125">Добавление пунктов меню в середину или начало меню при активации определенной части программы.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-125">Adding menu items to the middle or the beginning of the menu when some part of the program is activated.</span></span><br /><br /> <span data-ttu-id="ab6a6-126">Если значение <xref:System.Windows.Forms.ToolStripItem.MergeIndex%2A> одинаково для обоих пунктов меню, они добавляются в обратном порядке.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-126">If the value of <xref:System.Windows.Forms.ToolStripItem.MergeIndex%2A> is the same for both menu items, they are added in reverse order.</span></span> <span data-ttu-id="ab6a6-127">Задать <xref:System.Windows.Forms.ToolStripItem.MergeIndex%2A> соответствующим образом для сохранения исходного порядка.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-127">Set <xref:System.Windows.Forms.ToolStripItem.MergeIndex%2A> appropriately to preserve the original order.</span></span>|  
|<xref:System.Windows.Forms.MergeAction.Replace>|<span data-ttu-id="ab6a6-128">Поиск текстового совпадения или использование <xref:System.Windows.Forms.ToolStripItem.MergeIndex%2A> значение, если текстовое совпадение не найдено и затем заменяет исходный элемент меню сопоставления целевого элемента меню.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-128">Finds a text match, or uses the <xref:System.Windows.Forms.ToolStripItem.MergeIndex%2A> value if no text match is found, and then replaces the matching target menu item with the source menu item.</span></span>|<span data-ttu-id="ab6a6-129">Заменив целевой элемент меню пункта меню источник с таким же именем, действие которого отличается.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-129">Replacing a target menu item with a source menu item of the same name that does something different.</span></span>|  
|<xref:System.Windows.Forms.MergeAction.MatchOnly>|<span data-ttu-id="ab6a6-130">Поиск текстового совпадения или использование <xref:System.Windows.Forms.ToolStripItem.MergeIndex%2A> значение, если текстовое совпадение не найдено и затем добавляет все элементы раскрывающегося списка из источника в целевой объект.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-130">Finds a text match, or uses the <xref:System.Windows.Forms.ToolStripItem.MergeIndex%2A> value if no text match is found, and then adds all the drop-down items from the source to the target.</span></span>|<span data-ttu-id="ab6a6-131">Построение структуры меню, который вставляет или добавляются в подменю или удаляет элементы меню из вложенного меню.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-131">Building a menu structure that inserts or adds menu items into a submenu, or removes menu items from a submenu.</span></span> <span data-ttu-id="ab6a6-132">Например, можно добавить элемент меню из дочерней формы MDI в главное <xref:System.Windows.Forms.MenuStrip> **Сохранить как** меню.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-132">For example, you can add a menu item from an MDI child to a main <xref:System.Windows.Forms.MenuStrip>**Save As** menu.</span></span><br /><br /> <span data-ttu-id="ab6a6-133"><xref:System.Windows.Forms.MergeAction.MatchOnly> позволяет перемещаться по структуре меню без выполнения действий.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-133"><xref:System.Windows.Forms.MergeAction.MatchOnly> allows you to navigate through the menu structure without taking any action.</span></span> <span data-ttu-id="ab6a6-134">Он предоставляет способ оценки последующих элементов.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-134">It provides a way to evaluate the subsequent items.</span></span>|  
|<xref:System.Windows.Forms.MergeAction.Remove>|<span data-ttu-id="ab6a6-135">Поиск текстового совпадения или использование <xref:System.Windows.Forms.ToolStripItem.MergeIndex%2A> значение, если текстовое совпадение не найдено и затем удаляет элемент из целевого объекта.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-135">Finds a text match, or uses the <xref:System.Windows.Forms.ToolStripItem.MergeIndex%2A> value if no text match is found, and then removes the item from the target.</span></span>|<span data-ttu-id="ab6a6-136">Удаление пункта меню из целевого <xref:System.Windows.Forms.MenuStrip>.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-136">Removing a menu item from the target <xref:System.Windows.Forms.MenuStrip>.</span></span>|  
  
## <a name="manual-merging"></a><span data-ttu-id="ab6a6-137">Слияние вручную</span><span class="sxs-lookup"><span data-stu-id="ab6a6-137">Manual Merging</span></span>  
 <span data-ttu-id="ab6a6-138">Только <xref:System.Windows.Forms.MenuStrip> элементы управления участвовать в процессе автоматического слияния.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-138">Only <xref:System.Windows.Forms.MenuStrip> controls participate in automatic merging.</span></span> <span data-ttu-id="ab6a6-139">Для объединения элементов для других элементов, таких как <xref:System.Windows.Forms.ToolStrip> и <xref:System.Windows.Forms.StatusStrip> элементов управления, слияние нужно выполнить вручную, путем вызова <xref:System.Windows.Forms.ToolStripManager.Merge%2A> и <xref:System.Windows.Forms.ToolStripManager.RevertMerge%2A> методы в коде, при необходимости.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-139">To combine the items of other controls, such as <xref:System.Windows.Forms.ToolStrip> and <xref:System.Windows.Forms.StatusStrip> controls, you must merge them manually, by calling the <xref:System.Windows.Forms.ToolStripManager.Merge%2A> and <xref:System.Windows.Forms.ToolStripManager.RevertMerge%2A> methods in your code as required.</span></span>  
  
## <a name="automatic-merging"></a><span data-ttu-id="ab6a6-140">Автоматическое слияние</span><span class="sxs-lookup"><span data-stu-id="ab6a6-140">Automatic Merging</span></span>  
 <span data-ttu-id="ab6a6-141">Можно использовать автоматическое слияние для приложений MDI путем активации исходной формы.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-141">You can use automatic merging for MDI applications by activating the source form.</span></span> <span data-ttu-id="ab6a6-142">Для использования <xref:System.Windows.Forms.MenuStrip> в приложении MDI, задайте <xref:System.Windows.Forms.Form.MainMenuStrip%2A> свойство в целевой объект <xref:System.Windows.Forms.MenuStrip> , чтобы операции слияния, выполняемых в источнике <xref:System.Windows.Forms.MenuStrip> отражаются в целевом <xref:System.Windows.Forms.MenuStrip>.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-142">To use a <xref:System.Windows.Forms.MenuStrip> in an MDI application, set the <xref:System.Windows.Forms.Form.MainMenuStrip%2A> property to the target <xref:System.Windows.Forms.MenuStrip> so that merging actions performed on the source <xref:System.Windows.Forms.MenuStrip> are reflected in the target <xref:System.Windows.Forms.MenuStrip>.</span></span>  
  
 <span data-ttu-id="ab6a6-143">Автоматическое слияние путем активации можно вызвать <xref:System.Windows.Forms.MenuStrip> в источнике MDI.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-143">You can trigger automatic merging by activating the <xref:System.Windows.Forms.MenuStrip> on the MDI source.</span></span> <span data-ttu-id="ab6a6-144">После активации источника <xref:System.Windows.Forms.MenuStrip> сливается с целевой формой MDI.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-144">Upon activation, the source <xref:System.Windows.Forms.MenuStrip> is merged into the MDI target.</span></span> <span data-ttu-id="ab6a6-145">Когда новая форма становится активным, слияние отменяется на последней формы и запущено на новую форму.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-145">When a new form becomes active, the merge is reverted on the last form and triggered on the new form.</span></span> <span data-ttu-id="ab6a6-146">Можно контролировать это поведение, задав <xref:System.Windows.Forms.ToolStripItem.MergeAction%2A> свойства при необходимости на каждом <xref:System.Windows.Forms.ToolStripItem>и задав <xref:System.Windows.Forms.ToolStrip.AllowMerge%2A> свойства на каждом <xref:System.Windows.Forms.MenuStrip>.</span><span class="sxs-lookup"><span data-stu-id="ab6a6-146">You can control this behavior by setting the <xref:System.Windows.Forms.ToolStripItem.MergeAction%2A> property as needed on each <xref:System.Windows.Forms.ToolStripItem>, and by setting the <xref:System.Windows.Forms.ToolStrip.AllowMerge%2A> property on each <xref:System.Windows.Forms.MenuStrip>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ab6a6-147">См. также</span><span class="sxs-lookup"><span data-stu-id="ab6a6-147">See Also</span></span>  
 <xref:System.Windows.Forms.ToolStripManager>  
 <xref:System.Windows.Forms.MenuStrip>  
 [<span data-ttu-id="ab6a6-148">Элемент управления MenuStrip</span><span class="sxs-lookup"><span data-stu-id="ab6a6-148">MenuStrip Control</span></span>](../../../../docs/framework/winforms/controls/menustrip-control-windows-forms.md)  
 [<span data-ttu-id="ab6a6-149">Практическое руководство. Создание списка в окне интерфейса MDI с помощью MenuStrip</span><span class="sxs-lookup"><span data-stu-id="ab6a6-149">How to: Create an MDI Window List with MenuStrip</span></span>](../../../../docs/framework/winforms/controls/how-to-create-an-mdi-window-list-with-menustrip-windows-forms.md)  
 [<span data-ttu-id="ab6a6-150">Практическое руководство. Автоматическое слияние меню в приложениях MDI</span><span class="sxs-lookup"><span data-stu-id="ab6a6-150">How to: Set Up Automatic Menu Merging for MDI Applications</span></span>](../../../../docs/framework/winforms/controls/how-to-set-up-automatic-menu-merging-for-mdi-applications.md)
