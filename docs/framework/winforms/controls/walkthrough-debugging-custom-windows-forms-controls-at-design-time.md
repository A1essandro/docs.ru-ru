---
title: "Пример. Отладка пользовательских элементов управления Windows Forms во время разработки"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-winforms
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- debugging [Visual Studio], walkthroughs
- custom controls [Windows Forms], walkthroughs
- visual editors
- debugging [Visual Studio], Windows Forms
- custom controls [Windows Forms], debugging
- designers
- controls [Windows Forms], debugging
- walkthroughs [Windows Forms], debugging
- design-time debugging
ms.assetid: 1fd83ccd-3798-42fc-85a3-6cba99467387
caps.latest.revision: "19"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: cc5f0fab7c380268dfc041d6105595858c2fed93
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2017
---
# <a name="walkthrough-debugging-custom-windows-forms-controls-at-design-time"></a>Пример. Отладка пользовательских элементов управления Windows Forms во время разработки
При создании пользовательского элемента управления, вы обнаружите его необходимо выполнить отладку его поведение во время разработки. Это особенно важно при создании пользовательского конструктора для элемента управления. Дополнительные сведения см. в разделе [Пошаговое руководство: создание Windows Forms управления, принимает преимущества от возможности Visual Studio во время разработки](../../../../docs/framework/winforms/controls/creating-a-wf-control-design-time-features.md).  
  
 Пользовательские элементы управления с помощью Visual Studio можно отлаживать так же образом, как и любые другие классы платформы .NET Framework. Различие заключается в том, что необходимо отладить отдельный экземпляр Visual Studio, на котором выполняется код элемента управления  
  
 В данном пошаговом руководстве представлены следующие задачи.  
  
-   Создание проекта Windows Forms для размещения пользовательского элемента управления  
  
-   Создание проекта библиотеки элементов управления  
  
-   Добавление свойства в элемент управления  
  
-   Добавление элемента управления в форму  
  
-   Настройка проекта для отладки во время разработки  
  
-   Отладка пользовательского элемента управления во время разработки  
  
 Когда вы закончите, необходимо понимание задачи, необходимые для отладки поведения пользовательского элемента управления во время разработки.  
  
> [!NOTE]
>  Отображаемые диалоговые окна и команды меню могут отличаться от описанных в справке в зависимости от текущих параметров или выпуска. Чтобы изменить параметры, выберите в меню **Сервис** пункт **Импорт и экспорт параметров** . Дополнительные сведения см. в статье [Настройка параметров разработки в Visual Studio](http://msdn.microsoft.com/en-us/22c4debb-4e31-47a8-8f19-16f328d7dcd3).  
  
## <a name="creating-the-project"></a>Создание проекта  
 Первым шагом является создание проекта приложения. Этот проект будет использован для построения приложения, на котором размещается пользовательский элемент управления.  
  
#### <a name="to-create-the-project"></a>Создание проекта  
  
-   Создайте проект приложения Windows, называется «DebuggingExample». Дополнительные сведения см. в разделе [Практическое руководство. Создание проекта приложения Windows](http://msdn.microsoft.com/en-us/b2f93fed-c635-4705-8d0e-cf079a264efa).  
  
## <a name="creating-a-control-library-project"></a>Создание проекта библиотеки элементов управления  
 Следующим шагом является создание проекта библиотеки элементов управления и настроить пользовательский элемент управления.  
  
#### <a name="to-create-the-control-library-project"></a>Создание проекта библиотеки элементов управления  
  
1.  Добавить **библиотеки элементов управления Windows** проекта в решение.  
  
2.  Добавьте новый **UserControl** DebugControlLibrary проект. Дополнительные сведения см. в разделе [NIB: Практическое: Добавление новых элементов проекта](http://msdn.microsoft.com/en-us/63d3e16b-de6e-4bb5-a0e3-ecec762201ce). Предоставьте новый исходный файл базовое имя «DebugControl».  
  
3.  С помощью **обозревателе решений**, удалите элемент управления проекта по умолчанию путем удаления файла с базовым именем «`UserControl1`». Дополнительные сведения см. в разделе [NIB: Практическое: удаление, Delete и исключить элементы](http://msdn.microsoft.com/en-us/6dffdc86-29c8-4eff-bcd8-e3a0dd9e9a73).  
  
4.  Постройте решение.  
  
## <a name="checkpoint"></a>Контрольная точка  
 На этом этапе можно увидеть пользовательского элемента управления в **элементов**.  
  
#### <a name="to-check-your-progress"></a>Чтобы проверить состояние  
  
-   Найти новая вкладка называется **компоненты DebugControlLibrary** и установите его. При его открытии, появится в списке управления **DebugControl** со значком по умолчанию.  
  
## <a name="adding-a-property-to-your-custom-control"></a>Добавление свойства в элемент управления  
 Чтобы продемонстрировать выполнение кода пользовательского элемента управления во время разработки, будет добавить свойство и установите точку останова в коде, который реализует свойство.  
  
#### <a name="to-add-a-property-to-your-custom-control"></a>Добавление свойства в элемент управления  
  
1.  Откройте **DebugControl** в **редактор кода**. Добавьте следующий код в определение класса:  
  
    ```vb  
    Private demoStringValue As String = Nothing  
    <BrowsableAttribute(true)>  
    Public Property DemoString() As String  
  
        Get  
            Return Me.demoStringValue  
        End Get  
  
        Set(ByVal value As String)  
            Me.demoStringValue = value  
        End Set  
  
    End Property  
    ```  
  
    ```csharp  
    private string demoStringValue = null;  
    [Browsable(true)]  
    public string DemoString  
    {  
        get  
        {  
            return this.demoStringValue;  
        }  
        set  
        {  
            demoStringValue = value;  
        }  
    }  
    ```  
  
2.  Постройте решение.  
  
## <a name="adding-your-custom-control-to-the-host-form"></a>Добавление элемента управления в форму  
 Для отладки поведения пользовательского элемента управления во время разработки, вы разместите экземпляр класса пользовательского элемента управления в форму.  
  
#### <a name="to-add-your-custom-control-to-the-host-form"></a>Добавление пользовательского элемента управления в форму  
  
1.  В проекте «DebuggingExample», откройте форму Form1 в **конструктор Windows Forms**.  
  
2.  В **элементов**откройте **DebugControlLibrary компоненты** а перетащите **DebugControl** экземпляр в форму.  
  
3.  Найти `DemoString` пользовательское свойство в **свойства** окна. Обратите внимание, что его значение можно изменить, как и любого другого свойства. Также Обратите внимание, что при `DemoString` выбрано свойство, строка описания свойства отображается в нижней части **свойства** окна.  
  
## <a name="setting-up-the-project-for-design-time-debugging"></a>Настройка проекта для отладки во время разработки  
 Для отладки поведения пользовательского элемента управления во время разработки, необходимо отладить отдельный экземпляр Visual Studio, на котором выполняется код элемента управления.  
  
#### <a name="to-set-up-the-project-for-design-time-debugging"></a>Настройка проекта для отладки во время разработки  
  
1.  Щелкните правой кнопкой мыши **DebugControlLibrary** проекта в **обозревателе решений** и выберите **свойства**.  
  
2.  В **DebugControlLibrary** вкладки свойств, выберите **отладки** вкладки.  
  
     В **действие при запуске** выберите **запуск внешней программы**. Можно отладка отдельного экземпляра Visual Studio, поэтому нажмите кнопку с многоточием (![экрана VisualStudioEllipsesButton](../../../../docs/framework/winforms/media/vbellipsesbutton.png "vbEllipsesButton")) чтобы выбрать Интегрированной среде разработки Visual Studio. Имя исполняемого файла — **devenv.exe**, и если установлен в расположение по умолчанию, его путь — 9.0\Common7\IDE\devenv.exe %programfiles%\Microsoft Visual Studio.  
  
3.  Нажмите кнопку **ОК**, чтобы закрыть диалоговое окно.  
  
4.  Щелкните правой кнопкой мыши **DebugControlLibrary** проект и выберите **Назначить запускаемым проектом** , чтобы включить конфигурацию отладки.  
  
## <a name="debugging-your-custom-control-at-design-time"></a>Отладка пользовательского элемента управления во время разработки  
 Теперь все готово для отладки пользовательского элемента управления во время их выполнения в режиме конструктора. При запуске сеанса отладки будет создан новый экземпляр Visual Studio, и он будет использоваться для загрузки решения «DebuggingExample». При открытии форму Form1 в **конструктор форм**, будет создан и запущен экземпляр пользовательского элемента управления.  
  
#### <a name="to-debug-your-custom-control-at-design-time"></a>Для отладки пользовательского элемента управления во время разработки  
  
1.  Откройте **DebugControl** исходный файл в **редактор кода** и установить точку останова на `Set` доступа `DemoString` свойство.  
  
2.  Нажмите клавишу F5 для запуска сеанса отладки. Обратите внимание, что создается новый экземпляр Visual Studio. Может различать экземпляры двумя способами:  
  
    -   Экземпляр отладки имеет слово **под управлением** в своем заголовке.  
  
    -   У экземпляра отладки **запустить** кнопку на его **отладки** инструментов отключена  
  
     Точка останова устанавливается в экземпляре отладки.  
  
3.  В новом экземпляре Visual Studio откройте решение «DebuggingExample». Решение можно легко найти, выбрав **последние проекты** из **файл** меню. Файл решения «DebuggingExample.sln» будут указаны как список последних использовавшихся файлов.  
  
4.  Откройте форму Form1 в **конструктор форм** и выберите **DebugControl** элемента управления.  
  
5.  Измените значение `DemoString` свойства. Обратите внимание, что при фиксации изменений отладки экземпляр Visual Studio получает фокус выполнение останавливается в точке останова. Можно пошагово выполнить метод доступа свойства так же, как к любой другой код.  
  
6.  При завершении сеанса отладки можно остановить закрыв второй экземпляр Visual Studio или нажав **остановить отладку** кнопки в экземпляре отладки.  
  
## <a name="next-steps"></a>Дальнейшие действия  
 Теперь, когда можно отлаживать пользовательских элементов управления во время разработки, существует множество возможностей для расширения элемента управления взаимодействием с Visual Studio IDE.  
  
-   Можно использовать <xref:System.ComponentModel.Component.DesignMode%2A> свойство <xref:System.ComponentModel.Component> для написания кода, который будет выполняться только во время разработки. Дополнительные сведения см. в разделе <xref:System.ComponentModel.Component.DesignMode%2A>.  
  
-   Существует несколько атрибутов можно применять к свойствам элемента управления для управления взаимодействием элемента управления с помощью конструктора. Можно найти эти атрибуты в <xref:System.ComponentModel?displayProperty=nameWithType> пространства имен.  
  
-   Можно написать пользовательский конструктор для элемента управления. Это дает полный контроль над разработкой с помощью расширяемой инфраструктуры конструкторов в Visual Studio. Дополнительные сведения см. в разделе [Пошаговое руководство: создание Windows Forms управления, принимает преимущества от возможности Visual Studio во время разработки](../../../../docs/framework/winforms/controls/creating-a-wf-control-design-time-features.md).  
  
## <a name="see-also"></a>См. также  
 [Пошаговое руководство. Создание элемента управления Windows Forms, в котором используются преимущества функций Visual Studio, применяемых во время разработки](../../../../docs/framework/winforms/controls/creating-a-wf-control-design-time-features.md)  
 [Как: доступ к службам времени разработки](http://msdn.microsoft.com/library/c186c4b6-076c-438d-9ed3-f13da29c8c1f)  
 [Как: доступ к услугам поддержки во время разработки в Windows Forms](http://msdn.microsoft.com/library/a84f8579-1f47-41b9-ba37-69030b0aff09)
