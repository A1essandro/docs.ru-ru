---
title: "Пример. Отладка пользовательских элементов управления Windows Forms во время разработки | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework-4.6"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-winforms"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "jsharp"
helpviewer_keywords: 
  - "элементы управления [Windows Forms], отладка"
  - "пользовательские элементы управления [Windows Forms], отладка"
  - "пользовательские элементы управления [Windows Forms], пошаговые руководства"
  - "отладка [Visual Studio], пошаговые руководства"
  - "отладка [Visual Studio], Windows Forms"
  - "конструкторы"
  - "отладка во время разработки"
  - "визуальные редакторы"
  - "пошаговые руководства [Windows Forms], отладка"
ms.assetid: 1fd83ccd-3798-42fc-85a3-6cba99467387
caps.latest.revision: 19
author: "dotnet-bot"
ms.author: "dotnetcontent"
manager: "wpickett"
caps.handback.revision: 19
---
# Пример. Отладка пользовательских элементов управления Windows Forms во время разработки
При создании пользовательского элемента управления часто приходится отлаживать его работу при проектировании.  Это наиболее вероятно при создании нестандартного конструктора для пользовательского элемента управления.  Дополнительные сведения см. в разделе [Пошаговое руководство: Создание элемента управления Windows Forms, в котором используются преимущества функций Visual Studio, применяемых во время разработки](../../../../docs/framework/winforms/controls/creating-a-wf-control-design-time-features.md).  
  
 Для отладки пользовательских элементов управления можно использовать Visual Studio, как и для любых других классов.NET.  Разница заключается в том, что выполняется отладка отдельного экземпляра Visual Studio, в котором выполняется код элемента управления.  
  
 В этом пошаговом руководстве демонстрируется выполнение следующих задач.  
  
-   Создание проекта Windows Forms для размещения пользовательского элемента управления  
  
-   Создание проекта библиотеки элемента управления  
  
-   Добавление свойства в элемент управления  
  
-   Добавление элемента управления в форму  
  
-   Настройка проекта для отладки во время разработки  
  
-   Отладка пользовательского элемента управления в режиме разработки  
  
 По окончании знакомства с примером вы будете иметь представление о задачах, необходимых для отладки элементов управления при разработке.  
  
> [!NOTE]
>  Отображаемые диалоговые окна и команды меню могут отличаться от описанных в справке в зависимости от текущих настроек или выпуска.  Чтобы изменить параметры, в меню **Сервис** выберите команду **Импорт и экспорт параметров**.  Дополнительные сведения см. в разделе [Customizing Development Settings in Visual Studio](http://msdn.microsoft.com/ru-ru/22c4debb-4e31-47a8-8f19-16f328d7dcd3).  
  
## Создание проекта  
 Для начала следует создать проект приложения.  Этот проект будет использован для создания приложения, в котором будет размещен элемент управления.  
  
#### Создание проекта  
  
-   Создайте проект типа "Приложение Windows" с именем "DebuggingExample".  Дополнительные сведения см. в разделе [How to: Create a Windows Application Project](http://msdn.microsoft.com/ru-ru/b2f93fed-c635-4705-8d0e-cf079a264efa).  
  
## Создание проекта библиотеки элемента управления  
 Теперь нужно создать проект библиотеки элемента управления и настроить пользовательский элемент управления.  
  
#### Создание проекта библиотеки элементов управления  
  
1.  В решение добавьте проект **Библиотека элемента управления Windows**.  
  
2.  Добавьте новый элемент **UserControl** в проект DebugControlLibrary.  Дополнительные сведения см. в разделе [NIB:How to: Add New Project Items](http://msdn.microsoft.com/ru-ru/63d3e16b-de6e-4bb5-a0e3-ecec762201ce).  Назовите новый исходный файл "DebugControl".  
  
3.  С помощью **обозревателя решений** удалите элемент управления проекта по умолчанию путем удаления файла с базовым именем "`UserControl1`".  Дополнительные сведения см. в разделе [NIB:How to: Remove, Delete, and Exclude Items](http://msdn.microsoft.com/ru-ru/6dffdc86-29c8-4eff-bcd8-e3a0dd9e9a73).  
  
4.  Выполните построение решения.  
  
## Контрольная точка  
 На этом этапе пользовательский элемент управления появится в **панели элементов**.  
  
#### Для проверки хода выполнения  
  
-   Найдите новую вкладку под названием **DebugControlLibrary Components** и перейдите на нее.  Когда она откроется, ваш элемент управления будет отображаться как **DebugControl** со значком по умолчанию.  
  
## Добавление свойства в элемент управления  
 Для демонстрации работоспособности кода элемента управления на этапе проектирования добавим свойство и установим точку останова в коде, который реализует свойство.  
  
#### Для добавления свойства в элемент управления выполните следующие действия.  
  
1.  Откройте **DebugControl** в **Редакторе кода**.  Добавьте в определение класса следующий код:  
  
    ```vb  
    Private demoStringValue As String = Nothing  
    <BrowsableAttribute(true)>  
    Public Property DemoString() As String  
  
        Get  
            Return Me.demoStringValue  
        End Get  
  
        Set(ByVal value As String)  
            Me.demoStringValue = value  
        End Set  
  
    End Property  
    ```  
  
    ```csharp  
    private string demoStringValue = null;  
    [Browsable(true)]  
    public string DemoString  
    {  
        get  
        {  
            return this.demoStringValue;  
        }  
        set  
        {  
            demoStringValue = value;  
        }  
    }  
    ```  
  
2.  Выполните построение решения.  
  
## Добавление элемента управления в форму  
 Для отладки работы элемента управления поместим экземпляр класса элемента управления в форму.  
  
#### Для добавления элемента управления в форму выполните следующие действия.  
  
1.  В проекте "DebuggingExample" откройте форму Form1 в **Конструкторе Windows Forms**.  
  
2.  Откройте **панель элементов**, перейдите на вкладку **Компоненты DebugControlLibrary** и перетащите в форму экземпляр **DebugControl**.  
  
3.  Найдите свойство `DemoString` в окне **Свойства**.  Обратите внимание, что его значение можно изменить, как и значение любого другого свойства.  Также обратите внимание, что при выборе свойства `DemoString` строка описания свойства отображается в нижней части окна **Свойства**.  
  
## Настройка проекта для отладки во время разработки  
 Для отладки элемента управления во время разработки будет выполнена отладка отдельного экземпляра Visual Studio, в котором выполняется код элемента управления.  
  
#### Для настройки проекта для отладки во время разработки выполните следующие действия.  
  
1.  В **обозревателе решений** щелкните правой кнопкой мыши проект **DebugControlLibrary** и выберите **Свойства**.  
  
2.  На странице **DebugControlLibrary** выберите вкладку **Отладка**.  
  
     В разделе **Действие при запуске** выберите **Запуск внешней программы**.  Отладка будет выполняться в отдельном экземпляре Visual Studio, поэтому нажмите кнопку с многоточием \(![Снимок экрана VisualStudioEllipsesButton](../../../../docs/framework/winforms/media/vbellipsesbutton.png "vbEllipsesButton")\) для выбора Visual Studio IDE.  Имя исполняемого файла — **devenv.exe**, и его путь по умолчанию — "%ProgramFiles%\\Microsoft Visual Studio 9.0\\Common7\\IDE\\devenv.exe".  
  
3.  Нажмите кнопку **ОК**, чтобы закрыть диалоговое окно.  
  
4.  Щелкните правой кнопкой мыши проект **DebugControlLibrary** и выберите **Установить как проект для запуска**, чтобы включить конфигурацию отладки.  
  
## Отладка пользовательского элемента управления во время разработки  
 Теперь все готово для отладки пользовательского элемента управления в режиме разработки.  При запуске сеанса отладки будет создан новый экземпляр Visual Studio и он будет использоваться для загрузки решения "DebuggingExample".  При открытии формы Form1 в **конструкторе форм** будет создан и запущен экземпляр вашего элемента управления.  
  
#### Отладка пользовательского элемента управления во время разработки  
  
1.  Откройте исходный файл **DebugControl** в **редакторе кода** и поместите точку останова на метод доступа `Set` свойства `DemoString`.  
  
2.  Нажмите клавишу F5 для запуска сеанса отладки.  Обратите внимание, что создается новый экземпляр Visual Studio.  Различать экземпляры можно так:  
  
    -   Экземпляр отладки имеет слово **Выполнение** в своем заголовке.  
  
    -   У экземпляра отладки выключена кнопка **Пуск** на его панели инструментов **Отладка**.  
  
     Точка останова устанавливается в экземпляре отладки.  
  
3.  В новом экземпляре Visual Studio откройте решение "DebuggingExample".  Его можно найти, выбрав **Последние проекты** в меню **Файл**.  Файл решения "DebuggingExample.sln" будет перечислен как самый последний.  
  
4.  Откройте форму Form1 в **конструкторе форм** и выберите элемент управления **DebugControl**.  
  
5.  Измените значение свойства `DemoString`.  Обратите внимание, что при изменении отладочный экземпляр Visual Studio получает фокус, а выполнение останавливается в точке останова.  Можно пошагово выполнить метод доступа свойства, как и любой другой код.  
  
6.  Закончив, можно остановить сеанс отладки, закрыв второй экземпляр Visual Studio или нажав кнопку **Остановить отладку** в экземпляре отладки.  
  
## Следующие действия  
 Теперь вы можете отлаживать пользовательские элементы управления на этапе разработки. Существует немало возможностей расширения взаимодействия вашего элемента управления со средой Visual Studio.  
  
-   Можно использовать свойство <xref:System.ComponentModel.Component.DesignMode%2A> класса <xref:System.ComponentModel.Component> для написания кода, который будет выполняться только во время разработки.  Дополнительные сведения см. в разделе <xref:System.ComponentModel.Component.DesignMode%2A>.  
  
-   К свойствам элемента управления можно применять ряд атрибутов для управления взаимодействием элемента управления с конструктором.  Эти атрибуты находятся в пространстве имен <xref:System.ComponentModel?displayProperty=fullName>.  
  
-   Для пользовательского элемента управления можно написать собственный конструктор.  Это даст вам полный контроль над разработкой с помощью расширяемой инфраструктуры конструкторов в Visual Studio.  Дополнительные сведения см. в разделе [Пошаговое руководство: Создание элемента управления Windows Forms, в котором используются преимущества функций Visual Studio, применяемых во время разработки](../../../../docs/framework/winforms/controls/creating-a-wf-control-design-time-features.md).  
  
## См. также  
 [Пошаговое руководство: Создание элемента управления Windows Forms, в котором используются преимущества функций Visual Studio, применяемых во время разработки](../../../../docs/framework/winforms/controls/creating-a-wf-control-design-time-features.md)   
 [How to: Access Design\-Time Services](../Topic/How%20to:%20Access%20Design-Time%20Services.md)   
 [How to: Access Design\-Time Support in Windows Forms](../Topic/How%20to:%20Access%20Design-Time%20Support%20in%20Windows%20Forms.md)