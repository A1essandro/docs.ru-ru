---
title: Пошаговое руководство. Демонстрация визуального наследования
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-winforms
ms.tgt_pltfrm: ''
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- form inheritance [Windows Forms], walkthroughs
- visual inheritance
- inheritance [Windows Forms], walkthroughs
- walkthroughs [Windows Forms], visual inheritance
- Windows Forms, inheritance
ms.assetid: 01966086-3142-450e-8210-3fd4cb33f591
caps.latest.revision: 24
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: e76ddcb33980db1a6d1b6e602c1b71da60b53381
ms.sourcegitcommit: 86adcc06e35390f13c1e372c36d2e044f1fc31ef
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2018
---
# <a name="walkthrough-demonstrating-visual-inheritance"></a>Пошаговое руководство. Демонстрация визуального наследования
Визуальное наследование позволяет просматривать элементы управления в базовой форме и добавлять новые элементы управления. В этом пошаговом руководстве рассматривается создание базовой формы и ее компиляция  в библиотеку классов. После этого данная библиотека классов импортируется в другой проект и создается новая форма, которая наследуется от базовой формы. В этом пошаговом руководстве описаны следующие процедуры.  
  
-   Создание проекта библиотеки классов, содержащей базовую форму.  
  
-   Добавление кнопки со свойствами, которые могут изменяться производными классами базовой формы.  
  
-   Добавление кнопки, которая не может изменяться наследниками базовой формы.  
  
-   Создание проекта, содержащего форму, которая наследуется от `BaseForm`.  
  
 В конечном счете в этом пошаговом руководстве показано различие между частным и защищенным элементами управления в производной форме.  
  
> [!NOTE]
>  Отображаемые диалоговые окна и команды меню могут отличаться от описанных в справке в зависимости от текущих параметров или выпуска. Чтобы изменить параметры, выберите в меню **Сервис** пункт **Импорт и экспорт параметров** . Дополнительные сведения см. в статье [Настройка параметров разработки в Visual Studio](http://msdn.microsoft.com/library/22c4debb-4e31-47a8-8f19-16f328d7dcd3).  
  
> [!CAUTION]
>  Не все элементы управления поддерживают визуальное наследование от базовой формы. Не поддерживают сценарий, описанный в этом пошаговом руководстве, следующие элементы управления:  
>   
>  <xref:System.Windows.Forms.WebBrowser>  
>   
>  <xref:System.Windows.Forms.ToolStrip>  
>   
>  <xref:System.Windows.Forms.ToolStripPanel>  
>   
>  <xref:System.Windows.Forms.TableLayoutPanel>  
>   
>  <xref:System.Windows.Forms.FlowLayoutPanel>  
>   
>  <xref:System.Windows.Forms.DataGridView>  
>   
>  Эти элементы управления в производной форме всегда доступны только для чтения, независимо от используемых модификаторов (`private`, `protected` или `public`).  
  
## <a name="scenario-steps"></a>Шаги сценария  
 Первым шагом является создание базовой формы.  
  
#### <a name="to-create-a-class-library-project-containing-a-base-form"></a>Создание проекта библиотеки классов, содержащей базовую форму  
  
1.  Из **файл** меню, выберите **New**, а затем **проекта** Открытие **новый проект** диалоговое окно.  
  
2.  Создание приложения Windows Forms с именем `BaseFormLibrary`.  
  
3.  Чтобы создать библиотеку классов вместо стандартного приложения Windows Forms, в **обозревателе решений**, щелкните правой кнопкой мыши **BaseFormLibrary** узел проекта, а затем выберите **свойства**.  
  
4.  В свойствах проекта измените **тип вывода** из **приложение Windows** для **библиотеки классов**.  
  
5.  Из **файл** меню, выберите **сохранить все** сохранить проект и файлы в папке по умолчанию.  
  
 Следующие две процедуры выполняют добавление кнопок на базовую форму. Чтобы продемонстрировать визуальное наследование, кнопкам будет заданы разные уровни доступа с помощью свойств `Modifiers`.  
  
#### <a name="to-add-a-button-that-inheritors-of-the-base-form-can-modify"></a>Добавление кнопки, которую могут изменить наследники базовой формы  
  
1.  Откройте **Form1** в конструкторе.  
  
2.  На **все формы Windows Forms** вкладке **элементов**, дважды щелкните **кнопку** Чтобы добавить кнопку в форму. Измените положение и размер кнопки с помощью мыши.  
  
3.  В окне "Свойства" задайте следующие свойства кнопки.  
  
    -   Задать **текст** свойства **Say Hello**.  
  
    -   Задать **(имя)** свойства **btnProtected**.  
  
    -   Задать**модификаторы** свойства **Protected**. Это позволяет формам, производным от **Form1** для изменения свойств **btnProtected**.  
  
4.  Дважды щелкните **Say Hello** кнопку, чтобы добавить обработчик событий для **щелкните** событий.  
  
5.  Добавьте следующий код в обработчик событий:  
  
    ```vb  
    MessageBox.Show("Hello, World!")  
    ```  
  
    ```csharp  
    MessageBox.Show("Hello, World!");  
    ```  
  
#### <a name="to-add-a-button-that-cannot-be-modified-by-inheritors-of-the-base-form"></a>Добавление кнопки, которая не может изменяться наследующими объектами базовой формы  
  
1.  Перейдите в представление конструктора, щелкнув **Form1.vb [Design], Form1.cs [Design] или [Design] Form1.jsl** вкладка редактора кода или нажав клавишу F7.  
  
2.  Добавьте вторую кнопку и задайте ее свойства следующим образом.  
  
    -   Задать **текст** свойства **свидания**.  
  
    -   Задать **(имя)** свойства **btnPrivate**.  
  
    -   Задать **модификаторы** свойства **частного**. Это не позволяет формам, производным от **Form1** для изменения свойств **btnPrivate**.  
  
3.  Дважды щелкните **свидания** кнопку, чтобы добавить обработчик событий для **щелкните** событий. Добавьте следующую строку кода в процедуру обработки события.  
  
    ```vb  
    MessageBox.Show("Goodbye!")  
    ```  
  
    ```csharp  
    MessageBox.Show("Goodbye!");  
    ```  
  
4.  Из **построения** меню, выберите **собрать библиотеку BaseForm** в сборку библиотеки классов.  
  
     После сборки библиотеки можно создать новый проект, наследуемый от только что созданной формы.  
  
#### <a name="to-create-a-project-containing-a-form-that-inherits-from-the-base-form"></a>Создание проекта, содержащего форму, которая наследуется от базовой формы  
  
1.  Из **файл** меню, выберите **добавить** и затем **новый проект** Открытие **Добавление нового проекта** диалоговое окно.  
  
2.  Создание приложения Windows Forms с именем `InheritanceTest`.  
  
#### <a name="to-add-an-inherited-form"></a>Добавление производной формы  
  
1.  В **обозревателе решений**, щелкните правой кнопкой мыши **InheritanceTest** проекта, выберите **добавить**, а затем выберите**новый элемент**.  
  
2.  В **Добавление нового элемента** выберите **Windows Forms** категории (если имеется список категорий) и выберите **производная форма** шаблона.  
  
3.  Оставьте имя по умолчанию `Form2` и нажмите кнопку **добавить**.  
  
4.  В **Выбор компонентов для наследования** выберите **Form1** из **BaseFormLibrary** проект как форма наследование, и нажмите кнопку **ОК** .  
  
     Это создает форму в **InheritanceTest** проект, который является производным от формы в **BaseFormLibrary**.  
  
5.  Откройте производную форму (**Form2**) в конструкторе, дважды щелкнув ее, если он еще не открыт.  
  
     В конструкторе унаследованные кнопки имеют символ (![экрана VisualBasicInheritanceSymbol](../../../../docs/framework/winforms/advanced/media/vbinheritanceglyph.gif "vbInheritanceGlyph")) в верхнем углу, указывающее, они унаследованы.  
  
6.  Выберите **Say Hello** кнопку и понаблюдайте за маркеры изменения размера. Так как данная кнопка защищена, то наследники могут ее перемещать, изменять размер, название и вносить другие изменения.  
  
7.  Выберите частную **свидания** кнопки и обратите внимание, что он не имеет маркеров изменения размера. Кроме того, в **свойства** свойства этой кнопки отображены серым цветом, чтобы указать, их нельзя изменить.  
  
8.  Если вы используете Visual C#:  
  
    1.  В **обозревателе решений**, щелкните правой кнопкой мыши **Form1** в **InheritanceTest** проекта, а затем выберите **удалить**. В появившемся диалоговом окне выберите **ОК** для подтверждения удаления.  
  
    2.  Откройте файл Program.cs и измените строку `Application.Run(new Form1());` на `Application.Run(new Form2());`.  
  
9. В **обозревателе решений**, щелкните правой кнопкой мыши **InheritanceTest** проект и выберите **Назначить запускаемым проектом**.  
  
10. В **обозревателе решений**, щелкните правой кнопкой мыши **InheritanceTest** проект и выберите **свойства**.  
  
11. В **InheritanceTest** страницы свойств, задайте **автоматически запускаемый объект** наследуемую форму (**Form2**).  
  
12. Нажмите клавишу F5 для запуска приложения и понаблюдайте за поведением производной формы.  
  
## <a name="next-steps"></a>Следующие шаги  
 Наследование для пользовательских элементов управления работает таким же образом. Откройте новый проект библиотеки классов и добавьте пользовательский элемент управления. Поместите на него составные элементы управления и скомпилируйте проект. Откройте еще один новый проект библиотеки классов и добавьте ссылку на скомпилированную библиотеку классов. Также попытайтесь добавить наследуемый элемент управления (через **добавить новые элементы** диалоговое окно «») в проект и с помощью **Выбор компонентов для наследования**. Добавьте пользовательский элемент управления и измените `Inherits` (`:` в Visual C#) инструкции. Дополнительные сведения см. в разделе [как: наследование форм Windows Forms](../../../../docs/framework/winforms/advanced/how-to-inherit-windows-forms.md).  
  
## <a name="see-also"></a>См. также  
 [Практическое руководство. Наследование форм Windows Forms](../../../../docs/framework/winforms/advanced/how-to-inherit-windows-forms.md)  
 [Визуальное наследование в Windows Forms](../../../../docs/framework/winforms/advanced/windows-forms-visual-inheritance.md)  
 [Windows Forms](../../../../docs/framework/winforms/index.md)
