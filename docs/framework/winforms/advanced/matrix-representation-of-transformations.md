---
title: "Матричное представление преобразований"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-winforms
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- composite transformations
- transformations [Windows Forms], linear
- matrices
- translations in matrix representation
- transformations [Windows Forms], composite
- vectors
- linear transformations
- transformations [Windows Forms], matrix representation of
- transformations [Windows Forms], translation
- affine transformations
ms.assetid: 0659fe00-9e0c-41c4-9118-016f2404c905
caps.latest.revision: "14"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: c68a79f2a40117a980cb6206b74d42f885874aa8
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/22/2017
---
# <a name="matrix-representation-of-transformations"></a>Матричное представление преобразований
Матрица m n × — это набор чисел, распределенных по строкам m и n столбцам. На следующем рисунке несколько матрицы.  
  
 ![Преобразования](../../../../docs/framework/winforms/advanced/media/aboutgdip05-art04.gif "AboutGdip05_art04")  
  
 Две матрицы одинакового размера можно добавить путем добавления отдельных элементов. Ниже представлены два примера сложения матриц.  
  
 ![Преобразования](../../../../docs/framework/winforms/advanced/media/aboutgdip05-art05.gif "AboutGdip05_art05")  
  
 Матрица m n × можно будет умножено на матрицу n × p и результатом является матрица m × p. Число столбцов в первой матрице должен совпадать с числом строк в матрице второй. Например матрицу 4 × 2 можно будет умножено на 2 × 3 матрицу, чтобы создать матрицу 4 × 3.  
  
 Точки в плоскость и строки и столбцы матрицы могут рассматриваться как векторов. Например (2, 5) является вектор с двумя компонентами и (3, 7, 1) представляет собой вектор, три компонента. Скалярное произведение двух векторов определяется следующим образом:  
  
 (a, b) • (c, d) = ac + bd  
  
 (a, b, c) • (d, e, f) = ad + быть + cf  
  
 Например, скалярное произведение (2, 3) и (5, 4) — (2)(5) + (3)(4) = 22. Скалярное произведение (2, 5, 1) и (4, 3, 1) — (2)(4) + (5)(3) + (1)(1) = 24. Обратите внимание, что скалярное произведение двух векторов номер, а не другой вектор. Также Обратите внимание, можно вычислить скалярное произведение, только если два вектора имеют одинаковое количество компонентов.  
  
 A(i, j) быть запись матрицы A i-ой строки и j-го столбца. Например, A (3, 2) элемент матрицы A в третьей строке и столбце 2-го. Предположим, что A, B и C, матрицы, причем AB = C. Операции C вычисляются следующим образом:  
  
 C (i, j) = (строка i A) • (столбец j B)  
  
 На следующем рисунке показано несколько примеров умножение матриц.  
  
 ![Преобразования](../../../../docs/framework/winforms/advanced/media/aboutgdip05-art06.gif "AboutGdip05_art06")  
  
 Если вы считаете точки на плоскости как матрицу 1 × 2, можно преобразовать эту точку путем его умножения на матрицу размером 2 × 2. На следующем рисунке несколько преобразований, применен к точке (2, 1).  
  
 ![Преобразования](../../../../docs/framework/winforms/advanced/media/aboutgdip05-art07.gif "AboutGdip05_art07")  
  
 Все преобразования, показанные на предыдущем рисунке, линейные преобразования. Некоторые другие преобразования, такие как преобразования, не являются линейными и не может быть выражен как умножение на матрицу размером 2 × 2. Предположим, что нужно начать с точка (2, 1), повернуть на 90 градусов, сдвинуть на 3 единицы по оси x и 4 единицы измерения по оси y. Это можно сделать с помощью выполнения сложения матриц умножения.  
  
 ![Преобразования](../../../../docs/framework/winforms/advanced/media/aboutgdip05-art08.gif "AboutGdip05_art08")  
  
 Линейное преобразование (умножение на матрицу размером 2 × 2) и сдвиг (Добавление матрицы 1 × 2) называется аффинные преобразования. Для хранения всего преобразования в матрицу 3 × 3 является альтернативой заданию аффинного преобразования через пару матриц (одна для линейной) и один для перевода. Чтобы добиться этого, точки плоскости должны храниться в матрице 1 × 3 с фиктивной 3-й координат. Обычно является третью координату равно 1. Например точка (2, 1) представляется матрицей [2 1 1]. На следующем рисунке показан пример аффинного преобразования (поворот на 90 градусов; сдвиг на три единицы по оси x и на 4 единицы по оси y) заданного умножением матрицу 3 × 3.  
  
 ![Преобразования](../../../../docs/framework/winforms/advanced/media/aboutgdip05-art09.gif "AboutGdip05_art09")  
  
 В предыдущем примере точка (2, 1) сопоставляется точка (2, 6). Обратите внимание, что третий столбец матрицы 3 × 3 содержит числа 0, 0, 1. Это всегда будет в случае матрицы 3 × 3 аффинные преобразования. Важные цифры являются шесть чисел в столбцах 1 и 2. В левом верхнем 2 × 2 части матрицы представляет линейную часть преобразования, а первые два числа в третьей строке представляют перевода.  
  
 ![Преобразования](../../../../docs/framework/winforms/advanced/media/aboutgdip05-art10.gif "AboutGdip05_art10")  
  
 В [!INCLUDE[ndptecgdiplus](../../../../includes/ndptecgdiplus-md.md)] можно хранить аффинные преобразования в <xref:System.Drawing.Drawing2D.Matrix> объекта. Поскольку третий столбец матрицы, задающей аффинное преобразование всегда является (0, 0, 1), укажите только шесть чисел в первых двух столбцах при создании <xref:System.Drawing.Drawing2D.Matrix> объекта. Инструкция `Matrix myMatrix = new Matrix(0, 1, -1, 0, 3, 4)` создает матрицу, показанный на предыдущем рисунке.  
  
## <a name="composite-transformations"></a>Составные преобразования  
 Составное преобразование — это последовательность преобразований, одно за другим. Рассмотрим матрицы и преобразования в следующем списке:  
  
|||  
|-|-|  
|Матрицы A|Повернуть на 90 градусов|  
|Матрица B|Масштабирование по с коэффициентом 2 по оси x|  
|Матрица C|Сдвиг на три единицы по оси y|  
  
 Мы начнем с точкой (2, 1), представленный в матрице [2 1 1] — и умножьте, B и затем C, точка (2, 1) будут подвергнуты три преобразования в указанном порядке.  
  
 [2 1 1] ABC = [1-2 5]  
  
 А не хранить три части составного преобразования в три отдельных матрицы, можно умножить A, B и C вместе для получения одного матрицу 3 × 3, которая хранит все составное преобразование. Предположим, что ABC = D. Затем точка, умноженная D дает тот же результат, как точка, умноженное на A, B и C.  
  
 [2 1 1] D = [1-2 5]  
  
 На следующем рисунке показан матрицы A, B, C и D.  
  
 ![Преобразования](../../../../docs/framework/winforms/advanced/media/aboutgdip05-art12.gif "AboutGdip05_art12")  
  
 Тот факт, что матрица составного преобразования может быть создана путем перемножения отдельных матриц преобразования означает, что любая последовательность аффинных преобразований могут храниться в одном <xref:System.Drawing.Drawing2D.Matrix> объекта.  
  
> [!CAUTION]
>  Важен порядок составного преобразования. В общем случае поворот, затем масштабирование, а затем перевод не совпадает как масштабирование, затем поворот, затем сдвиг. Аналогичным образом важен порядок умножения для матрицы. В общем случае ABC не равно BAC.  
  
 <xref:System.Drawing.Drawing2D.Matrix> Класс предоставляет несколько методов для составных преобразований: <xref:System.Drawing.Drawing2D.Matrix.Multiply%2A>, <xref:System.Drawing.Drawing2D.Matrix.Rotate%2A>, <xref:System.Drawing.Drawing2D.Matrix.RotateAt%2A>, <xref:System.Drawing.Drawing2D.Matrix.Scale%2A>, <xref:System.Drawing.Drawing2D.Matrix.Shear%2A>, и <xref:System.Drawing.Drawing2D.Matrix.Translate%2A>. В следующем примере создается матрица составного преобразования, реализующей поворот на 30 градусов, затем масштабирование с коэффициентом 2 по оси y и сдвиг на 5 единиц по оси x:  
  
 [!code-csharp[System.Drawing.CoordinateSystems#11](../../../../samples/snippets/csharp/VS_Snippets_Winforms/System.Drawing.CoordinateSystems/CS/Class1.cs#11)]
 [!code-vb[System.Drawing.CoordinateSystems#11](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/System.Drawing.CoordinateSystems/VB/Class1.vb#11)]  
  
 На следующем рисунке показана матрица.  
  
 ![Преобразования](../../../../docs/framework/winforms/advanced/media/aboutgdip05-art13.gif "AboutGdip05_art13")  
  
## <a name="see-also"></a>См. также  
 [Системы координат и преобразования](../../../../docs/framework/winforms/advanced/coordinate-systems-and-transformations.md)  
 [Использование преобразований в управляемом GDI+](../../../../docs/framework/winforms/advanced/using-transformations-in-managed-gdi.md)
