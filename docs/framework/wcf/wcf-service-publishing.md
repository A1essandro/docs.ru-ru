---
title: "Публикация служб WCF"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: c806b253-cd47-4b96-b831-e73cbf08808f
caps.latest.revision: "22"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: 1dd63ca472ef5ee9211a8a9a1fd19d983694b43f
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2017
---
# <a name="wcf-service-publishing"></a>Публикация служб WCF
Публикация служб [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] помогает в реализации от начальной среды разработки, предоставляемой узлом службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] и тестовым клиентом [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], до фактического развертывания приложения в производственной среде в целях его проверки. Перед тем как вводить итоговый план развертывания можно использовать службу публикации [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] для проверки правильности функционирования службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] и ее готовности к опубликованию. Также, в целях проверки, можно провести развертывание библиотек служб [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] в различных целевых размещениях.  
  
## <a name="supported-services-and-target-locations"></a>Поддерживаемые службы и целевые размещения  
 Служба публикации [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] поддерживает публикацию служб [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], созданных из набора шаблонов библиотек служб [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] и их соответствующих шаблонов элементов, которые включают следующие шаблоны.  
  
-   Шаблон библиотеки службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] с шаблоном элемента.  
  
-   Библиотека служб синдикации.  
  
 Эти шаблоны служб можно найти, выбрав **файл** -> **новый проект** -> **Visual Basic** или **Visual C#**  ->  **WCF**. Другие шаблоны WCF в этом расположении (включая приложение службы рабочего процесса WCF и приложение службы WCF) можно опубликовать с помощью [публикации для веб-приложения одним щелчком](https://msdn.microsoft.com/en-us/library/dd465337\(v=vs.110\).aspx).  
  
 Служба может быть опубликована в следующих целевых расположениях.  
  
-   Локальный веб-сервер IIS.  
  
-   Файловая система.  
  
-   FTP-узел.  
  
## <a name="using-wcf-service-publishing"></a>Использование публикации служб WCF  
 Выполните следующие действия для развертывания реализации службы:  
  
1.  Откройте Visual Studio с повышенными привилегиями (щелкните правой кнопкой мыши исполняемый файл и используйте «Запуск от имени администратора» для запуска).  Если используется IIS версии 7.0 или более поздней версии, убедитесь, что установлен компонент «Совместимость метабазы IIS и IIS6 конфигурации» с использованием «"на или отключение компонентов Windows» на панели управления.  
  
2.  Откройте проект службы, выберите **построения**->**публикации \<имя проекта >** в главном меню или щелкните правой кнопкой мыши проект в **обозревателе решений**и нажмите кнопку **публикации**.  
  
3.  **Публикации** появится окно. Нажмите кнопку **...** . чтобы указать целевое расположение, в котором должна быть развернута служба. Можно выбрать для развертывания приложения на локальном IIS, файловой системы или FTP-сайта. Если развертывание приложения на локальный сервер IIS, можно выбрать веб-сайта и создать веб-приложения, в нем, щелкнув **создать новое веб-приложение** в верхнем правом углу страницы.  
  
4.  После нажатия кнопки **публикации** в главном окне Visual Studio развертывает приложение на указанном целевом расположении и копирует файлы Web.config и SVC-сборки в конечный каталог. . .Svc будет называться «ProjectName.ServiceName.svc»». После публикации службы ссылку на нее можно найти в окне вывода Visual Studio, которое выглядит аналогично «Соединение с гиперссылка «http://localhost/WebApplicationFolderName» http://localhost/WebApplicationFolderName...». Можно щелкнуть ссылку при нажатой клавише CTRL, чтобы открыть страницу браузера в Visual Studio для просмотра структуры каталогов службы.  
  
     Если перейти к узлу не удается, возможно, браузер каталогов в IIS не включен. Следуйте советам из раздела «Что можно попробовать», чтобы включить его. Кроме того, можно непосредственно ввести» гиперссылка «http://localhost/WebApplicationFolderName» http://localhost/WebApplicationFolderName/ProjectName.ServiceName.svc» Чтобы просмотреть страницу службы.  
  
 Можно использовать **публикации** укажите, следует ли копировать сборки, конфигурации и SVC-файла для всех служб, определенных в проекте в целевое расположение и перезаписать существующие файлы в месте назначения.  
  
 При выборе развертывания приложения на локальный сервер IIS могут возникнуть ошибки, связанные с настройкой IIS. Убедитесь, что IIS установлен правильно. Можно ввести «Гиперссылка «http://localhost» http://localhost» в браузере и проверьте, присутствует ли страница IIS по умолчанию.  В некоторых случаях проблемы также могут вызываться неправильной регистрацией ASP.NET или [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] в IIS. Можно открыть командную строку Visual Studio и запустите команду «aspnet_regiis.exe - ir» Чтобы устранить неполадки регистрации ASP.NET или выполните команду «ServiceModelReg.exe – ia», чтобы устранить проблемы регистрации WCF.  
  
## <a name="files-generated-for-publishing"></a>Файлы, созданные для опубликования  
 Перед тем как библиотека службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] может быть размешена на веб-сайте, инструментом создаются следующие службы: файлы сборки, файл Web.config и файл SVC. Все файлы копируются в целевое расположение. После этого выполняется публикация службы.  
  
### <a name="assembly-files"></a>Файлы сборки  
 При публикации службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] с использованием этого средства, сначала служба автоматически собирается, после сборки в проекте службы создаются файлы сборки.  
  
### <a name="svc-file"></a>Файл SVC  
 Операция публикации создает SVC-файл для каждой службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] независимо от того, существует ли он, это гарантирует правильность версии. Существует два различных вида файлов SVC, первый для библиотеки службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] и библиотеки службы синдикации, второй для библиотеки службы последовательного рабочего процесса и библиотеки службы рабочего процесса конечного автомата. Созданный \*SVC-файл копируется в корневую папку в целевом расположении.  
  
### <a name="webconfig-file"></a>Файл Web.config  
 Файл Web.config создается каждый раз при публикации проекта службы в заданное целевое расположение.  
  
 Созданный файл Web.config содержит веб-разделы, которые полезны для размещения на веб-сервере, и содержимое файла App.config для библиотеки службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] со следующими изменениями:  
  
-   Базовый адрес клиента исключен.  
  
-   Параметры в элементе `<diagnostics>` исключены, чтобы сохранить параметры отслеживания целевой платформы.  
  
## <a name="publishing-wcf-services-with-non-http-bindings-to-iis"></a>Публикация служб WCF с привязками, не использующими HTTP, в службах IIS  
 Если используется IIS7.0 или более поздняя версия, службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] можно публиковать на IIS с помощью отличных от HTTP привязок. Потребуется провести некоторые предварительные настройки. Дополнительные сведения см. в разделе статей в [размещение в службе активации процессов Windows](../../../docs/framework/wcf/feature-details/hosting-in-windows-process-activation-service.md).  
  
## <a name="security"></a>Безопасность  
 Публикация в локальный сервер IIS требует наличия прав администратора, так как IIS требует выполнения под учетной записью администратора. Если пользователь без прав администратора откроет службу публикации [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], то узел IIS будет недоступен как целевое расположение. Публикация в файловой системе или FTP-узел не требует прав администратора.  
  
## <a name="see-also"></a>См. также  
 [Шаблоны WCF в Visual Studio](../../../docs/framework/wcf/wcf-vs-templates.md)  
 [Узел службы WCF (WcfSvcHost.exe)](../../../docs/framework/wcf/wcf-service-host-wcfsvchost-exe.md)  
 [Тестовый клиент WCF (WcfTestClient.exe)](../../../docs/framework/wcf/wcf-test-client-wcftestclient-exe.md)
