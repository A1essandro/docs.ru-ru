---
title: "Публикация служб WCF | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
ms.assetid: c806b253-cd47-4b96-b831-e73cbf08808f
caps.latest.revision: 22
author: "Erikre"
ms.author: "erikre"
manager: "erikre"
caps.handback.revision: 17
---
# Публикация служб WCF
Публикация служб [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] помогает в реализации от начальной среды разработки, предоставляемой узлом службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] и тестовым клиентом [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], до фактического развертывания приложения в производственной среде в целях его проверки.  Перед тем как вводить итоговый план развертывания можно использовать службу публикации [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] для проверки правильности функционирования службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] и ее готовности к опубликованию.  Также, в целях проверки, можно провести развертывание библиотек служб [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] в различных целевых размещениях.  
  
## Поддерживаемые службы и целевые размещения  
 Служба публикации [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] поддерживает публикацию служб [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], созданных из набора шаблонов библиотек служб [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] и их соответствующих шаблонов элементов, которые включают следующие шаблоны.  
  
-   Шаблон библиотеки службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] с шаблоном элемента.  
  
-   Шаблон библиотеки службы последовательного рабочего процесса с шаблоном элемента.  
  
-   Шаблон библиотеки службы рабочего процесса конечного автомата с шаблоном элемента.  
  
-   Библиотека служб синдикации.  
  
 Эти шаблоны служб можно найти, выбрав **Файл** \-\> **Новый проект** \-\> **Visual Basic** или **Visual C\#** \-\> **WCF**.  
  
 Служба может быть опубликована в следующих целевых расположениях.  
  
-   Локальный веб\-сервер IIS.  
  
-   Файловая система.  
  
-   FTP\-узел.  
  
-   Удаленный веб\-узел.  
  
## Использование публикации служб WCF  
 Выполните следующие действия для развертывания реализации службы:  
  
1.  Запустите Visual Studio с повышенными привилегиями \(щелкните исполняемый файл и выберите команду «Запуск от имени администратора»\).  Если используется IIS версии 7.0 или выше, убедитесь, что компонент «Совместимость метабазы IIS Metabase и конфигурации IIS6» включен, выбрав раздел «Включение или отключение компонентов Windows» на панели управления.  
  
2.  Откройте проект службы, выберите в главном меню **Построение**\-\>**Публикация \<Имя проекта\>** или щелкните правой кнопкой мыши проект в **Обозревателе решений** и выберите **Публикация**.  
  
3.  Открывается окно **Публикация**.  Нажмите кнопку **…**,  чтобы указать целевое расположение, в котором должна быть развернута служба.  Можно выбрать развертывание приложения в следующих целевых расположениях: локальный веб\-сервер IIS, файловая система, FTP\-узел, удаленный узел.  Если приложение развертывается на локальный сервер IIS, можно выбрать веб\-узел и создать веб\-приложение в нем, щелкнув значок **Создать веб\-приложение** в верхнем правом углу окна.  
  
4.  После нажатия в главном окне кнопки **Публикация** Visual Studio развертывает приложение в указанном целевом расположении и копирует файлы сборки, Web.config и SVC\-файлы в целевой каталог.  .  Файл .svc будет иметь имя «ProjectName.ServiceName.svc».  После успешной публикации службы ссылку на нее можно будет найти в окне вывода Visual Studio, она будет выглядеть примерно следующим образом: «Подключение к http:\/\/localhost\/ИмяПапкиВебПриложения...».  Можно щелкнуть ссылку при нажатой клавише CTRL, чтобы открыть страницу браузера в Visual Studio для просмотра структуры каталогов службы.  
  
     Если перейти к узлу не удается, возможно, браузер каталогов в IIS не включен.  Следуйте советам из раздела «Что можно попробовать», чтобы включить его.  Вместо этого также можно непосредственно ввести адрес «http:\/\/localhost\/ИмяПапкиВебСлужбы\/ИмяПроекта.ИмяСлужбы.svc», чтобы просмотреть страницу службы.  
  
 Можно использовать функцию **Публикация**, чтобы указать, что необходимо копировать файлы сборки, конфигурации и SVC\-файлы для всех служб, определенных в проекте, в целевое расположение и перезаписать существующие в нем файлы.  
  
 При выборе развертывания приложения на локальный сервер IIS могут возникнуть ошибки, связанные с настройкой IIS.  Убедитесь, что IIS установлен правильно.  Можно набрать в браузере адрес «http:\/\/localhost» и проверить, будет ли отображаться страница IIS по умолчанию.  В некоторых случаях проблемы также могут вызываться неправильной регистрацией ASP.NET или [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] в IIS.  Откройте командную строку Visual Studio и выполните команду «aspnet\_regiis.exe \-ir», чтобы устранить неполадки регистрации ASP.NET, или выполните команду «ServiceModelReg.exe –ia», чтобы устранить проблемы регистрации WCF.  
  
## Файлы, созданные для опубликования  
 Перед тем как библиотека службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] может быть размешена на веб\-сайте, инструментом создаются следующие службы: файлы сборки, файл Web.config и файл SVC.  Все файлы копируются в целевое расположение.  После этого выполняется публикация службы.  
  
### Файлы сборки  
 При публикации службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] с использованием этого средства, сначала служба автоматически собирается, после сборки в проекте службы создаются файлы сборки.  
  
### Файл SVC  
 Операция публикации создает SVC\-файл для каждой службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] независимо от того, существует ли он, это гарантирует правильность версии.  Существует два различных вида файлов SVC, первый для библиотеки службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] и библиотеки службы синдикации, второй для библиотеки службы последовательного рабочего процесса и библиотеки службы рабочего процесса конечного автомата.  Созданный SVC\-файл копируется в корневую папку в целевом расположении.  
  
### Файл Web.config  
 Файл Web.config создается каждый раз при публикации проекта службы в заданное целевое расположение.  
  
 Созданный файл Web.config содержит веб\-разделы, которые полезны для размещения на веб\-сервере, и содержимое файла App.config для библиотеки службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] со следующими изменениями:  
  
-   Базовый адрес клиента исключен.  
  
-   Параметры в элементе `<diagnostics>` исключены, чтобы сохранить параметры отслеживания целевой платформы.  
  
## Публикация служб WCF с привязками, не использующими HTTP, в службах IIS  
 Если используется IIS7.0 или более поздняя версия, службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] можно публиковать на IIS с помощью отличных от HTTP привязок.  Потребуется провести некоторые предварительные настройки.  Дополнительные сведения см. в разделах в [Размещение в службе активации процессов Windows](../../../docs/framework/wcf/feature-details/hosting-in-windows-process-activation-service.md).  
  
## Безопасность  
 Публикация в локальный сервер IIS требует наличия прав администратора, так как IIS требует выполнения под учетной записью администратора.  Если пользователь без прав администратора откроет службу публикации [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], то узел IIS будет недоступен как целевое расположение.  Публикация в файловую систему, FTP\-узел или в удаленный веб\-узел не требует прав администратора.  
  
## См. также  
 [Шаблоны WCF в Visual Studio](../../../docs/framework/wcf/wcf-vs-templates.md)   
 [Узел службы WCF \(WcfSvcHost.exe\)](../../../docs/framework/wcf/wcf-service-host-wcfsvchost-exe.md)   
 [Тестовый клиент WCF \(WcfTestClient.exe\)](../../../docs/framework/wcf/wcf-test-client-wcftestclient-exe.md)