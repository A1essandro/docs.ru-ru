---
title: "Тестовый клиент WCF (WcfTestClient.exe) | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
ms.assetid: d4302855-677f-4640-aa90-c5d785d72fb7
caps.latest.revision: 45
author: "Erikre"
ms.author: "erikre"
manager: "erikre"
caps.handback.revision: 45
---
# Тестовый клиент WCF (WcfTestClient.exe)
Тестовый клиент [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] \(WcfTestClient.exe\) представляет собой средство с графическим интерфейсом пользователя, позволяющее вводить тестовые параметры, отправлять их в службу и просматривать ответную реакцию службы.  При совместном использовании с узлом службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] это обеспечивает удобную практику тестирования служб.  
  
 Тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] \(WcfTestClient.exe\) находится в следующей папке: C:\\Program Files\\Microsoft Visual Studio 9.0\\Common7\\IDE\\.  
  
## Сценарии использования тестового клиента  
 В последующих разделах рассматриваются наиболее часто встречающиеся сценарии, в которых можно использовать тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] для упрощения процесса разработки.  
  
### В Visual Studio  
  
#### Узел службы WCF запускает тестового клиента WCF с одной службой  
 После создания нового проекта службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] и нажатия клавиши F5 для запуска отладчика узел службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] становится местом размещения службы из вашего проекта.  Затем открывается тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] и отображается список конечных точек службы, заданных в файле конфигурации.  Можно протестировать эти параметры и запустить службу, и повторять этот процесс для последовательного тестирования и проверки службы.  
  
#### Узел службы WCF запускает тестового клиента WCF с несколькими службами  
 Тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] также можно использовать для отладки проекта, содержащего несколько служб.  При открытии тестового клиента [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] он автоматически выполняет итерацию списка служб, содержащихся в проекте, и открывает их для тестирования.  
  
### Вне Visual Studio  
 Тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] \(WcfTestClient.exe\) также можно вызвать вне Visual Studio для проверки произвольной службы в Интернете.  Инструмент расположен в следующей папке:  
  
 C:\\Program Files\\Microsoft Visual Studio 9.0\\Common7\\IDE\\  
  
 Для использования средства дважды щелкните кнопкой мыши имя файла, чтобы открыть его, или запустите его из командной строки.  
  
 Тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] допускает использование любого числа универсальных кодов ресурса \(URI\) в качестве аргументов командной строки.  Это универсальные коды ресурса служб, которые могут быть проверены.  
  
 `wcfTestClient.exe URI1 URI2 …`  
  
 После открытия окна тестового клиента [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] выберите **Файл**\-\>**Добавить службу** и введите адрес конечной точки службы, которую нужно открыть.  
  
## Пользовательский интерфейс тестового клиента WCF  
 Тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] можно использовать с одной или несколькими службами.  
  
### Операции служб  
 В левой области главного окна тестового клиента [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] отображается список всех доступных служб, а также их конечных точек и операций.  
  
 Если дважды щелкнуть операцию, в правой области внутри новой вкладки с именем операции отображается ее содержимое.  
  
 В левой области также отображается список файлов конфигурации.  Дважды щелкните любой элемент, чтобы открыть в правой области содержимое этого файла в виде нового окна с вкладками.  
  
### Ввод тестовых параметров  
 Для просмотра тестовых параметров дважды щелкните операцию, чтобы открыть ее в правой области.  Параметры по умолчанию показаны в представлении **Форматированные**, и в рамках тестирования службы для них можно вводить произвольные значения.  
  
 Для просмотра текста XML сообщения щелкните **XML**.  Для передачи их в службу нажмите кнопку **Вызвать**.  
  
 Для параметра DataSet нажмите кнопку **...** рядом с кнопкой **Изменить**, чтобы изменить параметр в новом окне, отображающем DataGrid.  Обратите внимание, что появились кнопки **Копировать DataSet** и **Вставить DataSet**.  Если схема объекта DataSet неизвестна при первом изменении, то DataGrid будет пустым.  Необходимо вставить в текущий объект в DataGrid объект DataSet с такой же схемой.  \(Учтите, что перед операцией вставки потребуется скопировать схему из другого места.\) Также можно скопировать объект DataSet для использования в дальнейшем, нажав кнопку **Копировать DataSet**.  
  
 Ответ службы отображается под тестовыми параметрами.  
  
> [!NOTE]
>  Если ожидаемое возвращаемое значение является строкой, результат отображается в виде строки в кавычках, хотя входные значения вводятся без кавычек.  
  
 Если при создании контракта для службы некоторая операция была указана как односторонняя, реакция службы не отображается.  Как только сообщение поступает в очередь на доставку, появляется диалоговое окно с уведомлением, что сообщение успешно отравлено.  
  
### Поддержка сеансов  
 Флажок **Запустить новый прокси** на вкладке операции службы позволяет включить поддержку сеансов.  По умолчанию этот флажок снят.  
  
 После ввода параметров проверки для указанной операции \(или другой операции этой же конечной точки службы\) и неоднократного нажатия кнопки **Вызвать** при неустановленном флажке эти операции совместно используют один прокси и состояние службы сохраняется между несколькими операциями.  
  
 Если флажок **Запустить новый прокси** установлен, то для каждого нажатия кнопки **Вызвать** запускается новый прокси, предыдущий сценарий сеанса завершается и сбрасывается состояние службы.  
  
### Изменение конфигурации клиента  
 В левой области главного окна тестового клиента [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] отображается список файлов конфигурации.  Дважды щелкните любой из этих элементов, чтобы отобразить содержимое файла в правой области.  
  
#### Изменение с помощью редактора конфигурации служб  
 Щелкните правой кнопкой мыши **Файл конфигурации** в левой области и выберите в контекстном меню команду **Открыть в редакторе SvcConfigEditor**.  Открывается редактор конфигурации служб, в который загружено содержимое конфигурации клиента.  В этом средстве конфигурацию можно изменить и сохранить.  
  
 После сохранения файла в редакторе конфигурации служб тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] покажет предупреждающее сообщение об изменении файла внешним приложением и запросит его перезагрузку.  
  
 Если выбрать **Да**, то содержимое конфигурации на вкладке "Client.dll.config" будет изменено в соответствии с изменениями, сделанными в редакторе.  
  
 Если выбрать **Нет**, то содержимое конфигурации на вкладке "Client.dll.config" останется без изменений, а измененное содержимое автоматически сохранится в исходный файл.  
  
#### Восстановление конфигурации по умолчанию  
 Если необходимо отменить все изменения и восстановить конфигурацию клиента по умолчанию, то щелкните правой кнопкой мыши **Файл конфигурации** в левой области и выберите в контекстном меню команду **Восстановить конфигурацию по умолчанию**.  Загружаются значения конфигурации по умолчанию и восстанавливается содержимое вкладки "Client.dll.config".  
  
#### Проверка изменений  
 После загрузки сохраненных изменений в тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] выполняется проверка конфигурации на соответствие схеме [!INCLUDE[indigo2](../../../includes/indigo2-md.md)].  При нахождении ошибок отображается диалоговое окно со сведениями об ошибке.  
  
 При создании прокси, двоичной компиляции или вызове службы команды меню, которые поддерживают изменение \("Изменение...", "Восстановление..." и т. п.\) отключены.  Вызов службы также отключается при загрузке обновленной конфигурации в тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)].  
  
#### Сохранение конфигурация клиента  
 Вкладка **Инструменты**\-\>**Параметры**\-\>**Конфигурация клиента** содержит параметр **Всегда повторно создавать конфигурацию при запуске служб**, который по умолчанию включен.  Этот параметр определяет, что каждый раз при загрузке службы тестовым клиентом [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] он повторно создает файл конфигурации на основе последних версий файла контракта службы и файла App.config.  
  
 Если для службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] отредактирована конфигурация клиента и необходимо всегда использовать этот обновленный файл для отладки службы, то можно выключить параметр **Повторное создание**.  Таким образом, даже при обновлении службы и повторном открытии тестового клиента [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], файл Client.dll.config будет файлом, который был обновлен до этого, а не повторно созданным на основе обновленной службы файл.  
  
 Однако может потребоваться изменение файла конфигурации, чтобы сделать его совместимым с повторно созданным прокси.  Если повторно созданный прокси и файл конфигурации не соответствуют из\-за обновленной службы, то произойдет ошибка при вызове службы.  
  
> [!CAUTION]
>  Если файл конфигурации клиента был изменен и выбран для повторного использования его в будущем, то файл находится в следующем расположении:  
>   
>  \\Documents and Settings\\\[User Account\]\\My Documents\\Test Client Projects.  
>   
>  Все обновленные учетные данные, сохраненные в файле конфигурации клиента, защищены списком управления доступа \(ACL\) этой папки.  
  
### Добавление, удаление и обновление служб  
  
#### Добавление службы  
 Выберите **Файл**\-\>**Добавить службу**, для добавления службы к тестовому клиенту [!INCLUDE[indigo2](../../../includes/indigo2-md.md)].  Далее требуется ввести универсальный код ресурса \(адрес конечной точки\) добавляемой службы.  Адрес службы может быть адресом обмена метаданными \(MEX\) или адресом языка описания веб\-служб \(WSDL\).  
  
 Также можно найти список 10 последних добавленных конечных точек служб в подменю **Последние службы**.  При выборе одной из них указанная служба добавляется в тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)].  
  
 Также можно щелкнуть правой кнопкой мыши корень дерева служб **Мои проекты служб** и выбрать команду **Добавить службу** для получения того же результата.  
  
 При создании прокси, двоичной компиляции или вызове службы, команды меню, которые поддерживают добавление службы отключены.  Вызов службы также отключен.  
  
#### Удаление службы  
 Щелкните правой кнопкой мыши корень службы удаляемой службы и выберите команду **Удалить службу** для удаления службы из тестового клиента [!INCLUDE[indigo2](../../../includes/indigo2-md.md)].  
  
 При создании прокси, двоичной компиляции или вызове службы, команды меню, которые поддерживают удаление службы отключены.  Вызов службы также отключен.  
  
#### Обновление службы  
 Если изменение службы было сделано при запущенном тестовом клиенте [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] и необходимо гарантировать, что реализация тестового клиента [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] для этой службы обновлена, то щелкните правой кнопкой мыши корень службы и выберите команду **Обновить службу**.  Обратите внимание, что после обновления состояние службы сброшено.  
  
 При создании прокси, двоичной компиляции или вызове службы, команды меню, которые поддерживают обновление службы отключены.  Вызов службы также отключен.  
  
## Расположение файлов, созданных тестовым клиентом.  
 По умолчанию тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] сохраняет созданный код клиента и файлы конфигурации в папке "%appdata%\\Local\\temp\\Test Client Projects".  Эта папка удаляется после выхода тестового клиента [!INCLUDE[indigo2](../../../includes/indigo2-md.md)].  Если файл конфигурации изменен в тестовом клиенте [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] и отключен параметр **Всегда повторно создавать конфигурацию при запуске служб**, то измененный файл копируется в папку Cached Config в "My Documents\\Test Client Projects Documents\\Test Client Projects" с XML\-файлом сопоставления \(адрес\-метаданных\-имя\-файла\) в качестве индекса.  
  
 Тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] также можно запустить в командной строке, используя переключатель `/ProjectPath` в качестве указателя пути сохранения создаваемых файлов, или используя переключатель `/RestoreProjectPath` для восстановления расположения по умолчанию.  Синтаксис выглядит следующим образом:  
  
 `wcfTestClient.exe /ProjectPath [desired location]`  
  
 Запуск этой команды не открывает тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)].  Изменяется только расположение папок.  Эту команду можно выполнять независимо от того, запущен ли тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)].  Новое расположение применяется при повторном запуске тестового клиента [!INCLUDE[indigo2](../../../includes/indigo2-md.md)].  Сведения о расположении могут быть сохранены в реестре или в файле WcfTestClient.exe.option в папке "%appdata%\\Local\\temp\\Test Client Projects".  
  
## Возможности, поддерживаемые тестовым клиентом WCF  
 Ниже приведен список возможностей, которые поддерживаются тестовым клиентом [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]:  
  
-   Вызов службы: запрос\/ответ и одностороннее сообщение.  
  
-   Привязки: все привязки, поддерживаемые программой Svcutil.exe.  
  
-   Управление сеансом.  
  
-   Контракт сообщения.  
  
-   XML\-сериализация.  
  
 Ниже приведен список возможностей, не поддерживаемых тестовым клиентом [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]:  
  
-   Типы: <xref:System.IO.Stream>, <xref:System.ServiceModel.Channels.Message>, <xref:System.Xml.XmlElement>, <xref:System.Xml.XmlAttribute>, <xref:System.Xml.XmlNode>, типы, в которых реализован интерфейс <xref:System.Xml.Serialization.IXmlSerializable>, включая связанный атрибут <xref:System.Xml.Serialization.XmlSchemaProviderAttribute>, а также типы <xref:System.Xml.Linq.XDocument> и <xref:System.Xml.Linq.XElement> и тип ADO.NET <xref:System.Data.DataTable>.  
  
-   Дуплексный контракт.  
  
-   Транзакция.  
  
-   Безопасность: [!INCLUDE[infocard](../../../includes/infocard-md.md)], сертификат, имя пользователя\/пароль.  
  
-   Привязки: WSFederationbinding, любые контекстные привязки, привязка Https, WebHttpbinding \(поддержка ответных сообщений Json\).  
  
## Закрытие тестового клиента WCF  
 Тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] можно закрыть следующими способами.  
  
-   В меню **Файл** выберите пункт **Выход**.  Можно также нажать в главном окне тестового клиента [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] кнопку **Закрыть**.  При выполнении любого из этих действий также завершается работа средства Service Auto Host [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] и останавливается процесс отладки [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)], если тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] был запущен [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)].  
  
-   Щелкните правой кнопкой мыши значок **Узел службы WCF** в области уведомлений, и выберите пункт **Выход**. При этом завершается работа средства Service Auto Host [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] и тестового клиента [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], а также останавливается процесс отладки [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)].  
  
## См. также  
 [Узел службы WCF \(WcfSvcHost.exe\)](../../../docs/framework/wcf/wcf-service-host-wcfsvchost-exe.md)