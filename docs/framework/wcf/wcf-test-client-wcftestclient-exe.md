---
title: "Тестовый клиент WCF (WcfTestClient.exe)"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: d4302855-677f-4640-aa90-c5d785d72fb7
caps.latest.revision: "45"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 28098a4e598d1c3bede3b05e3afe1001c3944d42
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/22/2017
---
# <a name="wcf-test-client-wcftestclientexe"></a>Тестовый клиент WCF (WcfTestClient.exe)
Тестовый клиент [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] (WcfTestClient.exe) представляет собой средство с графическим интерфейсом пользователя, позволяющее вводить тестовые параметры, отправлять их в службу и просматривать ответную реакцию службы. При совместном использовании с узлом службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] это обеспечивает удобную практику тестирования служб.  
  
 Тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] (WcfTestClient.exe) находится в следующей папке: C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\.  
  
## <a name="scenarios-for-using-test-client"></a>Сценарии использования тестового клиента  
 В последующих разделах рассматриваются наиболее часто встречающиеся сценарии, в которых можно использовать тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] для упрощения процесса разработки.  
  
### <a name="inside-visual-studio"></a>В Visual Studio  
  
#### <a name="wcf-service-host-starts-wcf-test-client-with-a-single-service"></a>Узел службы WCF запускает тестового клиента WCF с одной службой  
 После создания нового проекта службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] и нажатия клавиши F5 для запуска отладчика узел службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] становится местом размещения службы из вашего проекта. Затем открывается тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] и отображается список конечных точек службы, заданных в файле конфигурации. Можно протестировать эти параметры и запустить службу, и повторять этот процесс для последовательного тестирования и проверки службы.  
  
#### <a name="wcf-service-host-starts-wcf-test-client-with-multiple-services"></a>Узел службы WCF запускает тестового клиента WCF с несколькими службами  
 Тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] также можно использовать для отладки проекта, содержащего несколько служб. При открытии тестового клиента [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] он автоматически выполняет итерацию списка служб, содержащихся в проекте, и открывает их для тестирования.  
  
### <a name="outside-visual-studio"></a>Вне Visual Studio  
 Тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] (WcfTestClient.exe) также можно вызвать вне Visual Studio для проверки произвольной службы в Интернете. Инструмент расположен в следующей папке:  
  
 C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\  
  
 Для использования средства дважды щелкните кнопкой мыши имя файла, чтобы открыть его, или запустите его из командной строки.  
  
 Тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] допускает использование любого числа универсальных кодов ресурса (URI) в качестве аргументов командной строки.  Это универсальные коды ресурса служб, которые могут быть проверены.  
  
 `wcfTestClient.exe URI1 URI2 …`  
  
 После [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] открытия окна тестового клиента, щелкните **файл**->**добавить службу**и введите адрес конечной точки службы, которую требуется открыть.  
  
## <a name="wcf-test-client-user-interface"></a>Пользовательский интерфейс тестового клиента WCF  
 Тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] можно использовать с одной или несколькими службами.  
  
### <a name="service-operations"></a>Операции служб  
 В левой области главного окна тестового клиента [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] отображается список всех доступных служб, а также их конечных точек и операций.  
  
 Если дважды щелкнуть операцию, в правой области внутри новой вкладки с именем операции отображается ее содержимое.  
  
 В левой области также отображается список файлов конфигурации. Дважды щелкните любой элемент, чтобы открыть в правой области содержимое этого файла в виде нового окна с вкладками.  
  
### <a name="entering-test-parameters"></a>Ввод тестовых параметров  
 Для просмотра тестовых параметров дважды щелкните операцию, чтобы открыть ее в правой области. Параметры показаны в **форматированный** представление по умолчанию, и можно вводить произвольные значения для параметров для проверки службы.  
  
 Для просмотра текста XML сообщения щелкните **XML**. Чтобы отправить их в службу, щелкните **Invoke**.  
  
 Параметр набора данных, щелкните **...** рядом с **изменить...** Чтобы изменить его в новом окне, отображающем DataGrid. Обратите внимание, внешний вид **Копировать DataSet** и **вставить DataSet** кнопки. Если схема объекта DataSet неизвестна при первом изменении, то DataGrid будет пустым. Необходимо вставить в текущий объект в DataGrid объект DataSet с такой же схемой. (Учтите, что перед операцией вставки потребуется скопировать схему из другого места.) Можно также скопировать объект Dataset для использования в дальнейшем, нажав кнопку **Копировать DataSet** кнопки.  
  
 Ответ службы отображается под тестовыми параметрами.  
  
> [!NOTE]
>  Если ожидаемое возвращаемое значение является строкой, результат отображается в виде строки в кавычках, хотя входные значения вводятся без кавычек.  
  
 Если при создании контракта для службы некоторая операция была указана как односторонняя, реакция службы не отображается. Как только сообщение поступает в очередь на доставку, появляется диалоговое окно с уведомлением, что сообщение успешно отравлено.  
  
### <a name="session-support"></a>Поддержка сеансов  
 **Запустить новый прокси** флажок на вкладке операции службы позволяет включить поддержку сеансов. По умолчанию этот флажок снят.  
  
 Введите параметры тестирования для конкретной операции (или другой операции в одной и той же конечной точке службы) при нажатии **Invoke** несколько раз с флажок снят, эти операции совместно используют один прокси-сервера и служба находится в состоянии сохраняются между несколькими операциями.  
  
 Если **запустить новый прокси** флажок установлен, то запускается новый прокси-сервер, для каждого **Invoke**, предыдущий сценарий сеанса завершается и сбрасывается состояние службы.  
  
### <a name="editing-client-configuration"></a>Изменение конфигурации клиента  
 В левой области главного окна тестового клиента [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] отображается список файлов конфигурации. Дважды щелкните любой из этих элементов, чтобы отобразить содержимое файла в правой области.  
  
#### <a name="edit-with-service-configuration-editor"></a>Изменение с помощью редактора конфигурации служб  
 Щелкните правой кнопкой мыши **файла конфигурации** в левой панели и выберите в контекстном меню **изменить с помощью SvcConfigEditor**. Открывается редактор конфигурации служб, в который загружено содержимое конфигурации клиента. В этом средстве конфигурацию можно изменить и сохранить.  
  
 После сохранения файла в редакторе конфигурации служб тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] покажет предупреждающее сообщение об изменении файла внешним приложением и запросит его перезагрузку.  
  
 При выборе **Да**, то содержимое конфигурации на вкладке «Client.dll.config» отражает изменения, внесенные в редакторе.  
  
 При выборе **нет**, то содержимое конфигурации на вкладке «Client.dll.config» остается неизменным, и измененное содержимое автоматически сохраняется в исходный файл.  
  
#### <a name="restore-to-default-configuration"></a>Восстановление конфигурации по умолчанию  
 Если вы хотите отменить все изменения и восстановить конфигурацию по умолчанию клиент, щелкните правой кнопкой мыши **файла конфигурации** в левой панели и выберите в контекстном меню **восстановить конфигурацию по умолчанию**. Загружаются значения конфигурации по умолчанию и восстанавливается содержимое вкладки «Client.dll.config».  
  
#### <a name="validate-changes"></a>Проверка изменений  
 После загрузки сохраненных изменений в тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] выполняется проверка конфигурации на соответствие схеме [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]. При нахождении ошибок отображается диалоговое окно со сведениями об ошибке.  
  
 Во время создания прокси, двоичной компиляции или вызове службы команды меню, которые поддерживают изменение (то есть «Изменить...», «Восстановление...» и т. д) отключены. Вызов службы также отключается при загрузке обновленной конфигурации в тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)].  
  
#### <a name="persist-client-configuration"></a>Сохранение конфигурация клиента  
 **Средства**->**параметры**->**конфигурация клиента** вкладка содержит **всегда повторно создать конфигурацию при запуске Службы** параметр, который включен по умолчанию. Этот параметр определяет, что каждый раз при загрузке службы тестовым клиентом [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] он повторно создает файл конфигурации на основе последних версий файла контракта службы и файла App.config.  
  
 Если вы изменили конфигурацию клиента для вашей [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] служба и необходимо всегда использовать этот обновленный файл для отладки службы, можно снять флажок **повторно создать** параметр. Таким образом, даже при обновлении службы и повторном открытии тестового клиента [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], файл Client.dll.config будет файлом, который был обновлен до этого, а не повторно созданным на основе обновленной службы файл.  
  
 Однако может потребоваться изменение файла конфигурации, чтобы сделать его совместимым с повторно созданным прокси. Если повторно созданный прокси и файл конфигурации не соответствуют из-за обновленной службы, то произойдет ошибка при вызове службы.  
  
> [!CAUTION]
>  Если файл конфигурации клиента был изменен и выбран для повторного использования его в будущем, то файл находится в следующем расположении:  
>   
>  \Documents and Settings\\[учетная запись пользователя] \My Documents\Test клиентских проектов.  
>   
>  Все обновленные учетные данные, сохраненные в файле конфигурации клиента, защищены списком управления доступа (ACL) этой папки.  
  
### <a name="adding-removing-and-refreshing-services"></a>Добавление, удаление и обновление служб  
  
#### <a name="add-service"></a>Добавление службы  
 Нажмите кнопку **файл**->**добавить службу** для добавления службы к [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] тестовый клиент. Далее требуется ввести универсальный код ресурса (адрес конечной точки) добавляемой службы. Адрес службы может быть адресом обмена метаданными (MEX) или адресом языка описания веб-служб (WSDL).  
  
 Также можно найти список конечных точек 10 недавно добавленных служб в **последние службы** подменю. При выборе одной из них указанная служба добавляется в тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)].  
  
 Щелкните правой кнопкой мыши корень дерева служб **Мои проекты служб**и выберите **добавить службу** для достижения такого же результата.  
  
 При создании прокси, двоичной компиляции или вызове службы, команды меню, которые поддерживают добавление службы отключены. Вызов службы также отключен.  
  
#### <a name="remove-service"></a>Удаление службы  
 Щелкните правой кнопкой мыши корень службы, службы, которую необходимо удалить и выберите **удаление службы** для удаления службы из [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] тестовый клиент.  
  
 При создании прокси, двоичной компиляции или вызове службы, команды меню, которые поддерживают удаление службы отключены. Вызов службы также отключен.  
  
#### <a name="refresh-service"></a>Обновление службы  
 При внесении изменений в службу при [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] тестовый клиент работает и вы хотите убедиться, что [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] актуален реализация тестового клиента для этой службы, щелкните правой кнопкой мыши корень службы, службы, а затем выберите **обновления Служба**. Обратите внимание, что после обновления состояние службы сброшено.  
  
 При создании прокси, двоичной компиляции или вызове службы, команды меню, которые поддерживают обновление службы отключены. Вызов службы также отключен.  
  
## <a name="location-of-files-generated-by-the-test-client"></a>Расположение файлов, созданных тестовым клиентом.  
 По умолчанию [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] тестовый клиент сохраняет созданный код клиента и конфигурации файлы в папке «%appdata%\Local\temp\Test Client Projects». Эта папка удаляется после выхода тестового клиента [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]. Если изменить файл конфигурации в [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] тестового клиента и **всегда повторно создавать конфигурацию при запуске служб** недоступен, то измененный файл копируется в папку «Cached Config» в группе «My Documents\Test Клиент Projects Documents\Test Client Projects» с XML-файла сопоставления (адрес метаданных к файл имя) как индекс.  
  
 Тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] также можно запустить в командной строке, используя переключатель `/ProjectPath` в качестве указателя пути сохранения создаваемых файлов, или используя переключатель `/RestoreProjectPath` для восстановления расположения по умолчанию. Синтаксис выглядит следующим образом:  
  
 `wcfTestClient.exe /ProjectPath [desired location]`  
  
 Запуск этой команды не открывает тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]. Изменяется только расположение папок. Эту команду можно выполнять независимо от того, запущен ли тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]. Новое расположение применяется при повторном запуске тестового клиента [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]. Сведения о расположении можно сохранить в реестре или в файле WcfTestClient.exe.option в папке «%appdata%\Local\temp\Test Client Projects».  
  
## <a name="features-supported-by-wcf-test-client"></a>Возможности, поддерживаемые тестовым клиентом WCF  
 Ниже приведен список возможностей, которые поддерживаются тестовым клиентом [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]:  
  
-   Вызов службы: запрос/ответ и одностороннее сообщение.  
  
-   Привязки: все привязки, поддерживаемые программой Svcutil.exe.  
  
-   Управление сеансом.  
  
-   Контракт сообщения.  
  
-   XML-сериализация.  
  
 Ниже приведен список возможностей, не поддерживаемых тестовым клиентом [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]:  
  
-   Типы: <xref:System.IO.Stream>, <xref:System.ServiceModel.Channels.Message>, <xref:System.Xml.XmlElement>, <xref:System.Xml.XmlAttribute>, <xref:System.Xml.XmlNode>, типы, в которых реализован интерфейс <xref:System.Xml.Serialization.IXmlSerializable>, включая связанный атрибут <xref:System.Xml.Serialization.XmlSchemaProviderAttribute>, а также типы <xref:System.Xml.Linq.XDocument> и <xref:System.Xml.Linq.XElement> и тип ADO.NET <xref:System.Data.DataTable>.  
  
-   Дуплексный контракт.  
  
-   Транзакция.  
  
-   Безопасность: [!INCLUDE[infocard](../../../includes/infocard-md.md)], сертификат, имя пользователя/пароль.  
  
-   Привязки: WSFederationbinding, любые контекстные привязки, привязка Https, WebHttpbinding (поддержка ответных сообщений Json).  
  
## <a name="closing-wcf-test-client"></a>Закрытие тестового клиента WCF  
 Тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] можно закрыть следующими способами.  
  
-   На **файл** меню, нажмите кнопку **выхода**. Кроме того, в [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] главного окна тестового клиента, щелкните **закрыть**. При выполнении любого из этих действий также завершается работа средства Service Auto Host [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] и останавливается процесс отладки [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)], если тестовый клиент [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] был запущен [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)].  
  
-   Щелкните правой кнопкой мыши **узел службы WCF** значок в области уведомлений, а затем выберите **выхода.** При этом завершается работа средства Service Auto Host [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] и тестового клиента [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], а также останавливается процесс отладки [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)].  
  
## <a name="see-also"></a>См. также  
 [Узел службы WCF (WcfSvcHost.exe)](../../../docs/framework/wcf/wcf-service-host-wcfsvchost-exe.md)
