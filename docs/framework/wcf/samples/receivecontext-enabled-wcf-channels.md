---
title: "Каналы WCF с поддержкой ReceiveContext | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework-4.6"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
ms.assetid: d990d119-7321-4b8c-852b-10256f59f9b0
caps.latest.revision: 10
author: "Erikre"
ms.author: "erikre"
manager: "erikre"
caps.handback.revision: 10
---
# Каналы WCF с поддержкой ReceiveContext
Данный образец демонстрирует применение каналов WCF с поддержкой <xref:System.ServiceModel.Channels.ReceiveContext>.  Образец реализует службу для нахождения произведения двух чисел с помощью канала NetMSMQ.  
  
 Класс <xref:System.ServiceModel.Channels.ReceiveContext> позволяет приложению решить, обратиться ли к сообщению или оставить его в очереди для дальнейшей обработки, даже если содержимое сообщения уже было проверено.  В данном образце клиент отправляет в транзакционную очередь случайные числа.  Служба `ProductCalculator` получает сообщения, анализирует их содержимое \(целые числа\) и определяет, можно ли вычислить произведение.  Если операция службы не вычисляет произведение, сообщение отправляется обратно в очередь и может быть получено вновь службой, прослушивающей очередь.  
  
> [!IMPORTANT]
>  Образцы уже могут быть установлены на компьютере.  Перед продолжением проверьте следующий каталог \(по умолчанию\).  
>   
>  `<диск_установки>:\WF_WCF_Samples`  
>   
>  Если этот каталог не существует, перейдите на страницу [Образцы Windows Communication Foundation \(WCF\) и Windows Workflow Foundation \(WF\) для .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780), чтобы загрузить все образцы [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] и [!INCLUDE[wf1](../../../../includes/wf1-md.md)].  Этот образец находится в следующем каталоге:  
>   
>  `<диск_установки>:\WF_WCF_Samples\WCF\Basic\Binding\Net\MSMQ\ReceiveContextProductGenerator`  
  
#### Использование этого образца  
  
1.  Убедитесь, что установлена служба очередей сообщений \(Майкрософт\) \(MSMQ\).  
  
    1.  Установка службы MSMQ под управлением [!INCLUDE[lserver](../../../../includes/lserver-md.md)].  
  
        1.  Выберите в **Диспетчере сервера** пункт **Функции**.  
  
        2.  В правой области под пунктом **Сводка функций** выберите **Добавить функции**.  
  
        3.  Разверните в появившемся окне **Очередь сообщений** .  
  
        4.  Разверните **Службы очереди сообщений**.  
  
        5.  Выберите **Интеграция со службами каталогов** \(для компьютеров, подключенных к домену\), затем выберите **Поддержка HTTP**.  
  
        6.  Нажмите кнопку **Далее**, затем нажмите кнопку **Установить**.  
  
    2.  Установка службы MSMQ под управлением [!INCLUDE[wv](../../../../includes/wv-md.md)].  
  
        1.  Откройте **панель управления**.  
  
        2.  Щелкните **Программы** и затем в разделе **Программы и функции** щелкните **Включить и выключить функции Windows**.  
  
        3.  Разверните узел **Сервер службы очередей сообщений Windows \(MSMQ\)**, разверните узел **Базовые функции сервера службы очередей сообщенийMicrosoft \(MSMQ\)** и установите флажки рядом со следующими устанавливаемыми функциями службы очередей сообщений.  
  
            -   Сервер службы очередей сообщений  
  
            -   Интеграция со службами доменов MSMQ Active Directory \(для компьютеров, подключенных к домену\)  
  
            -   Поддержка MSMQ HTTP  
  
        4.  Нажмите кнопку **ОК**.  
  
        5.  При появлении запроса на перезагрузку компьютера нажмите кнопку **ОК** для завершения установки.  
  
2.  Убедитесь, что на компьютере установлена среда [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)].  
  
3.  Откройте в среде [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] файл решения ReceiveContextProductGenerator.sln.  
  
4.  Для построения решения нажмите CTRL\+SHIFT\+B.  
  
5.  Чтобы запустить решение, нажмите клавиши CTRL\+F5.