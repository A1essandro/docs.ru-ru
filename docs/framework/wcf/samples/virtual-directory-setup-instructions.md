---
title: "Инструкции по настройке виртуальных каталогов | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework-4.6"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "VB"
  - "CSharp"
ms.assetid: 3c62cab5-81a4-48b6-ac8c-9ce33a85a157
caps.latest.revision: 36
author: "Erikre"
ms.author: "erikre"
manager: "erikre"
caps.handback.revision: 36
---
# Инструкции по настройке виртуальных каталогов
В образцах [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] используется общий виртуальный каталог с именем servicemodelsamples, сопоставленный с папкой %SystemDrive%\\inetpub\\wwwroot\\servicemodelsamples.  
  
> [!NOTE]
>  Переменная %SystemDrive% обычно имеет значение C: или D: в зависимости от того, на каком диске установлены службы IIS.  
  
 Можно запустить файлы Setupvroot.bat и Cleanupvroot.bat из раздела [Процедура однократной настройки образцов Windows Communication Foundation](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md), чтобы создать виртуальный каталог.Если требуется создать виртуальный каталог вручную, воспользуйтесь следующими процедурами.  
  
## Процедуры  
  
#### Создание виртуального каталога в IIS 7.0 и 7.5  
  
1.  В меню **Пуск** выберите пункт **Выполнить** и введите команду **inetmgr**, чтобы открыть оснастку консоли управления \(MMC\) IIS.  
  
2.  В левой области разверните узел с именем компьютера и выберите узел **Узлы**.  
  
3.  Щелкните правой кнопкой мыши **Веб\-узел по умолчанию**, затем выберите команду **Добавить приложение**, чтобы открыть окно **Добавление приложения**.  
  
4.  В окне введите в качестве псевдонима создаваемого виртуального каталога значение `servicemodelsamples`.  
  
5.  Создайте следующий каталог: %SystemDrive%\\inetpub\\wwwroot\\servicemodelsamples  
  
6.  Укажите путь к физическому каталогу %SystemDrive%\\inetpub\\wwwroot\\servicemodelsamples.Большинство образцов WCF при построении копируют исполняемые файлы службы именно в этот каталог.  
  
7.  Нажмите кнопку **ОК**.Веб\-приложение для образцов WCF создано.  
  
    > [!NOTE]
    >  Эта задача должна быть выполнена всего один раз, поскольку все образцы [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] используют одно и то же веб\-приложение servicemodelsamples.  
  
    > [!NOTE]
    >  В этой документации термины `virtual directory` и `Web application` являются синонимами.  
  
     Помимо создания виртуального каталога необходимо также задать его свойства, чтобы включить выполняемые службы [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].Дополнительные сведения см. далее.  
  
#### Создание виртуального каталога в IIS 5.1 и 6.0  
  
1.  Откройте окно командной строки и введите команду `start inetmgr`, чтобы открыть оснастку консоли управления \(MMC\) IIS.  
  
2.  В левой области разверните узел с именем компьютера и выберите узел **Веб\-узлы**.  
  
3.  Щелкните правой кнопкой мыши **Веб\-узел по умолчанию**, выберите **Создать, Виртуальный каталог**, чтобы открыть мастер создания виртуальных каталогов.  
  
4.  В мастере введите в качестве псевдонима создаваемого виртуального каталога значение `servicemodelsamples`.  
  
5.  Укажите путь к каталогу %SystemDrive%\\inetpub\\wwwroot\\servicemodelsamples.Большинство образцов [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] при построении копируют исполняемые файлы службы именно в этот каталог.  
  
6.  Нажмите кнопку **Далее**.  
  
7.  По умолчанию устанавливаются следующие флажки:  
  
    -   **Чтение**  
  
    -   **Запуск скриптов \(например, ASP\)**  
  
8.  Нажмите кнопку **Далее**, а затем кнопку **Готово**, чтобы закрыть мастер.  
  
    > [!NOTE]
    >  Эта задача должна быть выполнена всего один раз, поскольку все образцы [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] используют один и тот же виртуальный каталог servicemodelsamples.  
  
#### Задание дополнительных свойств виртуального каталога в IIS 7.0 и 7.5  
  
1.  Щелкните узел servicemodelsamples.В нижней части окна будет указано два представления.Выберите узел **Просмотр возможностей**, если он еще не выбран.  
  
2.  Дважды щелкните запись **Просмотр каталога**.  
  
3.  В области действий выберите параметр **Включить**.Это позволит обращаться к каталогу каталога с помощью веб\-обозревателя Internet Explorer, что упростит отладку службы.  
  
 Наконец необходимо задать свойства безопасности папки servicemodelsamples, чтобы другие пользователи могли получать доступ к ней.Дополнительные сведения см. далее.  
  
#### Задание дополнительных свойств виртуального каталога в IIS 5.1 и 6.0  
  
1.  Щелкните правой кнопкой мыши узел servicemodelsamples, затем выберите пункт **Свойства**.  
  
2.  По умолчанию устанавливаются следующие флажки:  
  
    -   **Чтение**  
  
    -   **Запись в журнал**  
  
    -   **Индексация каталога**  
  
3.  Установите флажок **Просмотр каталога**.Это позволит обращаться к каталогу каталога с помощью веб\-обозревателя Internet Explorer, что упростит отладку службы.  
  
#### Задание свойств безопасности папки в IIS 7.0 и 7.5  
  
1.  Перейдите к каталогу %SystemDrive%\\inetpub\\wwwroot\\servicemodelsamples.  
  
2.  Щелкните правой кнопкой мыши папку servicemodelsamples и выберите пункт **Общий доступ** или **Общий доступ к**.  
  
3.  Нажмите стрелку вниз слева от кнопки **Добавить**.  
  
4.  Выберите пункт **Найти**.Откроется окно **Выбор пользователей и групп**.  
  
5.  Нажмите кнопку **Дополнительно**.  
  
6.  Выберите пункт **Расположения**.Откроется окно **Размещение**.  
  
7.  Выберите запись, соответствующую используемому компьютеру.Важно выбрать локальный компьютер, а не запись, соответствующую всем перечисленным доменам и сетям.Выбрав компьютер, нажмите кнопку **ОК**.  
  
8.  Нажмите кнопку **Найти**.В результатах поиска появятся объекты, связанные с локальным компьютером.  
  
9. Найдите запись **IIS\_IUSRS** в столбце **Имя \(относительное отличительное имя\)**.Выберите эту запись и нажмите кнопку **ОК**, чтобы закрыть окно результатов поиска.  
  
10. Нажмите кнопку **ОК**, чтобы закрыть окно **Выбор пользователей и групп**.  
  
11. Щелкните **Общий доступ**, чтобы сохранить изменения.  
  
12. После включения общего доступа нажмите кнопку **Готово**, чтобы закрыть окно **Общий доступ к файлу**.  
  
#### Задание свойств безопасности папки в IIS 5.1 и 6.0  
  
1.  Перейдите к каталогу %SystemDrive%\\inetpub\\wwwroot\\servicemodelsamples.  
  
2.  Щелкните правой кнопкой мыши папку **servicemodelsamples**, затем выберите пункт **Общий доступ и безопасность**.  
  
3.  Перейдите на вкладку **Безопасность**.  
  
4.  Если используется версия IIS 6.0, убедитесь, что в поле **Группы или пользователи** имеется запись **Гостевая учетная запись Интернета**.  
  
     Если эта учетная запись отсутствует, выполните следующие действия.  
  
    1.  Нажмите кнопку **Пуск**, затем щелкните пункт **Панель управления**.  
  
    2.  Если значок **Учетные записи пользователей** отсутствует, щелкните **Переключение к виду по категориям**.  
  
    3.  Щелкните значок **Учетные записи пользователей**.  
  
    4.  В разделе "или выберите значок панели управления" щелкните **Учетные записи пользователей**.  
  
    5.  В диалоговом окне **Учетные записи пользователей** перейдите на вкладку **Дополнительно**.  
  
    6.  Нажмите кнопку **Дополнительно**.  
  
    7.  В диалоговом окне **Локальные пользователи и группы** разверните папку **Пользователи**.  
  
    8.  В правой области дважды щелкните элемент **Гостевая учетная запись Интернета**.  
  
    9. В диалоговом окне **Свойства** скопируйте имя, которое используется в качестве гостевой учетной записи Интернета.По умолчанию имя состоит из префикса «USR\_» и имени компьютера.  
  
    10. Закройте диалоговое окно **Свойства**.  
  
    11. Закройте диалоговое окно **Локальные пользователи и группы**.  
  
    12. Закройте диалоговое окно **Учетные записи пользователей**.  
  
    13. Закройте другое диалоговое окно **Учетные записи пользователей**.  
  
    14. В диалоговом окне **Свойства servicemodelsamples** на вкладке **Безопасность** нажмите кнопку **Добавить**.  
  
    15. Введите имя компьютера, после которого добавьте обратную косую черту и вставьте имя учетной записи пользователя Интернета, например myMachineName\\%InternetGuestAccountName%.  
  
    16. Нажмите кнопку **Проверить имена**, чтобы проверить добавленное имя.Если оно допустимо, то будет выделено подчеркиванием и прописными буквами.  
  
5.  Если используется версия IIS 6.0, проверьте, что в поле **Группы и пользователи** указана учетная запись NETWORK SERVICE.  
  
     Если учетная запись NETWORK SERVICE отсутствует, выполните следующие действия.  
  
    1.  Нажмите кнопку **Добавить**.  
  
    2.  В диалоговом окне **Выбор пользователей или групп** введите имя компьютера, добавив после него обратную косую черту.  
  
    3.  Введите после обратной косой черты service \(без пробела\).  
  
    4.  Нажмите кнопку **Проверить имена**.  
  
    5.  Если будет найдено несколько имен, выберите имя **NETWORK SERVICE** и нажмите кнопку **ОК**.  
  
    6.  Нажмите кнопку **ОК**, чтобы закрыть диалоговое окно **Выбор пользователей и групп**.  
  
6.  Если используется Windows XP с пакетом обновления 2 \(SP2\) и IIS 5.1, проверьте что в поле **Группы и пользователи** указаны гостевая учетная запись Интернета и ASPNET.  
  
     Обратите внимание, что пользователь ASPNET может быть членом встроенной группы безопасности **Пользователи**.В этом случае группа **Пользователи** будет указана в данном диалоговом окне, и добавлять пользователя в качестве отдельного элемента списка разрешенных пользователей не требуется.  
  
     Чтобы проверить, что ASPNET входит в группу безопасности **Пользователи**, выполните следующие действия.  
  
    1.  В меню **Пуск** выберите пункт **Панель управления**.  
  
    2.  Щелкните значок **Учетные записи пользователей**.  
  
    3.  В столбце **Группа** проверьте, что значение **ASPNET** входит в группу «Пользователи».  
  
## См. также  
 [Инструкции по размещению в службах IIS](../../../../docs/framework/wcf/samples/internet-information-service-hosting-instructions.md)