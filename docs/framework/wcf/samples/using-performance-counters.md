---
title: "Использование счетчиков производительности | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework-4.6"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
ms.assetid: 00a787af-1876-473c-a48d-f52b51e28a3f
caps.latest.revision: 31
author: "Erikre"
ms.author: "erikre"
manager: "erikre"
caps.handback.revision: 31
---
# Использование счетчиков производительности
В этом образце показано, как получать доступ к счетчикам производительности [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] и как создавать пользовательские счетчики производительности.Данный образец основан на примере [Начало работы](../../../../docs/framework/wcf/samples/getting-started-sample.md).  
  
> [!NOTE]
>  Процедура установки и инструкции по построению для данного образца приведены в конце этого раздела.  
  
 В этом образце клиент вызывает четыре метода службы `ICalculator`.Вызов данных методов осуществляется клиентом до тех пор, пока не будет прерван пользователем.Служба остается неизменной.  
  
 Счетчики производительности включаются в разделе diagnostics файла Web.config службы, как показано в следующем образце конфигурации.  
  
```  
<configuration>  
  <system.serviceModel>  
    <diagnostics performanceCounters="All" />   
  </system.serviceModel>  
</configuration>  
```  
  
 Эту же задачу можно решить с помощью средства [Средство редактирования конфигурации \(SvcConfigEditor.exe\)](../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md).  
  
 Если включены счетчики производительности, это значит, что для службы включен полный набор счетчиков производительности [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].Платформа .NET Framework автоматически поддерживает данные о производительности на трех уровнях: `ServiceModelService`, `ServiceModelEndpoint` и `ServiceModelOperation`.На каждом из этих уровней имеются счетчики производительности, например "Calls", "Calls per Second" и "Security Calls Not Authorized".  
  
### Настройка, построение и выполнение образца  
  
1.  Убедитесь, что выполнены процедуры, описанные в разделе [Процедура однократной настройки образцов Windows Communication Foundation](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  
  
2.  Чтобы создать выпуск решения на языке C\# или Visual Basic .NET, следуйте инструкциям в разделе [Построение образцов Windows Communication Foundation](../../../../docs/framework/wcf/samples/building-the-samples.md).  
  
3.  Чтобы запустить образец на одном или нескольких компьютерах, следуйте инструкциям в разделе [Выполнение примеров Windows Communication Foundation](../../../../docs/framework/wcf/samples/running-the-samples.md).  
  
### Просмотр данных производительности  
  
1.  Запустите средство мониторинга производительности. Для этого нажмите кнопку **Пуск** и выберите команду **Выполнить**, введите `perfmon` и нажмите кнопку **ОК** или в панели управления выберите **Администрирование** и дважды щелкните элемент **Производительность**.  
  
    > [!NOTE]
    >  Пока не начнется выполнение кода образца, добавить счетчики невозможно.  
  
2.  Удалите доступные счетчики производительности, выбирая их и нажимая клавишу DELETE.  
  
3.  Добавьте счетчики [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]. Для этого щелкните в области графика правой кнопкой мыши и выберите команду **Добавить счетчики**.В диалоговом окне **Добавить счетчики** в раскрывающемся списке объекта производительности выберите **ServiceModelOperation 3.0.0.0, ServiceModelEndpoint 3.0.0.0 или ServiceModelService 3.0.0.0**.Выберите в списке нужные счетчики.  
  
    > [!NOTE]
    >  В [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] нет счетчиков производительности для службы, если на компьютере не запущены службы [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].  
  
### Включение счетчиков с помощью редактора конфигураций  
  
1.  Откройте экземпляр программы SvcConfigEditor.exe.  
  
2.  В меню "Файл" выберите команду **Открыть** и выберите тип **Файл конфигурации**.  
  
3.  Перейдите в папку службы примера приложения и откройте файл Web.config.  
  
4.  В дереве конфигурации щелкните **Диагностика**.  
  
5.  В окне **Диагностика** переключите элемент **Счетчик производительности**, чтобы были видны все счетчики.  
  
6.  Сохраните файл конфигурации и закройте редактор.  
  
> [!IMPORTANT]
>  Образцы уже могут быть установлены на компьютере.Перед продолжением проверьте следующий каталог \(по умолчанию\).  
>   
>  `<диск_установки>:\WF_WCF_Samples`  
>   
>  Если этот каталог не существует, перейдите на страницу [Образцы Windows Communication Foundation \(WCF\) и Windows Workflow Foundation \(WF\) для .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780), чтобы загрузить все образцы [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] и [!INCLUDE[wf1](../../../../includes/wf1-md.md)].Этот образец расположен в следующем каталоге.  
>   
>  `<диск_установки>:\WF_WCF_Samples\WCF\Basic\Management\PerfCounters`  
  
## См. также  
 [Образцы наблюдения за AppFabric](http://go.microsoft.com/fwlink/?LinkId=193959)