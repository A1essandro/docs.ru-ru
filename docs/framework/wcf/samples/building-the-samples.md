---
title: "Построение образцов Windows Communication Foundation | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework-4.6"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
ms.assetid: 2899e7a5-9cb2-4e8d-b8d2-f31391549198
caps.latest.revision: 33
author: "Erikre"
ms.author: "erikre"
manager: "erikre"
caps.handback.revision: 33
---
# Построение образцов Windows Communication Foundation
Образцы [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] можно построить в среде Visual Studio 2010 или из командной строки с помощью команды **msbuild**.В этом разделе описаны обе эти процедуры.  
  
> [!NOTE]
>  Перед построением или выполнением любого из образцов [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] убедитесь, что выполнены указания раздела [Процедура однократной настройки образцов Windows Communication Foundation](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).  
  
### Построение образца с помощью командной строки  
  
1.  Откройте командную строку [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] с правами администратора и перейдите в подкаталог языка в каталоге установки образца.  
  
2.  В командной строке введите `msbuild`.Файлы построения клиентской программы сохраняются в папке client\\bin, а файлы построения служебной программы — в папке service\\bin.Если служба размещена в службах IIS, то файлы служебной программы также копируются в каталог servicemodelsamples и его подкаталог \\bin.  
  
> [!NOTE]
>  Необходимо задать списки управления доступом для каталога %systemdrive%\\inetpub\\wwwroot, чтобы предоставить разрешения на изменение учетной записи, от имени которой выполняются операции.В противном случае некоторые события построения могут завершиться сбоем.Либо можно оставить списки управления доступом неизменными и запускать командную строку пакета SDK от имени администратора.  
  
### Построение образца с помощью Visual Studio  
  
1.  Если используется [!INCLUDE[wv](../../../../includes/wv-md.md)] или [!INCLUDE[lserver](../../../../includes/lserver-md.md)], Windows 7, Windows Server 2008 R2 или [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], то необходимо запускать [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] с повышенными разрешениями.Для этого щелкните правой кнопкой мыши значок в меню "Пуск" и выберите команду **Запуск от имени администратора**.  
  
2.  В меню **Файл** в [!INCLUDE[vs_current_short](../../../../includes/vs-current-short-md.md)] выберите команду **Открыть** и выберите вариант **Проект\/Решение**.Перейдите к языковому подкаталогу каталога, в котором установлен образец, и дважды щелкните значок файла SLN, чтобы открыть решение в [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)].  
  
3.  В меню **Построение** выберите команду **Перестроить решение**.Файлы построения клиентской программы сохраняются в папке client\\bin, а файлы построения служебной программы — в папке service\\bin.Если служба размещена в службах IIS, файлы служебной программы также копируются в каталог servicemodelsamples и его подкаталог \\bin.  
  
> [!NOTE]
>  Необходимо задать списки управления доступом для каталога %systemdrive%\\inetpub\\wwwroot, чтобы предоставить разрешения на изменение учетной записи, от имени которой выполняются операции.В противном случае некоторые события построения могут завершиться сбоем.Либо можно оставить списки управления доступом неизменными и запускать командную строку SDK или Visual Studio от имени администратора.Некоторые операции Visual Studio \(например, прикрепление отладчика к рабочему процессу ASP.Net\) также требуют прав администратора.  
  
## Пакетные файлы и скрипты установки  
 Пакетные файлы и скрипты Setup.exe и Cleanup.exe должны запускаться из командной строки Visual Studio.Некоторые файлы установки и очистки выполняют задачи, требующие прав администратора, и должны запускаться с этими правами.  
  
## Важные сведения по безопасности конечных точек метаданных  
 Чтобы предотвратить непреднамеренное разглашение потенциально важных метаданных службы, в конфигурации служб [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] публикация метаданных по умолчанию отключена.Такое поведение по умолчанию безопасно, но также оно означает, что использовать средства импорта метаданных \(например, Svcutil.exe\) для создания кода клиента, необходимого для вызова службы, невозможно, если поведение публикации не включено явно в конфигурации.Чтобы испытывать образец было проще, почти все образцы предоставляют незащищенную конечную точку публикации метаданных.Такие конечные точки являются потенциально доступными для анонимных не прошедших проверку подлинности потребителей, поэтому перед развертыванием таких конечных точек следует соблюдать осторожность и убедиться, что публичное раскрытие метаданных службы уместно.[!INCLUDE[crabout](../../../../includes/crabout-md.md)] о публикации метаданных службы см. в образце [Поведение публикации метаданных](../../../../docs/framework/wcf/samples/metadata-publishing-behavior.md).См. образец [Пользовательская конечная точка защищенных метаданных](../../../../docs/framework/wcf/samples/custom-secure-metadata-endpoint.md) в качестве образца, который защищает конечную точку метаданных.  
  
## Обработка исключений  
 В общем случае эти образцы не включают в себя обработку исключений. Это сделано для того, чтобы сосредоточить внимание на теме образца.[!INCLUDE[crabout](../../../../includes/crabout-md.md)] об обработке исключений см. в образце [Ожидаемые исключения](../../../../docs/framework/wcf/samples/expected-exceptions.md).  
  
## Восстановление клиентов и конфигурации с помощью средства Svcutil  
 С помощью средства [Служебное средство ServiceModel Metadata Utility Tool \(Svcutil.exe\)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) можно восстанавливать код и конфигурацию клиента для большинства образцов.Некоторые образцах требуют редактирования конфигурации вручную.Например, если средство Svcutil.exe используется для восстановления конфигурации образца, использующего учетные данные сертификата клиента, необходимо вручную указать ранее заданные учетные данные.В некоторых образцах используются особые параметры средства Svcutil.exe, влияющие на создаваемый код; эти параметры описаны в соответствующих разделах образце.  
  
#### Восстановление клиента и файлов конфигурации  
  
1.  Откройте окно командной строки SDK и перейдите к языковому подкаталогу в каталоге, где установлен образец.  
  
2.  Если служба размещается на веб\-сервере, воспользуйтесь следующей командой.  
  
    ```  
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost/servicemodelsamples/service.svc/mex /out:generatedClient.cs  
    ```  
  
     Если служба размещается резидентно, воспользуйтесь следующей командой.  
  
    ```  
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost:8000/servicemodelsamples/service.svc/mex /out:generatedClient.cs  
    ```  
  
     Замените адрес http:\/\/localhost:8000\/ServiceModelSamples\/service.svc\/mex на адрес конечной точки mex размещенной резидентно службы.  
  
     Чтобы создать клиент на языке Visual Basic, воспользуйтесь следующей командой.  
  
    ```  
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost/servicemodelsamples/service.svc/mex /l:vb /out:generatedClient.vb  
  
    ```  
  
     Если служба размещается резидентно, воспользуйтесь следующей командой.  
  
    ```  
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost:8000/servicemodelsamples/service.svc/mex /l:vb /out:generatedClient.vb  
    ```  
  
    > [!NOTE]
    >  Чтобы пропустить создание конфигурации клиента, добавьте параметр **\/noConfig**.  
  
## См. также  
 [Выполнение примеров Windows Communication Foundation](../../../../docs/framework/wcf/samples/running-the-samples.md)   
 [Служебное средство ServiceModel Metadata Utility Tool \(Svcutil.exe\)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)