---
title: Защита распределенных приложений
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- distributed application security [WCF]
- security [WCF], transfer
ms.assetid: 53928a10-e474-46d0-ab90-5f98f8d7b668
caps.latest.revision: 32
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.workload:
- dotnet
ms.openlocfilehash: 8b5bc311262aae1110f7d0249be60135e318785e
ms.sourcegitcommit: 94d33cadc5ff81d2ac389bf5f26422c227832052
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/30/2018
---
# <a name="distributed-application-security"></a>Защита распределенных приложений
Безопасность [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] подразделяется на три основные функциональные области: безопасность передачи, управление доступом и аудит. Безопасность передачи обеспечивает целостность, конфиденциальность и проверку подлинности. Безопасность передачи обеспечивается одним из следующих способов: безопасность транспорта, безопасность сообщений или `TransportWithMessageCredential`.  
  
 Общие сведения о [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] безопасность сообщений см. в разделе [Общие сведения о безопасности](../../../../docs/framework/wcf/feature-details/security-overview.md). Дополнительные сведения о других два блока [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] безопасности, в разделе [авторизации](../../../../docs/framework/wcf/feature-details/authorization-in-wcf.md) и [аудита](../../../../docs/framework/wcf/feature-details/auditing-security-events.md).  
  
## <a name="transfer-security-scenarios"></a>Сценарии безопасности передачи  
 Обычными сценариями, в которых используется безопасность передачи [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], являются следующие сценарии:  
  
-   Безопасная передача с помощью Windows. Клиент и служба [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] развертываются в домене Windows (или в лесу Windows). Сообщения содержат личные данные, поэтому требуется взаимная проверка подлинности клиента и службы, целостность сообщений и конфиденциальность сообщений. Кроме того, требуется подтверждение проведения конкретной транзакции, например, получатель сообщения должен записать информацию о сигнатуры.  
  
-   Безопасная передача с использованием `UserName` и HTTPS. Клиент и служба [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] должны быть разработаны для работы по Интернету. Подлинность учетных данных клиента проверяется по базе данных, содержащих пары "имя пользователя-пароль". Служба разворачивается по адресу HTTPS с использованием доверенного SSL-сертификата. Так как сообщения передаются по Интернету, необходима взаимная проверка подлинности клиента и службы, и во время передачи необходимо сохранение конфиденциальности и целостности сообщений.  
  
-   Безопасная передача с помощью сертификатов. Клиент и служба [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] должны быть разработаны для работы по открытому Интернету. Как клиент, так и служба имеют сертификаты, которые можно использовать для обеспечения безопасности сообщений. Клиент и служба используют Интернет для взаимодействия друг с другом и для выполнения ценных транзакций, требующих целостности и конфиденциальности сообщений, а также взаимной проверки подлинности.  
  
## <a name="integrity-confidentiality-and-authentication"></a>Целостность, конфиденциальность и проверка подлинности  
 Эти функции (целостность, конфиденциальность и проверка подлинности) совместно называются безопасностью передачи. Безопасность передачи обеспечивает функции, позволяющие устранить угрозы для распределенных приложений. В приведенной ниже таблице кратко описаны три функции, составляющие безопасность передачи.  
  
|Функция|Описание|  
|--------------|-----------------|  
|Целостность|*Целостность* это гарантия того, что данные являются полные и точные, особенно после передачи из одной точки в другую и возможно, считывания несколькими агентами. Целостность, необходимая для предотвращения подделки данных, обычно обеспечивается цифровой подписью сообщения.|  
|Конфиденциальность|*Конфиденциальность* является гарантия того, что сообщение не было прочитано никем другим, кроме предполагаемого читателя. Например, при передаче по Интернету необходимо сохранить в секрете номер кредитной карты. Конфиденциальность часто обеспечивается путем шифрования данных с использованием схемы "открытый ключ/закрытый ключ".|  
|Проверка подлинности|*Проверка подлинности* — это проверка заявленной идентификации. Например, при использовании банковского счета абсолютно необходимо, чтобы снятие средств могло быть выполнено только действительным владельцем счета. Проверка подлинности может обеспечиваться различными средствами. Одним из обычных способов является система пользователь/пароль. Вторым способом является использование сертификата X.509, предоставляемого третьей стороной.|  
  
## <a name="security-modes"></a>Режимы безопасности  
 В [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] предусмотрены несколько режимов безопасности передачи, рассматриваемые в приведенной ниже таблице.  
  
|Режим|Описание|  
|----------|-----------------|  
|Нет|Безопасность на уровне транспорта или на уровне сообщений не обеспечивается. Ни одна из стандартных привязок используйте этот режим по умолчанию, за исключением [ \<basicHttpBinding >](../../../../docs/framework/configure-apps/file-schema/wcf/basichttpbinding.md) элемента или, при использовании кода и <xref:System.ServiceModel.BasicHttpBinding> класса.|  
|Transport|Для обеспечения целостности, конфиденциальности и взаимной проверки подлинности используется безопасный транспорт, такой как HTTPS.|  
|Сообщение|Для обеспечения целостности, конфиденциальности и для взаимной проверки подлинности используется безопасность SOAP-сообщений. Защита SOAP-сообщений обеспечивается в соответствии со стандартами WS-Security.|  
|Смешанный режим|Целостность, конфиденциальность и проверка подлинности сервера обеспечиваются с помощью средств безопасности транспорта. Для проверки подлинности клиента используются средства безопасности сообщений (WS-Security и другие стандарты).<br /><br /> (В перечислении этому режиму соответствует значение `TransportWithMessageCredential`.)|  
|Оба значения|Защита и проверка подлинности выполняется на обоих уровнях. Этот режим доступен только в [ \<netMsmqBinding >](../../../../docs/framework/configure-apps/file-schema/wcf/netmsmqbinding.md) элемента.|  
  
## <a name="credentials-and-transfer-security"></a>Учетные данные и безопасность передачи  
 Объект *учетные данные* — это данные, предоставляемые для подтверждения заявленной идентификации или возможностей. При предоставлении учетных данных требуется предоставить как сами данные, так и доказательство обладания ими. [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] поддерживает учетные данные различных типов на уровне транспорта и уровне безопасности сообщений. Можно указать тип учетных данных для привязки [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].  
  
 Во многих странах или регионах примером учетных данных могут служить водительские права. Водительские права содержат данные о личности и возможностях их обладателя. Они содержат доказательство владения в виде фотографии владельца. Водительские права выданы доверенной организацией, обычно государственным органом. Водительские права ламинированы и могут содержать голограмму, подтверждающую, что права не изменены или подделаны.  
  
 Для примера рассмотрим два типа учетных данных в [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]: имя пользователя и сертификат (X.509).  
  
 В учетных данных с именем пользователя имя пользователя представляет заявленную идентификацию, а пароль является доказательством прав обладания. Центром авторизации в данном случае является система, проверяющая имя пользователя и пароль.  
  
 В учетных данных с сертификатом имя субъекта, альтернативное имя субъекта или определенные поля сертификата могут использоваться для представления заявленной идентификации и/или возможностей. Обладание данными, приведенными в учетных данных, доказывается с помощью соответствующего закрытого ключа, использованного для создания сигнатуры.  
  
 Дополнительные сведения о программировании безопасность передачи, и заданию учетных данных см. в разделе [привязки и безопасность](../../../../docs/framework/wcf/feature-details/bindings-and-security.md) и [поведения безопасности](../../../../docs/framework/wcf/feature-details/security-behaviors-in-wcf.md).  
  
### <a name="transport-client-credential-types"></a>Типы учетных данных клиента с безопасностью транспорта  
 В следующей таблице приведены возможные значения, применимые при создании приложения, использующего безопасность транспорта. Эти значения можно использовать либо в коде, либо в параметрах привязки.  
  
|Параметр|Описание|  
|-------------|-----------------|  
|Нет|Указывает, что клиенту не требуется предоставлять учетные данные. Это означает, что клиент является анонимным.|  
|Basic|Задает обычную проверку подлинности.  Дополнительные сведения см. в документе RFC2617, "[проверки подлинности HTTP: обычная и дайджест проверка подлинности](http://go.microsoft.com/fwlink/?LinkId=88313).»|  
|Digest|Задает дайджест-проверку подлинности.  Дополнительные сведения см. в документе RFC2617, "[проверки подлинности HTTP: обычная и дайджест проверка подлинности](http://go.microsoft.com/fwlink/?LinkId=88313).»|  
|Ntlm|Задает проверку подлинности Windows с использованием согласования SSPI с домене Windows.<br /><br /> При согласовании SSPI выбирается либо протокол Kerberos, либо протокол NT LanMan (NTLM).|  
|Windows|Задает проверку подлинности Windows с использованием согласования SSPI с домене Windows. В качестве службы проверки подлинности SSPI выбирает либо протокол Kerberos, либо протокол NT LanMan (NTLM).<br /><br /> Сначала SSPI пытается использовать протокол Kerberos; если это не удается, используется NTLM.|  
|Сертификат|Выполняет проверку подлинности клиента с использованием сертификата, обычно X.509.|  
  
### <a name="message-client-credential-types"></a>Типы учетных данных клиента при использовании безопасности сообщений  
 В следующей таблице приведены возможные значения, применимые при создании приложения, использующего безопасность сообщений. Эти значения можно использовать либо в коде, либо в параметрах привязки.  
  
|Параметр|Описание|  
|-------------|-----------------|  
|Нет|Позволяет службе взаимодействовать с анонимными клиентами.|  
|Windows|Позволяет проводить обмен сообщениями SOAP, если выполнена проверка подлинности с помощью учетных данных Windows. Для выбора службы проверки подлинности (протокол Kerberos или протокол NTLM) используется механизм согласования SSPI.|  
|Имя пользователя|Позволяет службе запрашивать проверку подлинности клиента на основе учетных данных типа «имя пользователя». Обратите внимание, что [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] не допускает каких-либо криптографических операций для имени пользователя, таких как создание сигнатуры или шифрование данных. Таким образом, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] принудительно задает безопасность транспорта при использовании учетных данных типа "имя пользователя".|  
|Сертификат|Позволяет службе требовать проверки подлинности клиента с помощью сертификата.|  
|[!INCLUDE[infocard](../../../../includes/infocard-md.md)]|Позволяет службе требовать проверку подлинности клиента с помощью [!INCLUDE[infocard](../../../../includes/infocard-md.md)].|  
  
### <a name="programming-credentials"></a>Программирование учетных данных  
 Для каждого типа учетных данных клиента модель программирования [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] позволяет задать значения учетных данных и проверяющие элементы управления с помощью поведений службы и канала.  
  
 Безопасность [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] предусматривает учетные данные двух типов: поведения службы и поведения канала. Поведения учетных данных в [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] задают фактические данные, т. е. учетные данные, используемые для удовлетворения требований к безопасности, выраженных через привязки. В [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] класс клиента является компонентом времени выполнения, который выполняет преобразование между вызовом операции и сообщениями. Все клиенты наследуют от класса <xref:System.ServiceModel.ClientBase%601>. Свойство <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> базового класса позволяет задавать различные значения учетных данных клиента.  
  
 В [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] поведения службы являются атрибутом, примененным к классу, реализующему контракт службы (интерфейс) для программного управления службой. Класс <xref:System.ServiceModel.Description.ServiceCredentials> позволяет указать сертификаты для учетных данных службы и параметры проверки клиента для различных типов учетных данных клиента.  
  
### <a name="negotiation-model-for-message-security"></a>Модель согласования для безопасности сообщений  
 Режим безопасности сообщений позволяет реализовать безопасность передачи таким образом, чтобы учетные данные службы задавались в клиенте по внештатному каналу. Например, если используется сертификат, хранящийся в хранилище сертификатов Windows, необходимо использовать такое средство, как оснастка консоли управления (MMC).  
  
 Режим безопасности сообщений также позволяет обеспечивать безопасность передачи таким образом, чтобы учетные данные службы передавались клиенту в процессе начального согласования. Для разрешения согласования задайте для свойства <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> значение `true`.  
  
## <a name="see-also"></a>См. также  
 [Общие сведения о создании конечных точек](../../../../docs/framework/wcf/endpoint-creation-overview.md)  
 [Привязки, предоставляемые системой](../../../../docs/framework/wcf/system-provided-bindings.md)  
 [Общие сведения о безопасности](../../../../docs/framework/wcf/feature-details/security-overview.md)  
 [Модель безопасности для Windows Server App Fabric](http://go.microsoft.com/fwlink/?LinkID=201279&clcid=0x409)
