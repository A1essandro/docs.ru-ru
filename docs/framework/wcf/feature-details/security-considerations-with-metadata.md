---
title: Вопросы безопасности при использовании метаданных
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: e78ef8ab-4f63-4656-ab93-b1deab2666d5
caps.latest.revision: 10
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.workload:
- dotnet
ms.openlocfilehash: 393730ffe57c4678f53d16e67b8b8f64ad16509c
ms.sourcegitcommit: 94d33cadc5ff81d2ac389bf5f26422c227832052
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/30/2018
---
# <a name="security-considerations-with-metadata"></a>Вопросы безопасности при использовании метаданных
При использовании в [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] функций метаданных следует помнить об обеспечении безопасности публикации, извлечения и использования метаданных служб.  
  
## <a name="when-to-publish-metadata"></a>В каких случаях следует публиковать метаданные  
 По умолчанию службы [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] не публикуют метаданные. Публикация метаданных для [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] службы, необходимо явно включить публикацию метаданных, добавив конечные точки метаданных службы (в разделе [публикация метаданных](../../../../docs/framework/wcf/feature-details/publishing-metadata.md)). Если публикацию метаданных оставить отключенной, это уменьшит возможности для атаки на службу и снизит риск непреднамеренного раскрытия информации. Не все службы должны публиковать метаданные. Если публиковать метаданные не требуется, подумайте о том, чтобы отключить их. Обратите внимание, что по-прежнему можно создавать метаданные и код клиента непосредственно из службы сборок с помощью [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md). Дополнительные сведения об использовании Svcutil.exe для экспорта метаданных см. в разделе [как: использование Svcutil.exe для экспорта метаданных из компилированного кода службы](../../../../docs/framework/wcf/feature-details/how-to-use-svcutil-exe-to-export-metadata-from-compiled-service-code.md).  
  
## <a name="publishing-metadata-using-a-secure-binding"></a>Публикация метаданных с помощью безопасной привязки  
 Привязки метаданных, предоставляемые [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] по умолчанию, не являются безопасными и разрешают анонимный доступ к метаданным. Метаданные службы [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], публикуемые ею, содержат подробное описание службы и могут (преднамеренно или нет) содержать конфиденциальные сведения. Например, метаданные службы могут содержать сведения об операциях инфраструктуры, которые не должны распространяться публично. Чтобы защитить метаданные службы от несанкционированного доступа, можно воспользоваться безопасной привязкой конечной точки метаданных. Конечные точки метаданных отвечают на HTTP-запросы GET, которые могут использовать для защиты метаданных протокол SSL. Дополнительные сведения см. в разделе [как: защита конечных точек метаданных](../../../../docs/framework/wcf/feature-details/how-to-secure-metadata-endpoints.md).  
  
 Кроме того, защита конечных точек метаданных позволяет запрашивающей стороне безопасным образом получать метаданные службы, не опасаясь, что они будут искажены или подделаны.  
  
## <a name="using-only-trusted-metadata"></a>Использование только надежных метаданных  
 С помощью метаданных службы можно автоматически создавать компоненты среды выполнения, необходимые для вызова службы. Кроме того, метаданные можно использовать на этапе проектирования, чтобы разрабатывать клиентские приложения, или во время выполнения, чтобы динамически обновлять привязку, с помощью которой клиент вызывает службу.  
  
 При получении метаданных без соответствующей защиты они могут быть искажены или подделаны. Искаженные метаданные могут перенаправить клиент на вредоносную службу, они могут содержать неверные параметры безопасности или опасные структуры XML. Документы с метаданным могут быть большими, и их часто сохраняют в файловой системе. Чтобы защититься от искажения или подделки метаданных, следует использовать для запроса метаданных службы безопасную привязку, если она доступна.  
  
## <a name="using-safe-techniques-for-processing-metadata"></a>Использование безопасных методов обработки метаданных  
 Метаданные службы часто запрашиваются у службы по сети с использованием стандартных протоколов, например WS-MetadataExchange (MEX). Многие форматы метаданных включают механизмы, позволяющие ссылаться на дополнительные метаданные. Тип <xref:System.ServiceModel.Description.MetadataExchangeClient> автоматически обрабатывает ссылки в документах WSDL, схемах XML и документах MEX. Размер объекта <xref:System.ServiceModel.Description.MetadataSet>, созданного на базе полученных метаданных, прямо пропорционален значению <xref:System.ServiceModel.Description.MetadataExchangeClient.MaximumResolvedReferences%2A> используемого экземпляра <xref:System.ServiceModel.Description.MetadataExchangeClient> и значению `MaxReceivedMessageSize` привязки, используемой данным экземпляром <xref:System.ServiceModel.Description.MetadataExchangeClient>. Устанавливайте эти квоты в соответствии с потребностями конкретной задачи.  
  
 В [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] метаданные службы обрабатываются в формате XML. При обработке документов XML приложения должны защищать себя от опасных структур XML. Используйте `XmlDictionaryReader` с соответствующими значениями квот при обработке XML, а также задать <xref:System.Xml.XmlTextReader.DtdProcessing%2A> свойства `Prohibit`.  
  
 Система метаданных в [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] является расширяемым и расширения метаданных могут быть зарегистрированы в файле конфигурации приложения (в разделе [расширение системы метаданных](../../../../docs/framework/wcf/extending/extending-the-metadata-system.md)). Расширения метаданных могут выполнять произвольный код, поэтому файлы конфигурации приложений необходимо защищать с помощью соответствующих списков управления доступом и регистрировать только надежные реализации расширений метаданных.  
  
## <a name="validating-generated-clients"></a>Проверка созданных клиентов  
 При создании клиентского кода из метаданных, полученных из ненадежного источника, проверьте созданный код клиента на соответствие принятым политикам безопасности клиентских приложений. Можно воспользоваться поведением проверки, чтобы проконтролировать параметры клиентской привязки, или визуально проверить код, созданный автоматически. Пример реализации клиента, который использует для проверки поведения см. в разделе [клиентской проверки](../../../../docs/framework/wcf/samples/client-validation.md).  
  
## <a name="protecting-application-configuration-files"></a>Защита файлов конфигурации приложений  
 Файл конфигурации приложения службы может определять, каким образом будут публиковаться метаданные и будут ли они публиковаться в принципе. Рекомендуется защищать файлы конфигурации приложений с помощью списков управления доступом, чтобы злоумышленники не могли изменить параметры в этих файлах.  
  
## <a name="see-also"></a>См. также  
 [Практическое руководство. Защита конечных точек метаданных](../../../../docs/framework/wcf/feature-details/how-to-secure-metadata-endpoints.md)  
 [Безопасность](../../../../docs/framework/wcf/feature-details/security.md)
