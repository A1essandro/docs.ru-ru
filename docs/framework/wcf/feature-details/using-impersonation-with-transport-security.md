---
title: "Использование олицетворения при обеспечении безопасности транспорта | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework-4.6"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
ms.assetid: 426df8cb-6337-4262-b2c0-b96c2edf21a9
caps.latest.revision: 12
author: "BrucePerlerMS"
ms.author: "bruceper"
manager: "mbaldwin"
caps.handback.revision: 12
---
# Использование олицетворения при обеспечении безопасности транспорта
*Олицетворение* — это возможность серверного приложения принимать идентификацию клиента.Обычно службы используют олицетворение при проверке доступа к ресурсам.Серверное приложение выполняется с использованием учетной записи службы, но когда сервер принимает клиентское подключение, он олицетворяет клиента для выполнения проверки доступа с использованием учетных данных клиента.Безопасность транспорта — это механизм, используемый как для передачи учетных данных, так и для обеспечения безопасности связи с использованием этих учетных данных.В этом разделе описано использование безопасности транспорта в [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] с функцией олицетворения.[!INCLUDE[crabout](../../../../includes/crabout-md.md)] олицетворение с использованием безопасности сообщений см. в разделе [Делегирование и олицетворение](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).  
  
## Пять уровней олицетворения  
 В безопасности транспорта используется пять уровней олицетворения, как описано в приведенной ниже таблице.  
  
|Уровень олицетворения|Описание|  
|---------------------------|--------------|  
|None|Серверное приложение не пытается олицетворить клиент.|  
|Anonymous|Серверное приложение может выполнять проверки доступа с использованием учетных данных клиента, но не получает никакой информации об идентификации клиента.Использовать этот уровень олицетворения имеет смысл только при обмене данными на компьютере, например по именованным каналам.Если уровень `Anonymous` используется при удаленном подключении, он повышается до уровня олицетворения "Identify".|  
|Identify|Серверное приложение знает идентификацию клиента и может выполнить проверку доступа с использованием учетных данных клиента, но не может олицетворить клиент.Уровень "Identify" — это уровень олицетворения по умолчанию, используемый с учетными данными SSPI в [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], пока поставщик маркеров не укажет другой уровень олицетворения.|  
|Impersonate|Серверное приложение может получить доступ к ресурсам на компьютере\-сервере в качестве клиента помимо выполнения проверок доступа.Серверное приложение не может получить доступ к ресурсам на удаленных компьютерах, используя идентификацию клиента, поскольку олицетворяемый маркер не имеет сетевых учетных данных.|  
|Delegate|Уровень олицетворения "Delegate" предоставляет те же возможности, что уровень `Impersonate`, а также позволяет серверному приложению получить доступ к ресурсам на удаленных компьютерах с использованием идентификации клиента и передавать эту идентификацию другим приложениям.<br /><br /> **Внимание\!** Учетную запись домена сервера необходимо отметить как доверенную для делегирования на контроллере домена, чтобы использовать эти дополнительные функции.Этот уровень олицетворения нельзя использовать с учетными записями домена клиента, отмеченными как конфиденциальные.|  
  
 Чаще всего с безопасностью транспорта используются уровни `Identify` и `Impersonate`.Не рекомендуется использовать уровни `None` и `Anonymous` в стандартных ситуациях, большинство транспортов не поддерживает использование этих уровней с проверкой подлинности.Уровень `Delegate` — это функция с широкими возможностями, которую следует использовать осторожно.Разрешение на делегирование учетных записей следует предоставлять только доверенным серверным приложениям.  
  
 Для использования уровней `Impersonate` или `Delegate` необходимо, чтобы серверные приложения имели привилегию `SeImpersonatePrivilege`.Приложение имеет эту привилегию по умолчанию, если оно выполняется от имени учетной записи в группе "Администраторы" или от имени учетной записи с идентификатором безопасности службы \(сетевая служба, локальная служба или локальная система\).Для олицетворения не требуется проведения взаимной проверки подлинности клиента и сервера.Некоторые схемы проверки подлинности, поддерживающие олицетворение, такие как NTLM, нельзя использовать при проведении взаимной проверки подлинности.  
  
## Проблемы соответствия транспорта и олицетворения  
 Выбор транспорта в [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] влияет на возможный выбор олицетворения.В данном разделе описываются проблемы, влияющие на стандартный транспорт HTTP и транспорт именованных каналов в [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].Пользовательские транспорты имеют свои собственные ограничения поддержки олицетворения.  
  
### Транспорт именованных каналов  
 К транспорту именованных каналов применяются следующие положения.  
  
-   Транспорт именованных каналов предназначен для использования только на локальном компьютере.Транспорт именованных каналов в [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] явным образом запрещает обмен данными между компьютерами.  
  
-   Именованные каналы невозможно использовать с уровнем олицетворения `Impersonate` или `Delegate`.Именованный канал не может обеспечить выполнение гарантии на компьютере на этих уровнях олицетворения.  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)] именованным каналам см. в разделе [Выбор транспортов](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).  
  
### Транспорт HTTP  
 Привязки, использующие транспорт HTTP \(<xref:System.ServiceModel.WSHttpBinding> и <xref:System.ServiceModel.BasicHttpBinding>\) поддерживают несколько схем проверки подлинности, подробнее см. в разделе [Основные сведения о проверке подлинности HTTP](../../../../docs/framework/wcf/feature-details/understanding-http-authentication.md).Поддерживаемый уровень олицетворения зависит от схемы проверки подлинности.К транспорту HTTP применяются следующие положения.  
  
-   Схема проверки подлинности `Anonymous` игнорирует олицетворение.  
  
-   Схема проверки подлинности `Basic` поддерживает только уровень `Delegate`.Все более низкие уровни олицетворения обновляются.  
  
-   Схема проверки подлинности `Digest` поддерживает только уровни `Impersonate` и `Delegate`.  
  
-   Схема проверки подлинности `NTLM`, которую можно выбрать как прямо, так и посредством согласования, поддерживает только уровень `Delegate` на локальном компьютере.  
  
-   Схема проверки подлинности Kerberos, которую можно выбрать только посредством согласования, используется на любом поддерживаемом уровне олицетворения.  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)] транспорте HTTP см. в разделе [Выбор транспортов](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).  
  
## См. также  
 [Делегирование и олицетворение](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md)   
 [Авторизация](../../../../docs/framework/wcf/feature-details/authorization-in-wcf.md)   
 [Практическое руководство. Олицетворение клиента в рамках службы](../../../../docs/framework/wcf/how-to-impersonate-a-client-on-a-service.md)   
 [Основные сведения о проверке подлинности HTTP](../../../../docs/framework/wcf/feature-details/understanding-http-authentication.md)