---
title: "Конечная точка элемента управления рабочего процесса | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework-4.6"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
ms.assetid: 1b883334-1590-4fbb-b0d6-65197efe0700
caps.latest.revision: 11
author: "Erikre"
ms.author: "erikre"
manager: "erikre"
caps.handback.revision: 11
---
# Конечная точка элемента управления рабочего процесса
Конечная точка управления рабочим процессом позволяет разработчику вызывать операции удаленного управления экземплярами рабочего процесса, размещенные с помощью <xref:System.ServiceModel.Activities.WorkflowServiceHost>.Эта функция может быть использована для программного выполнения таких операций управления, как приостановка, возобновление и завершение.  
  
> [!WARNING]
>  Если конечная точка управления рабочим процессом используется в транзакции, а управляемый рабочий процесс содержит действие <xref:System.Activities.Statements.Persist>, экземпляр рабочего процесса «зависнет» до истечения срока ожидания транзакции.  
  
## Управление экземплярами рабочего процесса  
 Платформа [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] включает новый контракт <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement>.Этот контракт определяет последовательность операций управления, которые дают возможность удаленно управлять экземплярами рабочего процесса, размещенными в <xref:System.ServiceModel.Activities.WorkflowServiceHost>.<xref:System.ServiceModel.Activities.WorkflowControlEndpoint> — это стандартная конечная точка, которая обеспечивает реализацию контракта <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement>.<xref:System.ServiceModel.Activities.WorkflowControlClient> — класс, который используется для отправки управляющих операций конечной точке <xref:System.ServiceModel.Activities.WorkflowControlEndpoint>.  
  
 Экземпляры рабочих процессов могут иметь следующие состояния.  
  
 Активно  
 Состояния экземпляра рабочего процесса до достижения завершенного состояния при условии, что экземпляр не находится в приостановленном состоянии.В этом состоянии экземпляр рабочего процесса запускается и обрабатывает сообщения приложения.  
  
 Приостановка  
 В этом состоянии экземпляр рабочего процесса не запускается даже при наличии действий, которые не выполнялись или были выполнены частично.  
  
 Завершение  
 Завершающее состояние экземпляра рабочего процесса.Экземпляр рабочего процесса не может выполняться после достижения завершенного состояния.  
  
## IWorkflowInstanceManagement  
 Интерфейс <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement> определяет набор операций управления с синхронными и асинхронными версиями.Для версий с транзакциями необходимо использовать привязку с поддержкой транзакций.В следующей таблице перечислены поддерживаемые операции управления.  
  
|Операции управления|Описание|  
|-------------------------|--------------|  
|Abort|Принудительно останавливает выполнение экземпляра рабочего процесса.|  
|Cancel|Переводит экземпляр рабочего процесса из активного или ожидающего состояния в завершенное состояние.|  
|Run|Обеспечивает возможность запуска экземпляра рабочего процесса.|  
|Suspend|Переводит экземпляр рабочего процесса из активного состояния в состояние ожидания.|  
|Terminate|Переводит экземпляр рабочего процесса из активного или ожидающего состояния в завершенное состояние.|  
|Unsuspend|Переводит экземпляр рабочего процесса из состояния ожидания в активное состояние.|  
|TransactedCancel|Выполняет операцию отмены для транзакции \(передается от клиента или создается локально\).Если система сохраняет устойчивое состояние экземпляра рабочего процесса, экземпляр рабочего процесса должен быть сохранен во время выполнения этой операции.|  
|TransactedRun|Выполняет операцию выполнения для транзакции \(передается от клиента или создается локально\).Если система сохраняет устойчивое состояние экземпляра рабочего процесса, экземпляр рабочего процесса должен быть сохранен во время выполнения этой операции.|  
|TransactedSuspend|Выполняет операцию приостановки для транзакции \(передается от клиента или создается локально\).Если система сохраняет устойчивое состояние экземпляра рабочего процесса, экземпляр рабочего процесса должен быть сохранен во время выполнения этой операции.|  
|TransactedTerminate|Выполняет операцию прекращения для транзакции \(передается от клиента или создается локально\).Если система сохраняет устойчивое состояние экземпляра рабочего процесса, экземпляр рабочего процесса должен быть сохранен во время выполнения этой операции.|  
|TransactedUnsuspend|Выполняет операцию возобновления для транзакции \(передается от клиента или создается локально\).Если система сохраняет устойчивое состояние экземпляра рабочего процесса, экземпляр рабочего процесса должен быть сохранен во время выполнения этой операции.|  
  
 Контракт <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement> не предусматривает возможности создания нового экземпляра рабочего процесса, а только управление существующими экземплярами рабочих процессов.[!INCLUDE[crabout](../../../../includes/crabout-md.md)] об удаленном создании нового экземпляра рабочего процесса, см. в разделе [Расширяемость узла службы рабочих процессов](../../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md).  
  
## WorkflowControlEndpoint  
 <xref:System.ServiceModel.Activities.WorkflowControlEndpoint> является стандартной конечной точкой с фиксированным контрактом <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement>.При добавлении к экземпляру <xref:System.ServiceModel.Activities.WorkflowServiceHost> эта конечная точка затем может быть использована для отправки командных операций в любой экземпляр рабочего процесса, размещенного в ведущем экземпляре.[!INCLUDE[crabout](../../../../includes/crabout-md.md)] о стандартных конечных точках см. в разделе [Стандартные конечные точки](../../../../docs/framework/wcf/feature-details/standard-endpoints.md).  
  
## WorkflowControlClient  
 <xref:System.ServiceModel.Activities.WorkflowControlClient> является классом, позволяющим отправлять сообщения управления <xref:System.ServiceModel.Activities.WorkflowControlEndpoint> в <xref:System.ServiceModel.Activities.WorkflowServiceHost>.Содержит метод для каждой из операций, поддерживаемых контрактом <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement>, кроме транзакционных операций.<xref:System.ServiceModel.Activities.WorkflowControlClient> использует внешние транзакции для определения необходимости использования транзакционной операции.