---
title: Повышение привилегий
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- elevation of privilege [WCF]
- security [WCF], elevation of privilege
ms.assetid: 146e1c66-2a76-4ed3-98a5-fd77851a06d9
caps.latest.revision: 16
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: 6d93a8ae074e4016d7d8ec4b8734f0d14ead938f
ms.sourcegitcommit: 03ee570f6f528a7d23a4221dcb26a9498edbdf8c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2018
---
# <a name="elevation-of-privilege"></a><span data-ttu-id="b8003-102">Повышение привилегий</span><span class="sxs-lookup"><span data-stu-id="b8003-102">Elevation of Privilege</span></span>
<span data-ttu-id="b8003-103">*Несанкционированное получение прав* полученный в результате, когда злоумышленник права по сравнению с были предоставлены изначально.</span><span class="sxs-lookup"><span data-stu-id="b8003-103">*Elevation of privilege* results from giving an attacker authorization permissions beyond those initially granted.</span></span> <span data-ttu-id="b8003-104">Например, злоумышленник, ранее имевший разрешение «только для чтения», может каким-либо образом расширить его до уровня «чтение и запись».</span><span class="sxs-lookup"><span data-stu-id="b8003-104">For example, an attacker with a privilege set of "read only" permissions somehow elevates the set to include "read and write."</span></span>  
  
## <a name="trusted-sts-should-sign-saml-token-claims"></a><span data-ttu-id="b8003-105">Доверенная служба маркеров безопасности должна подписывать утверждения маркеров SAML</span><span class="sxs-lookup"><span data-stu-id="b8003-105">Trusted STS Should Sign SAML Token Claims</span></span>  
 <span data-ttu-id="b8003-106">Маркер языка SAML (Security Assertions Markup Language) - это универсальный маркер XML, являющийся типом по умолчанию для выдаваемых маркеров.</span><span class="sxs-lookup"><span data-stu-id="b8003-106">A Security Assertions Markup Language (SAML) token is a generic XML token that is the default type for issued tokens.</span></span> <span data-ttu-id="b8003-107">Маркер SAML может создаваться при обмене данными службой маркеров безопасности, которой веб-служба доверяет.</span><span class="sxs-lookup"><span data-stu-id="b8003-107">A SAML token can be constructed by a Security Token Service (STS) that the end Web service trusts in a typical exchange.</span></span> <span data-ttu-id="b8003-108">Маркеры SAML содержат утверждения в операторах.</span><span class="sxs-lookup"><span data-stu-id="b8003-108">SAML tokens contain claims in statements.</span></span> <span data-ttu-id="b8003-109">Злоумышленник может скопировать утверждения из действительного маркера, создать новый маркер SAML и подписать его именем другого издателя.</span><span class="sxs-lookup"><span data-stu-id="b8003-109">An attacker may copy the claims from a valid token, create a new SAML token, and sign it with a different issuer.</span></span> <span data-ttu-id="b8003-110">Идея состоит в том, чтобы проверить, проверяет ли сервер издателей, и, если сервер этого не делает, создать маркеры SAML, расширяющие права по сравнению с правами, которые выдаются доверенной службой маркеров безопасности.</span><span class="sxs-lookup"><span data-stu-id="b8003-110">The intent is to determine whether the server is validating issuers and, if not, utilize the weakness to construct SAML tokens that allow privileges beyond those intended by a trusted STS.</span></span>  
  
 <span data-ttu-id="b8003-111">Класс <xref:System.IdentityModel.Tokens.SamlAssertion> проверяет цифровые подписи в токене SAML, и класс <xref:System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator> по умолчанию требует, чтобы токены SAML были подписаны сертификатом X.509, если свойство <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.CertificateValidationMode%2A> класса <xref:System.ServiceModel.Security.IssuedTokenServiceCredential> имеет значение <xref:System.ServiceModel.Security.X509CertificateValidationMode.ChainTrust>.</span><span class="sxs-lookup"><span data-stu-id="b8003-111">The <xref:System.IdentityModel.Tokens.SamlAssertion> class verifies the digital signature contained within a SAML token, and the default <xref:System.IdentityModel.Selectors.SamlSecurityTokenAuthenticator> requires that SAML tokens be signed by an X.509 certificate that is valid when the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential.CertificateValidationMode%2A> of the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential> class is set to <xref:System.ServiceModel.Security.X509CertificateValidationMode.ChainTrust>.</span></span> <span data-ttu-id="b8003-112">Одного использования режима `ChainTrust` недостаточно, чтобы определить, является ли издатель токена SAML доверенным.</span><span class="sxs-lookup"><span data-stu-id="b8003-112">`ChainTrust` mode alone is insufficient to determine whether the issuer of the SAML token is trusted.</span></span> <span data-ttu-id="b8003-113">Службы, которым требуется более детальная модель управления безопасностью, могут использовать политики авторизации и принудительного применения для проверки издателей наборов утверждений, создаваемых при проверке подлинности токенов, или использовать параметры проверки X.509 в <xref:System.ServiceModel.Security.IssuedTokenServiceCredential> для ограничения набора разрешенных сертификатов подписи.</span><span class="sxs-lookup"><span data-stu-id="b8003-113">Services that require a more granular trust model can either use authorization and enforcement policies to check the issuer of the claim sets produced by issued token authentication or use the X.509 validation settings on <xref:System.ServiceModel.Security.IssuedTokenServiceCredential> to restrict the set of allowed signing certificates.</span></span> <span data-ttu-id="b8003-114">Дополнительные сведения см. в разделе [управление утверждениями и авторизацией с помощью модели удостоверения](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md) и [Федерация и выданные маркеры](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="b8003-114">For more information, see [Managing Claims and Authorization with the Identity Model](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md) and [Federation and Issued Tokens](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span></span>  
  
## <a name="switching-identity-without-a-security-context"></a><span data-ttu-id="b8003-115">Смена удостоверения без контекста безопасности</span><span class="sxs-lookup"><span data-stu-id="b8003-115">Switching Identity Without a Security Context</span></span>  
 <span data-ttu-id="b8003-116">Приведенные ниже сведения относятся только к [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b8003-116">The following applies only to [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)].</span></span>  
  
 <span data-ttu-id="b8003-117">При установке подключения между клиентом и сервером удостоверение клиента не изменяется, если только не имеет место следующая ситуация: после открытия клиента [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], если выполняются все приведенные ниже условия:</span><span class="sxs-lookup"><span data-stu-id="b8003-117">When a connection is established between a client and server, the identity of the client does not change, except in one situation: after the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client is opened, if all of the following conditions are true:</span></span>  
  
-   <span data-ttu-id="b8003-118">Процедуры определения контекста безопасности (с помощью безопасности транспорта и сеансы безопасности сообщений) отключены (<xref:System.ServiceModel.NonDualMessageSecurityOverHttp.EstablishSecurityContext%2A> свойству `false` в случае безопасности сообщений или транспорта, не поддерживающий создание системы безопасности в случае безопасности транспорта используются сеансы.</span><span class="sxs-lookup"><span data-stu-id="b8003-118">The procedures to establish a security context (using a transport security session or message security session) is switched off (<xref:System.ServiceModel.NonDualMessageSecurityOverHttp.EstablishSecurityContext%2A> property is set to `false` in case of message security or transport not capable of establishing security sessions is used in transport security case.</span></span> <span data-ttu-id="b8003-119">Пример подобного транспорта - HTTPS.);</span><span class="sxs-lookup"><span data-stu-id="b8003-119">HTTPS is one example of such transport).</span></span>  
  
-   <span data-ttu-id="b8003-120">используется проверка подлинности Windows;</span><span class="sxs-lookup"><span data-stu-id="b8003-120">You are using Windows authentication.</span></span>  
  
-   <span data-ttu-id="b8003-121">учетные данные не задаются явным образом;</span><span class="sxs-lookup"><span data-stu-id="b8003-121">You do not explicitly set the credential.</span></span>  
  
-   <span data-ttu-id="b8003-122">служба вызывается в олицетворенном контексте безопасности.</span><span class="sxs-lookup"><span data-stu-id="b8003-122">You are calling the service under the impersonated security context.</span></span>  
  
 <span data-ttu-id="b8003-123">Если эти условия выполняются, удостоверение, которое используется для проверки подлинности клиента на стороне службы, может измениться (в данном случае не может использоваться олицетворенное удостоверение, но может использоваться удостоверение процесса) после открытия клиента [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b8003-123">If these conditions are true, the identity used to authenticate the client to the service might change (it might not be the impersonated identity but the process identity instead) after the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client is opened.</span></span> <span data-ttu-id="b8003-124">Это происходит потому, что удостоверение Windows, которое используется для проверки подлинности клиента на стороне службы, передается с каждым сообщением, а удостоверение, которое используется для проверки подлинности, получается из удостоверения Windows текущего потока.</span><span class="sxs-lookup"><span data-stu-id="b8003-124">This occurs because the Windows credential used to authenticate the client to the service is transmitted with every message, and the credential used for authentication is obtained from the current thread's Windows identity.</span></span> <span data-ttu-id="b8003-125">Если удостоверение Windows текущего потока изменяется (например, путем олицетворения другого вызывающего объекта), удостоверение, которое прикрепляется к сообщению и используется для проверки подлинности клиента на стороне службы, также может измениться.</span><span class="sxs-lookup"><span data-stu-id="b8003-125">If the Windows identity of the current thread changes (for example, by impersonating a different caller), the credential that is attached to the message and used to authenticate the client to the service might also change.</span></span>  
  
 <span data-ttu-id="b8003-126">Если при использовании проверки подлинности Windows совместно с олицетворением требуется детерминированное поведение, необходимо явным образом задать учетные данные Windows или установить со службой контекст безопасности.</span><span class="sxs-lookup"><span data-stu-id="b8003-126">If you want to have deterministic behavior when using Windows authentication together with impersonation you need to explicitly set the Windows credential or you need to establish a security context with the service.</span></span> <span data-ttu-id="b8003-127">Для этого следует использовать сеанс безопасности сообщений или сеанс безопасности транспорта.</span><span class="sxs-lookup"><span data-stu-id="b8003-127">To do this, use a message security session or a transport security session.</span></span> <span data-ttu-id="b8003-128">Например, сеанс безопасности транспорта можно обеспечить с помощью транспорта net.tcp.</span><span class="sxs-lookup"><span data-stu-id="b8003-128">For example, the net.tcp transport can provide a transport security session.</span></span> <span data-ttu-id="b8003-129">Кроме того, при вызове службы необходимо использовать только синхронную версию операций клиента.</span><span class="sxs-lookup"><span data-stu-id="b8003-129">Additionally, you must use only a synchronous version of client operations when calling the service.</span></span> <span data-ttu-id="b8003-130">При установки контекста безопасности сообщений необходимо поддерживать подключение к службе открытым дольше, чем длится настроенный период обновления сеанса, поскольку удостоверение также может измениться в процессе обновления сеанса.</span><span class="sxs-lookup"><span data-stu-id="b8003-130">If you establish a message security context, you should not keep the connection to the service open longer than the configured session renewal period, because the identity can also change during the session renewal process.</span></span>  
  
### <a name="credentials-capture"></a><span data-ttu-id="b8003-131">Получение учетных данных</span><span class="sxs-lookup"><span data-stu-id="b8003-131">Credentials Capture</span></span>  
 <span data-ttu-id="b8003-132">Приведенные ниже сведения относятся к [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] и последующим версиям.</span><span class="sxs-lookup"><span data-stu-id="b8003-132">The following applies to [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)], and subsequent versions.</span></span>  
  
 <span data-ttu-id="b8003-133">Учетные данные, используемые клиентом или службой, основаны на текущем потоке контекста.</span><span class="sxs-lookup"><span data-stu-id="b8003-133">Credentials used by the client or the service are based on the current context thread.</span></span> <span data-ttu-id="b8003-134">Получение учетных данных происходит, когда вызывается метод `Open` (или `BeginOpen` для асинхронных вызовов) клиента или службы.</span><span class="sxs-lookup"><span data-stu-id="b8003-134">The credentials are obtained when the `Open` method (or `BeginOpen`, for asynchronous calls) of the client or service is called.</span></span> <span data-ttu-id="b8003-135">Для классов <xref:System.ServiceModel.ServiceHost> и <xref:System.ServiceModel.ClientBase%601> методы `Open` и `BeginOpen` наследуются от методов <xref:System.ServiceModel.Channels.CommunicationObject.Open%2A> и <xref:System.ServiceModel.Channels.CommunicationObject.BeginOpen%2A> класса <xref:System.ServiceModel.Channels.CommunicationObject>.</span><span class="sxs-lookup"><span data-stu-id="b8003-135">For both the <xref:System.ServiceModel.ServiceHost> and <xref:System.ServiceModel.ClientBase%601> classes, the `Open` and `BeginOpen` methods inherit from the <xref:System.ServiceModel.Channels.CommunicationObject.Open%2A> and <xref:System.ServiceModel.Channels.CommunicationObject.BeginOpen%2A> methods of the <xref:System.ServiceModel.Channels.CommunicationObject> class.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b8003-136">При использовании метода `BeginOpen` невозможно гарантировать, что получаемые учетные данные принадлежат процессу, вызвавшему метод.</span><span class="sxs-lookup"><span data-stu-id="b8003-136">When using the `BeginOpen` method, the credentials captured cannot be guaranteed to be the credentials of the process that calls the method.</span></span>  
  
## <a name="token-caches-allow-replay-using-obsolete-data"></a><span data-ttu-id="b8003-137">Кэширование делает возможным повторное использование маркеров с помощью устаревших данных</span><span class="sxs-lookup"><span data-stu-id="b8003-137">Token Caches Allow Replay Using Obsolete Data</span></span>  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="b8003-138"> использует функцию `LogonUser` подсистемы LSA для проверки подлинности пользователей по их имени и паролю.</span><span class="sxs-lookup"><span data-stu-id="b8003-138"> uses the local security authority (LSA) `LogonUser` function to authenticate users by user name and password.</span></span> <span data-ttu-id="b8003-139">Поскольку при вызове функции входа используется большое количество ресурсов, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] позволяет в целях повышения производительности кэшировать маркеры, представляющие прошедших проверку подлинности пользователей.</span><span class="sxs-lookup"><span data-stu-id="b8003-139">Because the logon function is a costly operation, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] allows you to cache tokens that represent authenticated users to increase performance.</span></span> <span data-ttu-id="b8003-140">Механизм кэширования сохраняет результаты предыдущей функции `LogonUser` для использования в будущем.</span><span class="sxs-lookup"><span data-stu-id="b8003-140">The caching mechanism saves the results from `LogonUser` for subsequent uses.</span></span> <span data-ttu-id="b8003-141">Этот механизм отключен по умолчанию. Чтобы ее включить, задайте <xref:System.ServiceModel.Security.UserNamePasswordServiceCredential.CacheLogonTokens%2A> свойства `true`, или используйте `cacheLogonTokens` атрибут [ \<userNameAuthentication >](../../../../docs/framework/configure-apps/file-schema/wcf/usernameauthentication.md).</span><span class="sxs-lookup"><span data-stu-id="b8003-141">This mechanism is disabled by default; to enable it, set the <xref:System.ServiceModel.Security.UserNamePasswordServiceCredential.CacheLogonTokens%2A> property to `true`, or use the `cacheLogonTokens` attribute of the [\<userNameAuthentication>](../../../../docs/framework/configure-apps/file-schema/wcf/usernameauthentication.md).</span></span>  
  
 <span data-ttu-id="b8003-142">Чтобы установить срок жизни кэшированных маркеров, задайте для свойства <xref:System.ServiceModel.Security.UserNamePasswordServiceCredential.CachedLogonTokenLifetime%2A> значение <xref:System.TimeSpan> или установите значение атрибута `cachedLogonTokenLifetime` элемента `userNameAuthentication`; значение по умолчанию - 15 минут.</span><span class="sxs-lookup"><span data-stu-id="b8003-142">You can set a Time to Live (TTL) for the cached tokens by setting the <xref:System.ServiceModel.Security.UserNamePasswordServiceCredential.CachedLogonTokenLifetime%2A> property to a <xref:System.TimeSpan>, or use the `cachedLogonTokenLifetime` attribute of the `userNameAuthentication` element; the default is 15 minutes.</span></span> <span data-ttu-id="b8003-143">Обратите внимание, что пока маркер находится в кэше, любой клиент, который указывает соответствующие имя пользователя и пароль, может использовать маркер, даже если учетная запись была удалена из Windows или если пароль изменился.</span><span class="sxs-lookup"><span data-stu-id="b8003-143">Note that while a token is cached, any client that presents the same user name and password can use the token, even if the user account is deleted from Windows or if its password has been changed.</span></span> <span data-ttu-id="b8003-144">До истечения срока жизни и удаления маркера из кэша [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] позволяет пользователям (в том числе и потенциально опасным) проходить проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="b8003-144">Until the TTL expires and the token is removed from the cache, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] allows the (possibly malicious) user to authenticate.</span></span>  
  
 <span data-ttu-id="b8003-145">Чтобы ограничить связанные с этим угрозы, уменьшите вероятность атаки, задав в качестве значения `cachedLogonTokenLifetime` минимальный промежуток времени, который может потребоваться пользователям.</span><span class="sxs-lookup"><span data-stu-id="b8003-145">To mitigate this: Decrease the attack window by setting the `cachedLogonTokenLifetime` value to the shortest time span your users need.</span></span>  
  
## <a name="issued-token-authorization-expiration-reset-to-large-value"></a><span data-ttu-id="b8003-146">Авторизация выданных маркеров: сброс времени истечения до больших значений</span><span class="sxs-lookup"><span data-stu-id="b8003-146">Issued Token Authorization: Expiration Reset to Large Value</span></span>  
 <span data-ttu-id="b8003-147">При выполнении некоторых условий для свойства <xref:System.IdentityModel.Policy.AuthorizationContext.ExpirationTime%2A> объекта <xref:System.IdentityModel.Policy.AuthorizationContext> может быть установлено неожиданно большое значение (значение поля <xref:System.DateTime.MaxValue> минус один день или 20 декабря 9999 г.).</span><span class="sxs-lookup"><span data-stu-id="b8003-147">Under certain conditions, the <xref:System.IdentityModel.Policy.AuthorizationContext.ExpirationTime%2A> property of the <xref:System.IdentityModel.Policy.AuthorizationContext> may be set to an unexpectedly larger value (the <xref:System.DateTime.MaxValue> field value minus one day, or December 20, 9999).</span></span>  
  
 <span data-ttu-id="b8003-148">Это происходит при использовании <xref:System.ServiceModel.WSFederationHttpBinding> и любой из предоставляемых системой привязок, которые получили в качестве типа удостоверения клиента выданный маркер.</span><span class="sxs-lookup"><span data-stu-id="b8003-148">This occurs when using the <xref:System.ServiceModel.WSFederationHttpBinding> and any of the system-provided bindings that have an issued token as the client credential type.</span></span>  
  
 <span data-ttu-id="b8003-149">Кроме того, это происходит при создании пользовательских привязок с помощью одного из следующих методов.</span><span class="sxs-lookup"><span data-stu-id="b8003-149">This also occurs when you create custom bindings by using one of the following methods:</span></span>  
  
-   <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenBindingElement%2A>  
  
-   <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenForCertificateBindingElement%2A>  
  
-   <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenForSslBindingElement%2A>  
  
-   <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenOverTransportBindingElement%2A>  
  
 <span data-ttu-id="b8003-150">Чтобы ограничить эту проблему, политика авторизации должна проверять действие и срок действия каждой политики авторизации.</span><span class="sxs-lookup"><span data-stu-id="b8003-150">To mitigate this, the authorization policy must check the action and the expiration time of each authorization policy.</span></span>  
  
## <a name="the-service-uses-a-different-certificate-than-the-client-intended"></a><span data-ttu-id="b8003-151">Служба использует не тот сертификат, который ожидает клиент</span><span class="sxs-lookup"><span data-stu-id="b8003-151">The Service Uses a Different Certificate Than the Client Intended</span></span>  
 <span data-ttu-id="b8003-152">При выполнении определенных условий клиент может снабдить сообщение цифровой подписью с сертификатом X.509, но служба извлечет другой сертификат.</span><span class="sxs-lookup"><span data-stu-id="b8003-152">Under certain conditions, a client can digitally sign a message with an X.509 certificate and have the service retrieve a different certificate than the intended one.</span></span>  
  
 <span data-ttu-id="b8003-153">Это может произойти при следующих обстоятельствах.</span><span class="sxs-lookup"><span data-stu-id="b8003-153">This can occur under the following circumstances:</span></span>  
  
-   <span data-ttu-id="b8003-154">Клиент снабжает сообщение цифровой подписью с сертификатом X.509, но не прикрепляет к сообщению сертификат X.509; вместо этого он только ссылается на сертификат, используя идентификатор ключа субъекта.</span><span class="sxs-lookup"><span data-stu-id="b8003-154">The client digitally signs a message using an X.509 certificate and does not attach the X.509 certificate to the message, but rather just references the certificate using its subject key identifier.</span></span>  
  
-   <span data-ttu-id="b8003-155">Компьютер службы содержит один или несколько сертификатов с одним и тем же открытым ключом, но они содержат различную информацию.</span><span class="sxs-lookup"><span data-stu-id="b8003-155">The service's computer contains two or more certificates with the same public key, but they contain different information.</span></span>  
  
-   <span data-ttu-id="b8003-156">Служба извлекает сертификат, соответствующий идентификатору ключа субъекта, но оказывается, что это не тот сертификат, использования которого ожидал клиент.</span><span class="sxs-lookup"><span data-stu-id="b8003-156">The service retrieves a certificate that matches the subject key identifier, but it is not the one the client intended to use.</span></span> <span data-ttu-id="b8003-157">Когда среда [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] получает сообщение и проверяет подпись, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] сопоставляет информацию в извлеченном сертификате X.509 с набором утверждений, которые отличаются от ожидаемых клиентом и, возможно, предоставляют расширенные полномочия.</span><span class="sxs-lookup"><span data-stu-id="b8003-157">When [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] receives the message and verifies the signature, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] maps the information in the unintended X.509 certificate to a set of claims that are different and potentially elevated from what the client expected.</span></span>  
  
 <span data-ttu-id="b8003-158">Чтобы избежать этого, следует ссылаться на сертификат X.509 иначе, например с помощью поля <xref:System.ServiceModel.Security.Tokens.X509KeyIdentifierClauseType.IssuerSerial>.</span><span class="sxs-lookup"><span data-stu-id="b8003-158">To mitigate this, reference the X.509 certificate another way, such as using <xref:System.ServiceModel.Security.Tokens.X509KeyIdentifierClauseType.IssuerSerial>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b8003-159">См. также</span><span class="sxs-lookup"><span data-stu-id="b8003-159">See Also</span></span>  
 [<span data-ttu-id="b8003-160">Вопросы безопасности</span><span class="sxs-lookup"><span data-stu-id="b8003-160">Security Considerations</span></span>](../../../../docs/framework/wcf/feature-details/security-considerations-in-wcf.md)  
 [<span data-ttu-id="b8003-161">Раскрытие информации</span><span class="sxs-lookup"><span data-stu-id="b8003-161">Information Disclosure</span></span>](../../../../docs/framework/wcf/feature-details/information-disclosure.md)  
 [<span data-ttu-id="b8003-162">Отказ в обслуживании</span><span class="sxs-lookup"><span data-stu-id="b8003-162">Denial of Service</span></span>](../../../../docs/framework/wcf/feature-details/denial-of-service.md)  
 [<span data-ttu-id="b8003-163">Атаки с повторением</span><span class="sxs-lookup"><span data-stu-id="b8003-163">Replay Attacks</span></span>](../../../../docs/framework/wcf/feature-details/replay-attacks.md)  
 [<span data-ttu-id="b8003-164">Подделка</span><span class="sxs-lookup"><span data-stu-id="b8003-164">Tampering</span></span>](../../../../docs/framework/wcf/feature-details/tampering.md)  
 [<span data-ttu-id="b8003-165">Неподдерживаемые сценарии</span><span class="sxs-lookup"><span data-stu-id="b8003-165">Unsupported Scenarios</span></span>](../../../../docs/framework/wcf/feature-details/unsupported-scenarios.md)
