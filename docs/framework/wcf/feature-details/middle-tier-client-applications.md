---
title: "Клиентские приложения среднего уровня | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework-4.6"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
ms.assetid: f9714a64-d0ae-4a98-bca0-5d370fdbd631
caps.latest.revision: 11
author: "Erikre"
ms.author: "erikre"
manager: "erikre"
caps.handback.revision: 11
---
# Клиентские приложения среднего уровня
В данном разделе описываются различные вопросы, связанные с клиентскими приложениями среднего уровня, использующими [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].  
  
## Увеличение производительности клиента среднего уровня  
 По сравнению с предыдущими технологиями связи, такими как веб\-службы, использующие [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)], создание экземпляра клиента [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] может быть более сложной задачей из\-за богатого набора функций [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].  Например, при открытии объекта <xref:System.ServiceModel.ChannelFactory%601> он может установить безопасный сеанс со службой, что увеличит время запуска экземпляра клиента.  Обычно такие дополнительные функциональные возможности сильно не влияют на клиентские приложения, поскольку клиент [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] выполняет несколько вызовов, а затем закрывается.  
  
 Однако клиентские приложения среднего уровня могут быстро создавать множество объектов клиента [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] и, как следствие, имеют более высокие требования инициализации.  Существует два основных подхода к увеличению производительности приложений среднего уровня при вызове служб.  
  
-   Кэширование объекта клиента [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] и его повторное использование для последующих вызовов там, где это возможно.  
  
-   Создание объекта <xref:System.ServiceModel.ChannelFactory%601> и его использование для создания новых объектов клиентских каналов [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] для каждого вызова.  
  
 При использовании этих подходов следует рассмотреть следующие вопросы.  
  
-   Если служба сохраняет характерное для клиента состояние, используя сеанс, невозможно повторно использовать клиент [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] среднего уровня с запросами уровня нескольких клиентов, поскольку состояние службы связано с состоянием клиента среднего уровня.  
  
-   Если служба должна выполнить проверку подлинности на основе отдельных клиентов, следует создать новый клиент для каждого входящего запроса на среднем уровне вместо повторного использования клиента [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] среднего уровня \(или объекта клиентского канала [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]\), поскольку учетные данные клиента среднего уровня невозможно изменить после создания клиента [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] \(или <xref:System.ServiceModel.ChannelFactory%601>\).  
  
-   Поскольку каналы и клиенты, созданные этими каналами, потокобезопасны, они могут не поддерживать запись нескольких сообщений по сети одновременно.  При отправке больших сообщений, в частности, при потоковой передаче, операция отправки может заблокироваться, ожидая завершения еще одной отправки.  Это может стать причиной возникновения двух проблем: отсутствия параллелизма и возможности взаимоблокировки, если поток команд управления возвращается в службу, повторно используя канал \(т. е. общий клиент вызывает службу, путь кода которой приводит к обратному вызову общего клиента\).  Это верно независимо от типа клиента [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], используемого повторно.  
  
-   Каналы со сбоем необходимо обрабатывать независимо от того, используется ли канал совместно.  Однако, если каналы используются повторно, канал со сбоем может привести к отмене нескольких ожидающих запросов или отправок.  
  
 Пример с рекомендациями по повторному использованию клиента для нескольких запросов см. в разделе [Привязка данных в клиенте ASP.NET](../../../../docs/framework/wcf/samples/data-binding-in-an-aspnet-client.md).  
  
 Кроме того, можно повысить производительность при запуске для клиентов, которые используют типы данных, сериализуемые при помощи сериализатора <xref:System.Xml.Serialization.XmlSerializer>, создают и компилируют код сериализации для этих типов данных в среде выполнения, что может привести к снижению производительности при запуске.  [Служебное средство ServiceModel Metadata Utility Tool \(Svcutil.exe\)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) может улучшить производительность при запуске этих приложений путем создания необходимого кода сериализации из компилированных сборок для приложения.  Для получения дополнительной информации см. [Как сократить время запуска клиентских приложений WCF с использованием XmlSerializer](../../../../docs/framework/wcf/feature-details/startup-time-of-wcf-client-applications-using-the-xmlserializer.md).  
  
## См. также  
 [Обращение к службам с использованием клиента WCF](../../../../docs/framework/wcf/feature-details/accessing-services-using-a-client.md)