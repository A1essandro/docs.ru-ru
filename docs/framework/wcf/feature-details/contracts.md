---
title: "Контракты | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "контракты [WCF]"
  - "WCF [WCF], контракты"
  - "Windows Communication Foundation [WCF], контракты"
ms.assetid: c8364183-4ac1-480b-804a-c5e6c59a5d7d
caps.latest.revision: 7
author: "Erikre"
ms.author: "erikre"
manager: "erikre"
caps.handback.revision: 7
---
# Контракты
В настоящем разделе описывается, как определить и реализовать контракты [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].  Контракт службы указывает, какую информацию конечная точка передает во внешний мир.  На более конкретном уровне, это выписка о наборе специальных сообщений, объединенных в такие базовые шаблоны обмена сообщениями \(MEP\), как запрос\/ответ, односторонний обмен и дуплексный обмен.  Если контракт службы является логически связанным набором обмена сообщениями, операция службы \- это обмен одним сообщением.  Например, операция `Hello` явно должна явно принять одно сообщение \(к примеру, вызывающая сторона может объявить приветствие\) и может вернуть или не вернуть сообщение \(в зависимости от характера операции\).  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)] контрактах и других основных понятиях [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] см. [Основные понятия Windows Communication Foundation](../../../../docs/framework/wcf/fundamental-concepts.md).  В данном разделе рассматриваются контракты служб.  [!INCLUDE[crabout](../../../../includes/crabout-md.md)] сборке клиентов, использующих контракты для подключения к службам, см. в разделе [Общие сведения о клиентах WCF](../../../../docs/framework/wcf/wcf-client-overview.md).  [!INCLUDE[crabout](../../../../includes/crabout-md.md)] каналах клиента, архитектуре клиента и других вопросах, связанных с клиентом, см. в разделе [Клиенты](../../../../docs/framework/wcf/feature-details/clients.md).  
  
## Обзор  
 В настоящем разделе дается высокоуровневое введение в принципы разработки и реализации служб [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].  В подразделах приводятся более подробные сведения об особенностях разработки и реализации.  Перед разработкой и реализацией приложения [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] рекомендуется:  
  
-   понять, что представляет собой контракт службы, как он работает и как его создать;  
  
-   понять, что контракты устанавливают минимальные требования, которые конфигурация среды выполнения или среда размещения могут не поддерживать.  
  
## Контракты служб  
 Контракт службы \- это заявление, в котором принимаются обязательства в отношении:  
  
-   группирования операций в службу;  
  
-   сигнатуры операций, связанной с обменом сообщениями;  
  
-   типов данных этих сообщений;  
  
-   расположения операций;  
  
-   специальных протоколов и форматов сериализации, используемых для поддержки успешной связи со службой.  
  
 Например, контракт, связанный с заказом на поставку, может содержать операцию `CreateOrder`, которая принимает входные данные о типах информации заказа и возвращает информацию об успешности или сбое, включая идентификатор заказа.  Он также может содержать операцию `GetOrderStatus`, которая принимает идентификатор заказа и возвращает информацию о состоянии заказа.  Контракт службы этого типа указывает:  
  
-   что контракт, связанный с заказом на поставку, состоит из операций `CreateOrder` и `GetOrderStatus`;  
  
-   что операции имеют заданные входные и выходные сообщения;  
  
-   данные, которые могут передаваться в этих сообщениях;  
  
-   категорические заявления об инфраструктуре связи, необходимые для успешной обработки сообщений.  Например, эти сведения включают данные о том, требуются ли какие\-либо формы безопасности для установления успешной связи, и какие конкретно формы безопасности.  
  
 Чтобы передать сведения этого типа в другие приложения на других платформах \(включая платформы не Майкрософт\), контракты XML\-служб открыто представляются в стандартных форматах XML, например в формате [языка описания веб\-служб \(WSDL\)](http://go.microsoft.com/fwlink/?LinkId=87004), в формате [схемы XML \(XSD\)](http://go.microsoft.com/fwlink/?LinkId=87005) и других форматах.  Разработчики многих платформ могут использовать эти открытые данные контрактов для создания приложений, которые могут взаимодействовать со службой, поскольку они понимают язык спецификации, и эти языки позволяют обеспечить возможность взаимодействия, описывая открытые формы, форматы и протоколы, поддерживаемые службой.  [!INCLUDE[crabout](../../../../includes/crabout-md.md)] том, как [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] обрабатывают данные этого типа, см. в разделе [Метаданные](../../../../docs/framework/wcf/feature-details/metadata.md).  
  
 Контракты могут выражаться различными способами. Хотя языки WSDL и XSD отлично подходят для описания служб доступным способом, их трудно использовать непосредственно, и они представляют просто описания службы, а не реализации контракта службы.  Поэтому приложения [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] используют управляемые атрибуты, интерфейсы и классы как для определения структуры службы, так и для ее реализации.  
  
 Получающийся контракт, определенный в управляемых типах, может быть преобразован \(или *экспортирован*\) как метаданные \(WSDL и XSD\), когда это требуется клиентам или другим ответственным за реализацию службы, особенно на других платформах.  Результат — простая модель программирования, которая может быть описана с использованием открытых метаданных для любого клиентского приложения.  Подробности базовых сообщений SOAP, такие как информация о транспорте и безопасности, могут быть предоставлены [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], который автоматически выполняет необходимые преобразования в систему типа контракта службы и из системы типа контракта службы в систему типа XML.  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)] разработке контрактов см. в разделе [Создание контрактов служб](../../../../docs/framework/wcf/designing-service-contracts.md).  [!INCLUDE[crabout](../../../../includes/crabout-md.md)] реализации контрактов см. в разделе [Реализация контрактов служб](../../../../docs/framework/wcf/implementing-service-contracts.md).  
  
 Кроме того, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] дает возможность разрабатывать контракты службы целиком на уровне сообщения.  [!INCLUDE[crabout](../../../../includes/crabout-md.md)] разработке контрактов службы на уровне сообщения см. в разделе [Использование контрактов сообщений](../../../../docs/framework/wcf/feature-details/using-message-contracts.md).  [!INCLUDE[crabout](../../../../includes/crabout-md.md)] разработке служб в XML\-коде, не относящемся к протоколу SOAP, см. в разделе [Взаимодействие с приложениями POX](../../../../docs/framework/wcf/feature-details/interoperability-with-pox-applications.md).  
  
### Понимание иерархии требований  
 В контракте службы группируются операции, задаются шаблон обмена сообщениями, типы сообщений и типы данных, передаваемых в этих сообщениях, а также указываются категории поведения во время выполнения, которые должны быть предусмотрены в реализации для поддержки контракта \(например, может требоваться, чтобы сообщения шифровались и подписывались\).  В самом контракте службы, однако, точно не указывается, как удовлетворяются эти требования, а указывается только то, что они должны быть удовлетворены.  Выбор типа шифрования или способа, с помощью которого подписывается сообщение, определяются реализацией и конфигурацией совместимой службы.  
  
 Обратите внимание на то, каким способом контракт предъявляет определенные требования к реализации контракта службы и конфигурации среды выполнения для добавления поведения.  Набор требований, которые должны быть удовлетворены для передачи службы в использование, основывается на предыдущем наборе требований.  Если контракт предъявляет некоторые требования к реализации, реализация может предъявлять дополнительные требования к конфигурации и привязкам, которые позволяют запустить службу.  Наконец, ведущее приложение должно также поддерживать любые требования, добавляемые конфигурацией и привязками службы.  
  
 Этот аддитивный процесс предъявления требований важно иметь в виду при разработке, реализации, настройке и размещении приложения службы [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].  Например, в контракте может указываться, что ему требуется для поддержки сеанса.  В этом случае необходимо настроить привязку для поддержки этого требования контракта, иначе реализация службы работать не будет.  Если же служба требует встроенной проверки подлинности Windows и размещается в службах IIS, в веб\-приложении, где находится служба, то должна быть включена встроенная проверка подлинности Windows и отключена поддержка анонимных обращений.  [!INCLUDE[crabout](../../../../includes/crabout-md.md)] функциях и влиянии различных типов ведущих приложений служб см. в разделе [Размещение](../../../../docs/framework/wcf/feature-details/hosting.md).  
  
## См. также  
 [Конечные точки: адреса, привязки и контракты](../../../../docs/framework/wcf/feature-details/endpoints-addresses-bindings-and-contracts.md)   
 [Создание контрактов служб](../../../../docs/framework/wcf/designing-service-contracts.md)   
 [Реализация контрактов служб](../../../../docs/framework/wcf/implementing-service-contracts.md)