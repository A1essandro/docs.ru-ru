---
title: Рекомендации по взаимодействию с использованием очередей
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- queues [WCF], best practices
- best practices [WCF], queued communication
ms.assetid: 446a6383-cae3-4338-b193-a33c14a49948
caps.latest.revision: 14
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: 3834f48c407f799fc5fede17182f47652f49747f
ms.sourcegitcommit: 86adcc06e35390f13c1e372c36d2e044f1fc31ef
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/26/2018
---
# <a name="best-practices-for-queued-communication"></a><span data-ttu-id="7a2c4-102">Рекомендации по взаимодействию с использованием очередей</span><span class="sxs-lookup"><span data-stu-id="7a2c4-102">Best Practices for Queued Communication</span></span>
<span data-ttu-id="7a2c4-103">В этом разделе приведены рекомендации по взаимодействию с использованием очередей в [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7a2c4-103">This topic provides recommended practices for queued communication in [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].</span></span> <span data-ttu-id="7a2c4-104">В последующих разделах рассматриваются рекомендации с точки зрения сценариев.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-104">The following sections discuss recommended practices from a scenario perspective.</span></span>  
  
## <a name="fast-best-effort-queued-messaging"></a><span data-ttu-id="7a2c4-105">Быстрый наилучший обмен сообщениями с использованием очередей</span><span class="sxs-lookup"><span data-stu-id="7a2c4-105">Fast, Best-Effort Queued Messaging</span></span>  
 <span data-ttu-id="7a2c4-106">Для сценариев, в которых требуется разделение, обеспечиваемое обменом сообщений с использованием очередей, и быстрый высокоэффективный обмен сообщениями с гарантиями наилучшего из возможного, используйте нетранзакционную очередь и задайте для свойства <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> значение `false`.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-106">For scenarios that require separation that queued messaging provides and fast, high-performance messaging with best-effort assurances, use a non-transactional queue and set the <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> property to `false`.</span></span>  
  
 <span data-ttu-id="7a2c4-107">Дополнительно можно исключить затраты на запись на диск, задав для свойства <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> значение `false`.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-107">In addition, you can choose not to incur the cost of disk writes by setting the <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> property to `false`.</span></span>  
  
 <span data-ttu-id="7a2c4-108">Безопасность влияет на производительность.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-108">Security has implications on performance.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="7a2c4-109"> [Вопросы производительности](../../../../docs/framework/wcf/feature-details/performance-considerations.md).</span><span class="sxs-lookup"><span data-stu-id="7a2c4-109"> [Performance Considerations](../../../../docs/framework/wcf/feature-details/performance-considerations.md).</span></span>  
  
## <a name="reliable-end-to-end-queued-messaging"></a><span data-ttu-id="7a2c4-110">Надежный сквозной обмен сообщениями с использованием очередей</span><span class="sxs-lookup"><span data-stu-id="7a2c4-110">Reliable End-to-End Queued Messaging</span></span>  
 <span data-ttu-id="7a2c4-111">В последующих разделах приводятся рекомендации для сценариев, требующих надежного сквозного обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-111">The following sections describe recommended practices for scenarios that require end-to-end reliable messaging.</span></span>  
  
### <a name="basic-reliable-transfer"></a><span data-ttu-id="7a2c4-112">Базовая надежная передача</span><span class="sxs-lookup"><span data-stu-id="7a2c4-112">Basic Reliable Transfer</span></span>  
 <span data-ttu-id="7a2c4-113">Для сквозной надежности установите для свойства <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> значение `true`, чтобы обеспечить передачу.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-113">For end-to-end reliability, set the <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> property to `true` to ensure transfer.</span></span> <span data-ttu-id="7a2c4-114">Для свойства <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> можно задать значение `true` или `false`, в зависимости от требований (значение по умолчанию - `true`).</span><span class="sxs-lookup"><span data-stu-id="7a2c4-114">The <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> property can be set to `true` or `false` depending on your requirements (the default is `true`).</span></span> <span data-ttu-id="7a2c4-115">Как правило, для свойства <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> задается значение `true` как составная часть сквозной надежности.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-115">Generally, the <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> property is set to `true` as part of end-to-end reliability.</span></span> <span data-ttu-id="7a2c4-116">Компромисс достигается за счет производительности, но сообщения становятся устойчивыми и не теряются в случае сбоя диспетчера очередей.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-116">The compromise is a performance cost, but makes the message durable so that the message is not lost if a queue manager crashes.</span></span>  
  
### <a name="use-of-transactions"></a><span data-ttu-id="7a2c4-117">Использование транзакций</span><span class="sxs-lookup"><span data-stu-id="7a2c4-117">Use of Transactions</span></span>  
 <span data-ttu-id="7a2c4-118">Необходимо использовать транзакции для обеспечения сквозной надежности.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-118">You must use transactions to ensure end-to-end reliability.</span></span> <span data-ttu-id="7a2c4-119">Гарантии `ExactlyOnce` обеспечивают только доставку сообщений в целевую очередь.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-119">`ExactlyOnce` assurances only ensure that messages are delivered to the target queue.</span></span> <span data-ttu-id="7a2c4-120">Чтобы гарантировать получение сообщений, используйте транзакции.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-120">To ensure that the message is received, use transactions.</span></span> <span data-ttu-id="7a2c4-121">Без транзакций в случае сбоя службы будет потеряно сообщение, находящееся в процессе доставки, но фактически доставленное в приложение.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-121">Without transactions, if the service crashes, you lose the message that is being delivered but is actually delivered to the application.</span></span>  
  
### <a name="use-of-dead-letter-queues"></a><span data-ttu-id="7a2c4-122">Использование очередей недоставленных сообщений</span><span class="sxs-lookup"><span data-stu-id="7a2c4-122">Use of Dead-letter Queues</span></span>  
 <span data-ttu-id="7a2c4-123">Очереди недоставленных сообщений обеспечивают уведомления в случаях, когда не удалось доставить сообщение в целевую очередь.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-123">Dead-letter queues ensure that you are notified if a message fails to be delivered to the target queue.</span></span> <span data-ttu-id="7a2c4-124">Можно использовать системную очередь недоставленных сообщений или пользовательскую очередь недоставленных сообщений.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-124">You can use the system-provided dead-letter queue or a custom dead-letter queue.</span></span> <span data-ttu-id="7a2c4-125">Как правило, лучше использовать пользовательскую очередь недоставленных сообщений, так как она позволяет отправлять недоставленные сообщения из одного приложения в отдельную очередь недоставленных сообщений.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-125">In general, using a custom dead-letter queue is best because it enables you to send dead-letter messages from one application into a single dead-letter queue.</span></span> <span data-ttu-id="7a2c4-126">В противном случае все недоставленные сообщения из всех работающих в системе приложений будут доставляться в одну очередь.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-126">Otherwise, all dead-letter messages that occur for all applications running on the system are delivered to a single queue.</span></span> <span data-ttu-id="7a2c4-127">Затем каждое приложение должно просматривать очередь недоставленных сообщений, чтобы найти недоставленные сообщения, относящиеся к этому приложению.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-127">Each application must then search though the dead-letter queue to find the dead-letter messages that are relevant to that application.</span></span> <span data-ttu-id="7a2c4-128">Иногда использование пользовательской очереди недоставленных сообщений невозможно, например, при использовании MSMQ 3.0.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-128">Sometimes, using a custom dead-letter queue is not feasible, such as when using MSMQ 3.0.</span></span>  
  
 <span data-ttu-id="7a2c4-129">Для сквозной надежности связи не рекомендуется выключать очереди недоставленных сообщений.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-129">Turning off dead-letter queues for end-to-end reliable communication is not recommended.</span></span>  
  
 [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="7a2c4-130"> [Использование очередей недоставленных сообщений для обработки сбоев при передаче сообщений](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md).</span><span class="sxs-lookup"><span data-stu-id="7a2c4-130"> [Using Dead-Letter Queues to Handle Message Transfer Failures](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md).</span></span>  
  
### <a name="use-of-poison-message-handling"></a><span data-ttu-id="7a2c4-131">Использование обработки подозрительных сообщений</span><span class="sxs-lookup"><span data-stu-id="7a2c4-131">Use of Poison-Message Handling</span></span>  
 <span data-ttu-id="7a2c4-132">Обработка подозрительных сообщений обеспечивает возможность восстановления после сбоя при обработке сообщений.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-132">Poison-message handling provides the ability to recover from the failure to process messages.</span></span>  
  
 <span data-ttu-id="7a2c4-133">При использовании функции обработки подозрительных сообщений убедитесь, что для свойства <xref:System.ServiceModel.MsmqBindingBase.ReceiveErrorHandling%2A> задано подходящее значение.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-133">When using the poison-message handling feature, ensure that the <xref:System.ServiceModel.MsmqBindingBase.ReceiveErrorHandling%2A> property is set to the appropriate value.</span></span> <span data-ttu-id="7a2c4-134">Если свойству присвоено значение <xref:System.ServiceModel.ReceiveErrorHandling.Drop>, это означает потерю данных.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-134">Setting it to <xref:System.ServiceModel.ReceiveErrorHandling.Drop> means the data is lost.</span></span> <span data-ttu-id="7a2c4-135">С другой стороны, значение <xref:System.ServiceModel.ReceiveErrorHandling.Fault> этого свойства вызывает сбой узла службы в случае обнаружения подозрительного сообщения.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-135">On the other hand, setting it to <xref:System.ServiceModel.ReceiveErrorHandling.Fault> faults the service host when it detects a poison message.</span></span> <span data-ttu-id="7a2c4-136">При использовании MSMQ 3.0 значение <xref:System.ServiceModel.ReceiveErrorHandling.Fault> - это наилучший способ избежать потери данных и избавиться от подозрительного сообщения.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-136">Using MSMQ 3.0, <xref:System.ServiceModel.ReceiveErrorHandling.Fault> is the best option to avoid data loss and move the poison message out of the way.</span></span> <span data-ttu-id="7a2c4-137">При использовании MSMQ 4.0 <xref:System.ServiceModel.ReceiveErrorHandling.Move> является рекомендуемым способом.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-137">Using MSMQ 4.0, <xref:System.ServiceModel.ReceiveErrorHandling.Move> is the recommended approach.</span></span> <span data-ttu-id="7a2c4-138">Операция <xref:System.ServiceModel.ReceiveErrorHandling.Move> обеспечивает перемещение подозрительного сообщения из очереди, чтобы служба могла продолжать обрабатывать новые сообщения.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-138"><xref:System.ServiceModel.ReceiveErrorHandling.Move> moves a poisoned message out of the queue so the service can continue to process new messages.</span></span> <span data-ttu-id="7a2c4-139">Затем служба подозрительных сообщений может отдельно обработать подозрительное сообщение.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-139">The poison-message service can then process the poison message separately.</span></span>  
  
 [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="7a2c4-140"> [Обработка подозрительных сообщений](../../../../docs/framework/wcf/feature-details/poison-message-handling.md).</span><span class="sxs-lookup"><span data-stu-id="7a2c4-140"> [Poison Message Handling](../../../../docs/framework/wcf/feature-details/poison-message-handling.md).</span></span>  
  
## <a name="achieving-high-throughput"></a><span data-ttu-id="7a2c4-141">Достижение высокой пропускной способности</span><span class="sxs-lookup"><span data-stu-id="7a2c4-141">Achieving High Throughput</span></span>  
 <span data-ttu-id="7a2c4-142">Чтобы добиться высокой пропускной способности в одной конечной точке, используйте перечисленные ниже средства.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-142">To achieve high throughput on a single endpoint, use the following:</span></span>  
  
-   <span data-ttu-id="7a2c4-143">Пакетирование с поддержкой транзакций.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-143">Transacted batching.</span></span> <span data-ttu-id="7a2c4-144">Пакетирование с поддержкой транзакций обеспечивает возможность чтения нескольких сообщений в одной транзакции.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-144">Transacted batching ensures that many messages can be read in a single transaction.</span></span> <span data-ttu-id="7a2c4-145">При этом оптимизируются фиксации транзакции, что повышает общую производительность.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-145">This optimizes transaction commits, increasing overall performance.</span></span> <span data-ttu-id="7a2c4-146">Недостаток пакетирования заключается в том, что при сбое в одном сообщении из пакета производится откат всего пакета, и сообщения требуется обрабатывать по одному до тех пор, пока не появится возможность снова объединять их в пакет.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-146">The cost of batching is that if a failure occurs in a single message within a batch, then the entire batch is rolled back and the messages must be processed one at a time until it is safe to batch again.</span></span> <span data-ttu-id="7a2c4-147">В большинстве случаев подозрительные сообщения встречаются редко, поэтому пакетирование - это предпочтительный способ повышения производительности системы, особенно при наличии других диспетчеров ресурсов, участвующих в транзакции.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-147">In most cases, poison messages are rare, so batching is the preferred way to increase system performance, particularly when you have other resource managers that participate in the transaction.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="7a2c4-148"> [Пакетная обработка сообщений в одну транзакцию](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md).</span><span class="sxs-lookup"><span data-stu-id="7a2c4-148"> [Batching Messages in a Transaction](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md).</span></span>  
  
-   <span data-ttu-id="7a2c4-149">Параллелизм.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-149">Concurrency.</span></span> <span data-ttu-id="7a2c4-150">Параллелизм увеличивает пропускную способность, однако при этом влияет на состязание за общие ресурсы.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-150">Concurrency increases throughput, but concurrency also affects contention to shared resources.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="7a2c4-151"> [Параллелизм](../../../../docs/framework/wcf/samples/concurrency.md).</span><span class="sxs-lookup"><span data-stu-id="7a2c4-151"> [Concurrency](../../../../docs/framework/wcf/samples/concurrency.md).</span></span>  
  
-   <span data-ttu-id="7a2c4-152">Регулирование.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-152">Throttling.</span></span> <span data-ttu-id="7a2c4-153">Для получения оптимальной производительности следует регулировать количество сообщений в конвейере диспетчера.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-153">For optimal performance, throttle the number of messages in the dispatcher pipeline.</span></span> <span data-ttu-id="7a2c4-154">Пример того, как это сделать см. в разделе [регулирование](../../../../docs/framework/wcf/samples/throttling.md).</span><span class="sxs-lookup"><span data-stu-id="7a2c4-154">For an example of how to do this, see [Throttling](../../../../docs/framework/wcf/samples/throttling.md).</span></span>  
  
 <span data-ttu-id="7a2c4-155">При использовании пакетирования помните, что параллелизм и регулирование означает параллельные пакеты.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-155">When using batching, be aware that concurrency and throttling translate to concurrent batches.</span></span>  
  
 <span data-ttu-id="7a2c4-156">Чтобы повысить пропускную способность и доступность, используйте ферму служб [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], осуществляющих чтение из очереди.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-156">To achieve higher throughput and availability, use a farm of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services that read from the queue.</span></span> <span data-ttu-id="7a2c4-157">Для этого необходимо, чтобы все эти службы предоставляли один и тот же контракт в одной конечной точке.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-157">This requires that all of these services expose the same contract on the same endpoint.</span></span> <span data-ttu-id="7a2c4-158">Использование ферм больше всего подходит для приложений, создающих много сообщений, так как это позволяет нескольким службам производить чтение из одной очереди.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-158">The farm approach works best for applications that have high production rates of messages because it enables a number of services to all read from the same queue.</span></span>  
  
 <span data-ttu-id="7a2c4-159">При использовании ферм помните, что в MSMQ 3.0 удаленные чтения в транзакциях не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-159">When using farms, be aware that MSMQ 3.0 does not support remote transacted reads.</span></span> <span data-ttu-id="7a2c4-160">В MSMQ 4.0 удаленные чтения в транзакциях поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-160">MSMQ 4.0 does support remote transacted reads.</span></span>  
  
 [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="7a2c4-161"> [Пакетная обработка сообщений в одну транзакцию](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md) и [различия в возможностях очередей в Windows Vista, Windows Server 2003 и Windows XP](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md).</span><span class="sxs-lookup"><span data-stu-id="7a2c4-161"> [Batching Messages in a Transaction](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md) and [Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md).</span></span>  
  
## <a name="queuing-with-unit-of-work-semantics"></a><span data-ttu-id="7a2c4-162">Организация очереди с семантикой единицы работы</span><span class="sxs-lookup"><span data-stu-id="7a2c4-162">Queuing with Unit of Work Semantics</span></span>  
 <span data-ttu-id="7a2c4-163">В некоторых сценариях очередь может содержать группу связанных между собой сообщений, для которых важен их порядок.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-163">In some scenarios a group of messages in a queue may be related and, therefore, the ordering of these messages is significant.</span></span> <span data-ttu-id="7a2c4-164">В таких сценариях группу связанных сообщений следует обрабатывать вместе как одну единицу: либо все сообщения успешно обрабатываются, либо ни одно из сообщений не обрабатывается.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-164">In such scenarios, process a group of related messages together as a single unit: either all of the messages are processed successfully or none are.</span></span> <span data-ttu-id="7a2c4-165">Чтобы реализовать такое поведение, используйте сеансы с очередями.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-165">To implement such behavior, use sessions with queues.</span></span>  
  
 [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="7a2c4-166"> [Группирование сообщений в очереди в сеансе](../../../../docs/framework/wcf/feature-details/grouping-queued-messages-in-a-session.md).</span><span class="sxs-lookup"><span data-stu-id="7a2c4-166"> [Grouping Queued Messages in a Session](../../../../docs/framework/wcf/feature-details/grouping-queued-messages-in-a-session.md).</span></span>  
  
## <a name="correlating-request-reply-messages"></a><span data-ttu-id="7a2c4-167">Коррелирование сообщений типа «запрос-ответ»</span><span class="sxs-lookup"><span data-stu-id="7a2c4-167">Correlating Request-Reply Messages</span></span>  
 <span data-ttu-id="7a2c4-168">Хотя очереди обычно являются однонаправленными, в некоторых сценариях может потребоваться корреляция полученного ответа с ранее переданным запросом.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-168">Though queues are typically one-way, in some scenarios you may want to correlate a reply received to a request sent earlier.</span></span> <span data-ttu-id="7a2c4-169">Если требуется такая корреляция, рекомендуется применять свой собственный заголовок сообщения SOAP, содержащий корреляционные сведения для сообщения.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-169">If you require such correlation, it is recommended that you apply your own SOAP message header that contains correlation information with the message.</span></span> <span data-ttu-id="7a2c4-170">Обычно отправитель добавляет этот заголовок в сообщение, а получатель, после обработки сообщения и передачи нового ответного сообщения в очередь ответов, добавляет заголовок сообщения отправителя, содержащий корреляционную информацию, чтобы отправитель мог связать ответное сообщение с сообщением запроса.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-170">Typically, the sender attaches this header with the message, and the receiver, upon processing the message and replying back with a new message on a reply queue, attaches the sender's message header that contains the correlation information so that the sender can identify the reply message with the request message.</span></span>  
  
## <a name="integrating-with-non-wcf-applications"></a><span data-ttu-id="7a2c4-171">Интеграция с приложениями, не являющимися приложениями WCF</span><span class="sxs-lookup"><span data-stu-id="7a2c4-171">Integrating with Non-WCF Applications</span></span>  
 <span data-ttu-id="7a2c4-172">При интеграции служб или клиентов `MsmqIntegrationBinding` со службами и клиентами, отличными от служб и клиентов [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], используйте [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7a2c4-172">Use `MsmqIntegrationBinding` when integrating [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services or clients with non-[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services or clients.</span></span> <span data-ttu-id="7a2c4-173">Не[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] приложение может быть приложением MSMQ, написанные с использованием System.Messaging, COM +, Visual Basic или C++.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-173">The non-[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] application can be an MSMQ application written using System.Messaging, COM+, Visual Basic, or C++.</span></span>  
  
 <span data-ttu-id="7a2c4-174">При использовании `MsmqIntegrationBinding` помните следующее:</span><span class="sxs-lookup"><span data-stu-id="7a2c4-174">When using `MsmqIntegrationBinding`, be aware of the following:</span></span>  
  
-   <span data-ttu-id="7a2c4-175">Тело сообщения [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] не совпадает с телом сообщения MSMQ.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-175">A [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] message body is not the same as a MSMQ message body.</span></span> <span data-ttu-id="7a2c4-176">При передаче сообщения [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] с использованием привязки, поддерживающей очередь, тело сообщения [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] помещается в сообщение MSMQ.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-176">When sending a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] message using a queued binding, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] message body is placed inside of a MSMQ message.</span></span> <span data-ttu-id="7a2c4-177">Инфраструктура MSMQ не замечает эту дополнительную информацию - она видит только сообщение MSMQ.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-177">The MSMQ infrastructure is oblivious to this extra information; it sees only the MSMQ message.</span></span>  
  
-   <span data-ttu-id="7a2c4-178">Класс `MsmqIntegrationBinding` поддерживает распространенные типы сериализации.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-178">`MsmqIntegrationBinding` supports popular serialization types.</span></span> <span data-ttu-id="7a2c4-179">На основе типа сериализации тип тела универсального сообщения, <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601>, принимает параметры разных типов.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-179">Based on the serialization type, the body type of the generic message, <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601>, takes different type parameters.</span></span> <span data-ttu-id="7a2c4-180">Например, для <xref:System.ServiceModel.MsmqIntegration.MsmqMessageSerializationFormat.ByteArray> требуется `MsmqMessage\<byte[]>`, а для <xref:System.ServiceModel.MsmqIntegration.MsmqMessageSerializationFormat.Stream> требуется `MsmqMessage<Stream>`.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-180">For example, <xref:System.ServiceModel.MsmqIntegration.MsmqMessageSerializationFormat.ByteArray> requires `MsmqMessage\<byte[]>` and <xref:System.ServiceModel.MsmqIntegration.MsmqMessageSerializationFormat.Stream> requires `MsmqMessage<Stream>`.</span></span>  
  
-   <span data-ttu-id="7a2c4-181">Для сериализации XML, можно указать известный тип с помощью `KnownTypes` атрибут [ \<поведение >](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-servicebehaviors.md) элемент, который затем используется для определения способа десериализации сообщения XML.</span><span class="sxs-lookup"><span data-stu-id="7a2c4-181">With XML serialization, you can specify the known type using the `KnownTypes` attribute on the [\<behavior>](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-servicebehaviors.md) element that is then used to determine how to deserialize the XML message.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7a2c4-182">См. также</span><span class="sxs-lookup"><span data-stu-id="7a2c4-182">See Also</span></span>  
 [<span data-ttu-id="7a2c4-183">Очереди в WCF</span><span class="sxs-lookup"><span data-stu-id="7a2c4-183">Queuing in WCF</span></span>](../../../../docs/framework/wcf/feature-details/queuing-in-wcf.md)  
 [<span data-ttu-id="7a2c4-184">Практическое руководство. Обмен сообщениями в очереди с конечными точками WCF</span><span class="sxs-lookup"><span data-stu-id="7a2c4-184">How to: Exchange Queued Messages with WCF Endpoints</span></span>](../../../../docs/framework/wcf/feature-details/how-to-exchange-queued-messages-with-wcf-endpoints.md)  
 [<span data-ttu-id="7a2c4-185">Практическое руководство. Обмен сообщениями с конечными точками WCF и приложениями очереди сообщений</span><span class="sxs-lookup"><span data-stu-id="7a2c4-185">How to: Exchange Messages with WCF Endpoints and Message Queuing Applications</span></span>](../../../../docs/framework/wcf/feature-details/how-to-exchange-messages-with-wcf-endpoints-and-message-queuing-applications.md)  
 [<span data-ttu-id="7a2c4-186">Группирование сообщений в очереди в рамках сеанса</span><span class="sxs-lookup"><span data-stu-id="7a2c4-186">Grouping Queued Messages in a Session</span></span>](../../../../docs/framework/wcf/feature-details/grouping-queued-messages-in-a-session.md)  
 [<span data-ttu-id="7a2c4-187">Объединение сообщений в одну транзакцию</span><span class="sxs-lookup"><span data-stu-id="7a2c4-187">Batching Messages in a Transaction</span></span>](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md)  
 [<span data-ttu-id="7a2c4-188">Использование очередей недоставленных сообщений для обработки сбоев при передаче сообщений</span><span class="sxs-lookup"><span data-stu-id="7a2c4-188">Using Dead-Letter Queues to Handle Message Transfer Failures</span></span>](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md)  
 [<span data-ttu-id="7a2c4-189">Обработка подозрительных сообщений</span><span class="sxs-lookup"><span data-stu-id="7a2c4-189">Poison Message Handling</span></span>](../../../../docs/framework/wcf/feature-details/poison-message-handling.md)  
 [<span data-ttu-id="7a2c4-190">Различия в возможностях очередей в Windows Vista, Windows Server 2003 и Windows XP</span><span class="sxs-lookup"><span data-stu-id="7a2c4-190">Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP</span></span>](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md)  
 [<span data-ttu-id="7a2c4-191">Защита сообщений с использованием средств обеспечения безопасности транспорта</span><span class="sxs-lookup"><span data-stu-id="7a2c4-191">Securing Messages Using Transport Security</span></span>](../../../../docs/framework/wcf/feature-details/securing-messages-using-transport-security.md)  
 [<span data-ttu-id="7a2c4-192">Защита сообщений с использованием средств обеспечения безопасности сообщений</span><span class="sxs-lookup"><span data-stu-id="7a2c4-192">Securing Messages Using Message Security</span></span>](../../../../docs/framework/wcf/feature-details/securing-messages-using-message-security.md)  
 [<span data-ttu-id="7a2c4-193">Устранение неполадок обмена сообщениями с использованием очередей</span><span class="sxs-lookup"><span data-stu-id="7a2c4-193">Troubleshooting Queued Messaging</span></span>](../../../../docs/framework/wcf/feature-details/troubleshooting-queued-messaging.md)
