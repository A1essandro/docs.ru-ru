---
title: Развертывание службы WCF, размещенной в IIS
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 04ebd329-3fbd-44c3-b3ab-1de3517e27d7
caps.latest.revision: 30
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: 49ee6091b18dfcf2a5b46c173490b317fe770554
ms.sourcegitcommit: 94d33cadc5ff81d2ac389bf5f26422c227832052
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/30/2018
---
# <a name="deploying-an-internet-information-services-hosted-wcf-service"></a><span data-ttu-id="5dd15-102">Развертывание службы WCF, размещенной в IIS</span><span class="sxs-lookup"><span data-stu-id="5dd15-102">Deploying an Internet Information Services-Hosted WCF Service</span></span>
<span data-ttu-id="5dd15-103">Процесс разработки и развертывания службы [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] , которая размещается в службах IIS, состоит из следующих задач.</span><span class="sxs-lookup"><span data-stu-id="5dd15-103">Developing and deploying a [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] service that is hosted in Internet Information Services (IIS) consists of the following tasks:</span></span>  
  
-   <span data-ttu-id="5dd15-104">Проверка правильности установки и регистрации служб IIS, ASP, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]и компонента активации [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="5dd15-104">Ensure that IIS, ASP.NET, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], and the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] activation component are correctly installed and registered.</span></span>  
  
-   <span data-ttu-id="5dd15-105">Создание нового приложения IIS или повторное использование существующего приложения [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="5dd15-105">Create a new IIS application, or reuse an existing [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] application.</span></span>  
  
-   <span data-ttu-id="5dd15-106">Создание SVC-файла для службы [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="5dd15-106">Create a .svc file for the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service.</span></span>  
  
-   <span data-ttu-id="5dd15-107">Развертывание реализации службы в приложение IIS.</span><span class="sxs-lookup"><span data-stu-id="5dd15-107">Deploy the service implementation to the IIS application.</span></span>  
  
-   <span data-ttu-id="5dd15-108">Настройка службы [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="5dd15-108">Configure the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service.</span></span>  
  
 <span data-ttu-id="5dd15-109">Подробное пошаговое руководство по созданию службы [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] , размещенной в IIS, см. в разделе [How to: Host a WCF Service in IIS](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-iis.md).</span><span class="sxs-lookup"><span data-stu-id="5dd15-109">For a detailed walkthrough of creating an IIS-hosted [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service, see [How to: Host a WCF Service in IIS](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-iis.md).</span></span>  
  
## <a name="ensure-that-iis-aspnet-and-wcf-are-correctly-installed-and-registered"></a><span data-ttu-id="5dd15-110">Проверка правильности установки и регистрации IIS, ASP.NET и WCF</span><span class="sxs-lookup"><span data-stu-id="5dd15-110">Ensure That IIS, ASP.NET and WCF Are Correctly Installed and Registered</span></span>  
 <span data-ttu-id="5dd15-111">Для правильной работы служб[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], размещенных в IIS, должны быть установлены [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] , IIS и ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="5dd15-111">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], IIS, and ASP.NET must be installed for IIS-hosted [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services to function correctly.</span></span> <span data-ttu-id="5dd15-112">Процедуры установки [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] (как части платформы [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]), ASP.NET и IIS зависят от используемой версии операционной системы.</span><span class="sxs-lookup"><span data-stu-id="5dd15-112">The procedures for installing [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] (as part of the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]), ASP.NET and IIS vary depending on the operating system version being used.</span></span> <span data-ttu-id="5dd15-113">Дополнительные сведения об установке [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] и [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], в разделе [веб-установщик Microsoft .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=201185).</span><span class="sxs-lookup"><span data-stu-id="5dd15-113">For more information about installing [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] and the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], see [Microsoft .NET Framework 4 Web Installer](http://go.microsoft.com/fwlink/?LinkId=201185).</span></span> <span data-ttu-id="5dd15-114">Инструкции по установке IIS см. в разделе [Установка IIS](http://go.microsoft.com/fwlink/?LinkId=201188).</span><span class="sxs-lookup"><span data-stu-id="5dd15-114">Instructions for installing IIS can be found at [Installing IIS](http://go.microsoft.com/fwlink/?LinkId=201188).</span></span>  
  
 <span data-ttu-id="5dd15-115">В процессе установки платформы [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)] выполняется автоматическая регистрация [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] с IIS, если IIS уже имеется на компьютере.</span><span class="sxs-lookup"><span data-stu-id="5dd15-115">The installation process for the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)] automatically registers [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] with IIS if IIS is already present on the machine.</span></span> <span data-ttu-id="5dd15-116">Если IIS устанавливается после платформы [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], для регистрации [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] с IIS и [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]требуется дополнительный шаг.</span><span class="sxs-lookup"><span data-stu-id="5dd15-116">If IIS is installed after the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], an additional step is required to register [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] with IIS and [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)].</span></span> <span data-ttu-id="5dd15-117">Это можно выполнить указанным ниже способом в зависимости от операционной системы.</span><span class="sxs-lookup"><span data-stu-id="5dd15-117">You can do this as follows, depending on your operating system:</span></span>  
  
-   [!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)]<span data-ttu-id="5dd15-118">, Windows 7 и [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]: используйте [средство регистрации ServiceModel (ServiceModelReg.exe)](../../../../docs/framework/wcf/servicemodelreg-exe.md) средства для регистрации [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] со службами IIS: для использования этого средства, введите **ServiceModelReg.exe/i /x** в Командная строка Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5dd15-118">, Windows 7, and [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]: Use the [ServiceModel Registration Tool (ServiceModelReg.exe)](../../../../docs/framework/wcf/servicemodelreg-exe.md) tool to register [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] with IIS: To use this tool, type **ServiceModelReg.exe /i /x** in the Visual Studio command prompt.</span></span> <span data-ttu-id="5dd15-119">Можно открыть окно командной строки, щелкнув кнопку «Пуск» и выбрав **Все программы**, **Microsoft Visual Studio 2012**, **Набор средств Visual Studio**и **Командная строка Visual Studio**.</span><span class="sxs-lookup"><span data-stu-id="5dd15-119">You can open this command prompt by clicking the start button, selecting **All Programs**, **Microsoft Visual Studio 2012**, **Visual Studio Tools**, and **Visual Studio Command Prompt**</span></span>  
  
-   [!INCLUDE[wv](../../../../includes/wv-md.md)]<span data-ttu-id="5dd15-120">: установите подкомпонент "Компоненты активации Windows Communication Foundation" платформы [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5dd15-120">: Install the Windows Communication Foundation Activation Components subcomponent of the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)].</span></span> <span data-ttu-id="5dd15-121">Для этого на панели управления щелкните значок **Установка и удаление программ** и затем **добавить\/компонентов Windows**.</span><span class="sxs-lookup"><span data-stu-id="5dd15-121">To do this, in Control Panel, click **Add or Remove Programs** and then **Add\/Remove Windows Components**.</span></span> <span data-ttu-id="5dd15-122">При этом активируется **Мастер компонентов Windows**.</span><span class="sxs-lookup"><span data-stu-id="5dd15-122">This activates the **Windows Component Wizard**.</span></span>  
  
-   <span data-ttu-id="5dd15-123">Windows 7:</span><span class="sxs-lookup"><span data-stu-id="5dd15-123">Windows 7:</span></span>  
  
 <span data-ttu-id="5dd15-124">Наконец, необходимо убедиться в том, что среда ASP.NET настроена для использования платформы .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="5dd15-124">Finally you must verify that ASP.NET is configured to use the .NET Framework version 4.</span></span> <span data-ttu-id="5dd15-125">Для этого запустите средство ASPNET_Regiis с параметром -i.</span><span class="sxs-lookup"><span data-stu-id="5dd15-125">You do this by running the ASPNET_Regiis tool with the –i option.</span></span> <span data-ttu-id="5dd15-126">Дополнительные сведения см. в разделе [средство регистрации IIS ASP.NET](http://go.microsoft.com/fwlink/?LinkId=201186)</span><span class="sxs-lookup"><span data-stu-id="5dd15-126">For more information, see [ASP.NET IIS Registration Tool](http://go.microsoft.com/fwlink/?LinkId=201186)</span></span>  
  
## <a name="create-a-new-iis-application-or-reuse-an-existing-aspnet-application"></a><span data-ttu-id="5dd15-127">Создание нового приложения служб IIS или повторное использование существующего приложения ASP.NET</span><span class="sxs-lookup"><span data-stu-id="5dd15-127">Create a New IIS Application or Reuse an Existing ASP.NET Application</span></span>  
 <span data-ttu-id="5dd15-128">Службы [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] , размещенные в IIS, должны находиться в приложении IIS.</span><span class="sxs-lookup"><span data-stu-id="5dd15-128">IIS-hosted [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services must reside inside of an IIS application.</span></span> <span data-ttu-id="5dd15-129">Можно создать новое приложение IIS только для размещения служб [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="5dd15-129">You can create a new IIS application to host [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services exclusively.</span></span> <span data-ttu-id="5dd15-130">Можно также развернуть службу [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] в существующее приложение, в котором уже размещено содержимое [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)] (например, страницы ASPX и веб-службы ASP.NET [ASMX]).</span><span class="sxs-lookup"><span data-stu-id="5dd15-130">Alternatively, you can deploy an [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service into an existing application that is already hosting [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)] content (such as .aspx pages and ASP.NET Web services [ASMX]).</span></span> <span data-ttu-id="5dd15-131">Дополнительные сведения об этих параметрах см. в разделе «размещения WCF Side-by-Side с ASP.NET» и «Размещения служб WCF в режиме совместимости с ASP.NET» разделы в [службы WCF и ASP.NET](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md).</span><span class="sxs-lookup"><span data-stu-id="5dd15-131">For more information about these options, see the "Hosting WCF Side-by-Side with ASP.NET" and "Hosting WCF Services in ASP.NET Compatibility Mode" sections in [WCF Services and ASP.NET](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md).</span></span>  
  
 <span data-ttu-id="5dd15-132">Обратите внимание, что [!INCLUDE[iis601](../../../../includes/iis601-md.md)] и более поздние версии периодически перезагружают изолированное приложение объектно-ориентированного программирования.</span><span class="sxs-lookup"><span data-stu-id="5dd15-132">Note that [!INCLUDE[iis601](../../../../includes/iis601-md.md)] and later versions periodically restart an isolated object-oriented programming application.</span></span> <span data-ttu-id="5dd15-133">Значение по умолчанию — 1740 минут.</span><span class="sxs-lookup"><span data-stu-id="5dd15-133">The default value is 1740 minutes.</span></span> <span data-ttu-id="5dd15-134">Максимальное поддерживаемое значение - 71582 минуты.</span><span class="sxs-lookup"><span data-stu-id="5dd15-134">The maximum value supported is 71,582 minutes.</span></span> <span data-ttu-id="5dd15-135">Этот перезапуск можно отключить.</span><span class="sxs-lookup"><span data-stu-id="5dd15-135">This restart can be disabled.</span></span> <span data-ttu-id="5dd15-136">Дополнительные сведения об этом свойстве см. в разделе [PeriodicRestartTime](http://go.microsoft.com/fwlink/?LinkId=109968).</span><span class="sxs-lookup"><span data-stu-id="5dd15-136">For more information about this property, see the [PeriodicRestartTime](http://go.microsoft.com/fwlink/?LinkId=109968).</span></span>  
  
## <a name="create-an-svc-file-for-the-wcf-service"></a><span data-ttu-id="5dd15-137">Создание SVC-файла для службы WCF</span><span class="sxs-lookup"><span data-stu-id="5dd15-137">Create an .svc File for the WCF Service</span></span>  
 <span data-ttu-id="5dd15-138">Службы[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] , размещенные в IIS, представляются внутри приложения IIS в виде файлов со специальным содержимым (SVC-файлов).</span><span class="sxs-lookup"><span data-stu-id="5dd15-138">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services hosted in IIS are represented as special content files (.svc files) inside the IIS application.</span></span> <span data-ttu-id="5dd15-139">Эта модель подобна модели, согласно которой страницы ASMX представляются внутри приложения IIS в виде ASMX-файлов.</span><span class="sxs-lookup"><span data-stu-id="5dd15-139">This model is similar to the way ASMX pages are represented inside of an IIS application as .asmx files.</span></span> <span data-ttu-id="5dd15-140">SVC-файл содержит относящуюся к [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]директиву обработки ([@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)), позволяющую инфраструктуре размещения [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] активировать размещенные службы в ответ на входящие сообщения.</span><span class="sxs-lookup"><span data-stu-id="5dd15-140">A .svc file contains a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]-specific processing directive ([@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)) that allows the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] hosting infrastructure to activate hosted services in response to incoming messages.</span></span> <span data-ttu-id="5dd15-141">В приведенном ниже операторе показан наиболее распространенный синтаксис SVC-файла.</span><span class="sxs-lookup"><span data-stu-id="5dd15-141">The most common syntax for a .svc file is in the following statement.</span></span>  
  
```  
<% @ServiceHost Service="MyNamespace.MyServiceImplementationTypeName" %>  
```  
  
 <span data-ttu-id="5dd15-142">Он содержит директиву [@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md) и один атрибут, `Service`.</span><span class="sxs-lookup"><span data-stu-id="5dd15-142">It consists of the [@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md) directive and a single attribute, `Service`.</span></span> <span data-ttu-id="5dd15-143">Значение атрибута `Service` - имя типа среды CLR реализации службы.</span><span class="sxs-lookup"><span data-stu-id="5dd15-143">The value of the `Service` attribute is the common language runtime (CLR) type name of the service implementation.</span></span> <span data-ttu-id="5dd15-144">Использование этой директивы по существу эквивалентно созданию основного приложения службы с помощью следующего кода.</span><span class="sxs-lookup"><span data-stu-id="5dd15-144">Using this directive is basically equivalent to creating a service host using the following code.</span></span>  
  
```  
new ServiceHost( typeof( MyNamespace.MyServiceImplementationTypeName ) );  
```  
  
 <span data-ttu-id="5dd15-145">Можно также создать дополнительную конфигурацию размещения, например список базовых адресов службы.</span><span class="sxs-lookup"><span data-stu-id="5dd15-145">Additional hosting configuration, such as creating a list of base addresses for the service can also be done.</span></span> <span data-ttu-id="5dd15-146">Кроме того, можно применить пользовательскую фабрику <xref:System.ServiceModel.Activation.ServiceHostFactory> , чтобы расширить директиву для использования с пользовательскими решениями по размещению.</span><span class="sxs-lookup"><span data-stu-id="5dd15-146">You can also use a custom <xref:System.ServiceModel.Activation.ServiceHostFactory> to extend the directive for use with custom hosting solutions.</span></span> <span data-ttu-id="5dd15-147">Приложения IIS, в которых размещаются службы [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] , не отвечают за управление созданием и временем существования экземпляров <xref:System.ServiceModel.ServiceHost> .</span><span class="sxs-lookup"><span data-stu-id="5dd15-147">The IIS applications that host [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services are not responsible for managing the creation and lifetime of <xref:System.ServiceModel.ServiceHost> instances.</span></span> <span data-ttu-id="5dd15-148">Управляемая инфраструктура размещения [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] создает необходимый экземпляр <xref:System.ServiceModel.ServiceHost> динамически при получении первого запроса для SVC-файла.</span><span class="sxs-lookup"><span data-stu-id="5dd15-148">The managed [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] hosting infrastructure creates the necessary <xref:System.ServiceModel.ServiceHost> instance dynamically when the first request is received for the .svc file.</span></span> <span data-ttu-id="5dd15-149">Этот экземпляр не освобождается, пока он не будет явно закрыт кодом или не перезапустится приложение.</span><span class="sxs-lookup"><span data-stu-id="5dd15-149">The instance is not released until either it is closed explicitly by code or when the application is recycled.</span></span>  
  
 <span data-ttu-id="5dd15-150">Дополнительные сведения о синтаксисе SVC-файлов см. в разделе [ @ServiceHost ](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md).</span><span class="sxs-lookup"><span data-stu-id="5dd15-150">For more information about the syntax for .svc files, see [@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md).</span></span>  
  
## <a name="deploy-the-service-implementation-to-the-iis-application"></a><span data-ttu-id="5dd15-151">Развертывание реализации службы в приложение IIS</span><span class="sxs-lookup"><span data-stu-id="5dd15-151">Deploy the Service Implementation to the IIS Application</span></span>  
 <span data-ttu-id="5dd15-152">Для служб[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] , размещенных в IIS, используется та же модель динамической компиляции, что и для [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)].</span><span class="sxs-lookup"><span data-stu-id="5dd15-152">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services hosted in IIS use the same dynamic compilation model as [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)].</span></span> <span data-ttu-id="5dd15-153">Точно так же, как при использовании [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)], код реализации для размещенных в IIS служб [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] можно развернуть несколькими способами в разных расположениях следующим образом.</span><span class="sxs-lookup"><span data-stu-id="5dd15-153">Just as with [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)], you can deploy the implementation code for IIS-hosted [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services in several ways at various locations, as follows:</span></span>  
  
-   <span data-ttu-id="5dd15-154">В виде предкомпилированного DLL-файла, расположенного в глобальном кэше сборок или в каталоге \bin приложения.</span><span class="sxs-lookup"><span data-stu-id="5dd15-154">As a precompiled .dll file located in the global assembly cache (GAC) or in the application’s \bin directory.</span></span> <span data-ttu-id="5dd15-155">Предкомпилированные двоичные файлы не обновляются, пока не будет развернута новая версия библиотеки классов.</span><span class="sxs-lookup"><span data-stu-id="5dd15-155">Precompiled binaries are not updated until a new version of the class library is deployed.</span></span>  
  
-   <span data-ttu-id="5dd15-156">В виде нескомпилированных исходных файлов, расположенных в каталоге \App_Code приложения.</span><span class="sxs-lookup"><span data-stu-id="5dd15-156">As un-compiled source files located in the application’s \App_Code directory.</span></span> <span data-ttu-id="5dd15-157">Исходные файлы, расположенные в этом каталоге, запрашиваются динамически при обработке первого запроса приложения.</span><span class="sxs-lookup"><span data-stu-id="5dd15-157">Source files located in this directory are dynamically required when processing the application’s first request.</span></span> <span data-ttu-id="5dd15-158">Любые изменения в файлах в каталоге \App_Code приводят к перезапуску и повторной компиляции всего приложения при получении следующего запроса.</span><span class="sxs-lookup"><span data-stu-id="5dd15-158">Any changes to files in the \App_Code directory cause the entire application to be recycled and recompiled when the next request is received.</span></span>  
  
-   <span data-ttu-id="5dd15-159">В виде нескомпилированного кода, расположенного непосредственно в SVC-файле.</span><span class="sxs-lookup"><span data-stu-id="5dd15-159">As un-compiled code placed directly in the .svc file.</span></span> <span data-ttu-id="5dd15-160">Код реализации может также быть размещен в SVC-файле службы после @ServiceHost директивы.</span><span class="sxs-lookup"><span data-stu-id="5dd15-160">Implementation code can also be located inline in the service’s .svc file, after the @ServiceHost directive.</span></span> <span data-ttu-id="5dd15-161">Любые изменения во встроенном коде приводят к перезапуску и повторной компиляции приложения при получении следующего запроса.</span><span class="sxs-lookup"><span data-stu-id="5dd15-161">Any changes to inline code cause the application to be recycled and recompiled when the next request is received.</span></span>  
  
 <span data-ttu-id="5dd15-162">Дополнительные сведения о [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)] модель компиляции. в разделе [компиляция](http://go.microsoft.com/fwlink/?LinkId=94773).</span><span class="sxs-lookup"><span data-stu-id="5dd15-162">For more information about the [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)] compilation model, see [ASP.NET Compilation Overview](http://go.microsoft.com/fwlink/?LinkId=94773).</span></span>  
  
## <a name="configure-the-wcf-service"></a><span data-ttu-id="5dd15-163">Настройка службы WCF</span><span class="sxs-lookup"><span data-stu-id="5dd15-163">Configure the WCF Service</span></span>  
 <span data-ttu-id="5dd15-164">Конфигурация размещенных в IIS служб [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] хранится в файле Web.config приложений.</span><span class="sxs-lookup"><span data-stu-id="5dd15-164">IIS-hosted [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services store their configuration in the applications Web.config file.</span></span> <span data-ttu-id="5dd15-165">Для размещенных в IIS служб используются те же элементы конфигурации и синтаксис, что и для служб [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] , размещенных вне IIS.</span><span class="sxs-lookup"><span data-stu-id="5dd15-165">IIS-hosted services use the same configuration elements and syntax as [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services hosted outside of IIS.</span></span> <span data-ttu-id="5dd15-166">Однако для среды размещения IIS присущи следующие ограничения.</span><span class="sxs-lookup"><span data-stu-id="5dd15-166">However, the following constraints are unique to the IIS hosting environment:</span></span>  
  
-   <span data-ttu-id="5dd15-167">Базовые адреса размещенных в IIS служб.</span><span class="sxs-lookup"><span data-stu-id="5dd15-167">Base addresses for IIS-hosted services.</span></span>  
  
-   <span data-ttu-id="5dd15-168">Приложениям, использующим [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] службы за пределами служб IIS, могут управлять базовый адрес в них служб, передавая набор базы адресов URI для <xref:System.ServiceModel.ServiceHost> конструктора или путем ввода [ \<узла >](../../../../docs/framework/configure-apps/file-schema/wcf/host.md) элемент конфигурации службы.</span><span class="sxs-lookup"><span data-stu-id="5dd15-168">Applications hosting [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services outside of IIS can control the base address of the services they host by passing a set of base address URIs to the <xref:System.ServiceModel.ServiceHost> constructor or by providing a [\<host>](../../../../docs/framework/configure-apps/file-schema/wcf/host.md) element in the service’s configuration.</span></span> <span data-ttu-id="5dd15-169">Службы, размещенные в IIS, не могут управлять своими базовыми адресами; базовым адресом службы, размещенной в IIS, является адрес ее SVC-файла.</span><span class="sxs-lookup"><span data-stu-id="5dd15-169">Services hosted in IIS do not have the ability to control their base address; the base address of an IIS-hosted service is the address of its .svc file.</span></span>  
  
### <a name="endpoint-addresses-for-iis-hosted-services"></a><span data-ttu-id="5dd15-170">Адреса конечных точек для служб, размещенных в IIS</span><span class="sxs-lookup"><span data-stu-id="5dd15-170">Endpoint Addresses for IIS-Hosted Services</span></span>  
 <span data-ttu-id="5dd15-171">Будучи размещенными в IIS, адреса конечных точек всегда считаются относительными для адреса SVC-файла, представляющего службу.</span><span class="sxs-lookup"><span data-stu-id="5dd15-171">When hosted in IIS, endpoint addresses are always considered to be relative to the address of the .svc file that represents the service.</span></span> <span data-ttu-id="5dd15-172">Например если базовый адрес [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] служба http://localhost/Application1/MyService.svc со следующей конфигурацией конечной точки.</span><span class="sxs-lookup"><span data-stu-id="5dd15-172">For example, if the base address of a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service is http://localhost/Application1/MyService.svc with the following endpoint configuration.</span></span>  
  
```xml  
<endpoint address="anotherEndpoint" .../>  
```  
  
 <span data-ttu-id="5dd15-173">Это обеспечивает конечную точку, которая может быть достигнута по «http://localhost/Application1/MyService.svc/anotherEndpoint».</span><span class="sxs-lookup"><span data-stu-id="5dd15-173">This provides an endpoint that can be reached at "http://localhost/Application1/MyService.svc/anotherEndpoint".</span></span>  
  
 <span data-ttu-id="5dd15-174">Аналогично, элемент конфигурации конечной точки, используется пустая строка, как относительный адрес предоставляет конечную точку, достижимую по http://localhost/Application1/MyService.svc, который является базовым адресом.</span><span class="sxs-lookup"><span data-stu-id="5dd15-174">Similarly, the endpoint configuration element that uses an empty string as the relative address provides an endpoint reachable at http://localhost/Application1/MyService.svc, which is the base address.</span></span>  
  
```xml  
<endpoint address="" ... />  
```  
  
 <span data-ttu-id="5dd15-175">Для конечных точек служб, размещенных в IIS, следует всегда использовать относительные адреса.</span><span class="sxs-lookup"><span data-stu-id="5dd15-175">You must always use relative endpoint addresses for IIS-hosted service endpoints.</span></span> <span data-ttu-id="5dd15-176">Предоставление адреса конечной точки с полным (например, http://localhost/MyService.svc) может привести к ошибкам при развертывании службы, если адрес конечной точки для приложения IIS, на котором размещена служба, представляющая эту конечную точку.</span><span class="sxs-lookup"><span data-stu-id="5dd15-176">Supplying a fully-qualified endpoint address (for example, http://localhost/MyService.svc) can lead to errors in the deployment of the service if the endpoint address does not point to the IIS-application that hosts the service exposing the endpoint.</span></span> <span data-ttu-id="5dd15-177">Использование относительных адресов конечных точек для размещенных служб позволяет избежать таких потенциальных конфликтов.</span><span class="sxs-lookup"><span data-stu-id="5dd15-177">Using relative endpoint addresses for hosted services avoids these potential conflicts.</span></span>  
  
### <a name="available-transports"></a><span data-ttu-id="5dd15-178">Доступные типы транспорта</span><span class="sxs-lookup"><span data-stu-id="5dd15-178">Available Transports</span></span>  
 <span data-ttu-id="5dd15-179">Службы[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] , размещенные в IIS 5.1 и [!INCLUDE[iis601](../../../../includes/iis601-md.md)] , могут использовать связь только по протоколу HTTP.</span><span class="sxs-lookup"><span data-stu-id="5dd15-179">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services hosted in IIS 5.1 and [!INCLUDE[iis601](../../../../includes/iis601-md.md)] are restricted to using HTTP-based communication.</span></span> <span data-ttu-id="5dd15-180">В этих платформах IIS настройка размещенной службы на использование привязки, отличной от HTTP, приводит к ошибке во время активации службы.</span><span class="sxs-lookup"><span data-stu-id="5dd15-180">On these IIS platforms, configuring a hosted service to use a non-HTTP binding results in an error during service activation.</span></span> <span data-ttu-id="5dd15-181">Для [!INCLUDE[iisver](../../../../includes/iisver-md.md)]поддерживается транспорт HTTP, Net.TCP, Net.Pipe, Net.MSMQ и msmq.formatname для обратной совместимости с существующими приложениями MSMQ.</span><span class="sxs-lookup"><span data-stu-id="5dd15-181">For [!INCLUDE[iisver](../../../../includes/iisver-md.md)], the supported transports include HTTP, Net.TCP, Net.Pipe, Net.MSMQ, and msmq.formatname for backwards compatibility with existing MSMQ applications.</span></span>  
  
### <a name="http-transport-security"></a><span data-ttu-id="5dd15-182">Безопасность транспорта HTTP</span><span class="sxs-lookup"><span data-stu-id="5dd15-182">HTTP Transport Security</span></span>  
 <span data-ttu-id="5dd15-183">Размещенные в IIS службы [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] могут пользоваться средствами обеспечения безопасности транспорта HTTP (например, такими схемами проверки подлинности HTTPS и HTTP, как "Обычная проверка подлинности", "Дайджест-проверка подлинности" и "Встроенная проверка подлинности Windows"), если виртуальный каталог IIS, содержащий службу, поддерживает названные параметры.</span><span class="sxs-lookup"><span data-stu-id="5dd15-183">IIS-hosted [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services can make use of HTTP transport security (for example, HTTPS and HTTP authentication schemes such as Basic, Digest, and Windows Integrated Authentication) as long as the IIS virtual directory that contains the service supports those settings.</span></span> <span data-ttu-id="5dd15-184">Параметры безопасности транспорта HTTP в привязке размещенной конечной точки должны соответствовать параметрам безопасности транспорта в виртуальном каталоге IIS, который содержит эту привязку.</span><span class="sxs-lookup"><span data-stu-id="5dd15-184">The HTTP Transport Security settings on a hosted endpoint’s binding must match the transport security settings on the IIS virtual directory that contains it.</span></span>  
  
 <span data-ttu-id="5dd15-185">Например, конечная точка [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] , настроенная на использование дайджест-проверки подлинности HTTP, должна находиться в виртуальном каталоге IIS, который также настроен на разрешение дайджест-проверки подлинности HTTP.</span><span class="sxs-lookup"><span data-stu-id="5dd15-185">For example, a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] endpoint configured to use HTTP digest authentication must reside in an IIS virtual directory that is also configured to allow HTTP digest authentication.</span></span> <span data-ttu-id="5dd15-186">Несоответствующие сочетания параметров IIS и параметров конечной точки [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] приводят к ошибке во время активации службы.</span><span class="sxs-lookup"><span data-stu-id="5dd15-186">Unmatched combinations of IIS settings and [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] endpoint settings result in an error during service activation.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5dd15-187">См. также</span><span class="sxs-lookup"><span data-stu-id="5dd15-187">See Also</span></span>  
 [<span data-ttu-id="5dd15-188">Размещение в службах IIS</span><span class="sxs-lookup"><span data-stu-id="5dd15-188">Hosting in Internet Information Services</span></span>](../../../../docs/framework/wcf/feature-details/hosting-in-internet-information-services.md)  
 [<span data-ttu-id="5dd15-189">Рекомендации по размещению в службах IIS</span><span class="sxs-lookup"><span data-stu-id="5dd15-189">Internet Information Services Hosting Best Practices</span></span>](../../../../docs/framework/wcf/feature-details/internet-information-services-hosting-best-practices.md)  
 [<span data-ttu-id="5dd15-190">Функции размещения Windows Server App Fabric</span><span class="sxs-lookup"><span data-stu-id="5dd15-190">Windows Server App Fabric Hosting Features</span></span>](http://go.microsoft.com/fwlink/?LinkId=201276)
