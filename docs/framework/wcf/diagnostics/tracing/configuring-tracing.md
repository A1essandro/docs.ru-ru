---
title: "Настройка трассировки"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- tracing [WCF]
ms.assetid: 82922010-e8b3-40eb-98c4-10fc05c6d65d
caps.latest.revision: 
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: 3beeaec1ed9982fc49f6bf81e2717db862e7882f
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/22/2017
---
# <a name="configuring-tracing"></a><span data-ttu-id="9355e-102">Настройка трассировки</span><span class="sxs-lookup"><span data-stu-id="9355e-102">Configuring Tracing</span></span>
<span data-ttu-id="9355e-103">В этом разделе описывается, как включить трассировку, настроить создание трассировки источниками трассировки и задать уровни трассировки, задать распространение и трассировку действий для поддержки сквозной корреляции трассировки, а также настроить доступ прослушивателей трассировки к трассировкам.</span><span class="sxs-lookup"><span data-stu-id="9355e-103">This topic describes how you can enable tracing, configure trace sources to emit traces and set trace levels, set activity tracing and propagation to support end-to-end trace correlation, and set trace listeners to access traces.</span></span>  
  
 <span data-ttu-id="9355e-104">Рекомендации параметры трассировки в рабочей среде или среде отладки, см. в разделе [рекомендуемые параметры для трассировки и ведения журнала сообщений](../../../../../docs/framework/wcf/diagnostics/tracing/recommended-settings-for-tracing-and-message-logging.md).</span><span class="sxs-lookup"><span data-stu-id="9355e-104">For tracing settings recommendations in production or debugging environment, refer to [Recommended Settings for Tracing and Message Logging](../../../../../docs/framework/wcf/diagnostics/tracing/recommended-settings-for-tracing-and-message-logging.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="9355e-105">В Windows 8, чтобы приложение могло создавать журналы трассировки, необходимо запустить его с расширенными правами доступа (запуск от имени администратора).</span><span class="sxs-lookup"><span data-stu-id="9355e-105">On Windows 8 you must run your application elevated (Run as Administrator) in order for your application to generate trace logs.</span></span>  
  
## <a name="enabling-tracing"></a><span data-ttu-id="9355e-106">Включение трассировки</span><span class="sxs-lookup"><span data-stu-id="9355e-106">Enabling Tracing</span></span>  
 [!INCLUDE[indigo1](../../../../../includes/indigo1-md.md)]<span data-ttu-id="9355e-107"> выдает следующие данные для диагностической трассировки:</span><span class="sxs-lookup"><span data-stu-id="9355e-107"> outputs the following data for diagnostic tracing:</span></span>  
  
-   <span data-ttu-id="9355e-108">Трассировки основных этапов процесса по всем компонентам приложений, таких как вызовы операций, исключения кода, предупреждения и прочие значительные события обработки.</span><span class="sxs-lookup"><span data-stu-id="9355e-108">Traces for process milestones across all components of the applications, such as operation calls, code exceptions, warnings and other significant processing events.</span></span>  
  
-   <span data-ttu-id="9355e-109">События ошибок Windows при сбоях возможности трассировки.</span><span class="sxs-lookup"><span data-stu-id="9355e-109">Windows error events when the tracing feature malfunctions.</span></span> <span data-ttu-id="9355e-110">В разделе [ведение журнала событий](../../../../../docs/framework/wcf/diagnostics/event-logging/index.md).</span><span class="sxs-lookup"><span data-stu-id="9355e-110">See [Event Logging](../../../../../docs/framework/wcf/diagnostics/event-logging/index.md).</span></span>  
  
 <span data-ttu-id="9355e-111">Функция трассировки [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] является надстройкой к <xref:System.Diagnostics>.</span><span class="sxs-lookup"><span data-stu-id="9355e-111">[!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] tracing is built on top of <xref:System.Diagnostics>.</span></span> <span data-ttu-id="9355e-112">Чтобы воспользоваться трассировкой, необходимо определить источники трассировки в файле конфигурации или в коде.</span><span class="sxs-lookup"><span data-stu-id="9355e-112">To use tracing, you should define trace sources in the configuration file or in code.</span></span> <span data-ttu-id="9355e-113">В [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] определяется источник трассировки для каждой сборки [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="9355e-113">[!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] defines a trace source for each [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] assembly.</span></span> <span data-ttu-id="9355e-114">Источник трассировки `System.ServiceModel` - наиболее общий источник трассировки [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)], записывающий основные этапы приложения по всему стеку связи [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)]: от входа и выхода из транспорта до входа и выхода из пользовательского кода.</span><span class="sxs-lookup"><span data-stu-id="9355e-114">The `System.ServiceModel` trace source is the most general [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] trace source, and records processing milestones across the [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] communication stack, from entering/leaving transport to entering/leaving user code.</span></span> <span data-ttu-id="9355e-115">Источник трассировки `System.ServiceModel.MessageLogging` записывает все сообщения, проходящие через систему.</span><span class="sxs-lookup"><span data-stu-id="9355e-115">The `System.ServiceModel.MessageLogging` trace source records all messages that flow through the system.</span></span>  
  
 <span data-ttu-id="9355e-116">По умолчанию трассировка отключена.</span><span class="sxs-lookup"><span data-stu-id="9355e-116">Tracing is not enabled by default.</span></span> <span data-ttu-id="9355e-117">Чтобы включить трассировку, необходимо создать прослушиватель трассировки и задать уровень трассировки, отличный от "Выкл.", для выбранного источника трассировки в конфигурации. В противном случае [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] не создает трассировку.</span><span class="sxs-lookup"><span data-stu-id="9355e-117">To activate tracing, you must create a trace listener and set a trace level other than "Off" for the selected trace source in configuration; otherwise, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] does not generate any traces.</span></span> <span data-ttu-id="9355e-118">Если прослушиватель не указан, трассировка автоматически отключается.</span><span class="sxs-lookup"><span data-stu-id="9355e-118">If you do not specify a listener, tracing is automatically disabled.</span></span> <span data-ttu-id="9355e-119">Если прослушиватель определен, но уровень не указан, по умолчанию устанавливается уровень «Off», при котором трассировка не создается.</span><span class="sxs-lookup"><span data-stu-id="9355e-119">If a listener is defined, but no level is specified, the level is set to "Off" by default, which means that no trace is emitted.</span></span>  
  
 <span data-ttu-id="9355e-120">Если используются точки расширяемости [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)], например средства вызова пользовательских операций, необходимо создавать свои собственные трассировки.</span><span class="sxs-lookup"><span data-stu-id="9355e-120">If you use [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] extensibility points such as custom operation invokers, you should emit your own traces.</span></span> <span data-ttu-id="9355e-121">Причина в том, что, если реализована точка расширяемости, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] не сможет создавать стандартные трассировки в пути по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="9355e-121">This is because if you implement an extensibility point, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] can no longer emit the standard traces in the default path.</span></span> <span data-ttu-id="9355e-122">Если поддержка трассировки вручную путем создания трассировки не реализована, можно не увидеть ожидаемые трассировки.</span><span class="sxs-lookup"><span data-stu-id="9355e-122">If you do not implement manual tracing support by emitting traces, you may not see the traces you expect.</span></span>  
  
 <span data-ttu-id="9355e-123">Трассировку можно настроить, внеся изменения в файл конфигурации приложения: Web.config (для веб-приложений) или Appname.exe.config (для резидентных приложений).</span><span class="sxs-lookup"><span data-stu-id="9355e-123">You can configure tracing by editing the application’s configuration file—either Web.config for Web-hosted applications, or Appname.exe.config for self-hosted applications.</span></span> <span data-ttu-id="9355e-124">Ниже приводится пример подобного изменения.</span><span class="sxs-lookup"><span data-stu-id="9355e-124">The following is an example of such edit.</span></span> <span data-ttu-id="9355e-125">Дополнительные сведения об этих параметрах см. в разделе «Настройка трассировки потребления трассировки прослушивателями».</span><span class="sxs-lookup"><span data-stu-id="9355e-125">For more information on these settings, see the "Configuring Trace Listeners to Consume Traces" section.</span></span>  
  
```xml  
<configuration>  
   <system.diagnostics>  
      <sources>  
            <source name="System.ServiceModel"   
                    switchValue="Information, ActivityTracing"  
                    propagateActivity="true">  
            <listeners>  
               <add name="traceListener"   
                   type="System.Diagnostics.XmlWriterTraceListener"   
                   initializeData= "c:\log\Traces.svclog" />  
            </listeners>  
         </source>  
      </sources>  
   </system.diagnostics>  
</configuration>  
```  
  
> [!NOTE]
>  <span data-ttu-id="9355e-126">Чтобы изменить файл конфигурации [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] проект службы в [!INCLUDE[vs_current_short](../../../../../includes/vs-current-short-md.md)], щелкните правой кнопкой мыши файл конфигурации приложения: Web.config для веб-приложений, либо Appname.exe.config для резидентных приложений в  **Обозреватель решений**.</span><span class="sxs-lookup"><span data-stu-id="9355e-126">To edit the configuration file of a [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] service project in [!INCLUDE[vs_current_short](../../../../../includes/vs-current-short-md.md)], right click the application’s configuration file—either Web.config for Web-hosted applications, or Appname.exe.config for self-hosted application in **Solution Explorer**.</span></span> <span data-ttu-id="9355e-127">Выберите **изменить конфигурацию WCF** пункт контекстного меню.</span><span class="sxs-lookup"><span data-stu-id="9355e-127">Then choose the **Edit WCF Configuration** context menu item.</span></span> <span data-ttu-id="9355e-128">Будет запущен [средство редактирования конфигурации (SvcConfigEditor.exe)](../../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md), который позволяет изменять параметры конфигурации для [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] службы с помощью графического интерфейса пользователя.</span><span class="sxs-lookup"><span data-stu-id="9355e-128">This launches the [Configuration Editor Tool (SvcConfigEditor.exe)](../../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md), which enables you to modify configuration settings for [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] services using a graphical user interface.</span></span>  
  
## <a name="configuring-trace-sources-to-emit-traces"></a><span data-ttu-id="9355e-129">Настройка создания трассировки источниками трассировки</span><span class="sxs-lookup"><span data-stu-id="9355e-129">Configuring Trace Sources to Emit Traces</span></span>  
 <span data-ttu-id="9355e-130">В [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] определяется источник трассировки для каждой сборки.</span><span class="sxs-lookup"><span data-stu-id="9355e-130">[!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] defines a trace source for each assembly.</span></span> <span data-ttu-id="9355e-131">Трассировки, созданные в пределах сборки, доступны прослушивателям, определенным для этого источника.</span><span class="sxs-lookup"><span data-stu-id="9355e-131">Traces generated within an assembly are accessed by the listeners defined for that source.</span></span> <span data-ttu-id="9355e-132">Определяются следующие источники трассировки:</span><span class="sxs-lookup"><span data-stu-id="9355e-132">The following trace sources are defined:</span></span>  
  
-   <span data-ttu-id="9355e-133">System.ServiceModel: записывает в журнал все этапы обработки [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)], будь то чтение конфигурации, обработка сообщения в транспорте, обработка событий безопасности, отправка сообщения в пользовательском коде и т. д.</span><span class="sxs-lookup"><span data-stu-id="9355e-133">System.ServiceModel: Logs all stages of [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] processing, whenever configuration is read, a message is processed in transport, security processing, a message is dispatched in user code, and so on.</span></span>  
  
-   <span data-ttu-id="9355e-134">System.ServiceModel.MessageLogging: записывает в журнал все сообщения, проходящие через систему.</span><span class="sxs-lookup"><span data-stu-id="9355e-134">System.ServiceModel.MessageLogging: Logs all messages that flow through the system.</span></span>  
  
-   <span data-ttu-id="9355e-135">System.IdentityModel.</span><span class="sxs-lookup"><span data-stu-id="9355e-135">System.IdentityModel.</span></span>  
  
-   <span data-ttu-id="9355e-136">System.ServiceModel.Activation.</span><span class="sxs-lookup"><span data-stu-id="9355e-136">System.ServiceModel.Activation.</span></span>  
  
-   <span data-ttu-id="9355e-137">System.IO.Log: средство ведения журнала для интерфейса платформы .NET Framework для системы CLFS.</span><span class="sxs-lookup"><span data-stu-id="9355e-137">System.IO.Log: Logging for the .NET Framework interface to the Common Log File System (CLFS).</span></span>  
  
-   <span data-ttu-id="9355e-138">System.Runtime.Serialization: регистрирует в журнале чтение и запись объектов.</span><span class="sxs-lookup"><span data-stu-id="9355e-138">System.Runtime.Serialization: Logs when objects are read or written.</span></span>  
  
-   <span data-ttu-id="9355e-139">CardSpace.</span><span class="sxs-lookup"><span data-stu-id="9355e-139">CardSpace.</span></span>  
  
 <span data-ttu-id="9355e-140">Можно настроить все источники трассировки так, чтобы они использовали один и тот же (общий) прослушиватель, как показано в следующем примере конфигурации.</span><span class="sxs-lookup"><span data-stu-id="9355e-140">You can configure each trace source to use the same (shared) listener, as indicated in the following configuration example.</span></span>  
  
```xml  
<configuration>  
    <system.diagnostics>  
        <sources>  
            <source name="System.ServiceModel"   
                    switchValue="Information, ActivityTracing"  
                    propagateActivity="true">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="CardSpace">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="System.IO.Log">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="System.Runtime.Serialization">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="System.IdentityModel">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
        </sources>  
  
        <sharedListeners>  
            <add name="xml"  
                 type="System.Diagnostics.XmlWriterTraceListener"  
                 initializeData="c:\log\Traces.svclog" />  
        </sharedListeners>  
    </system.diagnostics>  
</configuration>  
```  
  
 <span data-ttu-id="9355e-141">Кроме того, можно добавить пользовательские источники трассировки, создающие трассировки пользовательского кода, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="9355e-141">In addition, you can add user-defined trace sources, as demonstrated by the following example, to emit user code traces.</span></span>  
  
```xml  
<system.diagnostics>  
   <sources>  
       <source name="UserTraceSource" switchValue="Warning, ActivityTracing" >  
          <listeners>  
              <add name="xml"  
                 type="System.Diagnostics.XmlWriterTraceListener"  
                 initializeData="C:\logs\UserTraces.svclog" />  
          </listeners>  
       </source>  
   </sources>  
   <trace autoflush="true" />   
</system.diagnostics>  
```  
  
 [!INCLUDE[crabout](../../../../../includes/crabout-md.md)]<span data-ttu-id="9355e-142">Создание определяемых пользователем источники трассировки см. в разделе [расширение трассировки](../../../../../docs/framework/wcf/samples/extending-tracing.md).</span><span class="sxs-lookup"><span data-stu-id="9355e-142"> creating user-defined trace sources, see [Extending Tracing](../../../../../docs/framework/wcf/samples/extending-tracing.md).</span></span>  
  
## <a name="configuring-trace-listeners-to-consume-traces"></a><span data-ttu-id="9355e-143">Настройка потребления трассировки прослушивателями трассировки</span><span class="sxs-lookup"><span data-stu-id="9355e-143">Configuring Trace Listeners to Consume Traces</span></span>  
 <span data-ttu-id="9355e-144">Во время выполнения [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] передает данные трассировки прослушивателям, которые их обрабатывают.</span><span class="sxs-lookup"><span data-stu-id="9355e-144">At runtime, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] feeds trace data to the listeners which process the data.</span></span> [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)]<span data-ttu-id="9355e-145"> предоставляет несколько стандартных прослушивателей для <xref:System.Diagnostics>, отличающихся друг от друга форматом выводимых данных.</span><span class="sxs-lookup"><span data-stu-id="9355e-145"> provides several predefined listeners for <xref:System.Diagnostics>, which differ in the format they use for output.</span></span> <span data-ttu-id="9355e-146">Можно добавлять пользовательские типы прослушивателей.</span><span class="sxs-lookup"><span data-stu-id="9355e-146">You can also add custom listener types.</span></span>  
  
 <span data-ttu-id="9355e-147">С помощью `add` можно задать имя и тип прослушивателя трассировки, который требуется использовать.</span><span class="sxs-lookup"><span data-stu-id="9355e-147">You can use `add` to specify the name and type of the trace listener you want to use.</span></span> <span data-ttu-id="9355e-148">В данном примере конфигурации создается прослушиватель с именем `traceListener` и добавляется стандартный прослушиватель трассировки .NET Framework (`System.Diagnostics.XmlWriterTraceListener`) в качестве типа, который требуется использовать.</span><span class="sxs-lookup"><span data-stu-id="9355e-148">In our example configuration, we named the Listener `traceListener` and added the standard .NET Framework trace listener (`System.Diagnostics.XmlWriterTraceListener`) as the type we want to use.</span></span> <span data-ttu-id="9355e-149">Для каждого источника можно добавить любое количество прослушивателей трассировки.</span><span class="sxs-lookup"><span data-stu-id="9355e-149">You can add any number of trace listeners for each source.</span></span> <span data-ttu-id="9355e-150">Если прослушиватель трассировки выполняет трассировку в файл, необходимо указать расположение и имя выходного файла в файле конфигурации.</span><span class="sxs-lookup"><span data-stu-id="9355e-150">If the trace listener emits the trace to a file, you must specify the output file location and name in the configuration file.</span></span> <span data-ttu-id="9355e-151">Для этого необходимо указать имя файла для этого прослушивателя в качестве значения для `initializeData`.</span><span class="sxs-lookup"><span data-stu-id="9355e-151">This is done by setting `initializeData` to the name of the file for that listener.</span></span> <span data-ttu-id="9355e-152">Если имя файла не указано, используется случайное имя, сгенерированное на основе используемого типа прослушивателя.</span><span class="sxs-lookup"><span data-stu-id="9355e-152">If you do not specify a file name, a random file name is generated based on the listener type used.</span></span> <span data-ttu-id="9355e-153">Если используется <xref:System.Diagnostics.XmlWriterTraceListener>, создается имя файла без расширения.</span><span class="sxs-lookup"><span data-stu-id="9355e-153">If <xref:System.Diagnostics.XmlWriterTraceListener> is used, a file name with no extension is generated.</span></span> <span data-ttu-id="9355e-154">Если реализовать пользовательский прослушиватель, с помощью этого атрибута также можно получать другие данные инициализации, помимо имени файла.</span><span class="sxs-lookup"><span data-stu-id="9355e-154">If you implement a custom listener, you can also use this attribute to receive initialization data other than a filename.</span></span> <span data-ttu-id="9355e-155">Например, с его помощью можно указать идентификатор базы данных.</span><span class="sxs-lookup"><span data-stu-id="9355e-155">For example, you can specify a database identifier for this attribute.</span></span>  
  
 <span data-ttu-id="9355e-156">Пользовательский прослушиватель трассировки можно настроить так, чтобы он отправлял трассировку по сети, например в удаленную базу данных.</span><span class="sxs-lookup"><span data-stu-id="9355e-156">You can configure a custom trace listener to send traces on the wire, for example, to a remote database.</span></span> <span data-ttu-id="9355e-157">Разработчику приложения следует обеспечить надлежащее управление доступом к журналам трассировки на удаленном компьютере.</span><span class="sxs-lookup"><span data-stu-id="9355e-157">As an application deployer, you should enforce proper access control on the trace logs in the remote machine.</span></span>  
  
 <span data-ttu-id="9355e-158">Также можно настроить прослушиватель трассировки программно.</span><span class="sxs-lookup"><span data-stu-id="9355e-158">You can also configure a trace listener programmatically.</span></span> [!INCLUDE[crdefault](../../../../../includes/crdefault-md.md)]<span data-ttu-id="9355e-159">[Как: Создание и инициализация прослушивателей трассировки](http://go.microsoft.com/fwlink/?LinkId=94648) и [Создание пользовательский прослушиватель трассировки](http://go.microsoft.com/fwlink/?LinkId=96239).</span><span class="sxs-lookup"><span data-stu-id="9355e-159"> [How to: Create and Initialize Trace Listeners](http://go.microsoft.com/fwlink/?LinkId=94648) and [Creating a Custom TraceListener](http://go.microsoft.com/fwlink/?LinkId=96239).</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="9355e-160">Поскольку прослушиватель `System.Diagnostics.XmlWriterTraceListener` не является потокобезопасным, источник трассировки может монопольно блокировать ресурсы при выводе трассировки.</span><span class="sxs-lookup"><span data-stu-id="9355e-160">Because `System.Diagnostics.XmlWriterTraceListener` is not thread-safe, the trace source may lock resources exclusively when outputting traces.</span></span> <span data-ttu-id="9355e-161">Если несколько потоков выводят трассировку в источник трассировки, использующий (согласно заданным настройкам) этот прослушиватель, может возникнуть состязание за ресурсы, что приводит к существенному падению производительности.</span><span class="sxs-lookup"><span data-stu-id="9355e-161">When many threads output traces to a trace source configured to use this listener, resource contention may occur, which results in a significant performance issue.</span></span> <span data-ttu-id="9355e-162">Чтобы устранить эту проблему, реализуйте потокобезопасный пользовательский прослушиватель.</span><span class="sxs-lookup"><span data-stu-id="9355e-162">To resolve this problem, you should implement a custom listener that is thread-safe.</span></span>  
  
## <a name="trace-level"></a><span data-ttu-id="9355e-163">Уровень трассировки</span><span class="sxs-lookup"><span data-stu-id="9355e-163">Trace Level</span></span>  
 <span data-ttu-id="9355e-164">Уровень трассировки контролируется параметром `switchValue` источника трассировки.</span><span class="sxs-lookup"><span data-stu-id="9355e-164">The tracing level is controlled by the `switchValue` setting of the trace source.</span></span> <span data-ttu-id="9355e-165">Доступные уровни трассировки приведены в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="9355e-165">The available tracing levels are described in the following table.</span></span>  
  
|<span data-ttu-id="9355e-166">Уровень трассировки</span><span class="sxs-lookup"><span data-stu-id="9355e-166">Trace Level</span></span>|<span data-ttu-id="9355e-167">Характер отслеживаемых событий</span><span class="sxs-lookup"><span data-stu-id="9355e-167">Nature of the Tracked Events</span></span>|<span data-ttu-id="9355e-168">Содержимое отслеживаемых событий</span><span class="sxs-lookup"><span data-stu-id="9355e-168">Content of the Tracked Events</span></span>|<span data-ttu-id="9355e-169">Отслеживаемые события</span><span class="sxs-lookup"><span data-stu-id="9355e-169">Tracked Events</span></span>|<span data-ttu-id="9355e-170">Целевая категория пользователей</span><span class="sxs-lookup"><span data-stu-id="9355e-170">User Target</span></span>|  
|-----------------|----------------------------------|-----------------------------------|--------------------|-----------------|  
|<span data-ttu-id="9355e-171">Off</span><span class="sxs-lookup"><span data-stu-id="9355e-171">Off</span></span>|<span data-ttu-id="9355e-172">Н/Д</span><span class="sxs-lookup"><span data-stu-id="9355e-172">N/A</span></span>|<span data-ttu-id="9355e-173">Н/Д</span><span class="sxs-lookup"><span data-stu-id="9355e-173">N/A</span></span>|<span data-ttu-id="9355e-174">Трассировки не создаются.</span><span class="sxs-lookup"><span data-stu-id="9355e-174">No traces are emitted.</span></span>|<span data-ttu-id="9355e-175">Н/Д</span><span class="sxs-lookup"><span data-stu-id="9355e-175">N/A</span></span>|  
|<span data-ttu-id="9355e-176">Critical</span><span class="sxs-lookup"><span data-stu-id="9355e-176">Critical</span></span>|<span data-ttu-id="9355e-177">«Негативные» события: указывающие о непредвиденном состоянии обработки или об ошибке.</span><span class="sxs-lookup"><span data-stu-id="9355e-177">"Negative" events: events that indicate an unexpected processing or an error condition.</span></span>||<span data-ttu-id="9355e-178">В журнал заносятся необработанные исключения, в том числе следующие:</span><span class="sxs-lookup"><span data-stu-id="9355e-178">Unhandled exceptions including the following are logged:</span></span><br /><br /> <span data-ttu-id="9355e-179">-OutOfMemoryException</span><span class="sxs-lookup"><span data-stu-id="9355e-179">-   OutOfMemoryException</span></span><br /><span data-ttu-id="9355e-180">-ThreadAbortException (среда CLR вызывает ThreadAbortExceptionHandler)</span><span class="sxs-lookup"><span data-stu-id="9355e-180">-   ThreadAbortException (the CLR invokes any ThreadAbortExceptionHandler)</span></span><br /><span data-ttu-id="9355e-181">-StackOverflowException (не может быть перехвачено)</span><span class="sxs-lookup"><span data-stu-id="9355e-181">-   StackOverflowException (cannot be caught)</span></span><br /><span data-ttu-id="9355e-182">-ConfigurationErrorsException</span><span class="sxs-lookup"><span data-stu-id="9355e-182">-   ConfigurationErrorsException</span></span><br /><span data-ttu-id="9355e-183">-SEHException</span><span class="sxs-lookup"><span data-stu-id="9355e-183">-   SEHException</span></span><br /><span data-ttu-id="9355e-184">-Запуска ошибки</span><span class="sxs-lookup"><span data-stu-id="9355e-184">-   Application start errors</span></span><br /><span data-ttu-id="9355e-185">-События Failfast</span><span class="sxs-lookup"><span data-stu-id="9355e-185">-   Failfast events</span></span><br /><span data-ttu-id="9355e-186">-Система зависает</span><span class="sxs-lookup"><span data-stu-id="9355e-186">-   System hangs</span></span><br /><span data-ttu-id="9355e-187">-Подозрительные сообщения: трассировки сообщений, которые приводят к сбою приложения.</span><span class="sxs-lookup"><span data-stu-id="9355e-187">-   Poison messages: message traces that cause the application to fail.</span></span>|<span data-ttu-id="9355e-188">Администраторы</span><span class="sxs-lookup"><span data-stu-id="9355e-188">Administrators</span></span><br /><br /> <span data-ttu-id="9355e-189">Разработчики приложений</span><span class="sxs-lookup"><span data-stu-id="9355e-189">Application developers</span></span>|  
|<span data-ttu-id="9355e-190">Error</span><span class="sxs-lookup"><span data-stu-id="9355e-190">Error</span></span>|<span data-ttu-id="9355e-191">«Негативные» события: указывающие о непредвиденном состоянии обработки или об ошибке.</span><span class="sxs-lookup"><span data-stu-id="9355e-191">"Negative" events: events that indicate an unexpected processing or an error condition.</span></span>|<span data-ttu-id="9355e-192">Возникло непредвиденное состояние обработки.</span><span class="sxs-lookup"><span data-stu-id="9355e-192">Unexpected processing has happened.</span></span> <span data-ttu-id="9355e-193">Приложению не удалось выполнить задачу требуемым образом.</span><span class="sxs-lookup"><span data-stu-id="9355e-193">The application was not able to perform a task as expected.</span></span> <span data-ttu-id="9355e-194">Впрочем, приложение все еще работает.</span><span class="sxs-lookup"><span data-stu-id="9355e-194">However, the application is still up and running.</span></span>|<span data-ttu-id="9355e-195">Все исключения заносятся в журнал.</span><span class="sxs-lookup"><span data-stu-id="9355e-195">All exceptions are logged.</span></span>|<span data-ttu-id="9355e-196">Администраторы</span><span class="sxs-lookup"><span data-stu-id="9355e-196">Administrators</span></span><br /><br /> <span data-ttu-id="9355e-197">Разработчики приложений</span><span class="sxs-lookup"><span data-stu-id="9355e-197">Application developers</span></span>|  
|<span data-ttu-id="9355e-198">Предупреждение</span><span class="sxs-lookup"><span data-stu-id="9355e-198">Warning</span></span>|<span data-ttu-id="9355e-199">«Негативные» события: указывающие о непредвиденном состоянии обработки или об ошибке.</span><span class="sxs-lookup"><span data-stu-id="9355e-199">"Negative" events: events that indicate an unexpected processing or an error condition.</span></span>|<span data-ttu-id="9355e-200">Возникла (или может возникнуть) проблема, но приложение все же работает надлежащим образом.</span><span class="sxs-lookup"><span data-stu-id="9355e-200">A possible problem has occurred or may occur, but the application still functions correctly.</span></span> <span data-ttu-id="9355e-201">Впрочем, его правильное выполнение может прекратиться.</span><span class="sxs-lookup"><span data-stu-id="9355e-201">However, it may not continue to work properly.</span></span>|<span data-ttu-id="9355e-202">-Приложение получает больше запросов, чем его параметрами регулирования.</span><span class="sxs-lookup"><span data-stu-id="9355e-202">-   The application is receiving more requests than its throttling settings allow.</span></span><br /><span data-ttu-id="9355e-203">-Принимающая очередь близка к заданному максимальному пределу емкости.</span><span class="sxs-lookup"><span data-stu-id="9355e-203">-   The receiving queue is near its maximum configured capacity.</span></span><br /><span data-ttu-id="9355e-204">-Превышено время ожидания.</span><span class="sxs-lookup"><span data-stu-id="9355e-204">-   Timeout has exceeded.</span></span><br /><span data-ttu-id="9355e-205">-Учетные данные не принимаются.</span><span class="sxs-lookup"><span data-stu-id="9355e-205">-   Credentials are rejected.</span></span>|<span data-ttu-id="9355e-206">Администраторы</span><span class="sxs-lookup"><span data-stu-id="9355e-206">Administrators</span></span><br /><br /> <span data-ttu-id="9355e-207">Разработчики приложений</span><span class="sxs-lookup"><span data-stu-id="9355e-207">Application developers</span></span>|  
|<span data-ttu-id="9355e-208">Сведения</span><span class="sxs-lookup"><span data-stu-id="9355e-208">Information</span></span>|<span data-ttu-id="9355e-209">«Позитивные» события: отмечающие успешно пройденные основные этапы</span><span class="sxs-lookup"><span data-stu-id="9355e-209">"Positive" events: events that mark successful milestones</span></span>|<span data-ttu-id="9355e-210">Успешно пройденные важные этапы выполнения приложения, вне зависимости от того, правильно ли работает приложение.</span><span class="sxs-lookup"><span data-stu-id="9355e-210">Important and successful milestones of application execution, regardless of whether the application is working properly or not.</span></span>|<span data-ttu-id="9355e-211">Как правило, создаются сообщения, полезные для мониторинга и диагностики состояния системы, измерений производительности или профилирования.</span><span class="sxs-lookup"><span data-stu-id="9355e-211">In general, messages helpful for monitoring and diagnosing system status, measuring performance or profiling are generated.</span></span> <span data-ttu-id="9355e-212">Эту информацию можно использовать для планирования загрузки и управления производительностью.</span><span class="sxs-lookup"><span data-stu-id="9355e-212">You can use such information for capacity planning and performance management:</span></span><br /><br /> <span data-ttu-id="9355e-213">-Создание каналов.</span><span class="sxs-lookup"><span data-stu-id="9355e-213">-   Channels are created.</span></span><br /><span data-ttu-id="9355e-214">-Создание конечной точки прослушивателей.</span><span class="sxs-lookup"><span data-stu-id="9355e-214">-   Endpoint listeners are created.</span></span><br /><span data-ttu-id="9355e-215">-Сообщение вводит и оставляет транспорта.</span><span class="sxs-lookup"><span data-stu-id="9355e-215">-   Message enters/leaves transport.</span></span><br /><span data-ttu-id="9355e-216">-Извлечение маркера безопасности.</span><span class="sxs-lookup"><span data-stu-id="9355e-216">-   Security token is retrieved.</span></span><br /><span data-ttu-id="9355e-217">-Чтение параметра конфигурации.</span><span class="sxs-lookup"><span data-stu-id="9355e-217">-   Configuration setting is read.</span></span>|<span data-ttu-id="9355e-218">Администраторы</span><span class="sxs-lookup"><span data-stu-id="9355e-218">Administrators</span></span><br /><br /> <span data-ttu-id="9355e-219">Разработчики приложений</span><span class="sxs-lookup"><span data-stu-id="9355e-219">Application developers</span></span><br /><br /> <span data-ttu-id="9355e-220">Разработчики программных продуктов.</span><span class="sxs-lookup"><span data-stu-id="9355e-220">Product developers.</span></span>|  
|<span data-ttu-id="9355e-221">Verbose</span><span class="sxs-lookup"><span data-stu-id="9355e-221">Verbose</span></span>|<span data-ttu-id="9355e-222">«Позитивные» события: отмечающие успешно пройденные основные этапы.</span><span class="sxs-lookup"><span data-stu-id="9355e-222">"Positive" events: events that mark successful milestones.</span></span>|<span data-ttu-id="9355e-223">Создаются события низкого уровня как для пользовательского кода, так и для обслуживания.</span><span class="sxs-lookup"><span data-stu-id="9355e-223">Low level events for both user code and servicing are emitted.</span></span>|<span data-ttu-id="9355e-224">Как правило, этот уровень можно использовать для отладки или оптимизации приложения.</span><span class="sxs-lookup"><span data-stu-id="9355e-224">In general, you can use this level for debugging or application optimization.</span></span><br /><br /> <span data-ttu-id="9355e-225">-Распознанный заголовок сообщения.</span><span class="sxs-lookup"><span data-stu-id="9355e-225">-   Understood message header.</span></span>|<span data-ttu-id="9355e-226">Администраторы</span><span class="sxs-lookup"><span data-stu-id="9355e-226">Administrators</span></span><br /><br /> <span data-ttu-id="9355e-227">Разработчики приложений</span><span class="sxs-lookup"><span data-stu-id="9355e-227">Application developers</span></span><br /><br /> <span data-ttu-id="9355e-228">Разработчики программных продуктов.</span><span class="sxs-lookup"><span data-stu-id="9355e-228">Product developers.</span></span>|  
|<span data-ttu-id="9355e-229">ActivityTracing</span><span class="sxs-lookup"><span data-stu-id="9355e-229">ActivityTracing</span></span>||<span data-ttu-id="9355e-230">События переходов между действиями по обработке и компонентами.</span><span class="sxs-lookup"><span data-stu-id="9355e-230">Flow events between processing activities and components.</span></span>|<span data-ttu-id="9355e-231">Этот уровень позволяет администраторам и разработчикам коррелировать приложения из одного домена приложений.</span><span class="sxs-lookup"><span data-stu-id="9355e-231">This level allows administrators and developers to correlate applications in the same application domain:</span></span><br /><br /> <span data-ttu-id="9355e-232">-Трассировки границ действий, таких как запуск и остановка.</span><span class="sxs-lookup"><span data-stu-id="9355e-232">-   Traces for activity boundaries, such as start/stop.</span></span><br /><span data-ttu-id="9355e-233">-Трассировки для перенаправлений.</span><span class="sxs-lookup"><span data-stu-id="9355e-233">-   Traces for transfers.</span></span>|<span data-ttu-id="9355e-234">Все</span><span class="sxs-lookup"><span data-stu-id="9355e-234">All</span></span>|  
|<span data-ttu-id="9355e-235">Все</span><span class="sxs-lookup"><span data-stu-id="9355e-235">All</span></span>||<span data-ttu-id="9355e-236">Приложение может работать надлежащим образом.</span><span class="sxs-lookup"><span data-stu-id="9355e-236">Application may function properly.</span></span> <span data-ttu-id="9355e-237">Создаются все события.</span><span class="sxs-lookup"><span data-stu-id="9355e-237">All events are emitted.</span></span>|<span data-ttu-id="9355e-238">Все вышеперечисленные события.</span><span class="sxs-lookup"><span data-stu-id="9355e-238">All previous events.</span></span>|<span data-ttu-id="9355e-239">Все</span><span class="sxs-lookup"><span data-stu-id="9355e-239">All</span></span>|  
  
 <span data-ttu-id="9355e-240">Каждый уровень трассировки от Verbose до Critical включает все вышестоящие уровни, за исключением уровня "Off".</span><span class="sxs-lookup"><span data-stu-id="9355e-240">The levels from Verbose to Critical are stacked on top of each other, that is, each trace level includes all levels above it except the Off level.</span></span> <span data-ttu-id="9355e-241">Например, если прослушиватель прослушивает уровень Warning, он получает трассировки, имеющие уровень Critical, Error и Warning.</span><span class="sxs-lookup"><span data-stu-id="9355e-241">For example, a listener listening at the Warning level receives Critical, Error, and Warning traces.</span></span> <span data-ttu-id="9355e-242">Уровень All включает в себя все события уровней от Verbose до Critical, а также события ActivityTracing (прослеживание действий).</span><span class="sxs-lookup"><span data-stu-id="9355e-242">The All level includes events from Verbose to Critical and Activity tracing events.</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="9355e-243">Уровни Information, Verbose и ActivityTracing создают большое количество трассировок, что может негативно сказаться на производительности в отношении обработки сообщений, если все доступные ресурсы компьютера использованы.</span><span class="sxs-lookup"><span data-stu-id="9355e-243">The Information, Verbose, and ActivityTracing levels generate a lot of traces, which may negatively impact message throughput if you have used up all available resources on the machine.</span></span>  
  
## <a name="configuring-activity-tracing-and-propagation-for-correlation"></a><span data-ttu-id="9355e-244">Настройка распространения и трассировки действий для корреляции</span><span class="sxs-lookup"><span data-stu-id="9355e-244">Configuring Activity Tracing and Propagation for Correlation</span></span>  
 <span data-ttu-id="9355e-245">Для атрибута `activityTracing` можно задать значение `switchValue`, чтобы включить трассировку действий, создающую трассировку для границ действий и передач в пределах конечных точек.</span><span class="sxs-lookup"><span data-stu-id="9355e-245">The `activityTracing` value specified for the `switchValue` attribute is used to enable activity tracing, which emits traces for activity boundaries and transfers within endpoints.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="9355e-246">При использовании некоторых возможностей расширяемости [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] можно получить исключение <xref:System.NullReferenceException>, если включена трассировка действий.</span><span class="sxs-lookup"><span data-stu-id="9355e-246">When you use certain extensibility features in [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)], you might get a <xref:System.NullReferenceException> when activity tracing is enabled.</span></span> <span data-ttu-id="9355e-247">Чтобы устранить эту проблему, проверьте файл конфигурации своего приложения: атрибут `switchValue` для соответствующего источника трассировки не должен иметь значение `activityTracing`.</span><span class="sxs-lookup"><span data-stu-id="9355e-247">To fix this problem, check your application's configuration file and ensure that the `switchValue` attribute for your trace source is not set to `activityTracing`.</span></span>  
  
 <span data-ttu-id="9355e-248">Атрибут `propagateActivity` указывает, должно ли действие распространяться на другие конечные точки, участвующие в обмене сообщениями.</span><span class="sxs-lookup"><span data-stu-id="9355e-248">The `propagateActivity` attribute indicates whether the activity should be propagated to other endpoints that participate in the message exchange.</span></span> <span data-ttu-id="9355e-249">Если присвоить ему значение `true`, можно с помощью файлов трассировки, созданных любыми двумя конечными точками, проследить прохождение набора трассировок от одной конечной точки до набора трассировок на другой конечной точке.</span><span class="sxs-lookup"><span data-stu-id="9355e-249">By setting this value to `true`, you can take trace files generated by any two endpoints and observe how a set of traces on one endpoint flowed to a set of traces on another endpoint.</span></span>  
  
 [!INCLUDE[crabout](../../../../../includes/crabout-md.md)]<span data-ttu-id="9355e-250">Трассировка действий и распространение, см. [распространения](../../../../../docs/framework/wcf/diagnostics/tracing/propagation.md).</span><span class="sxs-lookup"><span data-stu-id="9355e-250"> activity tracing and propagation, see [Propagation](../../../../../docs/framework/wcf/diagnostics/tracing/propagation.md).</span></span>  
  
 <span data-ttu-id="9355e-251">Оба `propagateActivity` и `ActivityTracing` логические значения применяются к источнику трассировки System.ServiceModel.</span><span class="sxs-lookup"><span data-stu-id="9355e-251">Both `propagateActivity` and `ActivityTracing` Boolean values apply to the System.ServiceModel TraceSource.</span></span> <span data-ttu-id="9355e-252">`ActivityTracing` Значение также применяется к любому источнику трассировки, включая [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] или определенные пользователем.</span><span class="sxs-lookup"><span data-stu-id="9355e-252">The `ActivityTracing` value also applies to any trace source, including [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] or user-defined ones.</span></span>  
  
 <span data-ttu-id="9355e-253">Атрибут `propagateActivity` нельзя использовать для пользовательских источников трассировок.</span><span class="sxs-lookup"><span data-stu-id="9355e-253">You cannot use the `propagateActivity` attribute with user-defined trace sources.</span></span> <span data-ttu-id="9355e-254">Для распространения идентификатора действия пользовательского кода необходимо убедиться, что ServiceModel `ActivityTracing` не задано, тогда как ServiceModel `propagateActivity` имеет значение `true`.</span><span class="sxs-lookup"><span data-stu-id="9355e-254">For user code activity ID propagation, make sure you do not set ServiceModel `ActivityTracing`, while still having ServiceModel `propagateActivity` attribute set to `true`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9355e-255">См. также</span><span class="sxs-lookup"><span data-stu-id="9355e-255">See Also</span></span>  
 [<span data-ttu-id="9355e-256">Трассировка</span><span class="sxs-lookup"><span data-stu-id="9355e-256">Tracing</span></span>](../../../../../docs/framework/wcf/diagnostics/tracing/index.md)  
 [<span data-ttu-id="9355e-257">Администрирование и диагностика</span><span class="sxs-lookup"><span data-stu-id="9355e-257">Administration and Diagnostics</span></span>](../../../../../docs/framework/wcf/diagnostics/index.md)  
 [<span data-ttu-id="9355e-258">Практическое руководство. Создание и инициализация прослушивателей трассировки</span><span class="sxs-lookup"><span data-stu-id="9355e-258">How to: Create and Initialize Trace Listeners</span></span>](http://go.microsoft.com/fwlink/?LinkId=94648)  
 [<span data-ttu-id="9355e-259">Создание пользовательский прослушиватель трассировки</span><span class="sxs-lookup"><span data-stu-id="9355e-259">Creating a Custom TraceListener</span></span>](http://go.microsoft.com/fwlink/?LinkId=96239)
