---
title: Практическое руководство. Создание клиента Windows Communication Foundation
ms.date: 09/14/2018
helpviewer_keywords:
- clients [WCF], running
- WCF clients [WCF], running
ms.assetid: a67884cc-1c4b-416b-8c96-5c954099f19f
ms.openlocfilehash: 1eadb5008575a1a53d685db14d68e42d0dce1360
ms.sourcegitcommit: 2350a091ef6459f0fcfd894301242400374d8558
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/21/2018
ms.locfileid: "46539711"
---
# <a name="how-to-create-a-windows-communication-foundation-client"></a><span data-ttu-id="f13f6-102">Практическое руководство. Создание клиента Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="f13f6-102">How to: Create a Windows Communication Foundation Client</span></span>

<span data-ttu-id="f13f6-103">Это четвертая из шести шагов, необходимых для создания приложения Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="f13f6-103">This is the fourth of six tasks required to create a Windows Communication Foundation (WCF) application.</span></span> <span data-ttu-id="f13f6-104">Общие сведения обо всех шести задачах можно получить в разделе [Учебник по началу работы](../../../docs/framework/wcf/getting-started-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="f13f6-104">For an overview of all six of the tasks, see the [Getting Started Tutorial](../../../docs/framework/wcf/getting-started-tutorial.md) topic.</span></span>

<span data-ttu-id="f13f6-105">В этом разделе описывается, как получить метаданные из службы WCF и использовать его для создания прокси WCF, который можно получить доступ к службе.</span><span class="sxs-lookup"><span data-stu-id="f13f6-105">This topic describes how to retrieve metadata from a WCF service and use it to create a WCF proxy that can access the service.</span></span> <span data-ttu-id="f13f6-106">Эта задача выполняется с помощью **Add Service Reference** функциональных возможностях, предоставляемых Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f13f6-106">This task is completed by using the **Add Service Reference** functionality provided by Visual Studio.</span></span> <span data-ttu-id="f13f6-107">Данное средство получает метаданные из конечной точки обмена метаданными службы и создает файл управляемого исходного кода для клиентского прокси на выбранном языке (по умолчанию на C#).</span><span class="sxs-lookup"><span data-stu-id="f13f6-107">This tool obtains the metadata from the service’s MEX endpoint and generates a managed source code file for a client proxy in the language you have chosen (C# by default).</span></span> <span data-ttu-id="f13f6-108">Кроме создания прокси клиента данное средство также создает или обновляет файл конфигурации клиента, позволяющий клиентскому приложению подключаться к службе в одной из конечных точек.</span><span class="sxs-lookup"><span data-stu-id="f13f6-108">In addition to creating the client proxy, the tool also creates or updates the client configuration file which enables the client application to connect to the service at one of its endpoints.</span></span>

> [!NOTE]
> <span data-ttu-id="f13f6-109">Можно также использовать [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) для создания класса прокси и конфигурации, вместо использования **Add Service Reference** в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f13f6-109">You can also use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) tool to generate the proxy class and configuration instead of using **Add Service Reference** in Visual Studio.</span></span>

> [!NOTE]
> <span data-ttu-id="f13f6-110">При вызове службы WCF из проекта библиотеки классов в Visual Studio, можно использовать **Add Service Reference** компонентов для автоматического создания прокси-сервера и связанный файл конфигурации.</span><span class="sxs-lookup"><span data-stu-id="f13f6-110">When calling a WCF service from a class library project in Visual Studio, you can use the **Add Service Reference** feature to automatically generate a proxy and associated configuration file.</span></span> <span data-ttu-id="f13f6-111">Файл конфигурации не будет использоваться проектом библиотеки классов.</span><span class="sxs-lookup"><span data-stu-id="f13f6-111">The configuration file will not be used by the class library project.</span></span> <span data-ttu-id="f13f6-112">Необходимо добавить параметры в созданный файл конфигурации в файл app.config для исполняемого файла, который вызывает библиотеку классов.</span><span class="sxs-lookup"><span data-stu-id="f13f6-112">You need to add the settings in the generated configuration file to the app.config file for the executable that calls the class library.</span></span>

<span data-ttu-id="f13f6-113">Клиентское приложение использует созданный прокси-класс для взаимодействия со службой.</span><span class="sxs-lookup"><span data-stu-id="f13f6-113">The client application uses the generated proxy class to communicate with the service.</span></span> <span data-ttu-id="f13f6-114">Эта процедура описана в [как: использовать клиент](../../../docs/framework/wcf/how-to-use-a-wcf-client.md).</span><span class="sxs-lookup"><span data-stu-id="f13f6-114">This procedure is described in [How to: Use a Client](../../../docs/framework/wcf/how-to-use-a-wcf-client.md).</span></span>

## <a name="to-create-a-windows-communication-foundation-client"></a><span data-ttu-id="f13f6-115">Создание клиента Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="f13f6-115">To create a Windows Communication Foundation client</span></span>

1. <span data-ttu-id="f13f6-116">Создайте новый проект консольного приложения в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f13f6-116">Create a new console application project in Visual Studio.</span></span> <span data-ttu-id="f13f6-117">Щелкните правой кнопкой мыши на решение Приступая к работе в **обозревателе решений** и выберите **добавить** > **новый проект**.</span><span class="sxs-lookup"><span data-stu-id="f13f6-117">Right-click on the Getting Started solution in **Solution Explorer** and select **Add** > **New Project**.</span></span> <span data-ttu-id="f13f6-118">В **Добавление нового проекта** диалоговое окно, в левой части окна выберите **Windows Desktop** категорию **Visual C#** или **Visual Basic**.</span><span class="sxs-lookup"><span data-stu-id="f13f6-118">In the **Add New Project** dialog, on the left-hand side, select the **Windows Desktop** category under **Visual C#** or **Visual Basic**.</span></span> <span data-ttu-id="f13f6-119">Выберите **консольное приложение (.NET Framework)** шаблона и назовите проект **GettingStartedClient**.</span><span class="sxs-lookup"><span data-stu-id="f13f6-119">Select the **Console App (.NET Framework)** template, and then name the project **GettingStartedClient**.</span></span>

2. <span data-ttu-id="f13f6-120">Добавьте ссылку на сборку System.ServiceModel для проекта GettingStartedClient.</span><span class="sxs-lookup"><span data-stu-id="f13f6-120">Add a reference to System.ServiceModel to the GettingStartedClient project.</span></span> <span data-ttu-id="f13f6-121">Щелкните правой кнопкой мыши **ссылки** папку проекта GettingStartedClient в **обозревателе решений**, а затем выберите **добавить ссылку**.</span><span class="sxs-lookup"><span data-stu-id="f13f6-121">Right-click on the **References** folder under the GettingStartedClient project in **Solution Explorer**, and then select **Add Reference**.</span></span> <span data-ttu-id="f13f6-122">В **добавить ссылку** диалоговом окне выберите **Framework** в левой части диалогового окна в разделе **сборки**.</span><span class="sxs-lookup"><span data-stu-id="f13f6-122">In the **Add Reference** dialog, select **Framework** on the left-hand side of the dialog under **Assemblies**.</span></span> <span data-ttu-id="f13f6-123">Найдите и выберите **System.ServiceModel**, а затем выберите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="f13f6-123">Find and select **System.ServiceModel**, and then choose **OK**.</span></span> <span data-ttu-id="f13f6-124">Сохраните решение, выбрав **файл** > **сохранить все**.</span><span class="sxs-lookup"><span data-stu-id="f13f6-124">Save the solution by selecting **File** > **Save All**.</span></span>

3. <span data-ttu-id="f13f6-125">Добавьте ссылку на службу для службы калькулятора.</span><span class="sxs-lookup"><span data-stu-id="f13f6-125">Add a service reference to the Calculator Service.</span></span>

   1. <span data-ttu-id="f13f6-126">Сначала запустите консольное приложение GettingStartedHost.</span><span class="sxs-lookup"><span data-stu-id="f13f6-126">First, start up the GettingStartedHost console application.</span></span>

   2. <span data-ttu-id="f13f6-127">После запуска размещения правой кнопкой мыши **ссылки** папку проекта GettingStartedClient в **обозревателе решений** и выберите **добавить**  >   **Службе Справочник по**.</span><span class="sxs-lookup"><span data-stu-id="f13f6-127">Once the host is running, right-click the **References** folder under the GettingStartedClient project in **Solution Explorer** and select **Add** > **Service Reference**.</span></span>

   3. <span data-ttu-id="f13f6-128">Введите следующий URL-адрес в поле "адрес" **Add Service Reference** диалоговое окно: [http://localhost:8000/GettingStartedClient/Service](http://localhost:8000/GettingStartedClient/Service)</span><span class="sxs-lookup"><span data-stu-id="f13f6-128">Enter the following URL in the address box of the **Add Service Reference** dialog: [http://localhost:8000/GettingStartedClient/Service](http://localhost:8000/GettingStartedClient/Service)</span></span>

   4. <span data-ttu-id="f13f6-129">Выберите **Go**.</span><span class="sxs-lookup"><span data-stu-id="f13f6-129">Choose **Go**.</span></span>

   <span data-ttu-id="f13f6-130">CalculatorService отображается в **служб** поле со списком.</span><span class="sxs-lookup"><span data-stu-id="f13f6-130">The CalculatorService is displayed in the **Services** list box.</span></span> <span data-ttu-id="f13f6-131">Дважды щелкните CalculatorService, чтобы развернуть его и Показать контрактов службы, реализованном в службе.</span><span class="sxs-lookup"><span data-stu-id="f13f6-131">Double-click CalculatorService to expand it and show the service contracts implemented by the service.</span></span> <span data-ttu-id="f13f6-132">Оставьте пространство имен по умолчанию как- и выбрать **ОК**.</span><span class="sxs-lookup"><span data-stu-id="f13f6-132">Leave the default namespace as-is and choose **OK**.</span></span>

    <span data-ttu-id="f13f6-133">При добавлении ссылки на службу, с помощью Visual Studio, новый элемент появляется в **обозревателе решений** под **ссылок на службы** папку проекта GettingStartedClient.</span><span class="sxs-lookup"><span data-stu-id="f13f6-133">When you add a reference to a service using Visual Studio, a new item appears in **Solution Explorer** under the **Service References** folder under the GettingStartedClient project.</span></span> <span data-ttu-id="f13f6-134">Если вы используете [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) создаются средство, файл исходного кода и файл app.config.</span><span class="sxs-lookup"><span data-stu-id="f13f6-134">If you use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) tool, a source code file and app.config file are generated.</span></span>

    <span data-ttu-id="f13f6-135">Можно также использовать средство командной строки [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) с соответствующими параметрами, чтобы создать клиентский код.</span><span class="sxs-lookup"><span data-stu-id="f13f6-135">You can also use the command-line tool [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) with the appropriate switches to create the client code.</span></span> <span data-ttu-id="f13f6-136">В следующем примере создается файл кода и файл конфигурации для службы.</span><span class="sxs-lookup"><span data-stu-id="f13f6-136">The following example generates a code file and a configuration file for the service.</span></span> <span data-ttu-id="f13f6-137">Первый пример показано, как создать прокси на VB, и второй показано, как создать прокси на языке C#:</span><span class="sxs-lookup"><span data-stu-id="f13f6-137">The first example shows how to generate the proxy in VB, and the second shows how to generate the proxy in C#:</span></span>

    ```shell
    svcutil.exe /language:vb /out:generatedProxy.vb /config:app.config http://localhost:8000/GettingStartedClient/service
    ```

    ```shell
    svcutil.exe /language:cs /out:generatedProxy.cs /config:app.config http://localhost:8000/GettingStartedClient/service
    ```

## <a name="next-steps"></a><span data-ttu-id="f13f6-138">Следующие шаги</span><span class="sxs-lookup"><span data-stu-id="f13f6-138">Next steps</span></span>

<span data-ttu-id="f13f6-139">Вы создали прокси, который клиентское приложение будет использовать для вызова службы калькулятора.</span><span class="sxs-lookup"><span data-stu-id="f13f6-139">You've created the proxy that the client application will use to call the calculator service.</span></span> <span data-ttu-id="f13f6-140">Перейдите к следующему разделу в ряду.</span><span class="sxs-lookup"><span data-stu-id="f13f6-140">Proceed to the next topic in the series.</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="f13f6-141">Практическое руководство. Настройка клиента</span><span class="sxs-lookup"><span data-stu-id="f13f6-141">How to: Configure a Client</span></span>](../../../docs/framework/wcf/how-to-configure-a-basic-wcf-client.md)

## <a name="see-also"></a><span data-ttu-id="f13f6-142">См. также</span><span class="sxs-lookup"><span data-stu-id="f13f6-142">See also</span></span>

- [<span data-ttu-id="f13f6-143">Служебная программа для метаданных ServiceModel (Svcutil.exe)</span><span class="sxs-lookup"><span data-stu-id="f13f6-143">ServiceModel Metadata Utility Tool (Svcutil.exe)</span></span>](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)
- [<span data-ttu-id="f13f6-144">Начало работы</span><span class="sxs-lookup"><span data-stu-id="f13f6-144">Getting Started</span></span>](../../../docs/framework/wcf/samples/getting-started-sample.md)
- [<span data-ttu-id="f13f6-145">Резидентное размещение</span><span class="sxs-lookup"><span data-stu-id="f13f6-145">Self-Host</span></span>](../../../docs/framework/wcf/samples/self-host.md)
- [<span data-ttu-id="f13f6-146">Практическое руководство. Публикация метаданных для службы с использованием файла конфигурации</span><span class="sxs-lookup"><span data-stu-id="f13f6-146">How to: Publish Metadata for a Service Using a Configuration File</span></span>](../../../docs/framework/wcf/feature-details/how-to-publish-metadata-for-a-service-using-a-configuration-file.md)
- [<span data-ttu-id="f13f6-147">Практическое руководство. Использование Svcutil.exe для загрузки документов метаданных</span><span class="sxs-lookup"><span data-stu-id="f13f6-147">How to: Use Svcutil.exe to Download Metadata Documents</span></span>](../../../docs/framework/wcf/feature-details/how-to-use-svcutil-exe-to-download-metadata-documents.md)
