---
title: "Практическое руководство. Создание клиента Windows Communication Foundation"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- clients [WCF], running
- WCF clients [WCF], running
ms.assetid: a67884cc-1c4b-416b-8c96-5c954099f19f
caps.latest.revision: "64"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: 0d207a067fe6d654fdd8384f1955a25c69185320
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2017
---
# <a name="how-to-create-a-windows-communication-foundation-client"></a><span data-ttu-id="81684-102">Практическое руководство. Создание клиента Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="81684-102">How to: Create a Windows Communication Foundation Client</span></span>
<span data-ttu-id="81684-103">Это четвертый из шести шагов, необходимый для создания простого приложения [!INCLUDE[indigo1](../../../includes/indigo1-md.md)].</span><span class="sxs-lookup"><span data-stu-id="81684-103">This is the fourth of six tasks required to create a [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] application.</span></span> <span data-ttu-id="81684-104">Общие сведения обо всех шести задач см. в разделе [учебник по началу работы](../../../docs/framework/wcf/getting-started-tutorial.md) раздела.</span><span class="sxs-lookup"><span data-stu-id="81684-104">For an overview of all six of the tasks, see the [Getting Started Tutorial](../../../docs/framework/wcf/getting-started-tutorial.md) topic.</span></span>  
  
 <span data-ttu-id="81684-105">В данном разделе описывается, как извлечь метаданные из службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] и использовать, чтобы создать прокси [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] для доступа к службе.</span><span class="sxs-lookup"><span data-stu-id="81684-105">This topic describes how to retrieve metadata from a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service and use it to create a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] proxy that can access the service.</span></span> <span data-ttu-id="81684-106">Эта задача выполняется с помощью функции добавления ссылки на службу, предоставляемой средой Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="81684-106">This task is completed by using the Add Service Reference functionality provided by Visual Studio .</span></span> <span data-ttu-id="81684-107">Данное средство получает метаданные из конечной точки обмена метаданными службы и создает файл управляемого исходного кода для клиентского прокси на выбранном языке (по умолчанию на C#).</span><span class="sxs-lookup"><span data-stu-id="81684-107">This tool obtains the metadata from the service’s MEX endpoint and generates a managed source code file for a client proxy in the language you have chosen (C# by default).</span></span> <span data-ttu-id="81684-108">Кроме создания прокси клиента данное средство также создает или обновляет файл конфигурации клиента, позволяющий клиентскому приложению подключаться к службе в одной из конечных точек.</span><span class="sxs-lookup"><span data-stu-id="81684-108">In addition to creating the client proxy, the tool also creates or updates the client configuration file which enables the client application to connect to the service at one of its endpoints.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="81684-109">Можно также использовать [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) средства для создания класса прокси-сервера и конфигурации, вместо добавления ссылки на службу в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="81684-109">You can also use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) tool to generate the proxy class and configuration instead of using Add Service Reference inside of Visual Studio.</span></span>  
  
> [!WARNING]
>  <span data-ttu-id="81684-110">При вызове службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] из проекта библиотеки учетной записи-посредника в [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)] можно использовать команду «Добавить ссылку на службу» для автоматического создания прокси и связанного файла конфигурации.</span><span class="sxs-lookup"><span data-stu-id="81684-110">When calling a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service from a class library project in [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)] you can use the Add Service Reference feature to automatically generate a proxy and associated configuration file.</span></span>  <span data-ttu-id="81684-111">Файл конфигурации не будет использоваться проектом библиотеки классов.</span><span class="sxs-lookup"><span data-stu-id="81684-111">The configuration file will not be used by the class library project.</span></span> <span data-ttu-id="81684-112">Необходимо добавить параметры из созданного файла конфигурации в файл app.config, соответствующий исполняемому файлу, вызывающему библиотеку классов.</span><span class="sxs-lookup"><span data-stu-id="81684-112">You will need to add the settings in the generated configuration file to the app.config file for the executable that will call the class library.</span></span>  
  
 <span data-ttu-id="81684-113">Клиентское приложение использует созданный прокси-класс для взаимодействия со службой.</span><span class="sxs-lookup"><span data-stu-id="81684-113">The client application uses the generated proxy class to communicate with the service.</span></span> <span data-ttu-id="81684-114">Эта процедура описана в [как: использовать клиент](../../../docs/framework/wcf/how-to-use-a-wcf-client.md).</span><span class="sxs-lookup"><span data-stu-id="81684-114">This procedure is described in [How to: Use a Client](../../../docs/framework/wcf/how-to-use-a-wcf-client.md).</span></span>  
  
### <a name="to-create-a-windows-communication-foundation-client"></a><span data-ttu-id="81684-115">Создание клиента Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="81684-115">To create a Windows Communication Foundation client</span></span>  
  
1.  <span data-ttu-id="81684-116">Создайте новый проект консольного приложения, щелкнув решение Приступая к работе, выбрав, **добавить**, **новый проект**.</span><span class="sxs-lookup"><span data-stu-id="81684-116">Create a new console application project by right-clicking on the Getting Started solution, selecting, **Add**, **New Project**.</span></span> <span data-ttu-id="81684-117">В **Добавление нового проекта** диалогового окна в левой части окна выберите **Windows** под **C#** или **VB**.</span><span class="sxs-lookup"><span data-stu-id="81684-117">In the **Add New Project** dialog on the left hand side of the dialog select **Windows** under **C#** or **VB**.</span></span> <span data-ttu-id="81684-118">В центральной части диалогового окна выберите **консольное приложение**.</span><span class="sxs-lookup"><span data-stu-id="81684-118">In the center section of the dialog select **Console Application**.</span></span> <span data-ttu-id="81684-119">Задайте для проекта имя `GettingStartedClient`.</span><span class="sxs-lookup"><span data-stu-id="81684-119">Name the project `GettingStartedClient`.</span></span>  
  
2.  <span data-ttu-id="81684-120">Значение целевой платформы проекта gettingstartedclient версию .NET Framework 4.5, щелкнув правой кнопкой мыши **GettingStartedClient** в обозревателе решений и выбрав **свойства**.</span><span class="sxs-lookup"><span data-stu-id="81684-120">Set the target framework of the GettingStartedClient project to .NET Framework 4.5 by right clicking on **GettingStartedClient** in the Solution Explorer and selecting **Properties**.</span></span> <span data-ttu-id="81684-121">В раскрывающемся списке **требуемой версии .NET Framework** выберите **.NET Framework 4.5**.</span><span class="sxs-lookup"><span data-stu-id="81684-121">In the dropdown box labeled **Target Framework** select **.NET Framework 4.5**.</span></span> <span data-ttu-id="81684-122">Установка требуемой версии .NET framework для проекта Visual Basic несколько отличается, в диалоговом окне свойств проекта GettingStartedClient, нажмите кнопку **компиляции** с левой стороны экрана, а затем щелкните **Дополнительно Параметры компиляции** кнопки в левом нижнем углу диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="81684-122">Setting the target framework for a VB project is a little different, in the GettingStartedClient project properties dialog, click the **Compile** tab on the left-hand side of the screen, and then click the **Advanced Compile Options** button at the lower left-hand corner of the dialog.</span></span> <span data-ttu-id="81684-123">Выберите **.NET Framework 4.5** в раскрывающемся списке **требуемой версии .NET Framework**.</span><span class="sxs-lookup"><span data-stu-id="81684-123">Then select **.NET Framework 4.5** in the dropdown box labeled **Target Framework**.</span></span>  
  
     <span data-ttu-id="81684-124">Требуемая версия .NET framework, то Visual Studio 2011 к перезагрузке решения, нажмите клавишу **ОК** при появлении запроса.</span><span class="sxs-lookup"><span data-stu-id="81684-124">Setting the target framework will cause Visual Studio 2011 to reload the solution, press **OK** when prompted.</span></span>  
  
3.  <span data-ttu-id="81684-125">Добавление в проект GettingStartedClient ссылку на сборку System.ServiceModel щелкните правой кнопкой мыши **ссылки** папки проекта в обозревателе решений и выберите GettingStartedClient **добавить** Ссылка.</span><span class="sxs-lookup"><span data-stu-id="81684-125">Add a reference to System.ServiceModel to the GettingStartedClient project by right-clicking the **Reference** folder under the GettingStartedClient project in Solution Explorer and select **Add** Reference.</span></span> <span data-ttu-id="81684-126">В **добавить ссылку** окна выберите **Framework** с левой стороны диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="81684-126">In the **Add Reference** dialog select **Framework** on the left-hand side of the dialog.</span></span> <span data-ttu-id="81684-127">В текстовом поле «Поиск сборок» введите `System.ServiceModel`.</span><span class="sxs-lookup"><span data-stu-id="81684-127">In the Search Assemblies textbox, type in `System.ServiceModel`.</span></span> <span data-ttu-id="81684-128">В центральной части диалогового окна выберите **System.ServiceModel**, нажмите кнопку **добавить** и нажмите кнопку **закрыть** кнопки.</span><span class="sxs-lookup"><span data-stu-id="81684-128">In the center section of the dialog select **System.ServiceModel**, click the **Add** button, and click the **Close** button.</span></span> <span data-ttu-id="81684-129">Сохраните решение, нажав кнопку **сохранить все** кнопку под главным меню.</span><span class="sxs-lookup"><span data-stu-id="81684-129">Save the solution by clicking the **Save All** button below the main menu.</span></span>  
  
4.  <span data-ttu-id="81684-130">Затем необходимо добавить ссылку на службу калькулятора.</span><span class="sxs-lookup"><span data-stu-id="81684-130">Next you wlll add a service reference to the Calculator Service.</span></span> <span data-ttu-id="81684-131">Прежде чем это можно будет сделать, следует запустить консольное приложение GettingStartedHost.</span><span class="sxs-lookup"><span data-stu-id="81684-131">Before you can do that, you must start up the GettingStartedHost console application.</span></span> <span data-ttu-id="81684-132">После запуска основного приложения можно правой кнопкой мыши папку References проекта GettingStartedClient в обозревателе решений и выберите Добавить ссылку на службу и введите следующий URL-адрес в поле "адрес" диалогового окна "Добавление ссылки на службу": «http:/ ГИПЕРССЫЛКИ / localhost:8000/ServiceModelSamples/Service» http://localhost: 8000/ServiceModelSamples/Service и нажмите кнопку **Go** кнопки.</span><span class="sxs-lookup"><span data-stu-id="81684-132">Once the host is running you can right click the References folder under the GettingStartedClient project in the Solution Explorer and select Add Service Reference and type in the following URL in the address box of the Add Service Reference dialog:  HYPERLINK "http://localhost:8000/ServiceModelSamples/Service" http://localhost:8000/ServiceModelSamples/Service and   click the **Go** button.</span></span> <span data-ttu-id="81684-133">Служба CalculatorService должна отображаться в списке служб. Дважды щелкните службу CalculatorService, чтобы развернуть список контрактов, реализованных службой.</span><span class="sxs-lookup"><span data-stu-id="81684-133">The CalculatorService should then be displayed in the Services list box, Double click CalculatorService and it will expand and show the service contracts implemented by the service.</span></span> <span data-ttu-id="81684-134">Оставьте пространство имен по умолчанию и нажмите **ОК** кнопки.</span><span class="sxs-lookup"><span data-stu-id="81684-134">Leave the default namespace as is and click the **OK** button.</span></span>  
  
     <span data-ttu-id="81684-135">При добавлении ссылки на службу с помощью Visual Studio в обозревателе решений для проекта GettingStartedClient появится новый элемент в папке «Ссылки на службы».</span><span class="sxs-lookup"><span data-stu-id="81684-135">When you add a reference to a service using Visual Studio a new item will appear in the Solution Explorer under the Service References folder under the GettingStartedClient project.</span></span>  <span data-ttu-id="81684-136">Если вы используете [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) средство, будет создан файл исходного кода и файл app.config.</span><span class="sxs-lookup"><span data-stu-id="81684-136">If you use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) tool a source code file and app.config file will be generated.</span></span>  
  
     <span data-ttu-id="81684-137">Можно также использовать программу командной строки [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) с соответствующими параметрами для создания клиентского кода.</span><span class="sxs-lookup"><span data-stu-id="81684-137">You can also use the command-line tool [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) with the appropriate switches to create the client code.</span></span> <span data-ttu-id="81684-138">В следующем примере создается файл кода и файл конфигурации для службы.</span><span class="sxs-lookup"><span data-stu-id="81684-138">The following example generates a code file and a configuration file for the service.</span></span> <span data-ttu-id="81684-139">В первом примере показано, как создать прокси на VB, а во втором то же самое, но с использованием C#:</span><span class="sxs-lookup"><span data-stu-id="81684-139">The first example shows how to generate the proxy in VB and the second shows how to generated the proxy in C#:</span></span>  
  
    ```  
    svcutil.exe /language:vb /out:generatedProxy.vb /config:app.config http://localhost:8000/ServiceModelSamples/service  
    ```  
  
    ```csharp  
    svcutil.exe /language:cs /out:generatedProxy.cs /config:app.config http://localhost:8000/ServiceModelSamples/service  
    ```  
  
 <span data-ttu-id="81684-140">Мы создали прокси, который будет использовать клиентское приложение для вызова службы калькулятора.</span><span class="sxs-lookup"><span data-stu-id="81684-140">You have now created the proxy that the client application will use to call the calculator service.</span></span> <span data-ttu-id="81684-141">Перейти к следующему разделу ряда: [как: Настройка клиента](../../../docs/framework/wcf/how-to-configure-a-basic-wcf-client.md)</span><span class="sxs-lookup"><span data-stu-id="81684-141">Proceed to the next topic in the series: [How to: Configure a Client](../../../docs/framework/wcf/how-to-configure-a-basic-wcf-client.md)</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="81684-142">См. также</span><span class="sxs-lookup"><span data-stu-id="81684-142">See Also</span></span>  
 [<span data-ttu-id="81684-143">Служебная программа для метаданных ServiceModel (Svcutil.exe)</span><span class="sxs-lookup"><span data-stu-id="81684-143">ServiceModel Metadata Utility Tool (Svcutil.exe)</span></span>](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)  
 [<span data-ttu-id="81684-144">Начало работы</span><span class="sxs-lookup"><span data-stu-id="81684-144">Getting Started</span></span>](../../../docs/framework/wcf/samples/getting-started-sample.md)  
 [<span data-ttu-id="81684-145">Резидентное размещение</span><span class="sxs-lookup"><span data-stu-id="81684-145">Self-Host</span></span>](../../../docs/framework/wcf/samples/self-host.md)  
 [<span data-ttu-id="81684-146">Как: публикация метаданных для службы с помощью файла конфигурации</span><span class="sxs-lookup"><span data-stu-id="81684-146">How to: Publish Metadata for a Service Using a Configuration File</span></span>](../../../docs/framework/wcf/feature-details/how-to-publish-metadata-for-a-service-using-a-configuration-file.md)  
 [<span data-ttu-id="81684-147">Как: использование Svcutil.exe для загрузки документов метаданных</span><span class="sxs-lookup"><span data-stu-id="81684-147">How to: Use Svcutil.exe to Download Metadata Documents</span></span>](../../../docs/framework/wcf/feature-details/how-to-use-svcutil-exe-to-download-metadata-documents.md)
