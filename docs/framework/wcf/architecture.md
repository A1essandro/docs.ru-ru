---
title: "Архитектура Windows Communication Foundation"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- Windows Communication Foundation [WCF], architecture
- WCF [WCF], architecture
- architecture [WCF]
ms.assetid: a3bcb0a1-56ea-4ba6-9736-d260d90dade5
caps.latest.revision: "7"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 7be93c5949966c052e77adebe8bb4d7aac9149bb
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/02/2017
---
# <a name="windows-communication-foundation-architecture"></a><span data-ttu-id="38b5f-102">Архитектура Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="38b5f-102">Windows Communication Foundation Architecture</span></span>
<span data-ttu-id="38b5f-103">Следующее изображение иллюстрирует основные уровни архитектуры [!INCLUDE[indigo1](../../../includes/indigo1-md.md)].</span><span class="sxs-lookup"><span data-stu-id="38b5f-103">The following graphic illustrates the major layers of the [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] architecture.</span></span>  
  
## <a name="wcf-architecture"></a><span data-ttu-id="38b5f-104">Архитектура WCF</span><span class="sxs-lookup"><span data-stu-id="38b5f-104">WCF Architecture</span></span>  
 <span data-ttu-id="38b5f-105">![Архитектура WCF](../../../docs/framework/wcf/media/wcf-architecture.gif "WCF_Architecture")</span><span class="sxs-lookup"><span data-stu-id="38b5f-105">![The WCF Architecture](../../../docs/framework/wcf/media/wcf-architecture.gif "WCF_Architecture")</span></span>  
  
### <a name="contracts-and-descriptions"></a><span data-ttu-id="38b5f-106">Контракты и описания</span><span class="sxs-lookup"><span data-stu-id="38b5f-106">Contracts and Descriptions</span></span>  
 <span data-ttu-id="38b5f-107">Контракты определяют различные аспекты системы сообщений.</span><span class="sxs-lookup"><span data-stu-id="38b5f-107">Contracts define various aspects of the message system.</span></span> <span data-ttu-id="38b5f-108">Контракты данных описывают каждый параметр, составляющий каждое сообщение, которое может быть создано или использовано службой.</span><span class="sxs-lookup"><span data-stu-id="38b5f-108">The data contract describes every parameter that makes up every message that a service can create or consume.</span></span> <span data-ttu-id="38b5f-109">Параметры сообщения определены документами языка определения схемы XML (XSD), тем самым позволяя обрабатывать документы любой системе, которая воспринимает XML.</span><span class="sxs-lookup"><span data-stu-id="38b5f-109">The message parameters are defined by XML Schema definition language (XSD) documents, enabling any system that understands XML to process the documents.</span></span> <span data-ttu-id="38b5f-110">Контракт сообщения определяет конкретные части сообщения, использующие протокол SOAP, и позволяет более точно управлять частями сообщения, когда такая точность требуется при взаимодействии.</span><span class="sxs-lookup"><span data-stu-id="38b5f-110">The message contract defines specific message parts using SOAP protocols, and allows finer-grained control over parts of the message, when interoperability demands such precision.</span></span> <span data-ttu-id="38b5f-111">Контракт службы задает фактические подписи методов службы и распространяется в качестве интерфейса в одном из поддерживаемых языков программирования, например Visual Basic и Visual C#.</span><span class="sxs-lookup"><span data-stu-id="38b5f-111">The service contract specifies the actual method signatures of the service, and is distributed as an interface in one of the supported programming languages, such as Visual Basic or Visual C#.</span></span>  
  
 <span data-ttu-id="38b5f-112">Политики и привязки задают условия, необходимые для взаимодействия со службой.</span><span class="sxs-lookup"><span data-stu-id="38b5f-112">Policies and bindings stipulate the conditions required to communicate with a service.</span></span>  <span data-ttu-id="38b5f-113">Например, привязка должна (как минимум) указывать используемый транспорт (например, HTTP или TCP) и кодирование.</span><span class="sxs-lookup"><span data-stu-id="38b5f-113">For example, the binding must (at a minimum) specify the transport used (for example, HTTP or TCP), and an encoding.</span></span> <span data-ttu-id="38b5f-114">Политики содержат требования к безопасности и другие условия, которые должны быть удовлетворены для взаимодействия со службой.</span><span class="sxs-lookup"><span data-stu-id="38b5f-114">Policies include security requirements and other conditions that must be met to communicate with a service.</span></span>  
  
### <a name="service-runtime"></a><span data-ttu-id="38b5f-115">Среда выполнения службы</span><span class="sxs-lookup"><span data-stu-id="38b5f-115">Service Runtime</span></span>  
 <span data-ttu-id="38b5f-116">Уровень среды выполнения службы содержит поведения, возникающие только в процессе выполнения самой операции службы, то есть поведения среды выполнения службы.</span><span class="sxs-lookup"><span data-stu-id="38b5f-116">The service runtime layer contains the behaviors that occur only during the actual operation of the service, that is, the runtime behaviors of the service.</span></span> <span data-ttu-id="38b5f-117">Регулирование управляет количеством обрабатываемых сообщений, которое может изменяться, если запросы к службе возрастают до заранее установленного предела.</span><span class="sxs-lookup"><span data-stu-id="38b5f-117">Throttling controls how many messages are processed, which can be varied if the demand for the service grows to a preset limit.</span></span> <span data-ttu-id="38b5f-118">Поведение при ошибке указывает, что происходит при возникновении внутренней ошибки в службе, например управляя тем, какая информация передается клиенту.</span><span class="sxs-lookup"><span data-stu-id="38b5f-118">An error behavior specifies what occurs when an internal error occurs on the service, for example, by controlling what information is communicated to the client.</span></span> <span data-ttu-id="38b5f-119">(Слишком много сведений могут помочь злоумышленнику в осуществлении атаки.) Поведение метаданных управляет тем, будут ли метаданные доступны внешнему миру и как это сделать.</span><span class="sxs-lookup"><span data-stu-id="38b5f-119">(Too much information can give a malicious user an advantage in mounting an attack.) Metadata behavior governs how and whether metadata is made available to the outside world.</span></span> <span data-ttu-id="38b5f-120">Поведение экземпляра указывает, какое число экземпляров службы может выполнятся (например, одноэлементный задает один экземпляр для обработки всех сообщений).</span><span class="sxs-lookup"><span data-stu-id="38b5f-120">Instance behavior specifies how many instances of the service can be run (for example, a singleton specifies only one instance to process all messages).</span></span> <span data-ttu-id="38b5f-121">Поведение транзакции включает откат транзакционных операций при сбое.</span><span class="sxs-lookup"><span data-stu-id="38b5f-121">Transaction behavior enables the rollback of transacted operations if a failure occurs.</span></span> <span data-ttu-id="38b5f-122">Поведение диспетчера управляет обработкой сообщения инфраструктурой [!INCLUDE[indigo2](../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="38b5f-122">Dispatch behavior is the control of how a message is processed by the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] infrastructure.</span></span>  
  
 <span data-ttu-id="38b5f-123">Расширяемость позволяет настраивать процессы среды выполнения.</span><span class="sxs-lookup"><span data-stu-id="38b5f-123">Extensibility enables customization of runtime processes.</span></span> <span data-ttu-id="38b5f-124">Например, инспекция сообщений предоставляет возможность инспектировать части сообщений, а фильтрация параметров позволяет выполнять заранее установленные действия, возникающие в зависимости от применения фильтров к заголовкам сообщений.</span><span class="sxs-lookup"><span data-stu-id="38b5f-124">For example, message inspection is the facility to inspect parts of a message, and parameter filtering enables preset actions to occur based on filters acting on message headers.</span></span>  
  
### <a name="messaging"></a><span data-ttu-id="38b5f-125">Обмен сообщениями</span><span class="sxs-lookup"><span data-stu-id="38b5f-125">Messaging</span></span>  
 <span data-ttu-id="38b5f-126">Уровень обмена сообщениями состоит из *каналы*.</span><span class="sxs-lookup"><span data-stu-id="38b5f-126">The messaging layer is composed of *channels*.</span></span> <span data-ttu-id="38b5f-127">Канал - это компонент, который обрабатывает сообщение некоторым образом, например путем проверки подлинности сообщения.</span><span class="sxs-lookup"><span data-stu-id="38b5f-127">A channel is a component that processes a message in some way, for example, by authenticating a message.</span></span> <span data-ttu-id="38b5f-128">Набор каналов называется также *стек канала*.</span><span class="sxs-lookup"><span data-stu-id="38b5f-128">A set of channels is also known as a *channel stack*.</span></span> <span data-ttu-id="38b5f-129">Каналы оперируют сообщениями и их заголовками.</span><span class="sxs-lookup"><span data-stu-id="38b5f-129">Channels operate on messages and message headers.</span></span> <span data-ttu-id="38b5f-130">Это отличается от уровня среды выполнения служб, который, главным образом, занимается обработкой содержимого тел сообщений.</span><span class="sxs-lookup"><span data-stu-id="38b5f-130">This is different from the service runtime layer, which is primarily concerned about processing the contents of message bodies.</span></span>  
  
 <span data-ttu-id="38b5f-131">Существует два типа каналов: каналы транспорта и каналы протоколов.</span><span class="sxs-lookup"><span data-stu-id="38b5f-131">There are two types of channels: transport channels and protocol channels.</span></span>  
  
 <span data-ttu-id="38b5f-132">Каналы транспорта считывают и записывают сообщения по сети (или какой-либо другой точке связи с внешним миром).</span><span class="sxs-lookup"><span data-stu-id="38b5f-132">Transport channels read and write messages from the network (or some other communication point with the outside world).</span></span> <span data-ttu-id="38b5f-133">Некоторые транспорты используют кодировщик для преобразования сообщений (которые представлены в виде наборов сведений XML) в представление потока байтов, используемое в сети, и обратно.</span><span class="sxs-lookup"><span data-stu-id="38b5f-133">Some transports use an encoder to convert messages (which are represented as XML Infosets) to and from the byte stream representation used by the network.</span></span> <span data-ttu-id="38b5f-134">Примерами транспортов являются HTTP, именованные каналы, TCP и MSMQ.</span><span class="sxs-lookup"><span data-stu-id="38b5f-134">Examples of transports are HTTP, named pipes, TCP, and MSMQ.</span></span> <span data-ttu-id="38b5f-135">Примерами кодирования являются XML и оптимизированный двоичный тип.</span><span class="sxs-lookup"><span data-stu-id="38b5f-135">Examples of encodings are XML and optimized binary.</span></span>  
  
 <span data-ttu-id="38b5f-136">Каналы протоколов реализуют протоколы обработки сообщений, обычно при чтении или записи дополнительных заголовков в сообщения.</span><span class="sxs-lookup"><span data-stu-id="38b5f-136">Protocol channels implement message processing protocols, often by reading or writing additional headers to the message.</span></span> <span data-ttu-id="38b5f-137">Примерами таких протоколов являются WS-Security и WS-Reliability.</span><span class="sxs-lookup"><span data-stu-id="38b5f-137">Examples of such protocols include WS-Security and WS-Reliability.</span></span>  
  
 <span data-ttu-id="38b5f-138">Уровень обмена сообщениями демонстрирует возможные форматы данных и их шаблоны обмена.</span><span class="sxs-lookup"><span data-stu-id="38b5f-138">The messaging layer illustrates the possible formats and exchange patterns of the data.</span></span> <span data-ttu-id="38b5f-139">WS-Security является реализацией спецификации WS-Security, включающей безопасность на уровне обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="38b5f-139">WS-Security is an implementation of the WS-Security specification enabling security at the message layer.</span></span> <span data-ttu-id="38b5f-140">Канал обмена сообщениями WS-Reliable обеспечивает гарантированную доставку сообщений.</span><span class="sxs-lookup"><span data-stu-id="38b5f-140">The WS-Reliable Messaging channel enables the guarantee of message delivery.</span></span> <span data-ttu-id="38b5f-141">Кодировщики предоставляют различные кодировки, которые могут использоваться в соответствии с потребностями сообщений.</span><span class="sxs-lookup"><span data-stu-id="38b5f-141">The encoders present a variety of encodings that can be used to suit the needs of the message.</span></span> <span data-ttu-id="38b5f-142">Канал HTTP указывает, что протокол транспортировки гипертекста (HyperText Transport Protocol) используется для доставки сообщений.</span><span class="sxs-lookup"><span data-stu-id="38b5f-142">The HTTP channel specifies that the HyperText Transport Protocol is used for message delivery.</span></span> <span data-ttu-id="38b5f-143">Таким же образом канал TCP задает протокол TCP.</span><span class="sxs-lookup"><span data-stu-id="38b5f-143">The TCP channel similarly specifies the TCP protocol.</span></span> <span data-ttu-id="38b5f-144">Канал потока транзакций управляет шаблонами сообщений транзакций.</span><span class="sxs-lookup"><span data-stu-id="38b5f-144">The Transaction Flow channel governs transacted message patterns.</span></span> <span data-ttu-id="38b5f-145">Именованный канал включает межпроцессное взаимодействие.</span><span class="sxs-lookup"><span data-stu-id="38b5f-145">The Named Pipe channel enables interprocess communication.</span></span> <span data-ttu-id="38b5f-146">Канал MSMQ взаимодействие с приложениями MSMQ.</span><span class="sxs-lookup"><span data-stu-id="38b5f-146">The MSMQ channel enables interoperation with MSMQ applications.</span></span>  
  
### <a name="hosting-and-activation"></a><span data-ttu-id="38b5f-147">Размещение и активация</span><span class="sxs-lookup"><span data-stu-id="38b5f-147">Hosting and Activation</span></span>  
 <span data-ttu-id="38b5f-148">В своей конечной форме служба является программой.</span><span class="sxs-lookup"><span data-stu-id="38b5f-148">In its final form, a service is a program.</span></span> <span data-ttu-id="38b5f-149">Как и другие программы, служба должна выполняться в исполняемом файле.</span><span class="sxs-lookup"><span data-stu-id="38b5f-149">Like other programs, a service must be run in an executable.</span></span> <span data-ttu-id="38b5f-150">Это называется *резидентной* службы.</span><span class="sxs-lookup"><span data-stu-id="38b5f-150">This is known as a *self-hosted* service.</span></span>  
  
 <span data-ttu-id="38b5f-151">Службы также могут быть *размещенных*, или выполняться в исполняемом управляется внешним агентом, например IIS или службы активации Windows (WAS).</span><span class="sxs-lookup"><span data-stu-id="38b5f-151">Services can also be *hosted*, or run in an executable managed by an external agent, such as IIS or Windows Activation Service (WAS).</span></span> <span data-ttu-id="38b5f-152">WAS позволяет приложениям [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] автоматически проходить активацию при разработке на компьютере с установленной службой WAS.</span><span class="sxs-lookup"><span data-stu-id="38b5f-152">WAS enables [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] applications to be activated automatically when deployed on a computer running WAS.</span></span> <span data-ttu-id="38b5f-153">Службы также могут быть вручную запущены как исполняемые файлы (EXE-файлы).</span><span class="sxs-lookup"><span data-stu-id="38b5f-153">Services can also be manually run as executables (.exe files).</span></span> <span data-ttu-id="38b5f-154">Их также можно автоматически запускать в виде служб Windows.</span><span class="sxs-lookup"><span data-stu-id="38b5f-154">A service can also be run automatically as a Windows service.</span></span> <span data-ttu-id="38b5f-155">Компоненты COM+ могут размещаться также, как и службы [!INCLUDE[indigo2](../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="38b5f-155">COM+ components can also be hosted as [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] services.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="38b5f-156">См. также</span><span class="sxs-lookup"><span data-stu-id="38b5f-156">See Also</span></span>  
 [<span data-ttu-id="38b5f-157">Что такое Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="38b5f-157">What Is Windows Communication Foundation</span></span>](../../../docs/framework/wcf/whats-wcf.md)  
 [<span data-ttu-id="38b5f-158">Основные понятия Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="38b5f-158">Fundamental Windows Communication Foundation Concepts</span></span>](../../../docs/framework/wcf/fundamental-concepts.md)
