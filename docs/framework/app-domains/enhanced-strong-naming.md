---
title: "Усовершенствованное строгое именование | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-bcl"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "строгое именование [платформа .NET Framework], улучшенный"
  - "сборки со строгими именами"
ms.assetid: 6cf17a82-62a1-4f6d-8d5a-d7d06dec2bb5
caps.latest.revision: 11
author: "rpetrusha"
ms.author: "ronpet"
manager: "wpickett"
caps.handback.revision: 11
---
# Усовершенствованное строгое именование
Подпись строгого имени — это механизм идентификации сборок в .NET Framework.  Это цифровая подпись с открытым ключом, которая обычно используется для проверки целостности данных, передаваемых от инициатора \(подписывающего\) к получателю \(проверяющему\).  Эта подпись используется в виде уникального идентификатора для сборки и гарантирует, что ссылки на сборку не являются неоднозначными.  Подписывание сборки является частью процесса сборки, что затем проверяется при ее загрузке.  
  
 Подписи строгого имени помогают предотвратить подделку сборки на стороне злоумышленников с последующей повторной подписью сборки оригинальным ключом подписавшего.  Однако ключи строгого имени не содержат никаких сведений об издателе, также не содержат и иерархию сертификатов.  Подпись строгого имени не гарантирует, что подписавшему сборку человеку можно доверять, и не указывает на то, что человек является правомерным владельцем ключа; она только означает, что владелец ключа подписал сборку.  Поэтому не рекомендуется использовать подпись строгого имени как проверку безопасности на доверие к коду сторонних разработчиков.  Рекомендуемым способом проверки кода является Microsoft Authenticode.  
  
## Ограничения обычных строгих имен  
 Технология строгого именования, используемая в версиях до [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], имеет следующие недостатки:  
  
-   Ключи постоянно подвержены атакам, а улучшенные методы и оборудование облегчают поиск закрытого ключа по открытому.  Для защиты от атак необходимы более длинные ключи. Версии .NET Framework до [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] предоставляют возможность подписывать с любым ключом размера \(размер по умолчанию — 1024 бита\), но подпись сборки новым ключом испортит все двоичные файлы, ссылающиеся на старый идентификатор сборки.  Поэтому крайне сложным является обновление размера ключа подписи, если необходимо обеспечить совместимость.  
  
-   Подпись строгого имени поддерживает только алгоритм SHA\-1.  Недавно было показано, что алгоритма SHA\-1 недостаточно для обеспечения безопасности хэширования.  Поэтому необходим более надежный алгоритм \(SHA\-256 или выше\).  Возможно, SHA\-1 потеряет свое FIPS\-совместимое представление, что станет проблемой для тех, кто предпочитает использовать только FIPS\-совместимые программное обеспечение и алгоритмы.  
  
## Преимущества улучшенных строгих имен  
 Основными преимуществами улучшенных строгих имен являются совместимость с более ранними уже существующими строгими именами и возможность получения эквивалентности одного идентификатора другому.  
  
-   Разработчики, которые имеют уже существующие подписанные сборки, могут перенести формирование их идентификаторов на алгоритм SHA\-2, сохранив при этом совместимость со сборками, которые ссылаются на их старые идентификаторы.  
  
-   Разработчики, которые создают новые сборки и не связаны с более ранними существующими подписями строгого имени, могут использовать более безопасные алгоритмы SHA\-2 и подписывать сборки так, как они делали всегда.  
  
## Использование улучшенных строгих имен  
 Ключи строгого имени состоят из ключа подписи и ключа удостоверения.  Сборка подписывается с помощью ключа подписи и не зависит от ключа удостоверения.  До выхода версии [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] эти ключи были идентичными.  Начиная с [!INCLUDE[net_v45](../../../includes/net-v45-md.md)] ключ удостоверения остается таким же, как и в более ранних версиях платформы .NET Framework, а ключ подписи улучшается использованием более надежного хэш\-алгоритма.  Кроме того, ключ подписи подписывается ключом удостоверения для создания подписи\-счетчика.  
  
 Атрибут <xref:System.Reflection.AssemblySignatureKeyAttribute> позволяет метаданным сборки использовать уже существующий открытый ключ для идентификации сборки, который позволяет старым ссылкам на сборку продолжить их работу.  Атрибут <xref:System.Reflection.AssemblySignatureKeyAttribute> использует подпись\-счетчик, чтобы удостовериться, что владелец нового ключа подписи также является владельцем старого ключа удостоверения.  
  
### Подписывание с использованием SHA\-2 без переноса ключа  
 Выполните следующие команды из окна командной строки, чтобы подписать сборку без переноса подписи строгого имени:  
  
1.  Создайте новый ключ удостоверения \(если необходимо\).  
  
    ```  
    sn -k IdentityKey.snk  
    ```  
  
2.  Извлеките открытый ключ удостоверения и укажите, что необходимо использовать алгоритм SHA\-2 при подписывании этим ключом.  
  
    ```  
    sn -p IdentityKey.snk IdentityPubKey.snk sha256  
    ```  
  
3.  Используйте отложенную подпись для сборки с помощью файла с открытым ключом удостоверения.  
  
    ```  
    csc MyAssembly.cs /keyfile:IdentityPubKey.snk /delaySign+  
    ```  
  
4.  Переподпишите сборку с помощью полной пары ключей удостоверения.  
  
    ```  
    sn -Ra MyAssembly.exe IdentityKey.snk  
    ```  
  
### Подписывание с использованием SHA\-2 с переносом ключа  
 Выполните следующие команды из окна командной строки, чтобы подписать сборку с использованием перенесенной подписи строгого имени:  
  
1.  Создайте пару ключей удостоверения и подписи \(если необходимо\).  
  
    ```  
    sn -k IdentityKey.snk  
    sn -k SignatureKey.snk  
    ```  
  
2.  Извлеките открытый ключ подписи и укажите, что необходимо использовать алгоритм SHA\-2 при подписывании этим ключом.  
  
    ```  
    sn -p SignatureKey.snk SignaturePubKey.snk sha256  
    ```  
  
3.  Извлеките открытый ключ удостоверения, определяющий хэш\-алгоритм, с помощью которого создается подпись\-счетчик.  
  
    ```  
    sn -p IdentityKey.snk IdentityPubKey.snk  
    ```  
  
4.  Создайте параметры для атрибута <xref:System.Reflection.AssemblySignatureKeyAttribute> и прикрепите атрибут к сборке.  
  
    ```  
    sn -ac IdentityPubKey.snk IdentityKey.snk SignaturePubKey.snk  
    ```  
  
5.  Используйте отложенную подпись для сборки с помощью открытого ключа удостоверения.  
  
    ```  
    csc MyAssembly.cs /keyfile:IdentityPubKey.snk /delaySign+  
  
    ```  
  
6.  Окончательно подпишите сборку с помощью пары ключей удостоверения.  
  
    ```  
    sn -Ra MyAssembly.exe SignatureKey.snk  
    ```  
  
## См. также  
 [Создание и использование сборок со строгими именами](../../../docs/framework/app-domains/create-and-use-strong-named-assemblies.md)