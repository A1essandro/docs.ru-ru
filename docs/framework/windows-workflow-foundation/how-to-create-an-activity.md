---
title: "Как создать действие | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework"
ms.reviewer: ""
ms.suite: ""
ms.tgt_pltfrm: ""
ms.topic: "article"
ms.assetid: c09b1e99-21b5-4d96-9c04-ec31db3f4436
caps.latest.revision: 39
author: "Erikre"
ms.author: "erikre"
manager: "erikre"
caps.handback.revision: 39
---
# Как создать действие
Действия являются базовой единицей режима работы в [!INCLUDE[wf1](../../../includes/wf1-md.md)].Логика выполнения действия может быть реализована в управляемом коде или с помощью других действий.В этом разделе показано создание двух действий.Первое действие — простое действие с использованием кода для реализации логики выполнения.Реализация второго действия определяется с помощью других действий.Эти действия используются в следующих шагах учебника.  
  
> [!NOTE]
>  Чтобы загрузить завершенную версию учебника, см. раздел [Windows Workflow Foundation \(WF45\), учебник «Приступая к работе»](http://go.microsoft.com/fwlink/?LinkID=248976).  
  
### Создание проекта библиотеки действия  
  
1.  Откройте [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)] и выберите **Создать**, **Проект** в меню **Файл**.  
  
2.  Разверните узел **Другие типы проектов** в списке **Установленные**, **Шаблоны** и выберите **Решения Visual Studio**.  
  
3.  В списке **Решения Visual Studio** выберите **Пустое решение**.Убедитесь, что в раскрывающемся списке версий .NET Framework выбран пункт **.NET Framework 4.5**.Введите `WF45GettingStartedTutorial` в поле **Имя** и нажмите **ОК**.  
  
4.  Щелкните правой кнопкой мыши **WF45GettingStartedTutorial** в окне **Обозреватель решений** и выберите **Добавить**, **Создать проект**.  
  
    > [!TIP]
    >  Если окно **Обозреватель решений** не отображается, в меню **Вид** выберите пункт **Обозреватель решений**.  
  
5.  В узле **Установленные** выберите пункты **Visual C\#** и **Рабочий процесс** \(или **Visual Basic** и **Рабочий процесс**\).Убедитесь, что выбран пункт **.NET Framework 4.5** в раскрывающемся списке версий [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].Выберите **Библиотека действий** в списке **Рабочий процесс**.В поле **Имя** введите `NumberGuessWorkflowActivities`, затем нажмите кнопку **ОК**.  
  
    > [!NOTE]
    >  В зависимости от того, какой язык программирования задан как основной в [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)], узел **Visual C\#** или **Visual Basic** может находиться в узле **Другие языки** узла **Установленные**.  
  
6.  Щелкните правой кнопкой мыши **Activity1.xaml** в окне **Обозреватель решений** и выберите **Удалить**.Нажмите кнопку **ОК** для подтверждения.  
  
### Создание действия ReadInt  
  
1.  Выберите в меню **Проект** команду **Добавить новый элемент**.  
  
2.  В узле **Установленные**, **Общие элементы** выберите **Рабочий процесс**.Выберите **Действие кода** в списке **Рабочий процесс**.  
  
3.  В поле **Имя** введите `ReadInt` и нажмите кнопку **Добавить**.  
  
4.  Замените существующее определение `ReadInt` следующим определением.  
  
     [!code-csharp[CFX_WF_GettingStarted#1](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_wf_gettingstarted/cs/readint.cs#1)]
     [!code-vb[CFX_WF_GettingStarted#1](../../../samples/snippets/visualbasic/VS_Snippets_CFX/cfx_wf_gettingstarted/vb/readint.vb#1)]  
  
    > [!NOTE]
    >  Действие `ReadInt` является производным от <xref:System.Activities.NativeActivity%601>, а не от <xref:System.Activities.CodeActivity>, которое задается по умолчанию для шаблона действия кода.<xref:System.Activities.CodeActivity%601> можно использовать, если действие возвращает один результат, который предоставляется с помощью аргумента <xref:System.Activities.Activity%601.Result%2A>. Однако <xref:System.Activities.CodeActivity%601> не поддерживает использование закладок, поэтому используется <xref:System.Activities.NativeActivity%601>.  
  
### Создание действия Prompt  
  
1.  Для сборки проекта нажмите CTRL\+SHIFT\+B.При сборке проекта включается действие `ReadInt`, которое будет использоваться для построения пользовательского действия, начиная с этого шага.  
  
2.  Выберите в меню **Проект** команду **Добавить новый элемент**.  
  
3.  В узле **Установленные**, **Общие элементы** выберите **Рабочий процесс**.Выберите **Действие** в списке **Рабочий процесс**.  
  
4.  В поле **Имя** введите `Prompt` и нажмите кнопку **Добавить**.  
  
5.  Дважды щелкните **Prompt.xaml** в окне **Обозреватель решений**, чтобы отобразить его в конструкторе \(если он еще не отображен\).  
  
6.  Нажмите кнопку **Аргументы** в нижнем левом углу конструктора действий, чтобы отобразить область **Аргументы**.  
  
7.  Нажмите кнопку **Создать аргумент**.  
  
8.  В поле **Имя** введите `BookmarkName`, выберите **Входной** в раскрывающемся списке **Направление**, выберите **String** в раскрывающемся списке **Тип аргумента**, а затем нажмите клавишу ВВОД, чтобы сохранить аргумент.  
  
9. Нажмите кнопку **Создать аргумент**.  
  
10. Введите `Result` в поле **Имя** под только что добавленным аргументом `BookmarkName`, выберите **Выходной** в раскрывающемся списке **Направление**, выберите **Int32** в раскрывающемся списке **Тип аргумента**, а затем нажмите клавишу ВВОД.  
  
11. Нажмите кнопку **Создать аргумент**.  
  
12. Введите `Text` в поле **Имя**, выберите **Входной** в раскрывающемся списке **Направление**, выберите **String** в раскрывающемся списке **Тип аргумента** и нажмите клавишу ВВОД для сохранения аргумента.  
  
     Эти три аргумента связаны с соответствующими аргументами действий <xref:System.Activities.Statements.WriteLine> и `ReadInt`, которые добавляются к действию `Prompt` на следующих этапах.  
  
13. Нажмите кнопку **Аргументы** в левом нижнем углу конструктора действий, чтобы закрыть область **Аргументы**.  
  
14. Перетащите действие **Sequence** из раздела **Поток управленияобласти элементов** на метку **Перетащите сюда действие** конструктора действий **Запрос**.  
  
    > [!TIP]
    >  Если окно **Область элементов** не отображается, в меню **Вид** выберите пункт **Область элементов**.  
  
15. Перетащите действие **WriteLine** из раздела **Примитивыобласти элементов** на метку **Перетащите сюда действие** действия **Последовательность**.  
  
16. Выполните привязку аргумента **Text** действия **WriteLine** к аргументу **Text** действия **Prompt**, введя `Text` в поле **Введите выражение С\#** или **Введите выражение VB** в окне **Свойства**, а затем дважды нажмите клавишу TAB.При этом окно элементов списка технологии IntelliSense закрывается, а значение свойства сохраняется посредством перемещения выбора вне свойства.Это свойство также можно настроить, введя `Text` в поле **Введите выражение C\#** или **Введите выражение VB** в самом действии.  
  
    > [!TIP]
    >  Если окно **Свойства** не отображается, выберите пункт **Окно свойств** в меню **Вид**.  
  
17. Перетащите действие **ReadInt** из раздела **NumberGuessWorkflowActivitiesобласти элементов** на действие **Sequence**, чтобы оно было расположено за действием **WriteLine**.  
  
18. Выполните привязку аргумента **BookmarkName** действия **ReadInt** к аргументу **BookmarkName** действия **Prompt**, введя `BookmarkName` в поле **Введите выражение VB**, которое расположено справа от аргумента **BookmarkName** в окне **Свойства**, а затем дважды нажмите клавишу TAB, чтобы закрыть окно элементов списка IntelliSense и сохранить значение свойства.  
  
19. Выполните привязку аргумента **Result** действия **ReadInt** к аргументу **Result** действия **Prompt**, введя `Result` в поле **Введите выражение VB**, которое расположено справа от аргумента **Result** в окне **Свойства**, а затем дважды нажмите клавишу TAB.  
  
20. Чтобы построить решение, нажмите CTRL\+SHIFT\+B.  
  
     Инструкции по созданию рабочего процесса с помощью этих действий см. в следующем шаге учебника: [Как создать рабочий процесс](../../../docs/framework/windows-workflow-foundation//how-to-create-a-workflow.md).  
  
## См. также  
 <xref:System.Activities.CodeActivity>   
 <xref:System.Activities.NativeActivity%601>   
 [Разработка и реализация настраиваемых действий](../../../docs/framework/windows-workflow-foundation//designing-and-implementing-custom-activities.md)   
 [Учебник по началу работы](../../../docs/framework/windows-workflow-foundation//getting-started-tutorial.md)   
 [Как создать рабочий процесс](../../../docs/framework/windows-workflow-foundation//how-to-create-a-workflow.md)   
 [Использование ExpressionTextBox в пользовательском конструкторе действия](../../../docs/framework/windows-workflow-foundation/samples/using-the-expressiontextbox-in-a-custom-activity-designer.md)