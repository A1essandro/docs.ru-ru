---
title: Как создать действие
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: c09b1e99-21b5-4d96-9c04-ec31db3f4436
ms.openlocfilehash: deb1b6ca5c6fc996a015e32dd5e0c7b9bd6530fa
ms.sourcegitcommit: 3ab9254890a52a50762995fa6d7d77a00348db7e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/20/2018
ms.locfileid: "46472341"
---
# <a name="how-to-create-an-activity"></a>Как создать действие
Действия являются базовой единицей режима работы в [!INCLUDE[wf1](../../../includes/wf1-md.md)]. Логика выполнения действия может быть реализована в управляемом коде или с помощью других действий. В этом разделе показано создание двух действий. Первое действие - простое действие с использованием кода для реализации логики выполнения. Реализация второго действия определяется с помощью других действий. Эти действия используются в следующих шагах учебника.  
  
> [!NOTE]
>  Чтобы скачать завершенную версию учебника, см. в разделе [Windows Workflow Foundation (WF45) - Приступая к работе](https://go.microsoft.com/fwlink/?LinkID=248976).  
  
### <a name="to-create-the-activity-library-project"></a>Создание проекта библиотеки действия  
  
1.  Откройте [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)] и выберите **New**, **проекта** из **файл** меню.  
  
2.  Разверните **другие типы проектов** узел в **установленные**, **шаблоны** перечисления и выбора **решения Visual Studio**.  
  
3.  Выберите **пустое решение** из **решения Visual Studio** списка. Убедитесь, что в раскрывающемся списке версий .NET Framework выбран пункт **.NET Framework 4.5** . Тип `WF45GettingStartedTutorial` в **имя** поле и нажмите кнопку **ОК**.  
  
4.  Щелкните правой кнопкой мыши **WF45GettingStartedTutorial** в **обозревателе решений** и выберите **добавить**, **новый проект**.  
  
    > [!TIP]
    >  Если окно **Обозреватель решений** не отображается, в меню **Вид** выберите пункт **Обозреватель решений** .  
  
5.  В узле **Установленные** выберите пункты **Visual C#** и **Рабочий процесс** (или **Visual Basic**и **Рабочий процесс**). Убедитесь, что **.NET Framework 4.5** выбран в [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] версии стрелку раскрывающегося списка. Выберите **библиотеки действий** из **рабочего процесса** списка. Тип `NumberGuessWorkflowActivities` в **имя** поле и нажмите кнопку **ОК**.  
  
    > [!NOTE]
    >  В зависимости от того, какой язык программирования задан как основной в Visual Studio, узел **Visual C#** или **Visual Basic** может находиться в разделе **Другие языки** узла **Установленные** .  
  
6.  Щелкните правой кнопкой мыши **Activity1.xaml** в **обозревателе решений** и выберите **удалить**. Нажмите кнопку **ОК** для подтверждения.  
  
### <a name="to-create-the-readint-activity"></a>Создание действия ReadInt  
  
1.  Выберите **Добавление нового элемента** из **проекта** меню.  
  
2.  В **установленные**, **общих элементов** выберите **рабочего процесса**. Выберите **действие кода** из **рабочего процесса** списка.  
  
3.  Тип `ReadInt` в **имя** поле и нажмите кнопку **добавить**.  
  
4.  Замените существующее определение `ReadInt` следующим определением.  
  
     [!code-csharp[CFX_WF_GettingStarted#1](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_wf_gettingstarted/cs/readint.cs#1)]
     [!code-vb[CFX_WF_GettingStarted#1](../../../samples/snippets/visualbasic/VS_Snippets_CFX/cfx_wf_gettingstarted/vb/readint.vb#1)]  
  
    > [!NOTE]
    >  Действие `ReadInt` является производным от <xref:System.Activities.NativeActivity%601>, а не от <xref:System.Activities.CodeActivity>, которое задается по умолчанию для шаблона действия кода. <xref:System.Activities.CodeActivity%601> можно использовать, если действие возвращает один результат, который предоставляется с помощью аргумента <xref:System.Activities.Activity%601.Result%2A>. Однако <xref:System.Activities.CodeActivity%601> не поддерживает использование закладок, поэтому используется <xref:System.Activities.NativeActivity%601>.  
  
### <a name="to-create-the-prompt-activity"></a>Создание действия Prompt  
  
1.  Для сборки проекта нажмите CTRL+SHIFT+B. При сборке проекта включается действие `ReadInt`, которое будет использоваться для построения пользовательского действия, начиная с этого шага.  
  
2.  Выберите **Добавление нового элемента** из **проекта** меню.  
  
3.  В **установленные**, **общих элементов** выберите **рабочего процесса**. Выберите **действия** из **рабочего процесса** списка.  
  
4.  Тип `Prompt` в **имя** поле и нажмите кнопку **добавить**.  
  
5.  Дважды щелкните **Prompt.xaml** в **обозревателе решений** чтобы отобразить его в конструкторе, если он еще не отображается.  
  
6.  Нажмите кнопку **аргументы** в нижнем левом углу конструктора действий для отображения **аргументы** области.  
  
7.  Нажмите кнопку **создать аргумент**.  
  
8.  Тип `BookmarkName` в **имя** выберите **в** из **направление** стрелку раскрывающегося списка выберите **строка** из **Тип аргумента** стрелку раскрывающегося списка и нажмите клавишу ВВОД, чтобы сохранить аргумент.  
  
9. Нажмите кнопку **создать аргумент**.  
  
10. Тип `Result` в **имя** окно, в котором находится под только что добавленного `BookmarkName` аргумента выберите **Out** из **направление** раскрывающемся списке выберите **Int32** из **тип аргумента** стрелку раскрывающегося списка и нажмите клавишу ВВОД.  
  
11. Нажмите кнопку **создать аргумент**.  
  
12. Тип `Text` в **имя** выберите **в** из **направление** стрелку раскрывающегося списка выберите **строка** из **Тип аргумента** стрелку раскрывающегося списка и нажмите клавишу ВВОД, чтобы сохранить аргумент.  
  
     Эти три аргумента связаны с соответствующими аргументами действий <xref:System.Activities.Statements.WriteLine> и `ReadInt`, которые добавляются к действию `Prompt` на следующих этапах.  
  
13. Нажмите кнопку **аргументы** в нижнем левом углу конструктора действий, чтобы закрыть **аргументы** области.  
  
14. Перетащите **последовательности** действия из **поток управления** раздел **элементов** и сбросьте его в **Перетащите сюда действие** метку **Prompt** конструктора действий.  
  
    > [!TIP]
    >  Если **элементов** окно не отображается, выберите **элементов** из **представление** меню.  
  
15. Перетащите **WriteLine** действия из **примитивы** раздел **элементов** и сбросьте его в **Перетащите сюда действие** метку **Последовательности** действия.  
  
16. Привязать **текст** аргумент **WriteLine** действие **текст** аргумент **Prompt** действия, введя `Text` в **введите выражение C#** или **введите выражение VB** поле **свойства** окна и затем нажмите клавишу TAB ключа два раза. При этом окно элементов списка технологии IntelliSense закрывается, а значение свойства сохраняется посредством перемещения выбора вне свойства. Это свойство также можно задать, введя `Text` в **введите выражение C#** или **введите выражение VB** поле в самом действии.  
  
    > [!TIP]
    >  Если **окно "Свойства"** не отображается, выберите **окно "Свойства"** из **представление** меню.  
  
17. Перетащите **ReadInt** действия из **NumberGuessWorkflowActivities** раздел **элементов** и поместите его **последовательности** действия, чтобы оно следовало **WriteLine** действия.  
  
18. Привязать **BookmarkName** аргумент **ReadInt** действие **BookmarkName** аргумент **Prompt** действия, введя `BookmarkName` в **введите выражение VB** поле справа от **BookmarkName** аргумента в **окно "Свойства"** и нажмите клавишу TAB двух время, чтобы закрыть окно элементов списка IntelliSense и сохранить свойства.  
  
19. Привязать **результат** аргумент **ReadInt** действие **результат** аргумент **Prompt** действия, введя `Result` в **введите выражение VB** поле справа от **результат** аргумента в **окно "Свойства"** и два раза нажать клавишу TAB.  
  
20. Чтобы построить решение, нажмите CTRL+SHIFT+B.  
  
     Инструкции по созданию рабочего процесса с помощью этих действий см. Далее в этом руководстве, [как: Создание рабочего процесса](../../../docs/framework/windows-workflow-foundation/how-to-create-a-workflow.md).  
  
## <a name="see-also"></a>См. также  
 <xref:System.Activities.CodeActivity>  
 <xref:System.Activities.NativeActivity%601>  
 [Разработка и реализация настраиваемых действий](../../../docs/framework/windows-workflow-foundation/designing-and-implementing-custom-activities.md)  
 [Руководство по началу работы](../../../docs/framework/windows-workflow-foundation/getting-started-tutorial.md)  
 [Практическое руководство. Создание рабочего процесса](../../../docs/framework/windows-workflow-foundation/how-to-create-a-workflow.md)  
 [Использование ExpressionTextBox в пользовательском конструкторе действия](../../../docs/framework/windows-workflow-foundation/samples/using-the-expressiontextbox-in-a-custom-activity-designer.md)
