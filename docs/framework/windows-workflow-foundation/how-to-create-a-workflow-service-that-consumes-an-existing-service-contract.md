---
title: "Как создать службу рабочего процесса, которая использует существующий контракт службы | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework"
ms.reviewer: ""
ms.suite: ""
ms.tgt_pltfrm: ""
ms.topic: "article"
ms.assetid: 11d11b59-acc4-48bf-8e4b-e97b516aa0a9
caps.latest.revision: 5
author: "Erikre"
ms.author: "erikre"
manager: "erikre"
caps.handback.revision: 5
---
# Как создать службу рабочего процесса, которая использует существующий контракт службы
[!INCLUDE[net_v45](../../../includes/net-v45-md.md)] отличается улучшенной интеграцией между веб\-службами и рабочими процессами в форме разработки рабочего процесса на основе контракта.Средство разработки рабочих процессов на основе контракта позволяет создать контракт в Code First.Затем это средство автоматически создает в области элементов шаблон действия для каждой операции в контракте.  
  
> [!NOTE]
>  Этот раздел содержит пошаговые инструкции по созданию службы рабочих процессов на основе контракта.[!INCLUDE[crabout](../../../includes/crabout-md.md)] разработке службы рабочих процессов на основе контракта см. [Разработка службы рабочих процессов на основе контракта](../../../docs/framework/windows-workflow-foundation//contract-first-workflow-service-development.md).  
  
### Создание проекта рабочего процесса  
  
1.  В [!INCLUDE[vs_current_short](../../../includes/vs-current-short-md.md)] выберите **Файл**, **Создать проект**.Выберите узел **WCF** в узле **На языке C\#** в дереве **Шаблоны** и выберите шаблон **Приложение службы рабочего процесса WCF**.  
  
2.  Задайте имя проекта `ContractFirst` и нажмите кнопку **ОК**.  
  
### Создание контракта службы  
  
1.  В **обозревателе решений** щелкните правой кнопкой мыши проект и выберите команду **Добавить**, **Новый элемент…**Выберите слева узел **Код**, а справа шаблон **Класс**.Задайте для нового класса имя `IBookService` и нажмите кнопку **ОК**.  
  
2.  В верхней части появившегося окна кода добавьте в `System.Servicemodel` инструкцию Using.  
  
    ```  
    using System.ServiceModel;  
    ```  
  
3.  Измените образец определения класса на следующее определение интерфейса.  
  
    ```  
    [ServiceContract]  
        public interface IBookService  
        {  
            [OperationContract]  
            void Buy(string bookName);  
  
            [OperationContract(IsOneWay=true)]  
            void Checkout();  
        }  
    ```  
  
4.  Постройте проект, нажав клавиши **CTRL\+SHIFT\+B**.  
  
### Импорт контракта службы  
  
1.  Щелкните правой кнопкой мыши проект в **обозревателе решений** и выберите **Импорт контракта службы**.В разделе **\<Текущий проект\>** откройте все дочерние узлы и выберите **IBookService**.Нажмите кнопку **ОК**.  
  
2.  Откроется диалоговое окно с сообщением, что операция была завершена успешно, а созданные действия появятся в области элементов после сборки проекта.Нажмите кнопку **ОК**.  
  
3.  Постройте проект, нажав сочетание клавиш **CTRL\+SHIFT\+B**, чтобы импортированные действия отобразились в области элементов.  
  
4.  В **обозревателе решений** откройте файл Service1.xamlx.Служба рабочего процесса появится в конструкторе.  
  
5.  Выберите действие **Последовательность**.В окне «Свойства» нажмите кнопку с многоточием **…** рядом со свойством **ImplementedContract**.В появившемся окне **Редактор коллекций типов** щелкните раскрывающийся список **Тип** и выберите пункт **Обзор типов…**В диалоговом окне **Обзор и выбор типа .NET** в разделе **\<Текущий проект\>** откройте все дочерние узлы и выберите **IBookService**.Нажмите кнопку **ОК**.В диалоговом окне **Редактор коллекции типов** нажмите кнопку **ОК**.  
  
6.  Выберите и удалите действия **ReceiveRequest** и **SendResponse**.  
  
7.  Из области элементов перетащите действия **Buy\_ReceiveAndSendReply** и **Checkout\_Receive** на действие **Последовательная служба**.