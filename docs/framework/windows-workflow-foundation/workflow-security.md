---
title: "Безопасность рабочих процессов | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework"
ms.reviewer: ""
ms.suite: ""
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "программирование [WF], безопасность рабочих процессов"
ms.assetid: d712a566-f435-44c0-b8c0-49298e84b114
caps.latest.revision: 13
author: "Erikre"
ms.author: "erikre"
manager: "erikre"
caps.handback.revision: 13
---
# Безопасность рабочих процессов
[!INCLUDE[wf](../../../includes/wf-md.md)] объединяется с несколькими разными технологиями, например Microsoft SQL Server и [!INCLUDE[indigo1](../../../includes/indigo1-md.md)].  В случае неправильной настройки взаимодействие с этими технологиями может вызвать проблемы безопасности в рабочем процессе.  
  
## Вопросы безопасности сохраняемости  
  
1.  Рабочие процессы, которые используют действия <xref:System.Activities.Statements.Delay> и сохраняемость, должны повторно активироваться службой.  Windows AppFabric использует службу Workflow Management Service \(WMS\) для повторной активации рабочих процессов с истекшими таймерами.  WMS создает объект <xref:System.ServiceModel.WorkflowServiceHost> для размещения повторно активированного рабочего процесса.  Если служба WMS остановлена, сохраненные рабочие процессы не будут активироваться повторно при истечении их таймеров.  
  
2.  Доступ к устойчивым экземплярам должен быть защищен от вредоносных сущностей, внешних относительно домена приложения.  Кроме того, разработчики должны гарантировать, что вредоносный код будет невозможно выполнить в том же домене приложения, что и код устойчивого экземпляра.  
  
3.  Устойчивый экземпляр не должен выполняться с разрешениями более высокого уровня \(администратора\).  
  
4.  Данные, обрабатываемые за пределами домена приложения, должны быть защищены.  
  
5.  Приложения, требующие изоляции безопасности, не должны использовать совместно один и тот же экземпляр абстракции схемы.  Такие приложения должны использовать различные поставщики хранилищ или поставщики хранилищ, настроенные на создание разных экземпляров хранилищ.  
  
## Вопросы безопасности SQL Server  
  
-   Если используется большое количество дочерних действий, расположений, закладок, расширений узла и областей или используются закладки с очень большим объемом полезных нагрузок, может быть исчерпана память или во время сохранения будет выделен чрезмерно большой объем пространства базы данных.  Избежать этого можно с помощью мер безопасности на уровне объекта и на уровне базы данных.  
  
-   Если используется <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>, хранилище экземпляров должно быть защищено.  [!INCLUDE[crdefault](../../../includes/crdefault-md.md)][Рекомендации по SQL Server](http://go.microsoft.com/fwlink/?LinkId=164972).  
  
-   Конфиденциальные данные в хранилище экземпляров должны быть зашифрованы.  [!INCLUDE[crdefault](../../../includes/crdefault-md.md)][Шифрование SQL](http://go.microsoft.com/fwlink/?LinkId=164976).  
  
-   Так как строка подключения базы данных часто содержится в файле конфигурации, следует использовать безопасность уровня Windows \(ACL\) для обеспечения защиты файла конфигурации \(обычно это Web.Config\), а также для того, чтобы гарантировать, что сведения об имени входа и пароле не содержатся в строке подключения.  В качестве альтернативы между базой данных и веб\-сервером можно использовать аутентификацию Windows.  
  
## Рекомендации по WorkflowServiceHost  
  
-   Конечные точки [!INCLUDE[indigo1](../../../includes/indigo1-md.md)], используемые в рабочих процессах, должны быть защищены.  [!INCLUDE[crdefault](../../../includes/crdefault-md.md)][Общие сведения о безопасности WCF](http://go.microsoft.com/fwlink/?LinkID=164975).  
  
-   Авторизацию на уровне узлов можно реализовать с помощью <xref:System.ServiceModel.ServiceAuthorizationManager>.  Дополнительные сведения см. в разделе [Создание настраиваемого диспетчера авторизации для службы](http://go.microsoft.com/fwlink/?LinkId=192228).  Это также показано в следующем образце: [Защита служб рабочего процесса](../../../docs/framework/windows-workflow-foundation/samples/securing-workflow-services.md).  
  
-   Кроме того, контекст ServiceSecurityContext для входящего сообщения доступен из рабочего процесса посредством доступа к OperationContext.  Дополнительные сведения см. в разделе [Доступ к OperationContext из службы рабочего процесса](../../../docs/framework/wcf/feature-details/accessing-operationcontext-from-a-workflow-service.md).  
  
## Пакет безопасности WF CTP  
 Пакет безопасности Microsoft WF CTP 1 — это первый выпуск CTP\-версии набора действий и их реализаций, основанного на [Windows Workflow Foundation](http://msdn.microsoft.com/netframework/aa663328.aspx) в [.NET Framework 4](http://msdn.microsoft.com/netframework/default.aspx) \(WF 4\) и [Windows Identity Foundation \(WIF\)](http://msdn.microsoft.com/security/aa570351.aspx).  Пакет безопасности Microsoft WF CTP 1 содержит действия и их конструкторы, которые демонстрируют простое включение различных сценариев обеспечения безопасности с помощью рабочих процессов, в том числе следующие:  
  
1.  Олицетворение удостоверения клиента в рабочем процессе  
  
2.  Авторизация в рабочих процессах, например PrincipalPermission и проверка утверждений  
  
3.  Обмен сообщениями с использованием проверки подлинности \(с применением определенных в рабочем процессе ClientCredentials\), например с использованием имени пользователя и пароля или токена, полученного от службы токенов безопасности \(STS\)  
  
4.  Сквозная передача токена безопасности клиента внутренней службе \(делегирование на основе утверждений\) с помощью WS\-Trust ActAs  
  
 Получить дополнительные сведения и скачать пакет безопасности CTP WF можно на странице [Пакет безопасности WF CTP](http://wf.codeplex.com/releases/view/48114)