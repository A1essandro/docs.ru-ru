---
title: "Как создать службу данных с использованием источника данных ADO.NET Entity Framework (службы WCF Data Services) | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework-oob"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "Службы WCF Data Services, Entity Framework"
  - "Службы WCF Data Services, поставщики"
ms.assetid: 6d11fec8-0108-42f5-8719-2a7866d04428
caps.latest.revision: 4
author: "Erikre"
ms.author: "erikre"
manager: "erikre"
caps.handback.revision: 4
---
# Как создать службу данных с использованием источника данных ADO.NET Entity Framework (службы WCF Data Services)
[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] предоставляет данные сущности в виде службы данных.  Эти данные сущностей предоставляются [!INCLUDE[vstecado](../../../../includes/vstecado-md.md)] [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)], если источником данных является реляционная база данных.  В этом разделе будет показано создание модели данных на базе [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] в веб\-приложении [!INCLUDE[vs_current_short](../../../../includes/vs-current-short-md.md)], основанном на существующей базе данных, а также создание новой службы данных с помощью этой модели.  
  
 Кроме того, в составе [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] предусмотрена программа командной строки, которая может создавать модель [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] за пределами проекта [!INCLUDE[vs_current_short](../../../../includes/vs-current-short-md.md)].  Для получения дополнительной информации см. [Как использовать средство EdmGen.exe для создания файлов модели и сопоставления](../../../../docs/framework/data/adonet/ef/how-to-use-edmgen-exe-to-generate-the-model-and-mapping-files.md).  
  
### Добавление модели Entity Framework на основе существующей базы данных в существующее веб\-приложение  
  
1.  В меню **Проект** выберите пункт **Добавить новый элемент**.  
  
2.  Щелкните в области **Шаблоны** категорию **Данные** и выберите **Модель ADO.NET EDM**.  
  
3.  Введите имя модели и нажмите кнопку **Добавить**.  
  
     Отображается первая страница мастера [!INCLUDE[adonet_edm](../../../../includes/adonet-edm-md.md)].  
  
4.  В диалоговом окне **Выбор содержимого модели** выберите параметр **Создать из базы данных**.  Затем нажмите кнопку **Далее**.  
  
5.  Нажмите кнопку **Создать соединение**.  
  
6.  В диалоговом окне **Свойства соединения** введите имя сервера, выберите метод проверки подлинности, введите имя базы данных и нажмите кнопку **ОК**.  
  
     В диалоговом окне **Выбор подключения к данным** отображаются выбранные параметры подключения к базе данных.  
  
7.  Проверьте, что установлен флажок **Сохранить параметры подключения сущности в App.Config как:**.  Затем нажмите кнопку **Далее**.  
  
8.  В диалоговом окне **Выбор объектов базы данных** выберите все объекты базы данных, которые планируется предоставлять в службе данных.  
  
    > [!NOTE]
    >  Объекты, включенные в модель данных, не предоставляются службой данных автоматически.  Они должны явно предоставляться самой службой.  Для получения дополнительной информации см. [Настройка службы данных](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md).  
  
9. Нажмите кнопку **Готово**, чтобы завершить работу с мастером.  
  
     При этом создается модель данных по умолчанию на основе указанной базы данных.  [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] позволяет настроить модель данных.  Для получения дополнительной информации см. [Tasks](http://msdn.microsoft.com/ru-ru/7166f1f1-4de8-4bd4-86b5-5e20a2ebaccb).  
  
### Создание службы данных с использованием новой модели данных  
  
1.  В [!INCLUDE[vs_current_short](../../../../includes/vs-current-short-md.md)] откройте EDMX\-файл, представляющий модель данных.  
  
2.  В **браузере моделей** щелкните модель правой кнопкой мыши, выберите команду **Свойства** и отметьте имя контейнера сущностей.  
  
3.  В **Обозревателе решений** щелкните правой кнопкой мыши имя проекта [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] и выберите **Добавить новый элемент**.  
  
4.  В диалоговом окне **Добавление нового элемента** выберите пункт **Служба данных WCF**.  
  
5.  Введите имя службы и нажмите кнопку **ОК**.  
  
     [!INCLUDE[vs_current_short](../../../../includes/vs-current-short-md.md)] создает метку XML и файлы с кодом для новой службы.  По умолчанию открывается окно редактора кода.  
  
6.  В коде службы данных замените комментарий `/* TODO: put your data source class name here */` в определении класса, задающего службу данных, типом, порожденным от класса <xref:System.Data.Objects.ObjectContext> и являющимся контейнером сущностей модели данных, который был отмечен на шаге 2.  
  
7.  Включите в коде службы данных доступ авторизованных клиентов к наборам сущностей, предоставляемым службой данных.  Для получения дополнительной информации см. [Создание службы данных](../../../../docs/framework/data/wcf/creating-the-data-service.md).  
  
8.  Для проверки службы данных Northwind.svc с помощью веб\-браузера следуйте инструкциям в разделе [Доступ к службе из веб\-браузера](../../../../docs/framework/data/wcf/accessing-the-service-from-a-web-browser-wcf-data-services-quickstart.md).  
  
## См. также  
 [Определение службы WCF Data Services](../../../../docs/framework/data/wcf/defining-wcf-data-services.md)   
 [Поставщики служб данных](../../../../docs/framework/data/wcf/data-services-providers-wcf-data-services.md)   
 [Как создать службу данных с помощью поставщика отражения](../../../../docs/framework/data/wcf/create-a-data-service-using-rp-wcf-data-services.md)   
 [Как создать службу данных с помощью источника данных LINQ to SQL](../../../../docs/framework/data/wcf/create-a-data-service-using-linq-to-sql-wcf.md)