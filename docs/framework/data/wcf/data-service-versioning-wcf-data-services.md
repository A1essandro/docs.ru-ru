---
title: "Управление версиями службы данных (службы WCF Data Services)"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework-oob
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- versioning, WCF Data Services
- versioning [WCF Data Services]
- WCF Data Services, versioning
ms.assetid: e3e899cc-7f25-4f67-958f-063f01f79766
caps.latest.revision: "9"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 73e394c4d0a7f78fca7c8c70f68bfc16da556d8d
ms.sourcegitcommit: c0dd436f6f8f44dc80dc43b07f6841a00b74b23f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/19/2018
---
# <a name="data-service-versioning-wcf-data-services"></a><span data-ttu-id="4a6d5-102">Управление версиями службы данных (службы WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="4a6d5-102">Data Service Versioning (WCF Data Services)</span></span>
<span data-ttu-id="4a6d5-103">[!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] Позволяет создавать службы данных, чтобы клиенты могут обращаться к данным как ресурсам по идентификатору URI, основанные на модели данных.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-103">The [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] enables you to create data services so that clients can access data as resources using URIs that are based on a data model.</span></span> [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]<span data-ttu-id="4a6d5-104"> также поддерживает определение операций службы.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-104"> also supports the definition of service operations.</span></span> <span data-ttu-id="4a6d5-105">После первоначального развертывания служб и, возможно, несколько раз на протяжении времени их существования возникает потребность в изменении этих служб. Причин тому немало: изменяющиеся потребности бизнеса, требования информационных технологий или необходимость решить какие-либо другие проблемы.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-105">After initial deployment, and potentially several times during their lifetime, these data services may need to be changed for a variety of reasons, such as changing business needs, information technology requirements, or to address other issues.</span></span> <span data-ttu-id="4a6d5-106">При внесении изменений в существующую службу данных необходимо принять решение, следует ли определить новую версию службы данных и как оптимальным способом свести к минимуму воздействие на существующие клиентские приложения.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-106">When you make changes to an existing data service, you must consider whether to define a new version of your data service and how best to minimize the impact on existing client applications.</span></span> <span data-ttu-id="4a6d5-107">Этот раздел содержит указания о том, когда и как следует создавать новую версию службы данных.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-107">This topic provides guidance on when and how to create a new version of a data service.</span></span> <span data-ttu-id="4a6d5-108">В нем также описывается, как [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] обеспечивает обмен между клиентами и службами данных, которые поддерживают разные версии протокола [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="4a6d5-108">It also describes how [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] handles an exchange between clients and data services that support different versions of the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protocol.</span></span>  
  
## <a name="versioning-a-wcf-data-service"></a><span data-ttu-id="4a6d5-109">Управление версиями службы данных WCF</span><span class="sxs-lookup"><span data-stu-id="4a6d5-109">Versioning a WCF Data Service</span></span>  
 <span data-ttu-id="4a6d5-110">После того как служба данных развернута и данные получены, изменения в службе данных могут стать причиной несовместимости с существующими клиентскими приложениями.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-110">Once a data service is deployed and the data is being consumed, changes to the data service have the potential to cause compatibility issues with existing client applications.</span></span> <span data-ttu-id="4a6d5-111">Но поскольку изменения часто обусловлены общими бизнес-потребностями службы, необходимо решить, когда и как создать новую версию службы данных с минимальным воздействием на клиентские приложения.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-111">However, because changes are often required by the overall business needs of the service, you must consider when and how to create a new version of your data service with the least impact on client applications.</span></span>  
  
### <a name="data-model-changes-that-recommend-a-new-data-service-version"></a><span data-ttu-id="4a6d5-112">Изменения в модели данных, при внесении которых рекомендуется перейти на новую версию службы данных</span><span class="sxs-lookup"><span data-stu-id="4a6d5-112">Data Model Changes that Recommend a New Data Service Version</span></span>  
 <span data-ttu-id="4a6d5-113">При рассмотрении вопроса о необходимости публиковать новую версию службы данных важно понимать, как различные изменения могут повлиять на клиентские приложения.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-113">When considering whether to publish a new version of a data service, it is important to understand how the different kinds of changes may affect client applications.</span></span> <span data-ttu-id="4a6d5-114">Изменения в службе данных, которые могут привести к необходимости создать новую версию службы данных, можно разделить на следующие две категории.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-114">Changes to a data service that might require you to create a new version of a data service can be divided into the following two categories:</span></span>  
  
-   <span data-ttu-id="4a6d5-115">Изменения в контракте службы, которые включают обновления операций службы, изменения в доступности наборов сущностей (каналы), изменения версии и другие изменения поведения службы.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-115">Changes to the service contract—which include updates to service operations, changes to the accessibility of entity sets (feeds), version changes, and other changes to service behaviors.</span></span>  
  
-   <span data-ttu-id="4a6d5-116">Изменения в контракте данных, которые включают изменения в модели данных, форматах каналов или настройках каналов.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-116">Changes to the data contract—which include changes to the data model, feed formats, or feed customizations.</span></span>  
  
 <span data-ttu-id="4a6d5-117">В следующей таблице приведены сведения, для каких видов изменений следует рассмотреть вопрос о публикации новой версии службы данных.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-117">The following table details for which kinds of changes you should consider publishing a new version of the data service:</span></span>  
  
|<span data-ttu-id="4a6d5-118">Тип изменения</span><span class="sxs-lookup"><span data-stu-id="4a6d5-118">Type of Change</span></span>|<span data-ttu-id="4a6d5-119">Требуется новая версия</span><span class="sxs-lookup"><span data-stu-id="4a6d5-119">Requires a new version</span></span>|<span data-ttu-id="4a6d5-120">Новая версия не нужна</span><span class="sxs-lookup"><span data-stu-id="4a6d5-120">New version not needed</span></span>|  
|--------------------|----------------------------|----------------------------|  
|<span data-ttu-id="4a6d5-121">Операции служб</span><span class="sxs-lookup"><span data-stu-id="4a6d5-121">Service operations</span></span>|<span data-ttu-id="4a6d5-122">-Добавьте новый параметр</span><span class="sxs-lookup"><span data-stu-id="4a6d5-122">-   Add new parameter</span></span><br /><span data-ttu-id="4a6d5-123">-Изменение типа возвращаемого значения</span><span class="sxs-lookup"><span data-stu-id="4a6d5-123">-   Change return type</span></span><br /><span data-ttu-id="4a6d5-124">-Удаление операции службы</span><span class="sxs-lookup"><span data-stu-id="4a6d5-124">-   Remove service operation</span></span>|<span data-ttu-id="4a6d5-125">-Удаление существующих параметров</span><span class="sxs-lookup"><span data-stu-id="4a6d5-125">-   Delete existing parameter</span></span><br /><span data-ttu-id="4a6d5-126">-Добавление новой операции службы</span><span class="sxs-lookup"><span data-stu-id="4a6d5-126">-   Add new service operation</span></span>|  
|<span data-ttu-id="4a6d5-127">Поведения служб</span><span class="sxs-lookup"><span data-stu-id="4a6d5-127">Service behaviors</span></span>|<span data-ttu-id="4a6d5-128">-Отключить запросы количества</span><span class="sxs-lookup"><span data-stu-id="4a6d5-128">-   Disable count requests</span></span><br /><span data-ttu-id="4a6d5-129">-Отключение поддержки проекции</span><span class="sxs-lookup"><span data-stu-id="4a6d5-129">-   Disable projection support</span></span><br /><span data-ttu-id="4a6d5-130">-Увеличение необходимой версии службы данных</span><span class="sxs-lookup"><span data-stu-id="4a6d5-130">-   Increase the required data service version</span></span>|<span data-ttu-id="4a6d5-131">-Включение запросов счетчиков</span><span class="sxs-lookup"><span data-stu-id="4a6d5-131">-   Enable count requests</span></span><br /><span data-ttu-id="4a6d5-132">-Включение поддержки проекции</span><span class="sxs-lookup"><span data-stu-id="4a6d5-132">-   Enable projection support</span></span><br /><span data-ttu-id="4a6d5-133">-Уменьшение необходимой версии службы данных</span><span class="sxs-lookup"><span data-stu-id="4a6d5-133">-   Decrease the required data service version</span></span>|  
|<span data-ttu-id="4a6d5-134">Разрешения набора сущностей</span><span class="sxs-lookup"><span data-stu-id="4a6d5-134">Entity set permissions</span></span>|<span data-ttu-id="4a6d5-135">-Ограничение разрешений набора сущностей</span><span class="sxs-lookup"><span data-stu-id="4a6d5-135">-   Restrict entity set permissions</span></span><br /><span data-ttu-id="4a6d5-136">-Изменение кода ответа (новое значение первой цифры) <sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="4a6d5-136">-   Change response code (new first digit value) <sup>1</sup></span></span>|<span data-ttu-id="4a6d5-137">-Смягчение разрешений набора сущностей</span><span class="sxs-lookup"><span data-stu-id="4a6d5-137">-   Relax entity set permissions</span></span><br /><span data-ttu-id="4a6d5-138">-Изменение кода ответа (того же значения первой цифры)</span><span class="sxs-lookup"><span data-stu-id="4a6d5-138">-   Change response code (same first digit value)</span></span>|  
|<span data-ttu-id="4a6d5-139">Свойства сущности</span><span class="sxs-lookup"><span data-stu-id="4a6d5-139">Entity properties</span></span>|<span data-ttu-id="4a6d5-140">-Удаление существующего свойства или отношения</span><span class="sxs-lookup"><span data-stu-id="4a6d5-140">-   Remove existing property or relationship</span></span><br /><span data-ttu-id="4a6d5-141">-Добавить свойство не допускающим</span><span class="sxs-lookup"><span data-stu-id="4a6d5-141">-   Add non-nullable property</span></span><br /><span data-ttu-id="4a6d5-142">-Изменение существующего свойства</span><span class="sxs-lookup"><span data-stu-id="4a6d5-142">-   Change existing property</span></span>|<span data-ttu-id="4a6d5-143">-Добавьте свойство необязательной определенности<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="4a6d5-143">-   Add nullable property<sup>2</sup></span></span>|  
|<span data-ttu-id="4a6d5-144">Наборы сущностей</span><span class="sxs-lookup"><span data-stu-id="4a6d5-144">Entity sets</span></span>|<span data-ttu-id="4a6d5-145">-Удаление набора сущностей</span><span class="sxs-lookup"><span data-stu-id="4a6d5-145">-   Remove entity set</span></span>|<span data-ttu-id="4a6d5-146">-Добавление производного типа</span><span class="sxs-lookup"><span data-stu-id="4a6d5-146">-   Add derived type</span></span><br /><span data-ttu-id="4a6d5-147">-Изменение базового типа</span><span class="sxs-lookup"><span data-stu-id="4a6d5-147">-   Change base type</span></span><br /><span data-ttu-id="4a6d5-148">-Добавление набора сущностей</span><span class="sxs-lookup"><span data-stu-id="4a6d5-148">-   Add entity set</span></span>|  
|<span data-ttu-id="4a6d5-149">Настройка канала</span><span class="sxs-lookup"><span data-stu-id="4a6d5-149">Feed customization</span></span>|<span data-ttu-id="4a6d5-150">-Измените сопоставление свойств сущности</span><span class="sxs-lookup"><span data-stu-id="4a6d5-150">-   Change entity-property mapping</span></span>||  
  
 <span data-ttu-id="4a6d5-151"><sup>1</sup> это может зависеть от строгости обработки клиентского приложения при получении кода ошибки.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-151"><sup>1</sup> This may depend on how strictly a client application relies on receiving a specific error code.</span></span>  
  
 <span data-ttu-id="4a6d5-152"><sup>2</sup> можно задать <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> свойства `true` чтобы клиент игнорировал любые новые свойства отправленных службой данных, не определенные на клиенте.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-152"><sup>2</sup> You can set the <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> property to `true` to have the client ignore any new properties sent by the data service that are not defined on the client.</span></span> <span data-ttu-id="4a6d5-153">Однако при выполнении вставок свойства, не включенным клиентом в запрос POST, устанавливаются в значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-153">However, when inserts are made, the properties not included by the client in the POST request are set to their default values.</span></span> <span data-ttu-id="4a6d5-154">Для обновлений все данные, существующие в неизвестном клиенту свойстве, могут быть перезаписаны значениями по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-154">For updates, any existing data in a property unknown to the client might be overwritten with default values.</span></span> <span data-ttu-id="4a6d5-155">В этом случае необходимо отправлять обновление как запрос MERGE, который используется по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-155">In this case, you should send the update as a MERGE request, which is the default.</span></span> <span data-ttu-id="4a6d5-156">Дополнительные сведения см. в разделе [управление контекстом службы данных](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="4a6d5-156">For more information, see [Managing the Data Service Context](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span></span>  
  
### <a name="how-to-version-a-data-service"></a><span data-ttu-id="4a6d5-157">Управление версиями службы данных</span><span class="sxs-lookup"><span data-stu-id="4a6d5-157">How to Version a Data Service</span></span>  
 <span data-ttu-id="4a6d5-158">При необходимости новая версия службы данных определяется путем создания нового экземпляра службы с обновленным контрактом службы или моделью данных.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-158">When required, a new data service version is defined by creating a new instance of the service with an updated service contract or data model.</span></span> <span data-ttu-id="4a6d5-159">Затем новая служба предоставляется с использованием новой конечной точки URI, в чем заключается отличие от предыдущей версии.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-159">This new service is then exposed by using a new URI endpoint, which differentiates it from the previous version.</span></span> <span data-ttu-id="4a6d5-160">Например:</span><span class="sxs-lookup"><span data-stu-id="4a6d5-160">For example:</span></span>  
  
-   <span data-ttu-id="4a6d5-161">Старая версия: `http://services.odata.org/Northwind/v1/Northwind.svc/`</span><span class="sxs-lookup"><span data-stu-id="4a6d5-161">Old version: `http://services.odata.org/Northwind/v1/Northwind.svc/`</span></span>  
  
-   <span data-ttu-id="4a6d5-162">Новая версия: `http://services.odata.org/Northwind/v2/Northwind.svc/`</span><span class="sxs-lookup"><span data-stu-id="4a6d5-162">New version: `http://services.odata.org/Northwind/v2/Northwind.svc/`</span></span>  
  
 <span data-ttu-id="4a6d5-163">При обновлении службы данных необходимо также обновить клиенты на основе новых метаданных службы данных и использовать новый корневой URI.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-163">When upgrading a data service, clients will need to also be updated based on the new data service metadata and to use the new root URI.</span></span> <span data-ttu-id="4a6d5-164">Если возможно, следует сохранить предыдущую версию службы данных для поддержки клиентов, которые еще не обновлены для работы с новой версией.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-164">When possible, you should maintain the previous version of the data service to support clients that have not yet been upgraded to use the new version.</span></span> <span data-ttu-id="4a6d5-165">Более старые версии службы данных можно удалить, если они больше не нужны.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-165">Older versions of a data service can be removed when they are no longer needed.</span></span> <span data-ttu-id="4a6d5-166">Необходимо рассмотреть вопрос о сохранении конечной точки URI службы данных во внешнем файле конфигурации.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-166">You should consider maintaining the data service endpoint URI in an external configuration file.</span></span>  
  
## <a name="odata-protocol-versions"></a><span data-ttu-id="4a6d5-167">Версии протокола OData</span><span class="sxs-lookup"><span data-stu-id="4a6d5-167">OData Protocol Versions</span></span>  
 <span data-ttu-id="4a6d5-168">Как новые версии [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] , выпуска, клиентские приложения возможно, не использует ту же версию [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] протокол, поддерживаемый службой данных.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-168">As new versions of [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] are released, client applications may not be using the same version of the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protocol that is supported by the data service.</span></span> <span data-ttu-id="4a6d5-169">Старое клиентское приложение может получить доступ к службе данных, поддерживающей новую версию [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="4a6d5-169">An older client application may access a data service that supports a newer version of [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)].</span></span> <span data-ttu-id="4a6d5-170">Клиентское приложение также могут использовать более новую версию [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] клиентской библиотеки, которая поддерживает более новой версии [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] , чем служба данных, к которому имеет доступ.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-170">A client application may also be using a newer version of the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library, which supports a newer version of [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] than does the data service that is being accessed.</span></span>  
  
 [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]<span data-ttu-id="4a6d5-171">использует поддержки, обеспечиваемой [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] для обработки таких сценариев управления версиями.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-171"> leverages the support provided by [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] to handle such versioning scenarios.</span></span> <span data-ttu-id="4a6d5-172">Имеется также поддержка создания и использования метаданных модели данных для создания классов службы данных клиента, когда клиент использует другую версию [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] чем служба данных использует.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-172">There is also support for generating and using data model metadata to create client data service classes when the client uses a different version of [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] than the data service uses.</span></span> <span data-ttu-id="4a6d5-173">Дополнительные сведения см. в разделе [OData: управление версиями протокола](http://go.microsoft.com/fwlink/?LinkId=186071).</span><span class="sxs-lookup"><span data-stu-id="4a6d5-173">For more information, see [OData: Protocol Versioning](http://go.microsoft.com/fwlink/?LinkId=186071).</span></span>  
  
### <a name="version-negotiation"></a><span data-ttu-id="4a6d5-174">Согласование версий</span><span class="sxs-lookup"><span data-stu-id="4a6d5-174">Version Negotiation</span></span>  
 <span data-ttu-id="4a6d5-175">Служба данных может быть настроена для определения самую новую версию [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] протокол, который будет использоваться службой, независимо от версии, запрашиваемый клиентом.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-175">The data service can be configured to define the highest version of the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protocol that will be used by the service, regardless of the version requested by the client.</span></span> <span data-ttu-id="4a6d5-176">Это можно сделать, указав <xref:System.Data.Services.Common.DataServiceProtocolVersion> значение для <xref:System.Data.Services.DataServiceBehavior.MaxProtocolVersion%2A> свойство <xref:System.Data.Services.DataServiceBehavior> используется службой данных.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-176">You can do this by specifying a <xref:System.Data.Services.Common.DataServiceProtocolVersion> value for the <xref:System.Data.Services.DataServiceBehavior.MaxProtocolVersion%2A> property of the <xref:System.Data.Services.DataServiceBehavior> used by the data service.</span></span> <span data-ttu-id="4a6d5-177">Дополнительные сведения см. в разделе [Настройка службы данных](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="4a6d5-177">For more information, see [Configuring the Data Service](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="4a6d5-178">Если приложение использует клиентские библиотеки служб [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] для доступа к службе данных, библиотеки автоматически устанавливают правильные значения для этих заголовков, в зависимости от версии служб [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] и компонентов, используемых в приложении.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-178">When an application uses the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client libraries to access a data service, the libraries automatically set these headers to the correct values, depending on the version of [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] and the features that are used in your application.</span></span> <span data-ttu-id="4a6d5-179">По умолчанию [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] использует самую раннюю версию протокола, который поддерживает запрошенную операцию.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-179">By default, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] uses the lowest protocol version that supports the requested operation.</span></span>  
  
 <span data-ttu-id="4a6d5-180">В следующей таблице описаны версии [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] и [!INCLUDE[silverlight](../../../../includes/silverlight-md.md)], которые включают в себя поддержку [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] для определенных версий протокола [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="4a6d5-180">The following table details the versions of [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] and [!INCLUDE[silverlight](../../../../includes/silverlight-md.md)] that include [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] support for specific versions of the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protocol.</span></span>  
  
|<span data-ttu-id="4a6d5-181">Версия протокола [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]</span><span class="sxs-lookup"><span data-stu-id="4a6d5-181">[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] Protocol Version</span></span>|<span data-ttu-id="4a6d5-182">Поддержка введена в...</span><span class="sxs-lookup"><span data-stu-id="4a6d5-182">Support introduced in…</span></span>|  
|-----------------------------------------------------------------------------------|----------------------------|  
|<span data-ttu-id="4a6d5-183">Версия 1</span><span class="sxs-lookup"><span data-stu-id="4a6d5-183">Version 1</span></span>|<span data-ttu-id="4a6d5-184">-   [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)]Пакет обновления 1 (SP1)</span><span class="sxs-lookup"><span data-stu-id="4a6d5-184">-   [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] Service Pack 1 (SP1)</span></span><br /><span data-ttu-id="4a6d5-185">-   [!INCLUDE[silverlight](../../../../includes/silverlight-md.md)]версия 3</span><span class="sxs-lookup"><span data-stu-id="4a6d5-185">-   [!INCLUDE[silverlight](../../../../includes/silverlight-md.md)] version 3</span></span>|  
|<span data-ttu-id="4a6d5-186">Версия 2</span><span class="sxs-lookup"><span data-stu-id="4a6d5-186">Version 2</span></span>|-   [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)]<br /><span data-ttu-id="4a6d5-187">-Обновление [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] SP1.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-187">-   An update to [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] SP1.</span></span> <span data-ttu-id="4a6d5-188">Можно загрузить и установить это обновление [центра загрузки Майкрософт](http://go.microsoft.com/fwlink/?LinkId=158125).</span><span class="sxs-lookup"><span data-stu-id="4a6d5-188">You can download and install the update from the [Microsoft Download Center](http://go.microsoft.com/fwlink/?LinkId=158125).</span></span><br /><span data-ttu-id="4a6d5-189">-   [!INCLUDE[silverlight](../../../../includes/silverlight-md.md)]версии 4</span><span class="sxs-lookup"><span data-stu-id="4a6d5-189">-   [!INCLUDE[silverlight](../../../../includes/silverlight-md.md)] version 4</span></span>|  
|<span data-ttu-id="4a6d5-190">Версия 3</span><span class="sxs-lookup"><span data-stu-id="4a6d5-190">Version 3</span></span>|<span data-ttu-id="4a6d5-191">— Можно загрузить и установить предварительную версию, которая поддерживает [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] версии 3 из [центра загрузки Майкрософт](http://go.microsoft.com/fwlink/?LinkId=203885).</span><span class="sxs-lookup"><span data-stu-id="4a6d5-191">-   You can download and install a pre-release version that supports [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] version 3 from the [Microsoft Download Center](http://go.microsoft.com/fwlink/?LinkId=203885).</span></span>|  
  
### <a name="metadata-versions"></a><span data-ttu-id="4a6d5-192">Версии метаданных</span><span class="sxs-lookup"><span data-stu-id="4a6d5-192">Metadata Versions</span></span>  
 <span data-ttu-id="4a6d5-193">По умолчанию службы [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] для представления модели данных используют CSDL версии 1.1.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-193">By default, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] uses version 1.1 of CSDL to represent a data model.</span></span> <span data-ttu-id="4a6d5-194">Это всегда справедливо для моделей данных, основанных на поставщике отражения или на специализированном поставщике служб данных.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-194">This is always the case for data models that are based on either a reflection provider or a custom data service provider.</span></span> <span data-ttu-id="4a6d5-195">Но если модель данных определена с помощью платформы [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)], возвращаемая версия CSDL та же, что и версия, используемая платформой [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)].</span><span class="sxs-lookup"><span data-stu-id="4a6d5-195">However, when the data model is defined by using the [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)], the version of CSDL returned is the same as the version that is used by the [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)].</span></span> <span data-ttu-id="4a6d5-196">Версия CSDL определяется пространство имен [элемент схемы](http://msdn.microsoft.com/library/396074d8-f99c-4f50-a073-68bce848224f).</span><span class="sxs-lookup"><span data-stu-id="4a6d5-196">The version of the CSDL is determined by the namespace of the [Schema element](http://msdn.microsoft.com/library/396074d8-f99c-4f50-a073-68bce848224f).</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="4a6d5-197">спецификации [ \[MC-CSDL\]: формат файла определения концептуальной схемы](http://go.microsoft.com/fwlink/?LinkId=159072).</span><span class="sxs-lookup"><span data-stu-id="4a6d5-197"> the specification [\[MC-CSDL\]: Conceptual Schema Definition File Format](http://go.microsoft.com/fwlink/?LinkId=159072).</span></span>  
  
 <span data-ttu-id="4a6d5-198">Элемент `DataServices` возвращаемых метаданных содержит также атрибут `DataServiceVersion`, имеющий то же значение, что и заголовок `DataServiceVersion` в ответном сообщении.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-198">The `DataServices` element of the returned metadata also contains a `DataServiceVersion` attribute, which is the same value as the `DataServiceVersion` header in the response message.</span></span> <span data-ttu-id="4a6d5-199">Клиентские приложения, такие как **добавить ссылку на службу** диалоговое окно в [!INCLUDE[vs_current_short](../../../../includes/vs-current-short-md.md)], эти сведения можно использовать для создания клиентские классы службы данных, правильно работающих с версией [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] , где размещена служба данных.</span><span class="sxs-lookup"><span data-stu-id="4a6d5-199">Client applications, such as the **Add Service Reference** dialog box in [!INCLUDE[vs_current_short](../../../../includes/vs-current-short-md.md)], use this information to generate client data service classes that work correctly with the version of [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] that host the data service.</span></span> <span data-ttu-id="4a6d5-200">Дополнительные сведения см. в разделе [OData: управление версиями протокола](http://go.microsoft.com/fwlink/?LinkId=186071).</span><span class="sxs-lookup"><span data-stu-id="4a6d5-200">For more information, see [OData: Protocol Versioning](http://go.microsoft.com/fwlink/?LinkId=186071).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4a6d5-201">См. также</span><span class="sxs-lookup"><span data-stu-id="4a6d5-201">See Also</span></span>  
 [<span data-ttu-id="4a6d5-202">Поставщики служб данных</span><span class="sxs-lookup"><span data-stu-id="4a6d5-202">Data Services Providers</span></span>](../../../../docs/framework/data/wcf/data-services-providers-wcf-data-services.md)  
 [<span data-ttu-id="4a6d5-203">Определение служб данных WCF</span><span class="sxs-lookup"><span data-stu-id="4a6d5-203">Defining WCF Data Services</span></span>](../../../../docs/framework/data/wcf/defining-wcf-data-services.md)
