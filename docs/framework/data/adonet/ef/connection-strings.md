---
title: Строки подключения
ms.date: 03/30/2017
ms.assetid: 78d516bc-c99f-4865-8ff1-d856bc1a01c0
ms.openlocfilehash: 17d91c9b97e370afe3704d2a58f5228e3fec95f1
ms.sourcegitcommit: 2eceb05f1a5bb261291a1f6a91c5153727ac1c19
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/04/2018
ms.locfileid: "43552510"
---
# <a name="connection-strings"></a><span data-ttu-id="ddab7-102">Строки подключения</span><span class="sxs-lookup"><span data-stu-id="ddab7-102">Connection Strings</span></span>
<span data-ttu-id="ddab7-103">Строка подключения содержит сведения для инициализации, передаваемые в виде параметра от поставщика данных в источник данных.</span><span class="sxs-lookup"><span data-stu-id="ddab7-103">A connection string contains initialization information that is passed as a parameter from a data provider to a data source.</span></span> <span data-ttu-id="ddab7-104">Синтаксис зависит от поставщика данных, и при попытке открыть соединение строка соединения анализируется.</span><span class="sxs-lookup"><span data-stu-id="ddab7-104">The syntax depends on the data provider, and the connection string is parsed during the attempt to open a connection.</span></span> <span data-ttu-id="ddab7-105">Строки соединения платформы Entity Framework содержат сведения, которые используются для соединения с базовым поставщиком данных ADO.NET, поддерживающим Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="ddab7-105">Connection strings used by the Entity Framework contain information used to connect to the underlying ADO.NET data provider that supports the Entity Framework.</span></span> <span data-ttu-id="ddab7-106">Они также содержат сведения о необходимых файлах модели и сопоставления.</span><span class="sxs-lookup"><span data-stu-id="ddab7-106">They also contain information about the required model and mapping files.</span></span>  
  
 <span data-ttu-id="ddab7-107">Строка соединения используется поставщиком EntityClient для доступа к метаданным модели и сопоставления, а также для соединения с источником данных.</span><span class="sxs-lookup"><span data-stu-id="ddab7-107">The connection string is used by the EntityClient provider when accessing model and mapping metadata and connecting to the data source.</span></span> <span data-ttu-id="ddab7-108">Свойство <xref:System.Data.EntityClient.EntityConnection.ConnectionString%2A> объекта <xref:System.Data.EntityClient.EntityConnection> позволяет получить доступ к строке соединения или задать ее значение.</span><span class="sxs-lookup"><span data-stu-id="ddab7-108">The connection string can be accessed or set through the <xref:System.Data.EntityClient.EntityConnection.ConnectionString%2A> property of <xref:System.Data.EntityClient.EntityConnection>.</span></span> <span data-ttu-id="ddab7-109">Класс <xref:System.Data.EntityClient.EntityConnectionStringBuilder> может использоваться для построения или обработки программным путем параметров строки соединения.</span><span class="sxs-lookup"><span data-stu-id="ddab7-109">The <xref:System.Data.EntityClient.EntityConnectionStringBuilder> class can be used to programmatically construct or access parameters in the connection string.</span></span> <span data-ttu-id="ddab7-110">Дополнительные сведения см. в разделе [как: сборка строки подключения EntityConnection](../../../../../docs/framework/data/adonet/ef/how-to-build-an-entityconnection-connection-string.md).</span><span class="sxs-lookup"><span data-stu-id="ddab7-110">For more information, see [How to: Build an EntityConnection Connection String](../../../../../docs/framework/data/adonet/ef/how-to-build-an-entityconnection-connection-string.md).</span></span>  
  
 <span data-ttu-id="ddab7-111">[Средства модели EDM](https://msdn.microsoft.com/library/91076853-0881-421b-837a-f582f36be527) формируют строку соединения, которые хранятся в файле конфигурации приложения.</span><span class="sxs-lookup"><span data-stu-id="ddab7-111">The [Entity Data Model tools](https://msdn.microsoft.com/library/91076853-0881-421b-837a-f582f36be527) generate a connection string that is stored in the application's configuration file.</span></span> <span data-ttu-id="ddab7-112"><xref:System.Data.Objects.ObjectContext> автоматически извлекает сведения о соединении при создании запросов объекта.</span><span class="sxs-lookup"><span data-stu-id="ddab7-112"><xref:System.Data.Objects.ObjectContext> retrieves this connection information automatically when creating object queries.</span></span> <span data-ttu-id="ddab7-113">Доступ к соединению <xref:System.Data.EntityClient.EntityConnection>, используемому экземпляром <xref:System.Data.Objects.ObjectContext>, можно получить с помощью свойства <xref:System.Data.Objects.ObjectContext.Connection%2A>.</span><span class="sxs-lookup"><span data-stu-id="ddab7-113">The <xref:System.Data.EntityClient.EntityConnection> used by an <xref:System.Data.Objects.ObjectContext> instance can be accessed from the <xref:System.Data.Objects.ObjectContext.Connection%2A> property.</span></span> <span data-ttu-id="ddab7-114">Дополнительные сведения см. в разделе [Управление соединениями и транзакциями](https://msdn.microsoft.com/library/b6659d2a-9a45-4e98-acaa-d7a8029e5b99).</span><span class="sxs-lookup"><span data-stu-id="ddab7-114">For more information, see [Managing Connections and Transactions](https://msdn.microsoft.com/library/b6659d2a-9a45-4e98-acaa-d7a8029e5b99).</span></span>  
  
## <a name="connection-string-parameters"></a><span data-ttu-id="ddab7-115">Параметры строки соединения</span><span class="sxs-lookup"><span data-stu-id="ddab7-115">Connection String Parameters</span></span>  
 <span data-ttu-id="ddab7-116">Формат строки соединения является списком разделенных точкой с запятой пар параметров «ключ-значение»:</span><span class="sxs-lookup"><span data-stu-id="ddab7-116">The format of a connection string is a semicolon-delimited list of key/value parameter pairs:</span></span>  
  
 `keyword1=value; keyword2=value;`  
  
 <span data-ttu-id="ddab7-117">Знак равенства (=) соединяет каждое ключевое слово и его значение.</span><span class="sxs-lookup"><span data-stu-id="ddab7-117">The equal sign (=) connects each keyword and its value.</span></span> <span data-ttu-id="ddab7-118">Ключевые слова не учитывают регистр, и пробелы между парами «ключ-значение» не учитываются.</span><span class="sxs-lookup"><span data-stu-id="ddab7-118">Keywords are not case sensitive, and spaces between key/value pairs are ignored.</span></span> <span data-ttu-id="ddab7-119">Однако в значениях может учитываться регистр в зависимости от источника данных.</span><span class="sxs-lookup"><span data-stu-id="ddab7-119">However, values  can be case sensitive, depending on the data source.</span></span> <span data-ttu-id="ddab7-120">Любые значения, содержащие точки с запятой, одинарные кавычки или двойные кавычки, должны быть заключены в двойные кавычки.</span><span class="sxs-lookup"><span data-stu-id="ddab7-120">Any values that contain a semicolon, single quotation marks, or double quotation marks must be enclosed in double quotation marks.</span></span> <span data-ttu-id="ddab7-121">В следующей таблице перечислены допустимые имена для значений ключевых слов в строке соединения <xref:System.Data.EntityClient.EntityConnection.ConnectionString%2A>.</span><span class="sxs-lookup"><span data-stu-id="ddab7-121">The following table lists the valid names for keyword values in the <xref:System.Data.EntityClient.EntityConnection.ConnectionString%2A>.</span></span>  
  
|<span data-ttu-id="ddab7-122">Ключевое слово</span><span class="sxs-lookup"><span data-stu-id="ddab7-122">Keyword</span></span>|<span data-ttu-id="ddab7-123">Описание:</span><span class="sxs-lookup"><span data-stu-id="ddab7-123">Description</span></span>|  
|-------------|-----------------|  
|`Provider`|<span data-ttu-id="ddab7-124">Необходимо, если не задано ключевое слово `Name`.</span><span class="sxs-lookup"><span data-stu-id="ddab7-124">Required if the `Name` keyword is not specified.</span></span> <span data-ttu-id="ddab7-125">Имя поставщика, которое используется для получения объекта <xref:System.Data.Common.DbProviderFactory>, относящегося к базовому поставщику.</span><span class="sxs-lookup"><span data-stu-id="ddab7-125">The provider name, which is used to retrieve the <xref:System.Data.Common.DbProviderFactory> object for the underlying provider.</span></span> <span data-ttu-id="ddab7-126">Это - постоянное значение.</span><span class="sxs-lookup"><span data-stu-id="ddab7-126">This value is constant.</span></span><br /><br /> <span data-ttu-id="ddab7-127">Если в строке соединения сущности не содержится ключевое слово `Name`, то необходимо задать непустое значение для ключевого слова `Provider`.</span><span class="sxs-lookup"><span data-stu-id="ddab7-127">When the `Name` keyword is not included in an entity connection string, a non-empty value for the `Provider` keyword is required.</span></span> <span data-ttu-id="ddab7-128">Это ключевое слово является взаимоисключающим по отношению к ключевому слову `Name`.</span><span class="sxs-lookup"><span data-stu-id="ddab7-128">This keyword is mutually exclusive with the `Name` keyword.</span></span>|  
|`Provider Connection String`|<span data-ttu-id="ddab7-129">Необязательный.</span><span class="sxs-lookup"><span data-stu-id="ddab7-129">Optional.</span></span> <span data-ttu-id="ddab7-130">Указывает зависящую от поставщика строку соединения, которая передается в базовый источник данных.</span><span class="sxs-lookup"><span data-stu-id="ddab7-130">Specifies the provider-specific connection string that is passed to the underlying data source.</span></span> <span data-ttu-id="ddab7-131">Эта строка соединения должна быть выражена с помощью пар «ключевое слово/значение», допустимых для этого поставщика данных.</span><span class="sxs-lookup"><span data-stu-id="ddab7-131">This connection string is expressed by using valid keyword/value pairs for the data provider.</span></span> <span data-ttu-id="ddab7-132">Применение недопустимого ключевого слова `Provider Connection String` приводит к возникновению ошибки времени выполнения при его проверке в источнике данных.</span><span class="sxs-lookup"><span data-stu-id="ddab7-132">An invalid `Provider Connection String` will cause a run-time error when it is evaluated by the data source.</span></span><br /><br /> <span data-ttu-id="ddab7-133">Это ключевое слово является взаимоисключающим по отношению к ключевому слову `Name`.</span><span class="sxs-lookup"><span data-stu-id="ddab7-133">This keyword is mutually exclusive with the `Name` keyword.</span></span><br /><br /> <span data-ttu-id="ddab7-134">Значение `Provider Connection String` должно быть заключено в кавычки.</span><span class="sxs-lookup"><span data-stu-id="ddab7-134">The value of the `Provider Connection String` must be surrounded by quotes.</span></span> <span data-ttu-id="ddab7-135">Ниже представлен пример такого кода.</span><span class="sxs-lookup"><span data-stu-id="ddab7-135">The following is an example:</span></span><br /><br /> `Provider Connection String ="Server=serverName; User ID = userID";`<br /><br /> <span data-ttu-id="ddab7-136">Следующий пример работать не будет:</span><span class="sxs-lookup"><span data-stu-id="ddab7-136">The following example is not going to work:</span></span><br /><br /> `Provider Connection String =Server=serverName; User ID = userID`|  
|`Metadata`|<span data-ttu-id="ddab7-137">Необходимо, если не задано ключевое слово `Name`.</span><span class="sxs-lookup"><span data-stu-id="ddab7-137">Required if the `Name` keyword is not specified.</span></span> <span data-ttu-id="ddab7-138">Список каталогов, файлов и расположений ресурсов с разделителями в виде вертикальной черты (|), в которых будет выполняться поиск сведений о метаданных и сопоставлениях.</span><span class="sxs-lookup"><span data-stu-id="ddab7-138">A pipe-delimited list of directories, files, and resource locations in which to look for metadata and mapping information.</span></span> <span data-ttu-id="ddab7-139">Ниже представлен пример такого кода.</span><span class="sxs-lookup"><span data-stu-id="ddab7-139">The following is an example:</span></span><br /><br /> `Metadata=`<br /><br /> `c:\model &#124; c:\model\sql\mapping.msl;`<br /><br /> <span data-ttu-id="ddab7-140">Пустые пространства, расположенные с обеих сторон вертикальной черты (|), не учитываются.</span><span class="sxs-lookup"><span data-stu-id="ddab7-140">Blank spaces on each side of the pipe separator are ignored.</span></span><br /><br /> <span data-ttu-id="ddab7-141">Это ключевое слово является взаимоисключающим по отношению к ключевому слову `Name`.</span><span class="sxs-lookup"><span data-stu-id="ddab7-141">This keyword is mutually exclusive with the `Name` keyword.</span></span>|  
|`Name`|<span data-ttu-id="ddab7-142">По желанию можно определить имя соединения в файле конфигурации приложения, в котором предоставляются необходимые для строки соединения пары «ключевое слово/значение».</span><span class="sxs-lookup"><span data-stu-id="ddab7-142">The application can optionally specify the connection name in an application configuration file that provides the required keyword/value connection string values.</span></span> <span data-ttu-id="ddab7-143">В этом случае нельзя задавать эти пары непосредственно в строке соединения.</span><span class="sxs-lookup"><span data-stu-id="ddab7-143">In this case, you cannot supply them directly in the connection string.</span></span> <span data-ttu-id="ddab7-144">Применение ключевого слова `Name` в файле конфигурации не допускается.</span><span class="sxs-lookup"><span data-stu-id="ddab7-144">The `Name` keyword is not allowed in a configuration file.</span></span><br /><br /> <span data-ttu-id="ddab7-145">Если в строке соединения не содержится ключевое слово `Name`, то необходимо задать непустые значения для ключевого слова Provider.</span><span class="sxs-lookup"><span data-stu-id="ddab7-145">When the `Name` keyword is not included in the connection string, a non-empty values for Provider keyword is required.</span></span><br /><br /> <span data-ttu-id="ddab7-146">Это ключевое слово является взаимоисключающим по отношению к другим ключевым словам строки соединения.</span><span class="sxs-lookup"><span data-stu-id="ddab7-146">This keyword is mutually exclusive with all the other connection string keywords.</span></span>|  
  
 <span data-ttu-id="ddab7-147">Ниже приведен пример строки подключения для [модели AdventureWorks Sales](https://msdn.microsoft.com/library/f16cd988-673f-4376-b034-129ca93c7832) хранятся в файле конфигурации приложения:</span><span class="sxs-lookup"><span data-stu-id="ddab7-147">The following is an example of a connection string for the [AdventureWorks Sales Model](https://msdn.microsoft.com/library/f16cd988-673f-4376-b034-129ca93c7832) stored in the application configuration file:</span></span>  
  
  
  
## <a name="model-and-mapping-file-locations"></a><span data-ttu-id="ddab7-148">Расположение файла модели и сопоставления</span><span class="sxs-lookup"><span data-stu-id="ddab7-148">Model and Mapping File Locations</span></span>  
 <span data-ttu-id="ddab7-149">Параметр `Metadata` содержит список местоположений, в которых поставщик `EntityClient` выполняет поиск файлов модели и сопоставления.</span><span class="sxs-lookup"><span data-stu-id="ddab7-149">The `Metadata` parameter contains a list of locations for the `EntityClient` provider to search for model and mapping files.</span></span> <span data-ttu-id="ddab7-150">Файлы модели и сопоставления часто развертываются в том же каталоге, что и исполняемый файл приложения.</span><span class="sxs-lookup"><span data-stu-id="ddab7-150">Model and mapping files are often deployed in the same directory as the application executable file.</span></span> <span data-ttu-id="ddab7-151">Эти файлы могут быть также развернуты в конкретном местоположении или включены в виде внедренного ресурса в приложение.</span><span class="sxs-lookup"><span data-stu-id="ddab7-151">These files can also be deployed in a specific location or included as an embedded resource in the application.</span></span>  
  
 <span data-ttu-id="ddab7-152">Внедренные ресурсы задаются следующим образом:</span><span class="sxs-lookup"><span data-stu-id="ddab7-152">Embedded resources are specified as follows:</span></span>  
  
```  
Metadata=res://<assemblyFullName>/<resourceName>.   
```  
  
 <span data-ttu-id="ddab7-153">Для определения расположения внедренного ресурса доступны следующие способы.</span><span class="sxs-lookup"><span data-stu-id="ddab7-153">The following options are available for defining the location of an embedded resource:</span></span>  
  
|<span data-ttu-id="ddab7-154">Параметр</span><span class="sxs-lookup"><span data-stu-id="ddab7-154">Option</span></span>|<span data-ttu-id="ddab7-155">Описание</span><span class="sxs-lookup"><span data-stu-id="ddab7-155">Description</span></span>|  
|-|-|  
|`assemblyFullName`|<span data-ttu-id="ddab7-156">Полное имя сборки с внедренным ресурсом.</span><span class="sxs-lookup"><span data-stu-id="ddab7-156">The full name of an assembly with the embedded resource.</span></span> <span data-ttu-id="ddab7-157">Это имя включает простое имя, имя версии, поддерживаемую культуру и открытый ключ следующим образом:</span><span class="sxs-lookup"><span data-stu-id="ddab7-157">The name includes the simple name, version name, supported culture, and public key, as follows:</span></span><br /><br /> `ResourceLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null`<br /><br /> <span data-ttu-id="ddab7-158">Ресурсы можно внедрять в любую сборку, доступную для приложения.</span><span class="sxs-lookup"><span data-stu-id="ddab7-158">Resources can be embedded in any assembly that is accessible by the application.</span></span><br /><br /> <span data-ttu-id="ddab7-159">Если подстановочный знак (\*) для `assemblyFullName`, исполняющая среда Entity Framework будет искать ресурсы в следующих расположениях, в следующем порядке:</span><span class="sxs-lookup"><span data-stu-id="ddab7-159">If you specify a wildcard (\*) for `assemblyFullName`, the Entity Framework runtime will search for resources in the following locations, in this order:</span></span><br /><br /> <span data-ttu-id="ddab7-160">1.  вызывающая сборка;</span><span class="sxs-lookup"><span data-stu-id="ddab7-160">1.  The calling assembly.</span></span><br /><span data-ttu-id="ddab7-161">2.  Сборки, на которые имеются ссылки</span><span class="sxs-lookup"><span data-stu-id="ddab7-161">2.  The referenced assemblies.</span></span><br /><span data-ttu-id="ddab7-162">3.  сборки в каталоге исполняемых файлов (bin) приложения.</span><span class="sxs-lookup"><span data-stu-id="ddab7-162">3.  The assemblies in the bin directory of an application.</span></span><br /><br /> <span data-ttu-id="ddab7-163">Если файлы не найдены ни в одном из этих расположений, вызывается исключение.</span><span class="sxs-lookup"><span data-stu-id="ddab7-163">If the files are not in one of these locations, an exception will be thrown.</span></span> <span data-ttu-id="ddab7-164">**Примечание:** при использовании подстановочный знак (\*), платформа Entity Framework должна обеспечить поиск во всех сборках ресурсов с правильным именем.</span><span class="sxs-lookup"><span data-stu-id="ddab7-164">**Note:**  When you use wildcard (\*), the Entity Framework has to look through all the assemblies for resources with the correct name.</span></span> <span data-ttu-id="ddab7-165">В целях повышения производительности задавайте имя сборки, а не символ-шаблон.</span><span class="sxs-lookup"><span data-stu-id="ddab7-165">To improve performance, specify the assembly name instead of the wildcard.</span></span>|  
|`resourceName`|<span data-ttu-id="ddab7-166">Имена включенных ресурсов, например AdvendtureWorksModel.csdl.</span><span class="sxs-lookup"><span data-stu-id="ddab7-166">The name of the included resource, such as AdvendtureWorksModel.csdl.</span></span> <span data-ttu-id="ddab7-167">Службы метаданных осуществляют поиск файлов или ресурсов только для расширений CSDL, SSDL и MSL.</span><span class="sxs-lookup"><span data-stu-id="ddab7-167">The metadata services will only look for files or resources with one of the following extensions: .csdl, .ssdl, or .msl.</span></span> <span data-ttu-id="ddab7-168">Если имя `resourceName` не указано, то загружаются все ресурсы метаданных.</span><span class="sxs-lookup"><span data-stu-id="ddab7-168">If `resourceName` is not specified, all metadata resources will be loaded.</span></span> <span data-ttu-id="ddab7-169">Ресурсы должны иметь в сборке уникальные имена.</span><span class="sxs-lookup"><span data-stu-id="ddab7-169">The resources should have unique names within an assembly.</span></span> <span data-ttu-id="ddab7-170">Если в сборке в разных каталогах указано несколько файлов с одинаковыми именами, то в `resourceName` перед именем ресурса должна быть представлена структура папок, например ИмяПапки.ИмяФайла.csdl.</span><span class="sxs-lookup"><span data-stu-id="ddab7-170">If multiple files with the same name are defined in different directories in the assembly, the `resourceName` must include the folder structure before the name of the resource, for example FolderName.FileName.csdl.</span></span><br /><br /> <span data-ttu-id="ddab7-171">Указание `resourceName` не требуется, если для `assemblyFullName` задан символ-шаблон (\*).</span><span class="sxs-lookup"><span data-stu-id="ddab7-171">`resourceName` is not required when you specify a wildcard (\*) for `assemblyFullName`.</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="ddab7-172">В целях повышения производительности рекомендуется внедрять ресурсы в вызывающую сборку с учетом того, что в приложениях, отличных от веб-приложений, такая рекомендация становится неприменимой, поскольку в вызывающей сборке отсутствуют ссылки на файлы сопоставлений и метаданных.</span><span class="sxs-lookup"><span data-stu-id="ddab7-172">To improve performance, embed resources in the calling assembly, except in non-Web scenarios where there is no reference to underlying mapping and metadata files in the calling assembly.</span></span>  
  
 <span data-ttu-id="ddab7-173">В следующем примере загружаются все файлы модели и сопоставления из вызывающей сборки, а также сборок, указанных в ссылках, и других сборок в каталоге bin приложения.</span><span class="sxs-lookup"><span data-stu-id="ddab7-173">The following example loads all the model and mapping files in the calling assembly, referenced assemblies, and other assemblies in the bin directory of an application.</span></span>  
  
```  
Metadata=res://*/  
```  
  
 <span data-ttu-id="ddab7-174">В следующем примере загружаются файл model.csdl из сборки AdventureWorks, а также файлы model.ssdl и model.msl из каталога по умолчанию выполняющегося приложения.</span><span class="sxs-lookup"><span data-stu-id="ddab7-174">The following example loads the model.csdl file from the AdventureWorks assembly, and loads the model.ssdl and model.msl files from the default directory of the running application.</span></span>  
  
```  
Metadata=res://AdventureWorks, 1.0.0.0, neutral, a14f3033def15840/model.csdl|model.ssdl|model.msl  
```  
  
 <span data-ttu-id="ddab7-175">В следующем примере загружаются три заданных ресурса из указанной сборки.</span><span class="sxs-lookup"><span data-stu-id="ddab7-175">The following example loads the three specified resources from the specific assembly.</span></span>  
  
```  
Metadata=res://AdventureWorks, 1.0.0.0, neutral, a14f3033def15840/model.csdl|   
res://AdventureWorks, 1.0.0.0, neutral, a14f3033def15840/model.ssdl|   
res://AdventureWorks, 1.0.0.0, neutral, a14f3033def15840/model.msl  
```  
  
 <span data-ttu-id="ddab7-176">В следующем примере из сборки загружаются все внедренные ресурсы с расширениями CSDL, SSDL и MSL.</span><span class="sxs-lookup"><span data-stu-id="ddab7-176">The following example loads all the embedded resources with the extensions .csdl, .msl, and .ssdl from the assembly.</span></span>  
  
```  
Metadata=res://AdventureWorks, 1.0.0.0, neutral, a14f3033def15840/  
```  
  
 <span data-ttu-id="ddab7-177">В следующем примере загружаются все ресурсы в относительный путь к файлу плюс «datadir\metadata\\» из расположения загруженной сборки.</span><span class="sxs-lookup"><span data-stu-id="ddab7-177">The following example loads all the resources in the relative file path plus "datadir\metadata\\" from the loaded assembly location.</span></span>  
  
```  
Metadata=datadir\metadata\  
```  
  
 <span data-ttu-id="ddab7-178">В следующем примере из расположения загруженной сборки загружаются все ресурсы, которые обозначены относительным путем к файлу.</span><span class="sxs-lookup"><span data-stu-id="ddab7-178">The following example loads all the resources in the relative file path from the loaded assembly location.</span></span>  
  
```  
Metadata=.\  
```  
  
## <a name="support-for-the-124datadirectory124-substitution-string-and-the-web-application-root-operator-"></a><span data-ttu-id="ddab7-179">Поддержка &#124;DataDirectory&#124; строка подстановки и веб-приложения корневого оператор (~)</span><span class="sxs-lookup"><span data-stu-id="ddab7-179">Support for the &#124;DataDirectory&#124; Substitution String and the Web Application Root Operator (~)</span></span>  
 <span data-ttu-id="ddab7-180">`DataDirectory` и ~ оператор используются в <xref:System.Data.EntityClient.EntityConnection.ConnectionString%2A> как часть `Metadata` и `Provider Connection String` ключевые слова.</span><span class="sxs-lookup"><span data-stu-id="ddab7-180">`DataDirectory` and the ~ operator are used in the <xref:System.Data.EntityClient.EntityConnection.ConnectionString%2A> as part of the `Metadata` and `Provider Connection String` keywords.</span></span> <span data-ttu-id="ddab7-181">В соединении <xref:System.Data.EntityClient.EntityConnection> параметр `DataDirectory` и оператор ~ передаются <xref:System.Data.Metadata.Edm.MetadataWorkspace> и поставщику хранилища соответственно.</span><span class="sxs-lookup"><span data-stu-id="ddab7-181">The <xref:System.Data.EntityClient.EntityConnection> forwards the `DataDirectory` and the ~ operator to <xref:System.Data.Metadata.Edm.MetadataWorkspace> and the store provider, respectively.</span></span>  
  
|<span data-ttu-id="ddab7-182">Термин</span><span class="sxs-lookup"><span data-stu-id="ddab7-182">Term</span></span>|<span data-ttu-id="ddab7-183">Описание</span><span class="sxs-lookup"><span data-stu-id="ddab7-183">Description</span></span>|  
|----------|-----------------|  
|`&#124;DataDirectory&#124;`|<span data-ttu-id="ddab7-184">Преобразуется в относительный путь к файлам сопоставлений и метаданных.</span><span class="sxs-lookup"><span data-stu-id="ddab7-184">Resolves to a relative path to a mapping and metadata files.</span></span> <span data-ttu-id="ddab7-185">Это значение определяется с помощью метода `AppDomain.SetData("DataDirectory", objValue)`.</span><span class="sxs-lookup"><span data-stu-id="ddab7-185">This is the value that is set through the `AppDomain.SetData("DataDirectory", objValue)` method.</span></span> <span data-ttu-id="ddab7-186">`DataDirectory` Строка подстановки должны быть заключены в символы вертикальной черты и не может быть любой пробел между именем и символами вертикальной черты.</span><span class="sxs-lookup"><span data-stu-id="ddab7-186">The `DataDirectory` substitution string must be surrounded by the pipe characters and there cannot be any white space between its name and the pipe characters.</span></span> <span data-ttu-id="ddab7-187">Имя `DataDirectory` обрабатывается без учета регистра.</span><span class="sxs-lookup"><span data-stu-id="ddab7-187">The `DataDirectory` name is not case-sensitive.</span></span><br /><br /> <span data-ttu-id="ddab7-188">Если членство в списке путей метаданных нужно передать физического каталога «DataDirectory», добавьте пробел для одного или обоих сторон от имени.</span><span class="sxs-lookup"><span data-stu-id="ddab7-188">If a physical directory named "DataDirectory" has to be passed as a member of the list of metadata paths, add white space to either or both sides of the name.</span></span> <span data-ttu-id="ddab7-189">Например, `Metadata="DataDirectory1 &#124; DataDirectory &#124; DataDirectory2"`.</span><span class="sxs-lookup"><span data-stu-id="ddab7-189">For example: `Metadata="DataDirectory1 &#124; DataDirectory &#124; DataDirectory2"`.</span></span> <span data-ttu-id="ddab7-190">Приложение ASP.NET преобразовывает &#124;DataDirectory&#124; для "\<корневой каталог приложения > / app_data» папки.</span><span class="sxs-lookup"><span data-stu-id="ddab7-190">An ASP.NET application resolves &#124;DataDirectory&#124; to the "\<application root>/app_data" folder.</span></span>|  
|~|<span data-ttu-id="ddab7-191">Преобразуется в корневой каталог веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="ddab7-191">Resolves to the Web application root.</span></span> <span data-ttu-id="ddab7-192">Символ ~ в ведущей позиции всегда интерпретируется как оператор определения корневого каталога веб-приложения (~), хотя и может представлять допустимый локальный подкаталог.</span><span class="sxs-lookup"><span data-stu-id="ddab7-192">The ~ character at a leading position is always interpreted as the Web application root operator (~), although it might represent a valid local subdirectory.</span></span> <span data-ttu-id="ddab7-193">Для ссылки на локальный подкаталог пользователь должен явно передать `./~`.</span><span class="sxs-lookup"><span data-stu-id="ddab7-193">To refer to such a local subdirectory, the user should explicitly pass `./~`.</span></span>|  
  
 <span data-ttu-id="ddab7-194">Значение `DataDirectory` и оператор ~ должны быть указаны только в начале пути, поскольку их преобразование в любой другой позиции не происходит.</span><span class="sxs-lookup"><span data-stu-id="ddab7-194">`DataDirectory` and the ~ operator should be specified only at the beginning of a path, they are not resolved at any other position.</span></span> <span data-ttu-id="ddab7-195">Платформа Entity Framework пытается преобразовать `~/data`, но рассматривает `/data/~` как физический путь.</span><span class="sxs-lookup"><span data-stu-id="ddab7-195">The Entity Framework will try to resolve `~/data`, but it will treat `/data/~` as a physical path.</span></span>  
  
 <span data-ttu-id="ddab7-196">Путь, начинающийся с `DataDirectory` или оператора ~, нельзя преобразовать в физический путь вне ветви `DataDirectory` и оператора ~.</span><span class="sxs-lookup"><span data-stu-id="ddab7-196">A path that starts with the `DataDirectory` or the ~ operator cannot resolve to a physical path outside the branch of the `DataDirectory` and the ~ operator.</span></span> <span data-ttu-id="ddab7-197">Например, следующие пути будут преобразованы так: `~` , `~/data`, `~/bin/Model/SqlServer`.</span><span class="sxs-lookup"><span data-stu-id="ddab7-197">For example, the following paths will resolve: `~` , `~/data` , `~/bin/Model/SqlServer`.</span></span> <span data-ttu-id="ddab7-198">Попытка преобразования следующих путей завершится ошибкой: `~/..`, `~/../other`.</span><span class="sxs-lookup"><span data-stu-id="ddab7-198">The following paths will fail to resolve: `~/..`, `~/../other`.</span></span>  
  
 <span data-ttu-id="ddab7-199">`DataDirectory` и оператор «~» могут включать подкаталоги: `|DataDirectory|\Model`, `~/bin/Model`.</span><span class="sxs-lookup"><span data-stu-id="ddab7-199">`DataDirectory` and the ~ operator can be extended to include sub-directories, as follows: `|DataDirectory|\Model`, `~/bin/Model`</span></span>  
  
 <span data-ttu-id="ddab7-200">Процесс преобразования строки подстановки `DataDirectory` и оператора ~ является нерекурсивным.</span><span class="sxs-lookup"><span data-stu-id="ddab7-200">The resolution of the `DataDirectory` substitution string and the ~ operator is non-recursive.</span></span> <span data-ttu-id="ddab7-201">Например, если `DataDirectory` включает символ `~`, возникает исключение.</span><span class="sxs-lookup"><span data-stu-id="ddab7-201">For example, when `DataDirectory` includes the `~` character, an exception will occur.</span></span> <span data-ttu-id="ddab7-202">Тем самым предотвращается бесконечная рекурсия.</span><span class="sxs-lookup"><span data-stu-id="ddab7-202">This prevents an infinite recursion.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ddab7-203">См. также</span><span class="sxs-lookup"><span data-stu-id="ddab7-203">See Also</span></span>  
 [<span data-ttu-id="ddab7-204">Работа с поставщиками данных</span><span class="sxs-lookup"><span data-stu-id="ddab7-204">Working with Data Providers</span></span>](../../../../../docs/framework/data/adonet/ef/working-with-data-providers.md)  
 [<span data-ttu-id="ddab7-205">Требования к развертыванию</span><span class="sxs-lookup"><span data-stu-id="ddab7-205">Deployment Considerations</span></span>](../../../../../docs/framework/data/adonet/ef/deployment-considerations.md)  
 [<span data-ttu-id="ddab7-206">Управление подключениями и транзакциями</span><span class="sxs-lookup"><span data-stu-id="ddab7-206">Managing Connections and Transactions</span></span>](https://msdn.microsoft.com/library/b6659d2a-9a45-4e98-acaa-d7a8029e5b99)  
 [<span data-ttu-id="ddab7-207">Строки подключения</span><span class="sxs-lookup"><span data-stu-id="ddab7-207">Connection Strings</span></span>](../../../../../docs/framework/data/adonet/connection-strings.md)
