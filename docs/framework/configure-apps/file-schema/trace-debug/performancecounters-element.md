---
title: "Элемент &lt;performanceCounters&gt; | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework-4.6"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
f1_keywords: 
  - "http://schemas.microsoft.com/.NetConfiguration/v2.0#configuration/system.diagnostics/performanceCounters"
  - "http://schemas.microsoft.com/.NetConfiguration/v2.0#performanceCounters"
dev_langs: 
  - "VB"
  - "CSharp"
  - "C++"
  - "jsharp"
helpviewer_keywords: 
  - "<perfomanceCounters> - элемент"
  - "performanceCounters - элемент"
ms.assetid: a71f605b-c7d9-4501-a5c3-abcbb964a43f
caps.latest.revision: 10
author: "mcleblanc"
ms.author: "markl"
manager: "markl"
caps.handback.revision: 10
---
# Элемент &lt;performanceCounters&gt;
Размер глобальной памяти, совместно используемой счетчиками производительности.  
  
## Синтаксис  
  
```  
<performanceCounters filemappingsize="524288" />  
```  
  
## Атрибуты и элементы  
 В следующих разделах описаны атрибуты, дочерние и родительские элементы.  
  
### Атрибуты  
  
|Атрибут|Описание|  
|-------------|--------------|  
|filemappingsize|Обязательный атрибут.<br /><br /> Он указывает размер глобальной памяти в байтах, используемой счетчиками производительности.  Значение по умолчанию — 524288.|  
  
### Дочерние элементы  
 Нет.  
  
### Родительские элементы  
  
|Элемент|Описание|  
|-------------|--------------|  
|`Configuration`|Корневой элемент в любом файле конфигурации, используемом средой CLR и приложениями платформы .NET Framework.|  
|`system.diagnostics`|Определяет корневой элемент для раздела конфигурации ASP.NET.|  
  
## Заметки  
 Счетчики производительности используют файлы отображения памяти или общую память для публикации данных о производительности.  От размера общей памяти зависит количество одновременно используемых экземпляров.  Существует два типа общей памяти: глобальная и разделенная.  Глобальная общая память используется всеми категориями счетчиков производительности, установленными на платформе .NET Framework версии 1.0 или 1.1.  В категориях счетчиков производительности, установленных на платформе .NET Framework версии 2.0, используется разделенная общая память, при этом у каждой категории счетчика производительности имеется своя собственная память.  
  
 Размер глобальной общей памяти задается только с помощью файла конфигурации.  Размер по умолчанию — 524 288 байтов, максимальный размер — 33 554 432 байта, а минимальный размер — 32 768 байтов.  Так как глобальная общая память используется всеми процессами и категориями, ее размер определяется первым создателем.  Если размер памяти указывается в файле конфигурации приложения, то этот размер принимается в расчет, только если данное приложение является первым приложением, выполнившим запуск счетчиков производительности.  Поэтому значение `filemappingsize` лучше указывать в файле Machine.config.  Отдельные счетчики производительности не освобождают глобальную общую память, и в случае создания большого количества экземпляров счетчиков производительности с разными именами глобальная общая память будет исчерпана.  
  
 Чтобы задать размер отдельной общей памяти, сначала в разделе реестра HKEY\_LOCAL\_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\*\<category name\>*\\Performance указывается ссылка на значение DWORD FileMappingSize, а затем на значение размера глобальной общей памяти, заданное в файле конфигурации.  Если значение FileMappingSize не существует, то размер разделенной общей памяти устанавливается равным одной четвертой \(1\/4\) от размера глобальной памяти, заданного в файле конфигурации.  
  
## См. также  
 <xref:System.Diagnostics.PerformanceCounter>   
 <xref:System.Diagnostics.PerformanceCounterCategory>   
 <xref:System.Diagnostics.PerformanceCounter.InstanceLifetime%2A>   
 <xref:System.Diagnostics.PerformanceCounterInstanceLifetime>