---
title: "Ildasm.exe (IL Disassembler) | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "VB"
  - "CSharp"
  - "C++"
  - "jsharp"
helpviewer_keywords: 
  - "PE files, MSIL Disassembler"
  - "portable executable files, MSIL Disassembler"
  - "Ildasm.exe"
  - "MSIL Disassembler"
  - "text files produced by MSIL Disassembler"
  - "disassembling file for MSIL Assembler input"
ms.assetid: db27f6b2-f1ec-499e-be3a-7eecf95ca42b
caps.latest.revision: 33
author: "rpetrusha"
ms.author: "ronpet"
manager: "wpickett"
caps.handback.revision: 33
---
# Ildasm.exe (IL Disassembler)
Дизассемблер IL — сопутствующее средство Ассемблера IL \(Ilasm.exe\).  Ildasm.exe принимает входной исполняемый файл \(PE\), содержащий код на промежуточном языке \(IL\), и создает соответствующий текстовый файл в качестве входных данных для Ilasm.exe.  
  
 Это средство устанавливается автоматически вместе с Visual Studio.  Чтобы запустить этот инструмент, воспользуйтесь командной строкой разработчика \(или командной строкой Visual Studio в Windows 7\).  Для получения дополнительной информации см. [Командные строки](../../../docs/framework/tools/developer-command-prompt-for-vs.md).  
  
 В командной строке введите следующее:  
  
## Синтаксис  
  
```  
  
ildasm [options] [PEfilename] [options]  
```  
  
#### Параметры  
 Доступны следующие параметры для файла EXE, DLL OBJ, LIB и .winmd.  
  
|Команда|Описание|  
|-------------|--------------|  
|**\/out\=** *имя\_файла*|Создает выходной файл с заданным *именем\_файла* вместо вывода результатов в графическом интерфейсе пользователя.|  
|**\/rtf**|Создает выходные данные в формате RTF.  Не может использоваться с параметром **\/text**.|  
|**\/text**|Выводит результаты работы на консоль, а не в графический интерфейс пользователя или выходной файл.|  
|**\/html**|Создает выходные данные в формате HTML.  Может использоваться только с параметром **\/output**.|  
|**\/?**|Отображает синтаксис команд и параметров для инструмента.|  
  
 Следующие дополнительные параметры доступны для EXE, DLL и WINMD\-файлов.  
  
|Команда|Описание|  
|-------------|--------------|  
|**\/bytes**|Отображает фактические байты в шестнадцатеричном формате в виде комментариев к инструкциям.|  
|**\/caverbal**|Создает двоичные объекты настраиваемых атрибутов в форме команд.  По умолчанию задана двоичная форма.|  
|**\/linenum**|Содержит ссылки на строки исходного файла.|  
|**\/nobar**|Подавляет вывод всплывающего окна с индикатором хода выполнения дизассемблирования.|  
|**\/noca**|Подавляет вывод настраиваемых атрибутов.|  
|**\/project**|Отображает метаданные так, как их видит управляемый код, а не как их видит машинный [!INCLUDE[wrt](../../../includes/wrt-md.md)].  Если `PEfilename` не является файлом метаданных .winmd \(Windows\), то этот параметр не действует.  См. раздел [Поддержка приложений для Магазина Windows и среды выполнения Windows в .NET Framework](../../../docs/standard/cross-platform/support-for-windows-store-apps-and-windows-runtime.md).|  
|**\/pubonly**|Дизассемблируются только открытые типы и члены.  Этот параметр является эквивалентом параметра **\/visibility:PUB**.|  
|**\/quoteallnames**|Все имена заключаются в одинарные кавычки.|  
|**\/raweh**|Отображает предложения обработки исключений в исходном виде.|  
|**\/source**|Выводит первоначальные строки исходного кода в виде комментариев.|  
|**\/tokens**|Отображает лексемы метаданных классов и членов.|  
|**\/visibility:** *видимость*\[\+*видимость*...\]|Дизассемблируются только типы и члены с заданной областью видимости.  Допустимы следующие значения аргумента *область\_видимости*:<br /><br /> **PUB** — открытые<br /><br /> **PRI** — закрытые<br /><br /> **FAM** — семейство<br /><br /> **ASM** — сборка<br /><br /> **FAA** — семейство и сборка<br /><br /> **FOA** — семейство или сборка<br /><br /> **PSC** — закрытая область<br /><br /> Определения этих модификаторов области видимости см. в объектах <xref:System.Reflection.MethodAttributes> и <xref:System.Reflection.TypeAttributes>.|  
  
 Следующие параметры допустимы для EXE, DLL и WINMD\-файлов только для записи в файл или вывода на консоль.  
  
|Команда|Описание|  
|-------------|--------------|  
|**\/all**|Задает сочетание параметров **\/header**, **\/bytes**, **\/stats**, **\/classlist** и **\/tokens**.|  
|**\/classlist**|Содержит список классов, определенных в этом модуле.|  
|**\/forward**|Используется прямое объявление класса.|  
|**\/headers**|Включает сведения из заголовка файла в выходной файл.|  
|**\/item:** *класс*\[**::** *член*\[`(`*сигнатура*\]\]|В зависимости от заданных аргументов выполняется дизассемблирование следующих объектов:<br /><br /> -   Дизассемблируется указанный *класс*.<br />-   Дизассемблируется указанный `member` этого *класса*.<br />-   Дизассемблирует `member` ``  класса *class* с указанной подписью *sig*.  Аргумент *подпись* имеет следующий формат:<br />     \[`instance`\] `returnType`\(`parameterType1`, `parameterType2`, …, `parameterTypeN`\)<br />     **Примечание** В платформе .NET Framework версий 1.0 и 1.1 за атрибутом `sig` должна следовать закрывающая скобка: \(`sig`\).  Начиная с Net Framework 2.0, закрывающую круглую скобку необходимо опустить: \(`sig`.|  
|**\/noil**|Подавляет вывод кодов IL сборки.|  
|**\/stats**|Включает в образ статистику.|  
|**\/typelist**|Создает полный список типов, чтобы сохранить расположение типов в круговом пути.|  
|**\/unicode**|Выходные данные будут находиться в Юникоде.|  
|**\/utf8**|Выходные данные будут иметь кодировку UTF\-8.  Значение по умолчанию — ANSI.|  
  
 Следующие параметры допустимы для файлов EXE, DLL OBJ, LIB и WINMD только для записи в файл или вывода на консоль.  
  
|Команда|Описание|  
|-------------|--------------|  
|**\/metadata**\[\=`specifier`\]|Указывает, что должны выводиться метаданные, при этом параметр `specifier` может иметь следующие значения:<br /><br /> **MDHEADER** — в метаданных должны отображаться сведения о заголовке и размерах.<br /><br /> **HEX** — сведения должны быть представлены как в текстовом, так и в шестнадцатеричном форматах.<br /><br /> **CSV** — должны выводиться количество записей и размеры кучи.<br /><br /> **UNREX** — должны выводиться неразрешенные внешние ссылки.<br /><br /> **SCHEMA** — должны выводиться заголовок метаданных и данные схемы.<br /><br /> **RAW** — должны выводиться таблицы необработанных метаданных.<br /><br /> **HEAPS** — должны выводиться необработанные данные кучи.<br /><br /> **VALIDATE** — должна выполняться проверка согласованности метаданных.<br /><br /> Параметр **\/metadata** можно задать несколько раз с различными значениями параметра `specifier`.|  
  
 Приведенные ниже параметры допустимы для файлов LIB при выводе в файл или на консоль.  
  
|Команда|Описание|  
|-------------|--------------|  
|**\/objectfile**\=`filename`|Вывод метаданных отдельного файла объекта из заданной библиотеки.|  
  
> [!NOTE]
>  Все параметры программы Ildasm.exe не учитывают регистр и распознаются по первым трем буквам.  Например, команда **\/quo** эквивалентна команде **\/quoteallnames**.  Разделителем параметра и его аргумента может служить двоеточие \(:\) или знак равенства \(\=\).  Например, команда **\/output:** *имя\_файла* эквивалентна команде **\/output\=** *имя\_файла*.  
  
## Заметки  
 Программа Ildasm.exe работает только с PE\-файлами, расположенными на жестком диске.  Программа не обрабатывает файлы, установленные в глобальный кэш сборок.  
  
 Текстовый файл, созданный Ildasm.exe, можно использовать в качестве входных данных для Ассемблера IL \(Ilasm.exe\).  Это полезно, к примеру, при компиляции кода на языке программирования, не поддерживающем все атрибуты метаданных среды выполнения.  После компилирования кода и запуска программы с помощью Ildasm.exe, полученный текстовый файл IL можно редактировать вручную для добавления отсутствующих атрибутов.  После этого можно выполнить этот текстовый файл с помощью Ассемблера IL для создания окончательного исполняемого файла.  
  
> [!NOTE]
>  На данный момент эта технология не может быть применена к PE\-файлам, содержащим встроенный машинный код \(например, к PE\-файлам, созданным компилятором Microsoft Visual C\+\+\).  
  
 Можно использовать графический пользовательский интерфейс по умолчанию в дизассемблере IL для просмотра метаданных и дизассемблированного кода любого существующего PE\-файла в иерархическом виде дерева.  Чтобы запустить графический интерфейс пользователя, введите команду **ildasm** в командной строке без аргумента *имя\_PE\-файла*  и без параметров.  В меню **Файл** можно перейти к PE\-файлу, который требуется загрузить в программу Ildasm.exe.  Чтобы сохранить метаданные и дизассемблированный код, отображаемый для выбранного PE\-файла, выберите в меню **Файл** команду **Дамп**.  Чтобы сохранить только иерархическое отображение дерева, выберите в меню **Файл** команду **Дамп дерева**.  Дополнительные инструкции по загрузке файла в программу Ildasm.exe и интерпретации результатов см. в учебнике по Ildasm.exe, расположенном в папке Samples, входящей в комплект поставки [!INCLUDE[winsdklong](../../../includes/winsdklong-md.md)].  
  
 Если указать Ildasm.exe с аргументом *PEfilename*, содержащего внедренные ресурсы, средство создаст несколько выходных файлов: текстовый файл, содержащий код IL, и для каждого внутреннего управляемого ресурса RESOURCES\-файл, создаваемый с помощью имени ресурса из метаданных.  Если неуправляемый ресурс внедряется в *PEfilename*, RES\-файл создается с использованием имени файла, заданного для вывода IL параметром **\/output** *.*  
  
> [!NOTE]
>  Для входных файлов OBJ и LIB программа Ildasm.exe отображает только описания метаданных.  Код IL для этих типов файлов не дизассемблирован.  
  
 Чтобы определить, управляем ли файл EXE или DLL, обработайте его программой Ildasm.exe.  Если файл не является управляемым, будет выдано сообщение о том, что у файла отсутствует заголовок общеязыковой среды выполнения и он не может быть дизассемблирован.  Если файл является управляемым, программа будет выполнена без ошибок.  
  
## Сведения о версии  
 Начиная с [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], Ildasm.exe обрабатывает нераспознанный маршалированный большой двоичный объект, отображая бинарное содержимое.  Например, в следующем коде показано, как отображается маршалированный большой двоичный объект, созданный программой C\#:  
  
```  
  // C#  
  public void Test([MarshalAs((short)70)] int test) { }  
  
// IL from Ildasm.exe output  
.method public hidebysig instance void  
  Test(int32  marshal({ 46 }) test) cil managed  
  
```  
  
 Начиная с [!INCLUDE[net_v45](../../../includes/net-v45-md.md)], программа Ildasm.exe отображает атрибуты, применяемые к реализации интерфейса, как показано в следующем примере из вывода Ildasm.exe:  
  
```  
.class public auto ansi beforefieldinit MyClass  
  extends [mscorlib]System.Object  
  implements IMyInterface  
  {  
    .interfaceimpl type IMyInterface  
    .custom instance void  
      [mscorlib]System.Diagnostics.DebuggerNonUserCodeAttribute::.ctor() = ( 01 00 00 00 )  
      …  
  
```  
  
## Примеры  
 Приведенная ниже команда выводит метаданные и дизассемблированный код PE\-файла `MyHello.exe` в стандартном графическом интерфейсе пользователя программы Ildasm.exe.  
  
```  
ildasm myHello.exe  
```  
  
 Следующая команда дизассемблирует файл `MyFile.exe` и сохраняет полученный текст на языке IL в файле `MyFile.il`.  
  
```  
ildasm MyFile.exe /output:MyFile.il  
```  
  
 Следующая команда дизассемблирует файл `MyFile.exe` и отображает полученный текст на языка IL в окне консоли.  
  
```  
ildasm MyFile.exe /text  
```  
  
 Если файл `MyApp.exe` содержит внедренные управляемые и неуправляемые ресурсы, в результате выполнения следующей команды будет создано четыре файла: `MyApp.il`, `MyApp.res`, `Icons.resources,`  и `Message.resources`.  
  
```  
ildasm MyApp.exe /output:MyApp.il  
```  
  
 Приведенная ниже команда дизассемблирует метод `MyMethod` класса `MyClass` в файле `MyFile.exe` и выводит результат в окно консоли.  
  
```  
ildasm /item:MyClass::MyMethod MyFile.exe /text  
```  
  
 В предыдущем примере допустимо наличие нескольких методов с именем `MyMethod` и различными подписями.  Приведенная ниже команда дизассемблирует метод экземпляра `MyMethod` с типом возвращаемого значения **void** и типами параметров **int32** и **string**.  
  
```  
ildasm /item:"MyClass::MyMethod(instance void(int32,string)" MyFile.exe /text  
```  
  
> [!NOTE]
>  В версиях 1.0 и 1.1 платформы .NET Framework открывающей скобке, которая следует за именем метода, должна соответствовать закрывающая скобка после подписи: `MyMethod(instance void(int32))`.  Начиная с .NET Framework 2.0 закрывающую круглую скобку необходимо опустить: `MyMethod(instance void(int32)`.  
  
 Чтобы извлечь метод `static` \(метод `Shared` в Visual Basic\), следует опустить ключевое слово `instance`.  Типы классов, которые не являются простыми типами \(такими как `int32` и `string`\), должны включать пространство имен и предваряться ключевым словом `class`.  Перед внешними типами должно быть указано имя соответствующей библиотеки в квадратных скобках.  Приведенная ниже команда дизассемблирует статический метод с именем `MyMethod`, который имеет один параметр с типом <xref:System.AppDomain> и возвращает значение с типом <xref:System.AppDomain>.  
  
```  
ildasm /item:"MyClass::MyMethod(class [mscorlib]System.AppDomain(class [mscorlib]System.AppDomain)" MyFile.exe /text  
```  
  
 Вложенному типу должен предшествовать его класс контейнер, отделенный знаком косой черты.  Например, если класс `MyNamespace.MyClass` содержит вложенный класс с именем `NestedClass`, этот вложенный класс указывается следующим образом: `class MyNamespace.MyClass/NestedClass`.  
  
## См. также  
 [Tools](../../../docs/framework/tools/index.md)   
 [Ilasm.exe \(IL Assembler\)](../../../docs/framework/tools/ilasm-exe-il-assembler.md)   
 [Процесс управляемого выполнения](../../../docs/standard/managed-execution-process.md)   
 [Командные строки](../../../docs/framework/tools/developer-command-prompt-for-vs.md)