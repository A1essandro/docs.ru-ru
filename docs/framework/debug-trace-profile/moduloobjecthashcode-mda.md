---
title: "moduloObjectHashcode MDA | Microsoft Docs"
ms.custom: ""
ms.date: "03/30/2017"
ms.prod: ".net-framework"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "dotnet-clr"
ms.tgt_pltfrm: ""
ms.topic: "article"
dev_langs: 
  - "VB"
  - "CSharp"
  - "C++"
  - "jsharp"
helpviewer_keywords: 
  - "managed debugging assistants (MDAs), hashcode modulus"
  - "Modulo object hash code"
  - "moduloObjectHashcode MDA"
  - "hashcode modulus"
  - "MDAs (managed debugging assistants), hashcode modulus"
  - "GetHashCode method"
  - "modulus of hashcodes"
ms.assetid: b45366ff-2a7a-4b8e-ab01-537b72e9de68
caps.latest.revision: 10
author: "mairaw"
ms.author: "mairaw"
manager: "wpickett"
caps.handback.revision: 10
---
# moduloObjectHashcode MDA
Помощник по отладке управляемого кода \(MDA\) `moduloObjectHashcode` изменяет поведение класса <xref:System.Object> для выполнения операции по модулю в хэш\-коде, возвращаемом методом <xref:System.Object.GetHashCode%2A>.  Остаток целочисленного деления по умолчанию для данного помощника по отладке управляемого кода равен 1, вследствие чего <xref:System.Object.GetHashCode%2A> возвращает значение 0 для всех объектов.  
  
## Признаки  
 После перехода к новой версии среды CLR программа работает некорректно.  
  
-   Программа получает от коллекции <xref:System.Collections.Hashtable> неправильный объект.  
  
-   Сбой в программе произошел в результате изменения порядка перечисления в коллекции <xref:System.Collections.Hashtable>.  
  
-   Два объекта, которые ранее были равнозначными, стали неравнозначны.  
  
-   Два объекта, которые раньше были неравнозначны, стали равнозначными.  
  
## Причина  
 Возможно, программа получает из коллекции <xref:System.Collections.Hashtable> неправильный объект, поскольку реализация метода <xref:System.Object.Equals%2A> в классе, применяемого к ключам коллекции <xref:System.Collections.Hashtable>, проверяет объекты на предмет равенства путем сравнения результатов вызова метода <xref:System.Object.GetHashCode%2A>.  Для проверки объектов на равенство не следует использовать хэш\-коды, поскольку два объекта могут иметь одинаковый хэш\-код даже в том случае, если соответствующие поля объектов содержат различные значения.  Возможны конфликты хэш\-кода, хотя на практике такое случается редко.  В результате это влияет на таблицу подстановки <xref:System.Collections.Hashtable> следующим образом: два ключа, которые не являются равнозначными, становятся равнозначными, и из коллекции <xref:System.Collections.Hashtable> возвращается неправильный объект.  В целях обеспечения производительности реализация метода <xref:System.Object.GetHashCode%2A> может изменяться в зависимости от версии среды выполнения, поэтому конфликты, которые не происходят в одной версии, вполне могут случиться в последующих версиях.  Данный помощник по отладке управляемого кода следует активировать, чтобы проверить код на предмет наличия ошибок при возникновении конфликта хэш\-кодов.  При активации данного помощника по отладке управляемого кода метод <xref:System.Object.GetHashCode%2A> возвращает значение 0, в результате чего возникает конфликт всех хэш\-кодов.  Единственным эффектом включения данного помощника по отладке управляемого кода должно быть некоторое замедление работы программы.  
  
 Порядок перечисления в коллекции <xref:System.Collections.Hashtable> может изменяться в зависимости от версии среды выполнения, если меняется алгоритм, используемый для вычисления хэш\-кодов ключа.  Чтобы проверить, удалось ли программе устранить из хэш\-таблицы зависимость от порядка перечисления ключей или значений, следует включить данный помощник по отладке управляемого кода.  
  
## Решение  
 Нельзя использовать хэш\-коды как альтернативу идентификации объекта.  Следует реализовать переопределение метода <xref:System.Object.Equals%2A?displayProperty=fullName>, чтобы избежать сравнения хэш\-кодов.  
  
 Не следует создавать в хэш\-таблицах зависимости от порядка перечисления ключей или значений.  
  
## Влияние на среду выполнения  
 Если данный помощник по отладке управляемого кода включен, работа приложения может замедлиться.  Данный помощник по отладке управляемого кода вместо ожидаемого хэш\-кода возвращает остаток при делении на абсолютное значение.  
  
## Output  
 Данный помощник по отладке управляемого кода не дает результата.  
  
## Configuration  
 Атрибут `modulus` определяет остаток целочисленного значения, используемый в хэш\-коде.  Значение по умолчанию — 1.  
  
```  
<mdaConfig>  
  <assistants>  
    <moduloObjectHashcode modulus="1" />  
  </assistants>  
</mdaConfig>  
```  
  
## См. также  
 <xref:System.Object.GetHashCode%2A?displayProperty=fullName>   
 <xref:System.Object.Equals%2A?displayProperty=fullName>   
 [Diagnosing Errors with Managed Debugging Assistants](../../../docs/framework/debug-trace-profile/diagnosing-errors-with-managed-debugging-assistants.md)