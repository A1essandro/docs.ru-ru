---
title: "is (Справочник по C#) | Документы Майкрософт"
keywords: "ключевое слово is(C#), is (C#)"
ms.date: 2017-02-17
ms.prod: .net
ms.technology:
- devlang-csharp
ms.topic: article
f1_keywords:
- is_CSharpKeyword
- is
dev_langs:
- CSharp
helpviewer_keywords:
- is keyword [C#]
ms.assetid: bc62316a-d41f-4f90-8300-c6f4f0556e43
caps.latest.revision: 20
author: BillWagner
ms.author: wiwagn
translation.priority.ht:
- cs-cz
- de-de
- es-es
- fr-fr
- it-it
- ja-jp
- ko-kr
- pl-pl
- pt-br
- ru-ru
- tr-tr
- zh-cn
- zh-tw
ms.translationtype: Human Translation
ms.sourcegitcommit: a06bd2a17f1d6c7308fa6337c866c1ca2e7281c0
ms.openlocfilehash: c0d300dbb47e64d2425f8af3bc6a819b145786fa
ms.contentlocale: ru-ru
ms.lasthandoff: 03/13/2017

---
# <a name="is-c-reference"></a>is (Справочник по C#) #

Проверяет совместимость объекта с заданным типом или (начиная с C# 7) проверяет выражение на соответствие шаблону.

## <a name="testing-for-type-compatibility"></a>Тестирование на совместимость типов ##

Ключевое слово `is` оценивает совместимость типов во время выполнения. Оно определяет, может ли экземпляр объекта или результат выражения быть преобразован в указанный тип. Он имеет следующий синтаксис:

```csharp
   expr is type
```

где *expr* — это выражение, значением которого является экземпляр какого-либо типа, а *type* — это имя типа, в который должен быть преобразован результат *expr*. Оператор `is` принимает значение `true`, если выражение *expr* отлично от NULL и объект, являющийся результатом вычисления выражения, может быть преобразован в тип *type*. В противном случае возвращается `false`.

Например, следующий код определяет, может ли `obj` быть приведен к экземпляру типа `Person`:

[!code-cs[is#1](../../../../samples/snippets/csharp/language-reference/keywords/is/is1.cs#1)]

Оператор `is` принимает значение true, если:

- *expr* представляет собой экземпляр того же типа, что и *type*;

- *expr* является экземпляром типа, производного от *type*. Другими словами, результат *expr* может быть приведен с повышением к экземпляру *type*.

- *expr* имеет тип времени компиляции, который является базовым классом для *type*, и *expr* имеет тип среды выполнения, который является *type* или производным от *type*. *Тип времени компиляции* переменной представляет собой тип переменной, как определено в объявлении. *Тип среды выполнения* переменной представляет собой тип экземпляра, назначенный этой переменной.

- *expr* является экземпляром типа, который реализует интерфейс *type*.

В следующем примере показано, что выражение `is` принимает значение `true` для каждого из этих преобразований.

[!code-cs[is#3](../../../../samples/snippets/csharp/language-reference/keywords/is/is3.cs#3)]

Ключевое слово `is` создает предупреждение во время компиляции, если известно, что выражение всегда будет иметь значение `true` или `false`. Оно рассматривает только преобразование ссылок, упаковки-преобразования и распаковки-преобразования. Определенные пользователем преобразования или преобразования, определенные с помощью операторов [implicit](implicit.md) и [explicit](explicit.md) типа не учитываются. Следующий пример создает предупреждения, так как результат преобразования известен во время компиляции. Обратите внимание, что выражение `is` для преобразований из `int` в `long` и `double` возвращает значение false, так как эти преобразования обрабатываются оператором [implicit](implicit.md).

[!code-cs[is#2](../../../../samples/snippets/csharp/language-reference/keywords/is/is2.cs#2)]

`expr` может быть любым выражением, возвращающим значение, за исключением анонимных методов и лямбда-выражений. В следующем примере используется `is` для определения возвращаемого значения вызова метода.   
[!code-cs[is#4](../../../../samples/snippets/csharp/language-reference/keywords/is/is4.cs#4)]

Начиная с C# 7 можно использовать сопоставление шаблонов с [шаблоном типа](#type), чтобы создавать лаконичный код, использующий оператор `is`.

## <a name="pattern-matching-with-is"></a>Сопоставление шаблонов с `is` ##

Начиная с C# 7 операторы `is` и [switch](../../../csharp/language-reference/keywords/switch.md) поддерживают сопоставление шаблонов. Ключевое слово `is` поддерживает следующие шаблоны:

- [Шаблон типа](#type), который проверяет, можно ли преобразовать выражение в указанный тип и, если можно, приводит его к переменной этого типа.

- [Шаблон константы](#constant), который проверяет, получает ли выражение указанное постоянное значение.

- [Шаблон переменной](#var) — совпадение всегда является успешным и привязывает значение выражения к новой локальной переменной. 

### <a name="type" /> Шаблон типа </a>

При использовании шаблона типа для сопоставления шаблонов `is` проверяет, можно ли преобразовать выражение в указанный тип и, если это возможно, приводит его к переменной этого типа. Это просто расширение оператора `is`, для краткого определения и преобразования типа. Шаблон типа `is` имеет следующий общий вид:

```csharp
   expr is type varname 
```

где *expr* — это выражение, значением которого является экземпляр какого-либо типа, *type* — это имя типа, в который должен быть преобразован результат *expr*, *varname* — это объект, в который преобразуется результат *expr*, если проверка `is` возвращает значение `true`. 

Выражение `is` имеет значение `true`, если выполняется одно из следующих условий:

- *expr* представляет собой экземпляр того же типа, что и *type*;

- *expr* является экземпляром типа, производного от *type*. Другими словами, результат *expr* может быть приведен с повышением к экземпляру *type*.

- *expr* имеет тип времени компиляции, который является базовым классом для *type*, и *expr* имеет тип среды выполнения, который является *type* или производным от *type*. *Тип времени компиляции* переменной представляет собой тип переменной, как определено в объявлении. *Тип среды выполнения* переменной представляет собой тип экземпляра, назначенный этой переменной.

- *expr* является экземпляром типа, который реализует интерфейс *type*.

Если *exp* имеет значение `true` и `is` используется с оператором `if`, назначается *varname* и получает локальную область видимости в пределах только оператора `if`.

В следующем примере используется шаблон типа `is` для реализации метода типа <xref:System.IComparable.CompareTo(System.Object)?displayProperty=fullName>.

[!code-cs[is#5](../../../../samples/snippets/csharp/language-reference/keywords/is/is-type-pattern5.cs#5)]

Без сопоставления шаблонов этот код может быть написан следующим образом. При использовании шаблона типа создается более лаконичный и удобочитаемый код, причем проверять результат преобразования (`null`) не требуется.  

[!code-cs[is#6](../../../../samples/snippets/csharp/language-reference/keywords/is/is-type-pattern6.cs#6)]

Шаблон типа `is` также позволяет создавать более компактный код при определении типа для типа значения. В следующем примере используется шаблон типа `is`, чтобы определить, является ли объект экземпляром `Person` или `Dog` перед отображением значения соответствующего свойства. 

[!code-cs[is#9](../../../../samples/snippets/csharp/language-reference/keywords/is/is-type-pattern9.cs#9)]

Для эквивалентного кода без сопоставления шаблонов требуется отдельное назначение, которое включает явное приведение.

[!code-cs[is#10](../../../../samples/snippets/csharp/language-reference/keywords/is/is-type-pattern10.cs#10)]

### <a name="a-nameconstant--constant-pattern"></a><a name="constant" /> Шаблон константы ###

При выполнении сопоставления с шаблоном константы `is` проверяет, равно ли выражение указанной константе. В C# 6 и более ранних версиях шаблон константы поддерживается оператором [switch](switch.md). Начиная с C# 7 он поддерживается и оператором `is`. Он имеет следующий синтаксис:

```csharp
   expr is constant
```

где *expr* — это выражение для вычисления, а *constant* — это значение, которое нужно проверить. *constant* может быть любой из следующих константных выражений: 

- литеральное значение;

- имя объявленной переменной `const`;

- константа перечисления.

Константное выражение вычисляется следующим образом.

- Если *expr* и *constant* являются целочисленными типами, оператор равенства C# определяет, возвращает ли выражение `true` (то есть выполняется ли условие `expr == constant`).

- В противном случае значение выражения определяется с помощью вызова статического метода [Object.Equals (expr, constant)](xref:System.Object.Equals(System.Object,System.Object)).  

В следующем примере шаблон типа и шаблон константы объединяются для проверки того, является ли объект экземпляром `Dice` и, если это так, определяют, равно ли 6 значение броска кости.

[!code-cs[is#7](../../../../samples/snippets/csharp/language-reference/keywords/is/is-const-pattern7.cs#7)]
 
### <a name="var" /> Шаблон переменной </a>

Сопоставление шаблону переменной всегда завершается успешно. Оно имеет следующий синтаксис:

```csharp 
   expr is var varname
```

где значение *expr* всегда назначается локальной переменной с именем *varname*. *varname* является статической переменной того же типа, что и *expr*. В следующем примере шаблон переменной используется для назначения выражения переменной с именем `obj`. Затем отображается значение и тип `obj`.

[!code-cs[is#8](../../../../samples/snippets/csharp/language-reference/keywords/is/is-var-pattern8.cs#8)]

Обратите внимание, что если *expr* — `null`, `is` выражение, по-прежнему имеет значение true и назначает `null` для *varname*. 

# <a name="c-language-specification"></a>Спецификация языка C#
  
[!INCLUDE[CSharplangspec](~/includes/csharplangspec-md.md)]  
  
## <a name="see-also"></a>См. также  
 [Справочник по C#](../../../csharp/language-reference/index.md)   
 [Ключевые слова C#](../../../csharp/language-reference/keywords/index.md)   
 [typeof](../../../csharp/language-reference/keywords/typeof.md)   
 [as](../../../csharp/language-reference/keywords/as.md)   
 [Ключевые слова операторов](../../../csharp/language-reference/keywords/operator-keywords.md)

