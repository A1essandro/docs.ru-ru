---
title: "Новые возможности C# 7.1"
description: "Общие сведения о новых функциях в C# 7.1."
keywords: "C# конструкции языка, 7.1, Visual Studio 2017 г.,"
author: billwagner
ms.author: wiwagn
ms.date: 08/16/2017
ms.topic: article
ms.prod: .net
ms.devlang: devlang-csharp
ms.openlocfilehash: 02f1f8fc8f0a3221e00e2a3c43ce06423ca43672
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/18/2017
---
# <a name="whats-new-in-c-71"></a>Новые возможности C# 7.1

7.1 C# находится в первом выпуске точки для языка C#. Он отмечает последовательность Повышенная выпусков для языка. Можно использовать новые функции раньше, в идеале при готовности каждой новой функции. 7.1 C# добавляет возможность настройки компилятора в соответствии с указанной версией языка. Позволяет отделить решение обновление средств решение для обновления версии языка.

Добавляет C# 7.1 [Выбор версии языка](#language-version-selection) элемента конфигурации, три новые возможности языка и новое поведение компилятора.

Ниже перечислены новые возможности языка в этом выпуске

* [`async``Main` метод](#async-main)
  - Точка входа для приложения может иметь `async` модификатор.
* [`default`литеральные выражения](#default-literal-expressions)
  - Литеральные выражения по умолчанию можно использовать в выражениях значение по умолчанию, если целевой тип может быть выведен.
* [Имена элементов выводимых кортежа](#inferred-tuple-element-names)
  - Имена элементов кортежа может быть выведен из кортежей инициализации во многих случаях.

Наконец, у компилятора имеются два варианта `/refout` и `/refonly` этого элемента управления [ссылаются на создание сборки](#reference-assembly-generation).

## <a name="language-version-selection"></a>Выбор версии языка

Компилятор C# поддерживает 7.1 C#, начиная с версии 15,3 2017 г. Visual Studio или .NET Core SDK 2.0. Тем не менее 7.1 компоненты отключены по умолчанию. Чтобы включить функции 7.1, необходимо изменить параметр версии языка для проекта.

В Visual Studio, щелкните правой кнопкой мыши узел проекта в обозревателе решений и выберите **свойства**. Выберите **построения** и выберите **Дополнительно** кнопки. В раскрывающемся списке выберите **C# последняя вспомогательная версия (последняя)**, или конкретная версия **C# 7.1** как показано в следующем изображения. `latest` Значение указывает, будет использоваться последняя вспомогательная версия на текущем компьютере. `C# 7.1` Означает, что вы хотите использовать C# 7.1, даже после выпускаются новые дополнительный номер версии.

![Установка на английском языке](./media/csharp-7-1/advanced-build-settings.png)

Кроме того можно изменить файл «csproj» и добавьте или измените следующие строки:

```xml
<PropertyGroup>
  <LangVersion>latest</LangVersion>
</PropertyGroup>
```

> [!NOTE]
> Если вы используете интегрированную среду разработки Visual Studio для обновления файлов csproj, IDE создает отдельные узлы для каждой конфигурации сборки. Вы будете обычно устанавливается значение же во всех конфигурациях сборки, но необходимо задать явным образом для каждой конфигурации сборки, или выберите «Все конфигурации» после изменения этого параметра. Вы увидите следующее в csproj-файле:

```xml
<PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|AnyCPU'">
  <LangVersion>latest</LangVersion>
</PropertyGroup>

<PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|AnyCPU'">
  <LangVersion>latest</LangVersion>
</PropertyGroup>
```

Допустимые значения для `LangVersion` являются:

* `ISO-1`
* `ISO-2`
* `3`
* `4`
* `5`
* `6`
* `7`
* `7.1`
* `default`
* `latest`

Специальные строки `default` и `latest` решения до последних версий основной и дополнительный язык установлен на компьютере построения, соответственно.

Этот параметр выполняет установку новых версий пакета SDK и средств в среде разработки в выборе внедрить новые возможности языка в проекте. Последние версии пакета SDK и средства можно установить на компьютере сборки. Каждый проект можно настроить для использования определенной версии языка для его сборки.

## <a name="async-main"></a>Основной Async

*Async основной* метод дает возможность использовать `await` в ваш `Main` метод.
Ранее вы должны были написать:

```csharp
static int Main()
{
    return DoAsyncWork().GetAwaiter().GetResult();
}
```

Теперь можно написать:

```csharp
static async Task<int> Main()
{
    // This could also be replaced with the body
    // DoAsyncWork, including its await expressions:
    return await DoAsyncWork();
}
```

Если программа не возвращает код выхода, можно объявить `Main` метод, возвращающий <xref:System.Threading.Tasks.Task>:

```csharp
static async Task Main()
{
    await SomeAsyncMethod();
}
```

Дополнительные подробные сведения в [async основной](../programming-guide/main-and-command-args/index.md) раздела руководства программирования.

## <a name="default-literal-expressions"></a>Литеральные выражения по умолчанию

Литеральные выражения по умолчанию — это усовершенствование выражения значения по умолчанию.
Эти выражения инициализации переменной значение по умолчанию. Где вы ранее написать:

```csharp
Func<string, bool> whereClause = default(Func<string, bool>);
```

Теперь можно опустить тип с правой стороны инициализации:

```csharp
Func<string, bool> whereClause = default;
```

Дополнительные сведения о этого компонента в разделе Руководство по программированию C# на [выражения значения по умолчанию](../programming-guide/statements-expressions-operators/default-value-expressions.md).

Это расширение также изменяет некоторые правила синтаксического разбора для [ключевое слово default](../language-reference/keywords/default.md).

## <a name="inferred-tuple-element-names"></a>Имена элементов выводимых кортежа

Эта возможность очень небольшое улучшение для функции кортежей, была представлена в C# 7.0. Много раз при инициализации кортеж переменных, используемых для правой части назначения совпадают с именами, которые будут отправлены для элементов кортежа:

```csharp
int count = 5;
string label = "Colors used in the map";
var pair = (count: count, label: label);
```

Имена элементов кортежа может быть выведен из переменных, используемых для инициализации кортеж в C# 7.1:

```csharp
int count = 5;
string label = "Colors used in the map";
var pair = (count, label); // element names are "count" and "label"
```

Дополнительные сведения об этой возможности в [кортежей](../tuples.md) раздела.

## <a name="reference-assembly-generation"></a>Создание сборки ссылок

Существует два варианта компилятора, которые создают *только для ссылки сборкам*: [/refout](../language-reference/compiler-options/refout-compiler-option.md) и [/refonly](../language-reference/compiler-options/refonly-compiler-option.md).
В связанных разделах описаны эти параметры и ссылочные сборки более подробно.
