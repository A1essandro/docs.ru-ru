---
title: Практическое руководство. Сравнение строк (руководство по C#)
description: Сведения о том, как сравнивать и упорядочивать строковые значения с учетом или без учета регистра и порядка для определенного языка.
ms.date: 03/20/2018
helpviewer_keywords:
- strings [C#], comparison
- comparing strings [C#]
ms.openlocfilehash: 3c841a1152613ec877bb6172dc8d053bf060b33b
ms.sourcegitcommit: efff8f331fd9467f093f8ab8d23a203d6ecb5b60
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/03/2018
ms.locfileid: "43484106"
---
# <a name="how-to-compare-strings-in-c"></a><span data-ttu-id="58b72-103">Сравнение строк в C\#</span><span class="sxs-lookup"><span data-stu-id="58b72-103">How to compare strings in C\#</span></span>

<span data-ttu-id="58b72-104">Сравнивая строки, вы хотите ответить на один из двух вопросов: "Равны ли две эти строки?"</span><span class="sxs-lookup"><span data-stu-id="58b72-104">You compare strings to answer one of two questions: "Are these two strings equal?"</span></span> <span data-ttu-id="58b72-105">или "В каком порядке должны следовать эти строки при их сортировке?".</span><span class="sxs-lookup"><span data-stu-id="58b72-105">or "In what order should these strings be placed when sorting them?"</span></span>

<span data-ttu-id="58b72-106">Однако эту задачу осложняют факторы, влияющие на сравнение строк:</span><span class="sxs-lookup"><span data-stu-id="58b72-106">Those two questions are complicated by factors that affect string comparisons:</span></span>

- <span data-ttu-id="58b72-107">Вы можете выбрать порядковое или лингвистическое сравнение.</span><span class="sxs-lookup"><span data-stu-id="58b72-107">You can choose an ordinal or linguistic comparison.</span></span>
- <span data-ttu-id="58b72-108">Вы можете указать, учитывается ли регистр.</span><span class="sxs-lookup"><span data-stu-id="58b72-108">You can choose if case matters.</span></span>
- <span data-ttu-id="58b72-109">Вы можете выбрать сравнения для конкретного языка.</span><span class="sxs-lookup"><span data-stu-id="58b72-109">You can choose culture specific comparisons.</span></span>
- <span data-ttu-id="58b72-110">Лингвистические сравнения зависят от языка и региональных параметров, а также от используемой платформы.</span><span class="sxs-lookup"><span data-stu-id="58b72-110">Linguistic comparisions are culture and platform dependent.</span></span>

[!INCLUDE[interactive-note](~/includes/csharp-interactive-note.md)]

<span data-ttu-id="58b72-111">При сравнении строк вы определяете их порядок.</span><span class="sxs-lookup"><span data-stu-id="58b72-111">When you compare strings, you define an order among them.</span></span> <span data-ttu-id="58b72-112">Сравнения используются для сортировки последовательности строк.</span><span class="sxs-lookup"><span data-stu-id="58b72-112">Comparisons are used to sort a sequence of strings.</span></span> <span data-ttu-id="58b72-113">Если последовательность имеет известный порядок, это упрощает поиск как для программного обеспечения, так и для пользователей.</span><span class="sxs-lookup"><span data-stu-id="58b72-113">Once the sequence is in a known order, it is easier to search, both for software and for humans.</span></span> <span data-ttu-id="58b72-114">Другие сравнения могут проверять совпадение строк.</span><span class="sxs-lookup"><span data-stu-id="58b72-114">Other comparisons may check if strings are the same.</span></span> <span data-ttu-id="58b72-115">Эти проверки тождественности похожи на проверки равенства, но позволяют игнорировать некоторые различия, например различия в регистре.</span><span class="sxs-lookup"><span data-stu-id="58b72-115">These sameness checks are similar to equality, but some differences, such as case differences, may be ignored.</span></span>

## <a name="default-ordinal-comparisons"></a><span data-ttu-id="58b72-116">Порядковые сравнения по умолчанию</span><span class="sxs-lookup"><span data-stu-id="58b72-116">Default ordinal comparisons</span></span>

<span data-ttu-id="58b72-117">Самые распространенные операции — <xref:System.String.CompareTo%2A?displayProperty=nameWithType> и <xref:System.String.Equals%2A?displayProperty=nameWithType> или <xref:System.String.op_Equality%2A?displayProperty=nameWithType> — используют порядковое сравнение, сравнение с учетом регистра и текущие значения языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="58b72-117">The most common operations, <xref:System.String.CompareTo%2A?displayProperty=nameWithType> and <xref:System.String.Equals%2A?displayProperty=nameWithType> or <xref:System.String.op_Equality%2A?displayProperty=nameWithType> use an ordinal comparison, a case-sensitive comparison, and use the current culture.</span></span> <span data-ttu-id="58b72-118">Соответствующие результаты показаны в примере ниже.</span><span class="sxs-lookup"><span data-stu-id="58b72-118">The results are shown in the following example.</span></span>

[!code-csharp-interactive[Comparing strings using an ordinal comparison](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#1)]

<span data-ttu-id="58b72-119">При порядковых сравнениях строк лингвистические правила не учитываются.</span><span class="sxs-lookup"><span data-stu-id="58b72-119">Ordinal comparisons do not take linguistic rules into account when comparing strings.</span></span> <span data-ttu-id="58b72-120">В них строки сравниваются посимвольно.</span><span class="sxs-lookup"><span data-stu-id="58b72-120">They will compare the strings character by character.</span></span> <span data-ttu-id="58b72-121">В сравнениях с учетом регистра используется регистр.</span><span class="sxs-lookup"><span data-stu-id="58b72-121">Case-sensitive comparisons use capitalization in their comparisons.</span></span> <span data-ttu-id="58b72-122">Об этих методах сравнения по умолчанию важнее всего знать то, что так как они используют текущие значения языка и региональных параметров, результаты зависят от языкового стандарта и параметров языка на компьютере, где выполняется сравнение.</span><span class="sxs-lookup"><span data-stu-id="58b72-122">The most important point about these default comparison methods is that because they use the current culture, the results depend on the locale and language settings of the machine where they run.</span></span> <span data-ttu-id="58b72-123">Эти методы не подходят для сравнений, где требуется соблюсти определенный порядок на разных компьютерах или в разных расположениях.</span><span class="sxs-lookup"><span data-stu-id="58b72-123">These comparisons are unsuitable for comparisons where order should be consistent across machines or locations.</span></span>

## <a name="case-insensitive-ordinal-comparisons"></a><span data-ttu-id="58b72-124">Порядковые сравнения без учета регистра</span><span class="sxs-lookup"><span data-stu-id="58b72-124">Case-insensitive ordinal comparisons</span></span>

<span data-ttu-id="58b72-125">Метод <xref:System.String.Equals%2A?displayProperty=nameWithType> позволяет указать значение <xref:System.StringComparison> для объекта <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="58b72-125">The <xref:System.String.Equals%2A?displayProperty=nameWithType> method enables you to specify a <xref:System.StringComparison> value of <xref:System.StringComparison.OrdinalIgnoreCase?displayProperty=nameWithType></span></span>
<span data-ttu-id="58b72-126">для сравнения без учета регистра.</span><span class="sxs-lookup"><span data-stu-id="58b72-126">to specify a case-insensitive comparison.</span></span> <span data-ttu-id="58b72-127">Присутствует также статический метод <xref:System.String.Compare%2A> с логическим аргументом, позволяющим проводить сравнение без учета регистра.</span><span class="sxs-lookup"><span data-stu-id="58b72-127">There is also a static <xref:System.String.Compare%2A> method that includes a boolean argument to specify case-insensitive comparisons.</span></span> <span data-ttu-id="58b72-128">Это показано в следующем коде:</span><span class="sxs-lookup"><span data-stu-id="58b72-128">These are shown in the following code:</span></span>

[!code-csharp-interactive[Comparing strings ignoring case](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#2)]

## <a name="linguistic-comparisons"></a><span data-ttu-id="58b72-129">Лингвистические сравнения</span><span class="sxs-lookup"><span data-stu-id="58b72-129">Linguistic comparisons</span></span>

<span data-ttu-id="58b72-130">Строки могут быть упорядочены с использованием лингвистических правил для текущих значений языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="58b72-130">Strings can also be ordered using linguistic rules for the current culture.</span></span>
<span data-ttu-id="58b72-131">Иногда это называется порядком сортировки слов.</span><span class="sxs-lookup"><span data-stu-id="58b72-131">This is sometimes referred to as "word sort order."</span></span> <span data-ttu-id="58b72-132">При лингвистическом сравнении некоторые символы Юникода, отличные от алфавитно-цифровых, могут иметь особые весовые коэффициенты.</span><span class="sxs-lookup"><span data-stu-id="58b72-132">When you perform a linguistic comparision, some nonalphanumeric Unicode characters might have special weights assigned.</span></span> <span data-ttu-id="58b72-133">Например, дефис "-" может иметь очень низкий весовой коэффициент, чтобы слова "co-op" и "coop" находились рядом друг с другом в порядке сортировки.</span><span class="sxs-lookup"><span data-stu-id="58b72-133">For example, the hyphen "-" may have a very small weight assigned to it so that "co-op" and "coop" appear next to each other in sort order.</span></span> <span data-ttu-id="58b72-134">Кроме того, некоторые символы Юникода могут быть эквивалентны последовательности буквенно-цифровых символов.</span><span class="sxs-lookup"><span data-stu-id="58b72-134">In addition, some Unicode characters may be equivalent to a sequence of alphanumeric characters.</span></span> <span data-ttu-id="58b72-135">В следующем примере используется фраза "Они танцуют на улице."</span><span class="sxs-lookup"><span data-stu-id="58b72-135">The following example uses the phrase "They dance in the street."</span></span> <span data-ttu-id="58b72-136">на немецком языке с буквами "ss" и "ß".</span><span class="sxs-lookup"><span data-stu-id="58b72-136">in German with the "ss" and 'ß'.</span></span> <span data-ttu-id="58b72-137">Лингвистически (в Windows) буквы "ss" равнозначны немецкому символу эсцет "ß" в языках "en-US" и "de-DE".</span><span class="sxs-lookup"><span data-stu-id="58b72-137">Linguistically (in Windows), "ss" is equal to the German Essetz: 'ß' character in both "en-US" and "de-DE" cultures.</span></span>

[!code-csharp-interactive[Comparing strings using linguistic rules](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#3)]

<span data-ttu-id="58b72-138">Этот пример демонстрирует зависимость операций лингвистического сравнения от операционной системы.</span><span class="sxs-lookup"><span data-stu-id="58b72-138">This sample demonstrates the operating system dependent nature of linguistic comparisons.</span></span> <span data-ttu-id="58b72-139">Для интерактивного окна используется узел Linux.</span><span class="sxs-lookup"><span data-stu-id="58b72-139">The host for the interactive window is a Linux host.</span></span> <span data-ttu-id="58b72-140">Лингвистические и порядковые сравнения дают одинаковые результаты.</span><span class="sxs-lookup"><span data-stu-id="58b72-140">The linguistic and ordinal comparisons produce the same results.</span></span> <span data-ttu-id="58b72-141">Если запустить этот пример на узле Windows, отображаются следующие выходные данные:</span><span class="sxs-lookup"><span data-stu-id="58b72-141">If you ran this same sample on a Windows host, you would see the following output:</span></span>

```console
<coop> is less than <co-op> using invariant culture
<coop> is greater than <co-op> using ordinal comparison
<coop> is less than <cop> using invariant culture
<coop> is less than <cop> using ordinal comparison
<co-op> is less than <cop> using invariant culture
<co-op> is less than <cop> using ordinal comparison
```

<span data-ttu-id="58b72-142">В Windows порядок сортировки "cop", "coop" и "co-op" изменяется при переходе от лингвистического сравнения к порядковому.</span><span class="sxs-lookup"><span data-stu-id="58b72-142">On Windows, the sort order of "cop", "coop", and "co-op" change when you change from a linguistic comparison to an ordinal comparison.</span></span> <span data-ttu-id="58b72-143">Два предложения на немецком языке также сравниваются по-разному при использовании разных типов сравнения.</span><span class="sxs-lookup"><span data-stu-id="58b72-143">The two German sentences also compare differently using the different comparison types.</span></span>

## <a name="comparisons-using-specific-cultures"></a><span data-ttu-id="58b72-144">Сравнения с использованием определенных языков и региональных параметров</span><span class="sxs-lookup"><span data-stu-id="58b72-144">Comparisons using specific cultures</span></span>

<span data-ttu-id="58b72-145">Этот пример сохраняет <xref:System.Globalization.CultureInfo> для текущего языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="58b72-145">This sample stores <xref:System.Globalization.CultureInfo> for the current culture.</span></span>
<span data-ttu-id="58b72-146">Исходный язык и региональные параметры можно задавать и получать в объекте текущего потока.</span><span class="sxs-lookup"><span data-stu-id="58b72-146">The original culture can be set and retrieved on the current thread object.</span></span> <span data-ttu-id="58b72-147">Сравнения выполняются с использованием значения <xref:System.StringComparison.CurrentCulture>, чтобы учесть язык и региональные параметры.</span><span class="sxs-lookup"><span data-stu-id="58b72-147">The comparisons are performed using the <xref:System.StringComparison.CurrentCulture> value to ensure a culture-specific comparison.</span></span>

<span data-ttu-id="58b72-148">Используемые значения языка и региональных параметров влияют на операции лингвистического сравнения.</span><span class="sxs-lookup"><span data-stu-id="58b72-148">The culture used affects linguistic comparisons.</span></span> <span data-ttu-id="58b72-149">В следующем примере показаны результаты сравнения двух предложений на немецком с использованием языка и региональных параметров "en US" и "de-DE":</span><span class="sxs-lookup"><span data-stu-id="58b72-149">The following example shows the results of comparing the two German sentences using the "en-US" culture and the "de-DE" culture:</span></span>

[!code-csharp-interactive[Comparing strings across cultures](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#4)]

<span data-ttu-id="58b72-150">Сравнения с учетом языка и региональных параметров обычно используются для сравнения и сортировки строк, вводимых пользователями.</span><span class="sxs-lookup"><span data-stu-id="58b72-150">Culture-sensitive comparisons are typically used to compare and sort strings input by users with other strings input by users.</span></span> <span data-ttu-id="58b72-151">Символы и правила сортировки этих строк могут различаться в зависимости от языкового стандарта компьютера пользователя.</span><span class="sxs-lookup"><span data-stu-id="58b72-151">The characters and sorting conventions of these strings might vary depending on the locale of the user's computer.</span></span> <span data-ttu-id="58b72-152">Даже строки, содержащие идентичные символы, могут быть отсортированы по-разному, в зависимости от языка и региональных параметров текущего потока.</span><span class="sxs-lookup"><span data-stu-id="58b72-152">Even strings that contain identical characters might sort differently depending on the culture of the current thread.</span></span> <span data-ttu-id="58b72-153">Кроме того, попробуйте запустить этот пример кода локально на компьютере с Windows, и вы получите следующие результаты:</span><span class="sxs-lookup"><span data-stu-id="58b72-153">In addition, try this sample code locally on a Windows machine, and you will the following results:</span></span>

```console
<coop> is less than <co-op> using en-US culture
<coop> is greater than <co-op> using ordinal comparison
<coop> is less than <cop> using en-US culture
<coop> is less than <cop> using ordinal comparison
<co-op> is less than <cop> using en-US culture
<co-op> is less than <cop> using ordinal comparison
```

<span data-ttu-id="58b72-154">Лингвистические сравнения зависят от текущих значений языка и региональных параметров, а также от операционной системы.</span><span class="sxs-lookup"><span data-stu-id="58b72-154">Linguistic comparisions are dependent on the current culture, and are OS dependent.</span></span> <span data-ttu-id="58b72-155">Это необходимо учитывать при работе со строковыми сравнениями.</span><span class="sxs-lookup"><span data-stu-id="58b72-155">You must take that into account when you work with string comparisons.</span></span>

## <a name="linguistic-sorting-and-searching-strings-in-arrays"></a><span data-ttu-id="58b72-156">Лингвистическая сортировка и поиск строк в массивах</span><span class="sxs-lookup"><span data-stu-id="58b72-156">Linguistic sorting and searching strings in arrays</span></span>

<span data-ttu-id="58b72-157">Приведенные ниже примеры показывают, как сортировать и искать строки в массиве с помощью лингвистического сравнения, зависящего от текущих значений языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="58b72-157">The following examples show how to sort and search for strings in an array using a linguistic comparison dependent on the current culture.</span></span> <span data-ttu-id="58b72-158">Используйте статические методы <xref:System.Array>, которые принимают параметр <xref:System.StringComparer?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="58b72-158">You use the static <xref:System.Array> methods that take a <xref:System.StringComparer?displayProperty=nameWithType> parameter.</span></span>

<span data-ttu-id="58b72-159">В этом примере показано, как сортировать массив строк с использованием текущих значений языка и региональных параметров:</span><span class="sxs-lookup"><span data-stu-id="58b72-159">This example shows how to sort an array of strings using the current culture:</span></span>

[!code-csharp-interactive[Sorting an array of strings](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#5)]

<span data-ttu-id="58b72-160">После сортировки массива можно выполнить поиск записей с помощью двоичного поиска.</span><span class="sxs-lookup"><span data-stu-id="58b72-160">Once the array is sorted, you can search for entries using a binary search.</span></span> <span data-ttu-id="58b72-161">Двоичный поиск начинается с середины коллекции, чтобы определить, какая половина коллекции содержит искомую строку.</span><span class="sxs-lookup"><span data-stu-id="58b72-161">A binary search starts in the middle of the collection to determine which half of the collection would contain the sought string.</span></span> <span data-ttu-id="58b72-162">Каждое последующее сравнение делит оставшуюся часть коллекции пополам.</span><span class="sxs-lookup"><span data-stu-id="58b72-162">Each subsequent comparison subdivides the remaining part of the collection in half.</span></span>  <span data-ttu-id="58b72-163">Массив сортируется с использованием <xref:System.StringComparer.CurrentCulture?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="58b72-163">The array is sorted using <xref:System.StringComparer.CurrentCulture?displayProperty=nameWithType>.</span></span> <span data-ttu-id="58b72-164">Локальная функция `ShowWhere` отображает сведения о том, где была найдена строка.</span><span class="sxs-lookup"><span data-stu-id="58b72-164">The local function `ShowWhere` displays information about where the string was found.</span></span> <span data-ttu-id="58b72-165">Если строка не найдена, возвращаемое значение указывает, где бы оно находилось, если было бы найдено.</span><span class="sxs-lookup"><span data-stu-id="58b72-165">If the string was not found, the returned value indicates where it would be if it were found.</span></span>

[!code-csharp-interactive[Searching in a sorted array](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#6)]

## <a name="ordinal-sorting-and-searching-in-collections"></a><span data-ttu-id="58b72-166">Порядковая сортировка и поиск в коллекциях</span><span class="sxs-lookup"><span data-stu-id="58b72-166">Ordinal sorting and searching in collections</span></span>

<span data-ttu-id="58b72-167">Следующий код использует класс коллекции <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> для хранения строк.</span><span class="sxs-lookup"><span data-stu-id="58b72-167">The following code uses the <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> collection class to store strings.</span></span> <span data-ttu-id="58b72-168">Строки сортируются с помощью метода <xref:System.Collections.Generic.List%601.Sort%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="58b72-168">The strings are sorted using the <xref:System.Collections.Generic.List%601.Sort%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="58b72-169">Этому методу нужен делегат, который сравнивает и упорядочивает две строки.</span><span class="sxs-lookup"><span data-stu-id="58b72-169">This method needs a delegate that compares and orders two strings.</span></span> <span data-ttu-id="58b72-170">Метод <xref:System.String.CompareTo%2A?displayProperty=nameWithType> предоставляет эту функцию сравнения.</span><span class="sxs-lookup"><span data-stu-id="58b72-170">The <xref:System.String.CompareTo%2A?displayProperty=nameWithType> method provides that comparison function.</span></span> <span data-ttu-id="58b72-171">Запустите пример и следите за порядком.</span><span class="sxs-lookup"><span data-stu-id="58b72-171">Run the sample and observe the order.</span></span> <span data-ttu-id="58b72-172">Эта операция сортировки использует порядковую сортировку с учетом регистра.</span><span class="sxs-lookup"><span data-stu-id="58b72-172">This sort operation uses an ordinal case sensitive sort.</span></span> <span data-ttu-id="58b72-173">Можно использовать статические методы <xref:System.String.Compare%2A?displayProperty=nameWithType>, чтобы указать разные правила сравнения.</span><span class="sxs-lookup"><span data-stu-id="58b72-173">You would use the static <xref:System.String.Compare%2A?displayProperty=nameWithType> methods to specify different comparison rules.</span></span>

[!code-csharp-interactive[Sorting a list of strings](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#7)]

<span data-ttu-id="58b72-174">После сортировки по списку строк можно осуществлять двоичный поиск.</span><span class="sxs-lookup"><span data-stu-id="58b72-174">Once sorted, the list of strings can be searched using a binary search.</span></span> <span data-ttu-id="58b72-175">Приведенный ниже пример описывает поиск в отсортированном списке с использованием той же функции сравнения.</span><span class="sxs-lookup"><span data-stu-id="58b72-175">The following sample shows how to search the sorted listed using the same comparison function.</span></span> <span data-ttu-id="58b72-176">Локальная функция `ShowWhere` показывает, где находится или находился бы искомый текст:</span><span class="sxs-lookup"><span data-stu-id="58b72-176">The local function `ShowWhere` shows where the sought text is or would be:</span></span>

[!code-csharp-interactive[csProgGuideStrings#11](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#8)]

<span data-ttu-id="58b72-177">Всегда используйте один и тот же тип сравнения для сортировки и поиска.</span><span class="sxs-lookup"><span data-stu-id="58b72-177">Always make sure to use the same type of comparison for sorting and searching.</span></span> <span data-ttu-id="58b72-178">Использование разных типов сравнения приводит к неожиданным результатам.</span><span class="sxs-lookup"><span data-stu-id="58b72-178">Using different comparison types for sorting and searching produces unexpected results.</span></span>

<span data-ttu-id="58b72-179">Классы коллекций, такие как <xref:System.Collections.Hashtable?displayProperty=nameWithType>, <xref:System.Collections.Generic.Dictionary%602?displayProperty=nameWithType>, и <xref:System.Collections.Generic.List%601?displayProperty=nameWithType>, имеют конструкторы, принимающие параметр <xref:System.StringComparer?displayProperty=nameWithType>, если типом элементов или ключей является `string`.</span><span class="sxs-lookup"><span data-stu-id="58b72-179">Collection classes such as <xref:System.Collections.Hashtable?displayProperty=nameWithType>, <xref:System.Collections.Generic.Dictionary%602?displayProperty=nameWithType>, and <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> have constructors that take a <xref:System.StringComparer?displayProperty=nameWithType> parameter when the type of the elements or keys is `string`.</span></span> <span data-ttu-id="58b72-180">В целом, по возможности следует использовать эти конструкторы и задавать либо <xref:System.StringComparer.Ordinal?displayProperty=nameWithType>, либо <xref:System.StringComparer.OrdinalIgnoreCase?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="58b72-180">In general, you should use these constructors whenever possible, and specify either <xref:System.StringComparer.Ordinal?displayProperty=nameWithType> or <xref:System.StringComparer.OrdinalIgnoreCase?displayProperty=nameWithType>.</span></span>

## <a name="reference-equality-and-string-interning"></a><span data-ttu-id="58b72-181">Равенство ссылок и интернирование строк</span><span class="sxs-lookup"><span data-stu-id="58b72-181">Reference equality and string interning</span></span>

<span data-ttu-id="58b72-182">Ни один из примеров не использовал <xref:System.Object.ReferenceEquals%2A>.</span><span class="sxs-lookup"><span data-stu-id="58b72-182">None of the samples have used <xref:System.Object.ReferenceEquals%2A>.</span></span> <span data-ttu-id="58b72-183">Этот метод определяет, являются ли две строки одним объектом.</span><span class="sxs-lookup"><span data-stu-id="58b72-183">This method determines if two strings are the same object.</span></span> <span data-ttu-id="58b72-184">Это может привести к непредсказуемым результатам при сравнении строк.</span><span class="sxs-lookup"><span data-stu-id="58b72-184">This can lead to inconsistent results in string comparisons.</span></span> <span data-ttu-id="58b72-185">Следующий пример демонстрирует функцию *интернирования строк* в C#.</span><span class="sxs-lookup"><span data-stu-id="58b72-185">The following example demonstrates the *string interning* feature of C#.</span></span> <span data-ttu-id="58b72-186">При объявлении программой двух или более идентичных переменных строк компилятор сохраняет их в одном расположении.</span><span class="sxs-lookup"><span data-stu-id="58b72-186">When a program declares two or more identical string variables, the compiler stores them all in the same location.</span></span> <span data-ttu-id="58b72-187">Вызвав метод <xref:System.Object.ReferenceEquals%2A>, можно увидеть, что две строки фактически ссылаются на один и тот же объект в памяти.</span><span class="sxs-lookup"><span data-stu-id="58b72-187">By calling the <xref:System.Object.ReferenceEquals%2A> method, you can see that the two strings actually refer to the same object in memory.</span></span> <span data-ttu-id="58b72-188">Чтобы избежать интернирования, используйте метод <xref:System.String.Copy%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="58b72-188">Use the <xref:System.String.Copy%2A?displayProperty=nameWithType> method to avoid interning.</span></span> <span data-ttu-id="58b72-189">После копирования две строки имеют разное расположение хранения, хотя и имеют одинаковое значение.</span><span class="sxs-lookup"><span data-stu-id="58b72-189">After the copy has been made, the two strings have different storage locations, even though they have the same value.</span></span> <span data-ttu-id="58b72-190">Запустите следующий пример, показывающий, что строки `a` и `b` *интернированы*, находятся в одном хранилище.</span><span class="sxs-lookup"><span data-stu-id="58b72-190">Run the following sample to show that strings `a` and `b` are *interned* meaning they share the same storage.</span></span> <span data-ttu-id="58b72-191">Строки `a` и `c` таковыми не являются.</span><span class="sxs-lookup"><span data-stu-id="58b72-191">The strings `a` and `c` are not.</span></span>

[!code-csharp-interactive[Demonstrating string interning](../../../samples/snippets/csharp/how-to/strings/CompareStrings.cs#9)]

> [!NOTE]
> <span data-ttu-id="58b72-192">При проверке строк на равенство нужно использовать методы, которые явно указывают, какой вид сравнения следует выполнить.</span><span class="sxs-lookup"><span data-stu-id="58b72-192">When you test for equality of strings, you should use the methods that explicitly specify what kind of comparison you intend to perform.</span></span> <span data-ttu-id="58b72-193">Это делает код намного более понятным и удобочитаемым.</span><span class="sxs-lookup"><span data-stu-id="58b72-193">Your code is much more maintainable and readable.</span></span> <span data-ttu-id="58b72-194">Используйте перегрузки методов классов <xref:System.String?displayProperty=nameWithType> и <xref:System.Array?displayProperty=nameWithType>, которые принимают параметр перечисления <xref:System.StringComparison>.</span><span class="sxs-lookup"><span data-stu-id="58b72-194">Use the overloads of the methods of the <xref:System.String?displayProperty=nameWithType> and <xref:System.Array?displayProperty=nameWithType> classes that take a <xref:System.StringComparison> enumeration parameter.</span></span> <span data-ttu-id="58b72-195">Это позволяет указать тип выполняемого сравнения.</span><span class="sxs-lookup"><span data-stu-id="58b72-195">You specify which type of comparison to perform.</span></span> <span data-ttu-id="58b72-196">Старайтесь избегать использования операторов `==` и `!=` при проверке на равенство.</span><span class="sxs-lookup"><span data-stu-id="58b72-196">Avoid using the `==` and `!=` operators when you test for equality.</span></span> <span data-ttu-id="58b72-197">Методы экземпляра <xref:System.String.CompareTo%2A?displayProperty=nameWithType> всегда выполняют порядковое сравнение с учетом регистра.</span><span class="sxs-lookup"><span data-stu-id="58b72-197">The <xref:System.String.CompareTo%2A?displayProperty=nameWithType> instance methods always perform an ordinal case-sensitive comparison.</span></span> <span data-ttu-id="58b72-198">Они предназначены, прежде всего, для упорядочивания строк в алфавитном порядке.</span><span class="sxs-lookup"><span data-stu-id="58b72-198">They are primarily suited for ordering strings alphabetically.</span></span>

## <a name="see-also"></a><span data-ttu-id="58b72-199">См. также</span><span class="sxs-lookup"><span data-stu-id="58b72-199">See also</span></span>

- <xref:System.Globalization.CultureInfo?displayProperty=nameWithType>  
- <xref:System.StringComparer?displayProperty=nameWithType>  
- [<span data-ttu-id="58b72-200">Строки</span><span class="sxs-lookup"><span data-stu-id="58b72-200">Strings</span></span>](../programming-guide/strings/index.md)  
- [<span data-ttu-id="58b72-201">Сравнение строк в .NET Framework</span><span class="sxs-lookup"><span data-stu-id="58b72-201">Comparing Strings</span></span>](../../standard/base-types/comparing.md)  
- [<span data-ttu-id="58b72-202">Глобализация и локализация приложений</span><span class="sxs-lookup"><span data-stu-id="58b72-202">Globalizing and Localizing Applications</span></span>](/visualstudio/ide/globalizing-and-localizing-applications)
