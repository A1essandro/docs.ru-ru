---
title: "Практическое руководство. Сравнение строк (Руководство по программированию в C#)"
ms.date: 07/20/2015
ms.prod: .net
ms.technology: devlang-csharp
ms.topic: article
helpviewer_keywords:
- strings [C#], comparison
- comparing strings [C#]
ms.assetid: e1268e28-ee98-4695-98e9-92280f1c33c0
caps.latest.revision: "23"
author: BillWagner
ms.author: wiwagn
ms.openlocfilehash: 4837fa57c962cba841ffcc83c5bd4475a4faff0c
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2017
---
# <a name="how-to-compare-strings-c-programming-guide"></a><span data-ttu-id="12e1a-102">Практическое руководство. Сравнение строк (Руководство по программированию в C#)</span><span class="sxs-lookup"><span data-stu-id="12e1a-102">How to: Compare strings (C# Programming Guide)</span></span>

<span data-ttu-id="12e1a-103">В результате сравнения строк выясняется, что одна строка больше или меньше другой или что обе строки одинаковы.</span><span class="sxs-lookup"><span data-stu-id="12e1a-103">When you compare strings, you are producing a result that says one string is greater than or less than the other, or that the two strings are equal.</span></span> <span data-ttu-id="12e1a-104">Правила, используемые для определения результата, отличаются в зависимости от выполнения *порядкового сравнения* или *сравнения с учетом языка и региональных параметров*.</span><span class="sxs-lookup"><span data-stu-id="12e1a-104">The rules by which the result is determined are different depending on whether you are performing *ordinal comparison* or *culture-sensitive comparison*.</span></span> <span data-ttu-id="12e1a-105">Для каждой отдельной задачи важно использовать соответствующий вид сравнения.</span><span class="sxs-lookup"><span data-stu-id="12e1a-105">It is important to use the correct kind of comparison for the specific task.</span></span>

 <span data-ttu-id="12e1a-106">Чтобы сравнить или отсортировать значения двух строк независимо от лингвистических соглашений, используйте базовые порядковые сравнения.</span><span class="sxs-lookup"><span data-stu-id="12e1a-106">Use basic ordinal comparisons when you have to compare or sort the values of two strings without regard to linguistic conventions.</span></span> <span data-ttu-id="12e1a-107">В базовом порядковом сравнении (`System.StringComparison.Ordinal`) учитывается регистр, что означает необходимость соответствия символов двух строк: "and" — не то же, что "And" или "AND".</span><span class="sxs-lookup"><span data-stu-id="12e1a-107">A basic ordinal comparison (`System.StringComparison.Ordinal`) is case-sensitive, which means that the two strings must match character for character: "and" does not equal "And" or "AND".</span></span> <span data-ttu-id="12e1a-108">Часто используется вариация `System.StringComparison.OrdinalIgnoreCase`, которая соответствует написаниям and, And и AND.</span><span class="sxs-lookup"><span data-stu-id="12e1a-108">A frequently-used variation is `System.StringComparison.OrdinalIgnoreCase`, which will match "and", "And", and "AND".</span></span> <span data-ttu-id="12e1a-109">`StringComparison.OrdinalIgnoreCase` часто используется для сравнения имен файлов, имен путей, сетевых путей и любой другой строки, значение которой не меняется в зависимости от языка системы компьютера пользователя.</span><span class="sxs-lookup"><span data-stu-id="12e1a-109">`StringComparison.OrdinalIgnoreCase` is often used to compare file names, path names, network paths, and any other string whose value does not change based on the locale of the user's computer.</span></span> <span data-ttu-id="12e1a-110">Для получения дополнительной информации см. <xref:System.StringComparison?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="12e1a-110">For more information, see <xref:System.StringComparison?displayProperty=nameWithType>.</span></span>

 <span data-ttu-id="12e1a-111">Сравнения с учетом языка и региональных параметров обычно используются для сравнения и сортировки строк, введенных конечными пользователями, поскольку символы и правила сортировки этих строк могут различаться в зависимости от языкового стандарта компьютера пользователя.</span><span class="sxs-lookup"><span data-stu-id="12e1a-111">Culture-sensitive comparisons are typically used to compare and sort strings that are input by end users, because the characters and sorting conventions of these strings might vary depending on the locale of the user's computer.</span></span> <span data-ttu-id="12e1a-112">Даже строки, содержащие идентичные символы, могут быть отсортированы по-разному, в зависимости от языка и региональных параметров текущего потока.</span><span class="sxs-lookup"><span data-stu-id="12e1a-112">Even strings that contain identical characters might sort differently depending on the culture of the current thread.</span></span>

> [!NOTE]
> <span data-ttu-id="12e1a-113">При сравнении строк следует использовать методы, которые явно указывают, какой вид сравнения следует выполнить.</span><span class="sxs-lookup"><span data-stu-id="12e1a-113">When you compare strings, you should use the methods that explicitly specify what kind of comparison you intend to perform.</span></span> <span data-ttu-id="12e1a-114">Это делает код намного более понятным и удобочитаемым.</span><span class="sxs-lookup"><span data-stu-id="12e1a-114">This makes your code much more maintainable and readable.</span></span> <span data-ttu-id="12e1a-115">По возможности используйте перегрузки методов классов <xref:System.String?displayProperty=nameWithType> и <xref:System.Array?displayProperty=nameWithType>, которые принимают параметр перечисления <xref:System.StringComparison> — это позволит вам указать тип выполняемого сравнения.</span><span class="sxs-lookup"><span data-stu-id="12e1a-115">Whenever possible, use the overloads of the methods of the <xref:System.String?displayProperty=nameWithType> and <xref:System.Array?displayProperty=nameWithType> classes that take a <xref:System.StringComparison> enumeration parameter, so that you can specify which type of comparison to perform.</span></span> <span data-ttu-id="12e1a-116">По возможности рекомендуется избегать использования операторов `==` и `!=` при сравнении строк.</span><span class="sxs-lookup"><span data-stu-id="12e1a-116">It is best to avoid using the `==` and `!=` operators when you compare strings.</span></span> <span data-ttu-id="12e1a-117">Также старайтесь не использовать методы экземпляров <xref:System.String.CompareTo%2A?displayProperty=nameWithType>, поскольку ни одна из перегрузок не принимает <xref:System.StringComparison>.</span><span class="sxs-lookup"><span data-stu-id="12e1a-117">Also, avoid using the <xref:System.String.CompareTo%2A?displayProperty=nameWithType> instance methods because none of the overloads takes a <xref:System.StringComparison>.</span></span>

## <a name="example"></a><span data-ttu-id="12e1a-118">Пример</span><span class="sxs-lookup"><span data-stu-id="12e1a-118">Example</span></span>

<span data-ttu-id="12e1a-119">В следующем примере показано, как правильно сравнивать строки, значения которых не изменятся на основе языкового стандарта компьютера пользователя.</span><span class="sxs-lookup"><span data-stu-id="12e1a-119">The following example shows how to correctly compare strings whose values will not change based on the locale of the user's computer.</span></span> <span data-ttu-id="12e1a-120">Кроме того, здесь демонстрируется свойство *интернирования строк* C#.</span><span class="sxs-lookup"><span data-stu-id="12e1a-120">In addition, it also demonstrates the *string interning* feature of C#.</span></span> <span data-ttu-id="12e1a-121">При объявлении программой двух или более идентичных переменных строк компилятор сохраняет их в одном расположении.</span><span class="sxs-lookup"><span data-stu-id="12e1a-121">When a program declares two or more identical string variables, the compiler stores them all in the same location.</span></span> <span data-ttu-id="12e1a-122">Вызвав метод <xref:System.Object.ReferenceEquals%2A>, можно увидеть, что две строки фактически ссылаются на один и тот же объект в памяти.</span><span class="sxs-lookup"><span data-stu-id="12e1a-122">By calling the <xref:System.Object.ReferenceEquals%2A> method, you can see that the two strings actually refer to the same object in memory.</span></span> <span data-ttu-id="12e1a-123">Чтобы избежать интернирования, используйте метод <xref:System.String.Copy%2A?displayProperty=nameWithType>, как показано в примере.</span><span class="sxs-lookup"><span data-stu-id="12e1a-123">Use the <xref:System.String.Copy%2A?displayProperty=nameWithType> method to avoid interning, as shown in the example.</span></span>

[!code-csharp[csProgGuideStrings#11](../../../../samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideStrings/CS/Strings.cs#11)]

## <a name="example"></a><span data-ttu-id="12e1a-124">Пример</span><span class="sxs-lookup"><span data-stu-id="12e1a-124">Example</span></span>

<span data-ttu-id="12e1a-125">В следующем примере показано, как применять предпочтительный метод сравнения строк, используя методы <xref:System.String?displayProperty=nameWithType>, принимающие перечисление <xref:System.StringComparison>.</span><span class="sxs-lookup"><span data-stu-id="12e1a-125">The following example shows how to compare strings the preferred way by using the <xref:System.String?displayProperty=nameWithType> methods that take a <xref:System.StringComparison> enumeration.</span></span> <span data-ttu-id="12e1a-126">Обратите внимание на то, что методы экземпляров <xref:System.String.CompareTo%2A?displayProperty=nameWithType> здесь не используются, поскольку ни одна из перегрузок не принимает <xref:System.StringComparison>.</span><span class="sxs-lookup"><span data-stu-id="12e1a-126">Note that the <xref:System.String.CompareTo%2A?displayProperty=nameWithType> instance methods are not used here, because none of the overloads takes a <xref:System.StringComparison>.</span></span>

[!code-csharp[csProgGuideStrings#31](../../../../samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideStrings/CS/Strings.cs#31)]

## <a name="example"></a><span data-ttu-id="12e1a-127">Пример</span><span class="sxs-lookup"><span data-stu-id="12e1a-127">Example</span></span>

<span data-ttu-id="12e1a-128">В следующем примере показано, как сортировать и искать строки в массиве с учетом языка и региональных параметров с помощью статических методов <xref:System.Array>, принимающих параметр <xref:System.StringComparer?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="12e1a-128">The following example shows how to sort and search for strings in an array in a culture-sensitive manner by using the static <xref:System.Array> methods that take a <xref:System.StringComparer?displayProperty=nameWithType> parameter.</span></span>

[!code-csharp[csProgGuideStrings#32](../../../../samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideStrings/CS/Strings.cs#32)]

<span data-ttu-id="12e1a-129">Классы коллекций, такие как <xref:System.Collections.Hashtable?displayProperty=nameWithType>, <xref:System.Collections.Generic.Dictionary%602?displayProperty=nameWithType>, и <xref:System.Collections.Generic.List%601?displayProperty=nameWithType>, имеют конструкторы, принимающие параметр <xref:System.StringComparer?displayProperty=nameWithType>, если типом элементов или ключей является `string`.</span><span class="sxs-lookup"><span data-stu-id="12e1a-129">Collection classes such as <xref:System.Collections.Hashtable?displayProperty=nameWithType>, <xref:System.Collections.Generic.Dictionary%602?displayProperty=nameWithType>, and <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> have constructors that take a <xref:System.StringComparer?displayProperty=nameWithType> parameter when the type of the elements or keys is `string`.</span></span> <span data-ttu-id="12e1a-130">В целом, по возможности следует использовать эти конструкторы и задавать либо `Ordinal`, либо `OrdinalIgnoreCase`.</span><span class="sxs-lookup"><span data-stu-id="12e1a-130">In general, you should use these constructors whenever possible, and specify either `Ordinal` or `OrdinalIgnoreCase`.</span></span>

## <a name="see-also"></a><span data-ttu-id="12e1a-131">См. также</span><span class="sxs-lookup"><span data-stu-id="12e1a-131">See also</span></span>
 <xref:System.Globalization.CultureInfo?displayProperty=nameWithType>  
 <xref:System.StringComparer?displayProperty=nameWithType>  
 [<span data-ttu-id="12e1a-132">Строки</span><span class="sxs-lookup"><span data-stu-id="12e1a-132">Strings</span></span>](../../../csharp/programming-guide/strings/index.md)  
 [<span data-ttu-id="12e1a-133">Сравнение строк в .NET Framework</span><span class="sxs-lookup"><span data-stu-id="12e1a-133">Comparing Strings</span></span>](../../../standard/base-types/comparing.md)  
 [<span data-ttu-id="12e1a-134">Глобализация и локализация приложений</span><span class="sxs-lookup"><span data-stu-id="12e1a-134">Globalizing and Localizing Applications</span></span>](/visualstudio/ide/globalizing-and-localizing-applications)