---
title: "Выражения значения по умолчанию (руководство по программированию на C#)"
description: "Выражения значения по умолчанию создают значение по умолчанию для любого ссылочного типа или типа значения"
ms.date: 08/23/2017
ms.prod: .net
ms.technology: devlang-csharp
ms.topic: article
helpviewer_keywords:
- generics [C#], default keyword
- default keyword [C#], generic programming
ms.assetid: b9daf449-4e64-496e-8592-6ed2c8875a98
caps.latest.revision: "22"
author: BillWagner
ms.author: wiwagn
ms.openlocfilehash: c2bb1c269e5347d615c47ab828506aef538c4761
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/21/2017
---
# <a name="default-value-expressions-c-programming-guide"></a>Выражения значения по умолчанию (руководство по программированию на C#)

Выражение значения по умолчанию создает значение по умолчанию для типа. Выражения значения по умолчанию особенно полезны в универсальных классах и методах. Одна из проблем при использовании универсальных шаблонов связана с присваиванием значения по умолчанию параметризованному типу `T`, для которого заранее неизвестны следующие характеристики.

- Будет ли тип `T` ссылочным типом или типом значения.
- Если тип `T` является типом значения, будет ли это числовое значение или пользовательская структура.

 При заданной переменной `t` параметризованного типа `T` оператор `t = null` действителен, только если `T` является ссылочным типом. Присваивание `t = 0` работает только для типов числовых значений, но не для структур. В качестве решения используйте выражение значения по умолчанию, которое возвращает `null` для ссылочных типов (типы классов и интерфейсов), а также нуль для типов числовых значений. Для пользовательских структур оно возвращает структуру, инициализированную шаблоном нулевых бит, который создает 0 или `null` для каждого элемента в зависимости от того, является ли элемент значением или ссылочным типом. Для типов значений, допускающих значения NULL, ключевое слово `default` возвращает <xref:System.Nullable%601?displayProperty=nameWithType>, которое инициализируется как любая другая структура.

Выражение `default(T)` не ограничивается универсальными классами и методами. Выражения значения по умолчанию можно использовать с любым управляемым типом. Любые из следующих выражений допустимы.

 [!code-csharp[csProgGuideGenerics#1](../../../../samples/snippets/csharp/programming-guide/statements-expressions-operators/default-value-expressions.cs)]

 В следующем примере из класса `GenericList<T>` показано, как использовать оператор `default(T)` в универсальном классе. Дополнительные сведения см. в разделе [Общие сведения об универсальных шаблонах](../generics/introduction-to-generics.md).

 [!code-csharp[csProgGuideGenerics#2](../../../../samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideGenerics/CS/Generics.cs#Snippet41)]

## <a name="default-literal-and-type-inference"></a>Литерал по умолчанию и определение типа

Начиная с C# 7.1, литерал `default` может использоваться для выражений значения по умолчанию, если компилятор может вывести тип выражения. Литерал `default` создает то же значение, что и эквивалент `default(T)`, где `T` является выведенным типом. Это может сделать код более компактным за счет сокращения избыточности в случае неоднократного объявления типа. Литерал `default` может использоваться в любом из следующих расположений.

- инициализатор переменной
- назначение переменных
- объявление значения по умолчанию для необязательного параметра
- предоставление значения для аргумента вызова метода
- оператор return (или выражение в элементе в тексте выражения)

В следующем примере показано множество вариантов использования литерала `default` в выражении значения по умолчанию:

[!code-csharp[csProgGuideGenerics#3](../../../../samples/snippets/csharp/programming-guide/statements-expressions-operators/default-literal.cs)]

## <a name="see-also"></a>См. также

 <xref:System.Collections.Generic>[Руководство по программированию на C#](../index.md)  
 [Универсальные шаблоны](../generics/index.md)  
 [Универсальные методы](../generics/generic-methods.md)  
 [Универсальные шаблоны](~/docs/standard/generics/index.md)  
