---
title: "Работа с потоками (C#)"
ms.custom: 
ms.date: 2015-07-20
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology:
- devlang-csharp
ms.topic: article
dev_langs:
- CSharp
ms.assetid: 236d157d-37c0-4ee8-89fc-721e6c596325
caps.latest.revision: 4
author: BillWagner
ms.author: wiwagn
translation.priority.mt:
- cs-cz
- pl-pl
- pt-br
- tr-tr
ms.translationtype: HT
ms.sourcegitcommit: 306c608dc7f97594ef6f72ae0f5aaba596c936e1
ms.openlocfilehash: 45ffa38254717c9aee29c3922bf801f6a90c716e
ms.contentlocale: ru-ru
ms.lasthandoff: 07/28/2017

---
# <a name="threading-c"></a><span data-ttu-id="25d3b-102">Работа с потоками (C#)</span><span class="sxs-lookup"><span data-stu-id="25d3b-102">Threading (C#)</span></span>
<span data-ttu-id="25d3b-103">Потоки позволяют программе на C# осуществлять параллельную обработку, то есть вы можете выполнять несколько операций одновременно.</span><span class="sxs-lookup"><span data-stu-id="25d3b-103">Threading enables your C# program to perform concurrent processing so that you can do more than one operation at a time.</span></span> <span data-ttu-id="25d3b-104">Например, потоки можно использовать для отслеживания пользовательского ввода, выполнения фоновых задач и одновременной обработки нескольких потоков ввода.</span><span class="sxs-lookup"><span data-stu-id="25d3b-104">For example, you can use threading to monitor input from the user, perform background tasks, and handle simultaneous streams of input.</span></span>  
  
 <span data-ttu-id="25d3b-105">Потоки имеют следующие свойства.</span><span class="sxs-lookup"><span data-stu-id="25d3b-105">Threads have the following properties:</span></span>  
  
-   <span data-ttu-id="25d3b-106">Потоки позволяют программе выполнять параллельную обработку.</span><span class="sxs-lookup"><span data-stu-id="25d3b-106">Threads enable your program to perform concurrent processing.</span></span>  
  
-   <span data-ttu-id="25d3b-107">Пространство имен <xref:System.Threading> платформы .NET Framework упрощает использование потоков.</span><span class="sxs-lookup"><span data-stu-id="25d3b-107">The .NET Framework <xref:System.Threading> namespace makes using threads easier.</span></span>  
  
-   <span data-ttu-id="25d3b-108">Потоки используют одни и те же ресурсы приложения.</span><span class="sxs-lookup"><span data-stu-id="25d3b-108">Threads share the application's resources.</span></span> <span data-ttu-id="25d3b-109">Дополнительные сведения см. в разделе [Использование потоков и работа с потоками](https://msdn.microsoft.com/library/e1dx6b2h).</span><span class="sxs-lookup"><span data-stu-id="25d3b-109">For more information, see [Using Threads and Threading](https://msdn.microsoft.com/library/e1dx6b2h).</span></span>  
  
 <span data-ttu-id="25d3b-110">По умолчанию программа на языке C# имеет один поток.</span><span class="sxs-lookup"><span data-stu-id="25d3b-110">By default, a C# program has one thread.</span></span> <span data-ttu-id="25d3b-111">Но можно также создавать вспомогательные потоки и выполнять в них код параллельно основному.</span><span class="sxs-lookup"><span data-stu-id="25d3b-111">However, auxiliary threads can be created and used to execute code in parallel with the primary thread.</span></span> <span data-ttu-id="25d3b-112">Эти потоки часто называются *рабочими потоками*.</span><span class="sxs-lookup"><span data-stu-id="25d3b-112">These threads are often called *worker threads*.</span></span>  
  
 <span data-ttu-id="25d3b-113">Рабочие потоки можно использовать для выполнения трудоемких или срочных задач без прерывания основного потока.</span><span class="sxs-lookup"><span data-stu-id="25d3b-113">Worker threads can be used to perform time-consuming or time-critical tasks without tying up the primary thread.</span></span> <span data-ttu-id="25d3b-114">Рабочие потоки часто используются, например, в серверных приложениях, когда необходимо обработать входящий запрос, не дожидаясь завершения обработки предыдущего запроса.</span><span class="sxs-lookup"><span data-stu-id="25d3b-114">For example, worker threads are often used in server applications to fulfill incoming requests without waiting for the previous request to be completed.</span></span> <span data-ttu-id="25d3b-115">Кроме того, они используются для выполнения «фоновых» задач в настольных приложениях, что позволяет не занимать ресурсы основного потока, ответственного за работу пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="25d3b-115">Worker threads are also used to perform "background" tasks in desktop applications so that the main thread--which drives user interface elements--remains responsive to user actions.</span></span>  
  
 <span data-ttu-id="25d3b-116">Применение потоков позволяет решить проблемы с пропускной способностью и быстротой работы системы, но оно также может привести к проблемам с совместным использованием ресурсов, например к конфликтам и взаимоблокировкам.</span><span class="sxs-lookup"><span data-stu-id="25d3b-116">Threading solves problems with throughput and responsiveness, but it can also introduce resource-sharing issues such as deadlocks and race conditions.</span></span> <span data-ttu-id="25d3b-117">Использование нескольких потоков лучше всего подходит в тех случаях, когда разные задачи используют разные ресурсы, например дескрипторы файлов и сетевые подключения.</span><span class="sxs-lookup"><span data-stu-id="25d3b-117">Multiple threads are best for tasks that require different resources such as file handles and network connections.</span></span> <span data-ttu-id="25d3b-118">Назначение нескольких потоков одному ресурсу, вероятнее всего, вызовет проблемы синхронизации и частую блокировку из-за ожидания, что сделает само использование нескольких потоков нецелесообразным.</span><span class="sxs-lookup"><span data-stu-id="25d3b-118">Assigning multiple threads to a single resource is likely to cause synchronization issues, and having threads frequently blocked when waiting for other threads defeats the purpose of using multiple threads.</span></span>  
  
 <span data-ttu-id="25d3b-119">Обычно рабочие потоки используются для выполнения трудоемких или срочных задач, которым не требуется большое количество ресурсов, занятых другими потоками.</span><span class="sxs-lookup"><span data-stu-id="25d3b-119">A common strategy is to use worker threads to perform time-consuming or time-critical tasks that do not require many of the resources used by other threads.</span></span> <span data-ttu-id="25d3b-120">Естественно, некоторые используемые программой ресурсы должны быть доступны нескольким потокам.</span><span class="sxs-lookup"><span data-stu-id="25d3b-120">Naturally, some resources in your program must be accessed by multiple threads.</span></span> <span data-ttu-id="25d3b-121">Для таких случаев в пространстве имен <xref:System.Threading> доступны классы по синхронизации потоков.</span><span class="sxs-lookup"><span data-stu-id="25d3b-121">For these cases, the <xref:System.Threading> namespace provides classes for synchronizing threads.</span></span> <span data-ttu-id="25d3b-122">К таким классам относятся <xref:System.Threading.Mutex>, <xref:System.Threading.Monitor>, <xref:System.Threading.Interlocked>, <xref:System.Threading.AutoResetEvent> и <xref:System.Threading.ManualResetEvent>.</span><span class="sxs-lookup"><span data-stu-id="25d3b-122">These classes include <xref:System.Threading.Mutex>, <xref:System.Threading.Monitor>, <xref:System.Threading.Interlocked>, <xref:System.Threading.AutoResetEvent>, and <xref:System.Threading.ManualResetEvent>.</span></span>  
  
 <span data-ttu-id="25d3b-123">Все классы или некоторые из них можно использовать для синхронизации работы нескольких потоков, но некоторые функции для потоков поддерживаются также и языком C#.</span><span class="sxs-lookup"><span data-stu-id="25d3b-123">You can use some or all these classes to synchronize the activities of multiple threads, but some support for threading is supported by the C# language.</span></span> <span data-ttu-id="25d3b-124">Например [оператор lock](../../../../csharp/language-reference/keywords/lock-statement.md) дает возможность синхронизации за счет неявного использования класса <xref:System.Threading.Monitor>.</span><span class="sxs-lookup"><span data-stu-id="25d3b-124">For example, the [Lock Statement](../../../../csharp/language-reference/keywords/lock-statement.md) provides synchronization features through implicit use of <xref:System.Threading.Monitor>.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="25d3b-125">Начиная с [!INCLUDE[net_v40_long](~/includes/net-v40-long-md.md)], многопоточное программирование значительно упростилось благодаря классам <xref:System.Threading.Tasks.Parallel?displayProperty=fullName> и <xref:System.Threading.Tasks.Task?displayProperty=fullName>, [Parallel LINQ (PLINQ)](https://msdn.microsoft.com/library/dd460688), новым классам параллельной коллекции из пространства имен <xref:System.Collections.Concurrent?displayProperty=fullName> и новой модели программирования, которая вместо потоков использует концепцию задач.</span><span class="sxs-lookup"><span data-stu-id="25d3b-125">Beginning with the [!INCLUDE[net_v40_long](~/includes/net-v40-long-md.md)], multithreaded programming is greatly simplified with the <xref:System.Threading.Tasks.Parallel?displayProperty=fullName> and <xref:System.Threading.Tasks.Task?displayProperty=fullName> classes, [Parallel LINQ (PLINQ)](https://msdn.microsoft.com/library/dd460688), new concurrent collection classes in the <xref:System.Collections.Concurrent?displayProperty=fullName> namespace, and a new programming model that is based on the concept of tasks rather than threads.</span></span> <span data-ttu-id="25d3b-126">Дополнительные сведения см. в разделе [Параллельное программирование](https://msdn.microsoft.com/library/dd460693).</span><span class="sxs-lookup"><span data-stu-id="25d3b-126">For more information, see [Parallel Programming](https://msdn.microsoft.com/library/dd460693).</span></span>  
  
## <a name="related-topics"></a><span data-ttu-id="25d3b-127">См. также</span><span class="sxs-lookup"><span data-stu-id="25d3b-127">Related Topics</span></span>  
  
|<span data-ttu-id="25d3b-128">Заголовок</span><span class="sxs-lookup"><span data-stu-id="25d3b-128">Title</span></span>|<span data-ttu-id="25d3b-129">Описание</span><span class="sxs-lookup"><span data-stu-id="25d3b-129">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="25d3b-130">Многопоточные приложения(C#)</span><span class="sxs-lookup"><span data-stu-id="25d3b-130">Multithreaded Applications (C#)</span></span>](../../../../csharp/programming-guide/concepts/threading/multithreaded-applications.md)|<span data-ttu-id="25d3b-131">Описание создания и использования потоков.</span><span class="sxs-lookup"><span data-stu-id="25d3b-131">Describes how to create and use threads.</span></span>|  
|[<span data-ttu-id="25d3b-132">Параметры и возвращаемые значения для многопоточных процедур (C#)</span><span class="sxs-lookup"><span data-stu-id="25d3b-132">Parameters and Return Values for Multithreaded Procedures (C#)</span></span>](../../../../csharp/programming-guide/concepts/threading/parameters-and-return-values-for-multithreaded-procedures.md)|<span data-ttu-id="25d3b-133">Описание передачи и возвращения параметров в многопоточных приложениях.</span><span class="sxs-lookup"><span data-stu-id="25d3b-133">Describes how to pass and return parameters with multithreaded applications.</span></span>|  
|[<span data-ttu-id="25d3b-134">Пошаговое руководство. Многопоточность с помощью компонента BackgroundWorker (C#)</span><span class="sxs-lookup"><span data-stu-id="25d3b-134">Walkthrough: Multithreading with the BackgroundWorker Component (C#)</span></span>](../../../../csharp/programming-guide/concepts/threading/walkthrough-multithreading-with-the-backgroundworker-component.md)|<span data-ttu-id="25d3b-135">Пример создания простого многопоточного приложения.</span><span class="sxs-lookup"><span data-stu-id="25d3b-135">Shows how to create a simple multithreaded application.</span></span>|  
|[<span data-ttu-id="25d3b-136">Синхронизация потоков (C#)</span><span class="sxs-lookup"><span data-stu-id="25d3b-136">Thread Synchronization (C#)</span></span>](../../../../csharp/programming-guide/concepts/threading/thread-synchronization.md)|<span data-ttu-id="25d3b-137">Описание управления взаимодействием потоков.</span><span class="sxs-lookup"><span data-stu-id="25d3b-137">Describes how to control the interactions of threads.</span></span>|  
|[<span data-ttu-id="25d3b-138">Таймеры потоков (C#)</span><span class="sxs-lookup"><span data-stu-id="25d3b-138">Thread Timers (C#)</span></span>](../../../../csharp/programming-guide/concepts/threading/thread-timers.md)|<span data-ttu-id="25d3b-139">Описание запуска процедур в отдельных потоках через фиксированные промежутки времени.</span><span class="sxs-lookup"><span data-stu-id="25d3b-139">Describes how to run procedures on separate threads at fixed intervals.</span></span>|  
|[<span data-ttu-id="25d3b-140">Группировка потоков в пул (C#)</span><span class="sxs-lookup"><span data-stu-id="25d3b-140">Thread Pooling (C#)</span></span>](../../../../csharp/programming-guide/concepts/threading/thread-pooling.md)|<span data-ttu-id="25d3b-141">Описание использования пула рабочих потоков, управляемых системой.</span><span class="sxs-lookup"><span data-stu-id="25d3b-141">Describes how to use a pool of worker threads that are managed by the system.</span></span>|  
|[<span data-ttu-id="25d3b-142">Практическое руководство. Использование пула потоков (C#)</span><span class="sxs-lookup"><span data-stu-id="25d3b-142">How to: Use a Thread Pool (C#)</span></span>](../../../../csharp/programming-guide/concepts/threading/how-to-use-a-thread-pool.md)|<span data-ttu-id="25d3b-143">Демонстрация синхронизированного использования нескольких потоков в пуле.</span><span class="sxs-lookup"><span data-stu-id="25d3b-143">Demonstrates synchronized use of multiple threads in the thread pool.</span></span>|  
|[<span data-ttu-id="25d3b-144">Работа с потоками</span><span class="sxs-lookup"><span data-stu-id="25d3b-144">Threading</span></span>](https://msdn.microsoft.com/library/3e8s7xdd)|<span data-ttu-id="25d3b-145">Описание реализации работы с потоками на платформе .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="25d3b-145">Describes how to implement threading in the .NET Framework.</span></span>|

