---
title: "Пустые переменные — руководство по языку C# | Microsoft Docs"
description: "В этой статье приведены сведения о поддержке в C# пустых переменных (переменных, которым не присваиваются значения) и описаны способы их использования."
keywords: ".NET, .NET Core"
author: rpetrusha
ms.author: ronpet
ms.date: 07/21/2017
ms.topic: article
ms.prod: .net
ms.technology: devlang-csharp
ms.devlang: csharp
ms.translationtype: HT
ms.sourcegitcommit: 6170e096e36f8d054fdfe9cbd8311e6492e32a04
ms.openlocfilehash: 3f8804f9b7522e385b145a9643dec942cc1aab9f
ms.contentlocale: ru-ru
ms.lasthandoff: 08/28/2017

---
# <a name="discards---c-guide"></a><span data-ttu-id="435b8-104">Пустые переменные — руководство по языку C#</span><span class="sxs-lookup"><span data-stu-id="435b8-104">Discards - C# Guide</span></span>

<span data-ttu-id="435b8-105">Начиная с версии 7 язык C# поддерживает пустые переменные. Это временные фиктивные переменные, которые намеренно не используются в коде приложения.</span><span class="sxs-lookup"><span data-stu-id="435b8-105">Starting with C# 7, C# supports discards, which are temporary, dummy variables that are intentionally unused in application code.</span></span> <span data-ttu-id="435b8-106">Пустые переменные эквивалентны переменным, которым не присвоены значения; пустые переменные не имеют значений.</span><span class="sxs-lookup"><span data-stu-id="435b8-106">Discards are equivalent to unassigned variables; they do not have a value.</span></span> <span data-ttu-id="435b8-107">Так как пустая переменная по сути всего одна и этой переменной может даже не выделяться память, пустые переменные помогают расходовать память более экономно.</span><span class="sxs-lookup"><span data-stu-id="435b8-107">Because there is only a single discard variable, and that variable may not even be allocated storage, discards can reduce memory allocations.</span></span> <span data-ttu-id="435b8-108">Эти переменные делают код яснее, повышают его читаемость и упрощают его поддержку.</span><span class="sxs-lookup"><span data-stu-id="435b8-108">Because they make the intent of your code clear, they enhance its readability and maintainability.</span></span>

<span data-ttu-id="435b8-109">Чтобы использовать пустую переменную, назначьте ей в качестве имени символ подчеркивания (`_`).</span><span class="sxs-lookup"><span data-stu-id="435b8-109">You indicate that a variable is a discard by assigning it the underscore (`_`) as its name.</span></span> <span data-ttu-id="435b8-110">Например, следующий вызов метода возвращает кортеж из трех элементов, где первое и второе значения представляют собой пустые переменные:</span><span class="sxs-lookup"><span data-stu-id="435b8-110">For example, the following method call returns a 3-tuple in which the first and second values are discards:</span></span>

```csharp
(var _, _, area) = city.GetCityInformation(cityName);
```

<span data-ttu-id="435b8-111">В C# 7 пустые переменные поддерживаются в присваиваниях в следующих контекстах:</span><span class="sxs-lookup"><span data-stu-id="435b8-111">In C# 7, discards are supported in assignments in the following contexts:</span></span>

- <span data-ttu-id="435b8-112">[Деконструкция](deconstruct.md) кортежей и объектов.</span><span class="sxs-lookup"><span data-stu-id="435b8-112">Tuple and object [deconstruction](deconstruct.md).</span></span>
- <span data-ttu-id="435b8-113">Сопоставление шаблонов с операторами [is](language-reference/keywords/is.md) и [switch](language-reference/keywords/switch.md).</span><span class="sxs-lookup"><span data-stu-id="435b8-113">Pattern matching with [is](language-reference/keywords/is.md) and [switch](language-reference/keywords/switch.md).</span></span>
- <span data-ttu-id="435b8-114">Вызовы методов с параметрами `out`.</span><span class="sxs-lookup"><span data-stu-id="435b8-114">Calls to methods with `out` parameters.</span></span>
- <span data-ttu-id="435b8-115">Автономная переменная `_`, если в области отсутствуют `_`.</span><span class="sxs-lookup"><span data-stu-id="435b8-115">A standalone `_` when no `_` is in scope.</span></span>

<span data-ttu-id="435b8-116">Если `_` является допустимой пустой переменной, при попытке получить ее значение или использовать ее в операции присваивания компилятор выдаст ошибку CS0301: "Имя "\_" не существует в текущем контексте".</span><span class="sxs-lookup"><span data-stu-id="435b8-116">When `_` is a valid discard, attempting to retrieve its value or use it in an assignment operation generates compiler error CS0301, "The name '\_' does not exist in the current context".</span></span> <span data-ttu-id="435b8-117">Это вызвано тем, что переменной `_` не присвоено значение и, возможно, даже не выделена память.</span><span class="sxs-lookup"><span data-stu-id="435b8-117">This is because `_` is not assigned a value, and may not even be assigned a storage location.</span></span> <span data-ttu-id="435b8-118">Если бы это была настоящая переменная, вам бы не удалось удалить более одного значения, как в предыдущем примере.</span><span class="sxs-lookup"><span data-stu-id="435b8-118">If it were an actual variable, you could not discard more than one value, as the previous example did.</span></span>

## <a name="tuple-and-object-deconstruction"></a><span data-ttu-id="435b8-119">Деконструкция кортежей и объектов</span><span class="sxs-lookup"><span data-stu-id="435b8-119">Tuple and object deconstruction</span></span>

<span data-ttu-id="435b8-120">Пустые переменные особенно удобны при работе с кортежами, когда код вашего приложения использует одни элементы кортежа и игнорирует другие.</span><span class="sxs-lookup"><span data-stu-id="435b8-120">Discards are particularly useful in working with tuples when your application code uses some tuple elements but ignores others.</span></span> <span data-ttu-id="435b8-121">Например, следующий метод `QueryCityDataForYears` возвращает кортеж из шести элементов: название города, его площадь, год, численность населения города в этом году, другой год и численность населения города в том году.</span><span class="sxs-lookup"><span data-stu-id="435b8-121">For example, the following `QueryCityDataForYears` method returns a 6-tuple with the name of a city, its area, a year, the city's population for that year, a second year, and the city's population for that second year.</span></span> <span data-ttu-id="435b8-122">В примере показано изменение численности населения за эти два года.</span><span class="sxs-lookup"><span data-stu-id="435b8-122">The example shows the change in population between those two years.</span></span> <span data-ttu-id="435b8-123">Из доступных в кортеже данных нас не интересует площадь города, а название города и две даты известны нам уже на этапе разработки.</span><span class="sxs-lookup"><span data-stu-id="435b8-123">Of the data available from the tuple, we're unconcerned with the city area, and we know the city name and the two dates at design-time.</span></span> <span data-ttu-id="435b8-124">Следовательно, нас интересуют только два значения численности населения, которые хранятся в кортеже. Остальные значения можно обработать как пустые переменные.</span><span class="sxs-lookup"><span data-stu-id="435b8-124">As a result, we're only interested in the two population values stored in the tuple, and can handle its remaining values as discards.</span></span>  

<span data-ttu-id="435b8-125">[!code-csharp[Кортеж и пустые переменные](../../samples/snippets/csharp/programming-guide/deconstructing-tuples/discard-tuple1.cs)]</span><span class="sxs-lookup"><span data-stu-id="435b8-125">[!code-csharp[Tuple-discard](../../samples/snippets/csharp/programming-guide/deconstructing-tuples/discard-tuple1.cs)]</span></span>

<span data-ttu-id="435b8-126">Подробнее о деконструкции кортежей с помощью пустых переменных: [Деконструкция кортежей и других типов](deconstruct.md#deconstructing-tuple-elements-with-discards).</span><span class="sxs-lookup"><span data-stu-id="435b8-126">For more information on deconstructing tuples with discards, see [Deconstructing tuples and other types](deconstruct.md#deconstructing-tuple-elements-with-discards).</span></span>

<span data-ttu-id="435b8-127">Метод `Deconstruct` класса, структуры или интерфейса также позволяет извлекать и деконструировать определенный набор данных из объекта.</span><span class="sxs-lookup"><span data-stu-id="435b8-127">The `Deconstruct` method of a class, structure, or interface also allows you to retrieve and deconstruct a specific set of data from an object.</span></span> <span data-ttu-id="435b8-128">Пустые переменные можно использовать, когда вы хотите работать только с подмножеством деконструируемых значений.</span><span class="sxs-lookup"><span data-stu-id="435b8-128">You can use discards when you are interested in working with only a subset of the deconstructed values.</span></span> <span data-ttu-id="435b8-129">В следующем примере показана деконструкция объекта `Person` на четыре строки (имя, фамилия, город и область), но в качестве фамилии и области используются пустые переменные.</span><span class="sxs-lookup"><span data-stu-id="435b8-129">Ihe following example deconstructs a `Person` object into four strings (the first and last names, the city, and the state), but discards the last name and the state.</span></span>

<span data-ttu-id="435b8-130">[!code-csharp[Класс и пустые переменные](../../samples/snippets/csharp/programming-guide/deconstructing-tuples/class-discard1.cs)]</span><span class="sxs-lookup"><span data-stu-id="435b8-130">[!code-csharp[Class-discard](../../samples/snippets/csharp/programming-guide/deconstructing-tuples/class-discard1.cs)]</span></span>

<span data-ttu-id="435b8-131">Подробнее о деконструкции пользовательских типов с помощью пустых переменных: [Деконструкция кортежей и других типов](deconstruct.md#deconstructing-a-user-defined-type-with-discards).</span><span class="sxs-lookup"><span data-stu-id="435b8-131">For more information on deconstructing user-defined types with discards, see [Deconstructing tuples and other types](deconstruct.md#deconstructing-a-user-defined-type-with-discards).</span></span>

## <a name="pattern-matching-with-switch-and-is"></a><span data-ttu-id="435b8-132">Сопоставление шаблонов с операторами `switch` и `is`</span><span class="sxs-lookup"><span data-stu-id="435b8-132">Pattern matching with `switch` and `is`</span></span>

<span data-ttu-id="435b8-133">*Шаблон пустой переменной* можно использовать в сопоставлении шаблонов с ключевыми словами [is](language-reference/keywords/is.md) и [switch](language-reference/keywords/switch.md).</span><span class="sxs-lookup"><span data-stu-id="435b8-133">The *discard pattern* can be used in pattern matching with the [is](language-reference/keywords/is.md) and [switch](language-reference/keywords/switch.md) keywords.</span></span> <span data-ttu-id="435b8-134">Каждое выражение всегда соответствует шаблону пустой переменной.</span><span class="sxs-lookup"><span data-stu-id="435b8-134">Every expression always matches the discard pattern.</span></span>

<span data-ttu-id="435b8-135">В следующем примере определяется метод `ProvidesFormatInfo`, который использует операторы [is](language-reference/keywords/is.md), чтобы узнать, предоставляет ли объект реализацию <xref:System.IFormatProvider> и не является ли он `null`.</span><span class="sxs-lookup"><span data-stu-id="435b8-135">The following example defines a `ProvidesFormatInfo` method that uses [is](language-reference/keywords/is.md) statements to determine whether an object provides an <xref:System.IFormatProvider> implementation and tests whether the object is `null`.</span></span> <span data-ttu-id="435b8-136">В примере также используется шаблон пустой переменной для обработки объектов любого другого типа с определенным значением.</span><span class="sxs-lookup"><span data-stu-id="435b8-136">It also uses the discard pattern to handle non-null objects of any other type.</span></span>

<span data-ttu-id="435b8-137">[!code-csharp[Шаблон пустой переменной](../../samples/snippets/csharp/programming-guide/discards/discard-pattern2.cs)]</span><span class="sxs-lookup"><span data-stu-id="435b8-137">[!code-csharp[discard-pattern](../../samples/snippets/csharp/programming-guide/discards/discard-pattern2.cs)]</span></span>

## <a name="calls-to-methods-with-out-parameters"></a><span data-ttu-id="435b8-138">Вызовы методов с параметрами "out"</span><span class="sxs-lookup"><span data-stu-id="435b8-138">Calls to methods with out parameters</span></span>

<span data-ttu-id="435b8-139">При вызове метода `Deconstruct` для деконструкции пользовательского типа (экземпляра класса, структуры или интерфейса) вы можете сделать пустыми значения отдельных аргументов `out`.</span><span class="sxs-lookup"><span data-stu-id="435b8-139">When calling the `Deconstruct` method to deconstruct a user-defined type (an instance of a class, structure, or interface), you can discard the values of individual `out` arguments.</span></span> <span data-ttu-id="435b8-140">Но при вызове метода с параметром "out" вы также можете сделать пустыми значения аргументов `out`.</span><span class="sxs-lookup"><span data-stu-id="435b8-140">But you can also discard the value of `out` arguments when calling any method with an out parameter.</span></span> 

<span data-ttu-id="435b8-141">В следующем примере вызывается метод [DateTime.TryParse(String, out DateTime)](<xref:System.DateTime.TryParse(System.String,System.DateTime@)>), который определяет, является ли строковое представление даты допустимым для текущего языка и региональных параметров.</span><span class="sxs-lookup"><span data-stu-id="435b8-141">The following example calls the [DateTime.TryParse(String, out DateTime)](<xref:System.DateTime.TryParse(System.String,System.DateTime@)>) method to determine whether the string representation of a date is valid in the current culture.</span></span> <span data-ttu-id="435b8-142">Так как этот пример связан только с проверкой строки даты и не включает анализ этой строки для получения самой даты, аргумент `out` метода является пустым.</span><span class="sxs-lookup"><span data-stu-id="435b8-142">Because the example is concerned only with validating the date string and not with parsing it to extract the date, the `out` argument to the method is a discard.</span></span>

<span data-ttu-id="435b8-143">[!code-csharp[Пустые переменные с параметрами "out"](../../samples/snippets/csharp/programming-guide/discards/discard-out1.cs)]</span><span class="sxs-lookup"><span data-stu-id="435b8-143">[!code-csharp[discard-with-out](../../samples/snippets/csharp/programming-guide/discards/discard-out1.cs)]</span></span>

## <a name="a-standalone-discard"></a><span data-ttu-id="435b8-144">Отдельная пустая переменная</span><span class="sxs-lookup"><span data-stu-id="435b8-144">A standalone discard</span></span>

<span data-ttu-id="435b8-145">Вы можете использовать отдельную пустую переменную, чтобы указать, что переменную необходимо игнорировать.</span><span class="sxs-lookup"><span data-stu-id="435b8-145">You can use a standalone discard to indicate any variable that you choose to ignore.</span></span> <span data-ttu-id="435b8-146">В следующем примере отдельная пустая переменная используется, чтобы игнорировать объект <xref:System.Threading.Tasks.Task>, возвращаемый асинхронной операцией.</span><span class="sxs-lookup"><span data-stu-id="435b8-146">The following example uses a standalone discard to ignore the <xref:System.Threading.Tasks.Task> object returned by an asynchronous operation.</span></span> <span data-ttu-id="435b8-147">При этом подавляется исключение, которое выдает операция перед завершением.</span><span class="sxs-lookup"><span data-stu-id="435b8-147">This has the effect of suppressing the exception that the operation throws as it is about to complete.</span></span>

<span data-ttu-id="435b8-148">[!code-csharp[Отдельная пустая переменная](../../samples/snippets/csharp/programming-guide/discards/standalone-discard1.cs)]</span><span class="sxs-lookup"><span data-stu-id="435b8-148">[!code-csharp[standalone-discard](../../samples/snippets/csharp/programming-guide/discards/standalone-discard1.cs)]</span></span>

<span data-ttu-id="435b8-149">Обратите внимание, что `_` также является допустимым идентификатором.</span><span class="sxs-lookup"><span data-stu-id="435b8-149">Note that `_` is also a valid identifier.</span></span> <span data-ttu-id="435b8-150">При использовании вне поддерживаемого контекста `_` считается не пустой, а действительной переменной.</span><span class="sxs-lookup"><span data-stu-id="435b8-150">When used outside of a supported context, `_` is treated not as a discard but as a valid variable.</span></span> <span data-ttu-id="435b8-151">Если в области уже есть идентификатор с именем `_`, использование `_` в качестве отдельной пустой переменной может привести к следующим результатам:</span><span class="sxs-lookup"><span data-stu-id="435b8-151">If an identifier named `_` is already in scope, the use of `_` as a standalone discard can result in:</span></span>

- <span data-ttu-id="435b8-152">Случайное изменение значения переменной `_` в области из-за присвоения ей значения пустой переменной.</span><span class="sxs-lookup"><span data-stu-id="435b8-152">Accidental modification of the value of the in-scope `_` variable by assigning it the value of the intended discard.</span></span> <span data-ttu-id="435b8-153">Пример:</span><span class="sxs-lookup"><span data-stu-id="435b8-153">For example:</span></span>

   <span data-ttu-id="435b8-154">[!code-csharp[Отдельная пустая переменная](../../samples/snippets/csharp/programming-guide/discards/standalone-discard2.cs#1)]</span><span class="sxs-lookup"><span data-stu-id="435b8-154">[!code-csharp[standalone-discard](../../samples/snippets/csharp/programming-guide/discards/standalone-discard2.cs#1)]</span></span>
 
- <span data-ttu-id="435b8-155">Ошибка компилятора из-за нарушения безопасности типов.</span><span class="sxs-lookup"><span data-stu-id="435b8-155">A compiler error for violating type safety.</span></span> <span data-ttu-id="435b8-156">Пример:</span><span class="sxs-lookup"><span data-stu-id="435b8-156">For example:</span></span>

   <span data-ttu-id="435b8-157">[!code-csharp[Отдельная пустая переменная](../../samples/snippets/csharp/programming-guide/discards/standalone-discard2.cs#2)]</span><span class="sxs-lookup"><span data-stu-id="435b8-157">[!code-csharp[standalone-discard](../../samples/snippets/csharp/programming-guide/discards/standalone-discard2.cs#2)]</span></span>
 
- <span data-ttu-id="435b8-158">Ошибка компилятора CS0136 "Невозможно объявить локальную переменную или параметр с именем "_" в этой области, так как это имя используется для определения локальной переменной или параметра во включающей локальной области".</span><span class="sxs-lookup"><span data-stu-id="435b8-158">Compiler error CS0136, "A local or parameter named '_' cannot be declared in this scope because that name is used in an enclosing local scope to define a local or parameter."</span></span> <span data-ttu-id="435b8-159">Пример:</span><span class="sxs-lookup"><span data-stu-id="435b8-159">For example:</span></span>

   <span data-ttu-id="435b8-160">[!code-csharp[Отдельная пустая переменная](../../samples/snippets/csharp/programming-guide/discards/standalone-discard2.cs#3)]</span><span class="sxs-lookup"><span data-stu-id="435b8-160">[!code-csharp[standalone-discard](../../samples/snippets/csharp/programming-guide/discards/standalone-discard2.cs#3)]</span></span>

## <a name="see-also"></a><span data-ttu-id="435b8-161">См. также</span><span class="sxs-lookup"><span data-stu-id="435b8-161">See also</span></span>
<span data-ttu-id="435b8-162">[Деконструкция кортежей и других типов](deconstruct.md) </span><span class="sxs-lookup"><span data-stu-id="435b8-162">[Deconstructing tuples and other types](deconstruct.md) </span></span>  
<span data-ttu-id="435b8-163">[Ключевое слово `is`](language-reference/keywords/is.md) </span><span class="sxs-lookup"><span data-stu-id="435b8-163">[`is` keyword](language-reference/keywords/is.md) </span></span>  
[<span data-ttu-id="435b8-164">Ключевое слово `switch`</span><span class="sxs-lookup"><span data-stu-id="435b8-164">`switch` keyword</span></span>](language-reference/keywords/switch.md)   

